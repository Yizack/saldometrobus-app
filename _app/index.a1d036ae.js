import{_ as h}from"./nuxt-link.db68d70d.js";import{_ as w}from"./ProgressDialog.cf983966.js";import{i as v,A as l,s as b,L as _,l as y,j as L,C,t,f as N,m as o,p as i,u as e,w as T,r as p,v as u,x as c,J as k,o as V,N as S,I as A}from"./entry.9b809ccd.js";import{_ as M}from"./logo.42d04d5d.js";const O={name:"LoginPage",data(){return{form:{email:"",password:""}}},mounted(){l().exists&&this.$router.replace("/app/")},methods:{async login(){const s=this.$refs.login;if(s.checkValidity()){b("progress-dialog");const{error:a,error_key:d}=await l().login({email:this.form.email,password:await _(this.form.password)});await y(.5),L("progress-dialog"),a?(await C.showToast(t(d),"long"),s.classList.remove("was-validated")):(s.classList.add("was-validated"),this.$router.replace("/app/"))}else s.classList.add("was-validated")},async guestLogin(){await l().guestLogin(),this.$router.replace("/app/")}}},$={class:"container-fluid text-center"},B={class:"py-4"},D=o("img",{class:"img-fluid shadow-sm my-3 p-2 rounded bg-body",width:"90",height:"90",src:M},null,-1),P={class:"mb-3 position-relative form-floating"},q=["placeholder"],I={class:"invalid-tooltip"},U={class:"mb-3 position-relative form-floating"},j=["placeholder"],E={class:"invalid-tooltip"},J={class:"d-grid gap-2 mt-5 mt-auto"},R={class:"btn btn-primary mb-4",type:"submit",role:"button"},z={class:"mt-4 small"};function F(s,a,d,G,r,m){const g=h,f=w;return V(),N("section",null,[o("div",$,[o("div",B,[D,o("h1",null,[o("b",null,i(("t"in s?s.t:e(t))("app_name")),1)]),o("p",null,i(("t"in s?s.t:e(t))("enter_email_password")),1)]),o("form",{ref:"login",novalidate:"",onSubmit:a[3]||(a[3]=T(n=>m.login(),["prevent"]))},[o("div",P,[p(o("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>r.form.email=n),class:"form-control",type:"email",placeholder:("t"in s?s.t:e(t))("correo"),name:"email",autocomplete:"email",required:""},null,8,q),[[u,r.form.email]]),o("label",null,i(("t"in s?s.t:e(t))("correo")),1),o("div",I,i(("t"in s?s.t:e(t))("correo_incorrecto")),1)]),o("div",U,[p(o("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>r.form.password=n),class:"form-control",type:"password",placeholder:("t"in s?s.t:e(t))("password"),name:"password",autocomplete:"current-password",minlength:"3",required:""},null,8,j),[[u,r.form.password]]),o("label",null,i(("t"in s?s.t:e(t))("password")),1),o("div",E,i(("t"in s?s.t:e(t))("password_limit")),1)]),o("div",J,[o("button",R,i(("t"in s?s.t:e(t))("login")),1),c(g,{class:"btn btn-success",role:"button",to:"/registro/"},{default:k(()=>[S(i(("t"in s?s.t:e(t))("registrate")),1)]),_:1}),o("button",{class:"btn btn-secondary",type:"button",role:"button",onClick:a[2]||(a[2]=n=>m.guestLogin())},i(("t"in s?s.t:e(t))("no_registro")),1)])],544),o("div",z,[o("i",null,i(("t"in s?s.t:e(t))("version"))+": "+i(("CONST"in s?s.CONST:e(A)).version),1)])]),c(f,{message:("t"in s?s.t:e(t))("iniciando_sesion")},null,8,["message"])])}const X=v(O,[["render",F]]);export{X as default};
