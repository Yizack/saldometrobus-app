const or={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,patchPseudoShadowDom:!1};let cr,os,nn,cs=!1,Qr=!1,wn=!1,dt=!1,Mn=null,yn=!1;const er=(a,e="")=>()=>{},qn="http://www.w3.org/1999/xlink",Un={},xi="http://www.w3.org/2000/svg",Pi="http://www.w3.org/1999/xhtml",$i=a=>a!=null,_n=a=>(a=typeof a,a==="object"||a==="function");function Di(a){var e,t,r;return(r=(t=(e=a.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&r!==void 0?r:void 0}const ls=(a,e,...t)=>{let r=null,n=null,s=null,i=!1,o=!1;const u=[],l=h=>{for(let g=0;g<h.length;g++)r=h[g],Array.isArray(r)?l(r):r!=null&&typeof r!="boolean"&&((i=typeof a!="function"&&!_n(r))&&(r=String(r)),i&&o?u[u.length-1].$text$+=r:u.push(i?Jr(null,r):r),o=i)};if(l(t),e){e.key&&(n=e.key),e.name&&(s=e.name);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(g=>h[g]).join(" "))}}if(typeof a=="function")return a(e===null?{}:e,u,Ri);const y=Jr(a,null);return y.$attrs$=e,u.length>0&&(y.$children$=u),y.$key$=n,y.$name$=s,y},Jr=(a,e)=>{const t={$flags$:0,$tag$:a,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Ai={},Ii=a=>a&&a.$tag$===Ai,Ri={forEach:(a,e)=>a.map(Wn).forEach(e),map:(a,e)=>a.map(Wn).map(e).map(ji)},Wn=a=>({vattrs:a.$attrs$,vchildren:a.$children$,vkey:a.$key$,vname:a.$name$,vtag:a.$tag$,vtext:a.$text$}),ji=a=>{if(typeof a.vtag=="function"){const t=Object.assign({},a.vattrs);return a.vkey&&(t.key=a.vkey),a.vname&&(t.name=a.vname),ls(a.vtag,t,...a.vchildren||[])}const e=Jr(a.vtag,a.vtext);return e.$attrs$=a.vattrs,e.$children$=a.vchildren,e.$key$=a.vkey,e.$name$=a.vname,e},Oi=a=>ca.map(e=>e(a)).find(e=>!!e),Ni=(a,e)=>a!=null&&!_n(a)?e&4?a==="false"?!1:a===""||!!a:e&2?parseFloat(a):e&1?String(a):a:a,Ci=a=>a,xr=(a,e,t)=>{const r=Ci(a);return{emit:n=>Bi(r,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:n})}},Bi=(a,e,t)=>{const r=ot.ce(e,t);return a.dispatchEvent(r),r},Gn=new WeakMap,Fi=(a,e,t)=>{let r=en.get(a);ha&&t?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,en.set(a,r)},Li=(a,e,t)=>{var r;const n=us(e,t),s=en.get(n);if(a=a.nodeType===11?a:kt,s)if(typeof s=="string"){a=a.head||a;let i=Gn.get(a),o;if(i||Gn.set(a,i=new Set),!i.has(n)){{o=kt.createElement("style"),o.innerHTML=s;const u=(r=ot.$nonce$)!==null&&r!==void 0?r:Di(kt);u!=null&&o.setAttribute("nonce",u),a.insertBefore(o,a.querySelector("link"))}i&&i.add(n)}}else a.adoptedStyleSheets.includes(s)||(a.adoptedStyleSheets=[...a.adoptedStyleSheets,s]);return n},zi=a=>{const e=a.$cmpMeta$,t=a.$hostElement$,r=e.$flags$,n=er("attachStyles",e.$tagName$),s=Li(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,a.$modeName$);r&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),r&2&&t.classList.add(s+"-s")),n()},us=(a,e)=>"sc-"+(e&&a.$flags$&32?a.$tagName$+"-"+e:a.$tagName$),Hn=(a,e,t,r,n,s)=>{if(t!==r){let i=Qn(a,e),o=e.toLowerCase();if(e==="class"){const u=a.classList,l=Kn(t),y=Kn(r);u.remove(...l.filter(h=>h&&!y.includes(h))),u.add(...y.filter(h=>h&&!l.includes(h)))}else if(e==="style"){for(const u in t)(!r||r[u]==null)&&(u.includes("-")?a.style.removeProperty(u):a.style[u]="");for(const u in r)(!t||r[u]!==t[u])&&(u.includes("-")?a.style.setProperty(u,r[u]):a.style[u]=r[u])}else if(e!=="key")if(e==="ref")r&&r(a);else if(!a.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):Qn(sn,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&ot.rel(a,e,t,!1),r&&ot.ael(a,e,r,!1);else{const u=_n(r);if((i||u&&r!==null)&&!n)try{if(a.tagName.includes("-"))a[e]=r;else{const y=r??"";e==="list"?i=!1:(t==null||a[e]!=y)&&(a[e]=y)}}catch{}let l=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,l=!0),r==null||r===!1?(r!==!1||a.getAttribute(e)==="")&&(l?a.removeAttributeNS(qn,e):a.removeAttribute(e)):(!i||s&4||n)&&!u&&(r=r===!0?"":r,l?a.setAttributeNS(qn,e,r):a.setAttribute(e,r))}}},Mi=/\s/,Kn=a=>a?a.split(Mi):[],fs=(a,e,t,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=a&&a.$attrs$||Un,i=e.$attrs$||Un;for(r in s)r in i||Hn(n,r,s[r],void 0,t,e.$flags$);for(r in i)Hn(n,r,s[r],i[r],t,e.$flags$)},Xr=(a,e,t,r)=>{const n=e.$children$[t];let s=0,i,o,u;if(cs||(wn=!0,n.$tag$==="slot"&&(cr&&r.classList.add(cr+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)i=n.$elm$=kt.createTextNode(n.$text$);else if(n.$flags$&1)i=n.$elm$=kt.createTextNode("");else{if(dt||(dt=n.$tag$==="svg"),i=n.$elm$=kt.createElementNS(dt?xi:Pi,n.$flags$&2?"slot-fb":n.$tag$),dt&&n.$tag$==="foreignObject"&&(dt=!1),fs(null,n,dt),$i(cr)&&i["s-si"]!==cr&&i.classList.add(i["s-si"]=cr),n.$children$)for(s=0;s<n.$children$.length;++s)o=Xr(a,n,s,i),o&&i.appendChild(o);n.$tag$==="svg"?dt=!1:i.tagName==="foreignObject"&&(dt=!0)}return i["s-hn"]=nn,n.$flags$&3&&(i["s-sr"]=!0,i["s-cr"]=os,i["s-sn"]=n.$name$||"",u=a&&a.$children$&&a.$children$[t],u&&u.$tag$===n.$tag$&&a.$elm$&&Pr(a.$elm$,!1)),i},Pr=(a,e)=>{ot.$flags$|=1;const t=a.childNodes;for(let r=t.length-1;r>=0;r--){const n=t[r];n["s-hn"]!==nn&&n["s-ol"]&&(ms(n).insertBefore(n,En(n)),n["s-ol"].remove(),n["s-ol"]=void 0,wn=!0),e&&Pr(n,e)}ot.$flags$&=-2},hs=(a,e,t,r,n,s)=>{let i=a["s-cr"]&&a["s-cr"].parentNode||a,o;for(i.shadowRoot&&i.tagName===nn&&(i=i.shadowRoot);n<=s;++n)r[n]&&(o=Xr(null,t,n,a),o&&(r[n].$elm$=o,i.insertBefore(o,En(e))))},ds=(a,e,t)=>{for(let r=e;r<=t;++r){const n=a[r];if(n){const s=n.$elm$;gs(n),s&&(Qr=!0,s["s-ol"]?s["s-ol"].remove():Pr(s,!0),s.remove())}}},qi=(a,e,t,r)=>{let n=0,s=0,i=0,o=0,u=e.length-1,l=e[0],y=e[u],h=r.length-1,g=r[0],p=r[h],E,b;for(;n<=u&&s<=h;)if(l==null)l=e[++n];else if(y==null)y=e[--u];else if(g==null)g=r[++s];else if(p==null)p=r[--h];else if(Yr(l,g))lr(l,g),l=e[++n],g=r[++s];else if(Yr(y,p))lr(y,p),y=e[--u],p=r[--h];else if(Yr(l,p))(l.$tag$==="slot"||p.$tag$==="slot")&&Pr(l.$elm$.parentNode,!1),lr(l,p),a.insertBefore(l.$elm$,y.$elm$.nextSibling),l=e[++n],p=r[--h];else if(Yr(y,g))(l.$tag$==="slot"||p.$tag$==="slot")&&Pr(y.$elm$.parentNode,!1),lr(y,g),a.insertBefore(y.$elm$,l.$elm$),y=e[--u],g=r[++s];else{for(i=-1,o=n;o<=u;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===g.$key$){i=o;break}i>=0?(b=e[i],b.$tag$!==g.$tag$?E=Xr(e&&e[s],t,i,a):(lr(b,g),e[i]=void 0,E=b.$elm$),g=r[++s]):(E=Xr(e&&e[s],t,s,a),g=r[++s]),E&&ms(l.$elm$).insertBefore(E,En(l.$elm$))}n>u?hs(a,r[h+1]==null?null:r[h+1].$elm$,t,r,s,h):s>h&&ds(e,n,u)},Yr=(a,e)=>a.$tag$===e.$tag$?a.$tag$==="slot"?a.$name$===e.$name$:a.$key$===e.$key$:!1,En=a=>a&&a["s-ol"]||a,ms=a=>(a["s-ol"]?a["s-ol"]:a).parentNode,lr=(a,e)=>{const t=e.$elm$=a.$elm$,r=a.$children$,n=e.$children$,s=e.$tag$,i=e.$text$;let o;i===null?(dt=s==="svg"?!0:s==="foreignObject"?!1:dt,s==="slot"||fs(a,e,dt),r!==null&&n!==null?qi(t,r,e,n):n!==null?(a.$text$!==null&&(t.textContent=""),hs(t,null,e,n,0,n.length-1)):r!==null&&ds(r,0,r.length-1),dt&&s==="svg"&&(dt=!1)):(o=t["s-cr"])?o.parentNode.textContent=i:a.$text$!==i&&(t.data=i)},ps=a=>{const e=a.childNodes;for(const t of e)if(t.nodeType===1){if(t["s-sr"]){const r=t["s-sn"];t.hidden=!1;for(const n of e)if(n["s-hn"]!==t["s-hn"]||r!==""){if(n.nodeType===1&&r===n.getAttribute("slot")){t.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){t.hidden=!0;break}}ps(t)}},_t=[],ys=a=>{let e,t,r;for(const n of a.childNodes){if(n["s-sr"]&&(e=n["s-cr"])&&e.parentNode){t=e.parentNode.childNodes;const s=n["s-sn"];for(r=t.length-1;r>=0;r--)if(e=t[r],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"])if(Yn(e,s)){let i=_t.find(o=>o.$nodeToRelocate$===e);Qr=!0,e["s-sn"]=e["s-sn"]||s,i?i.$slotRefNode$=n:_t.push({$slotRefNode$:n,$nodeToRelocate$:e}),e["s-sr"]&&_t.map(o=>{Yn(o.$nodeToRelocate$,e["s-sn"])&&(i=_t.find(u=>u.$nodeToRelocate$===e),i&&!o.$slotRefNode$&&(o.$slotRefNode$=i.$slotRefNode$))})}else _t.some(i=>i.$nodeToRelocate$===e)||_t.push({$nodeToRelocate$:e})}n.nodeType===1&&ys(n)}},Yn=(a,e)=>a.nodeType===1?a.getAttribute("slot")===null&&e===""||a.getAttribute("slot")===e:a["s-sn"]===e?!0:e==="",gs=a=>{a.$attrs$&&a.$attrs$.ref&&a.$attrs$.ref(null),a.$children$&&a.$children$.map(gs)},Ui=(a,e,t=!1)=>{const r=a.$hostElement$,n=a.$cmpMeta$,s=a.$vnode$||Jr(null,null),i=Ii(e)?e:ls(null,null,e);if(nn=r.tagName,n.$attrsToReflect$&&(i.$attrs$=i.$attrs$||{},n.$attrsToReflect$.map(([o,u])=>i.$attrs$[u]=r[o])),t&&i.$attrs$)for(const o of Object.keys(i.$attrs$))r.hasAttribute(o)&&!["key","ref","style","class"].includes(o)&&(i.$attrs$[o]=r[o]);i.$tag$=null,i.$flags$|=4,a.$vnode$=i,i.$elm$=s.$elm$=r.shadowRoot||r,cr=r["s-sc"],os=r["s-cr"],cs=(n.$flags$&1)!==0,Qr=!1,lr(s,i);{if(ot.$flags$|=1,wn){ys(i.$elm$);let o,u,l,y,h,g,p=0;for(;p<_t.length;p++)o=_t[p],u=o.$nodeToRelocate$,u["s-ol"]||(l=kt.createTextNode(""),l["s-nr"]=u,u.parentNode.insertBefore(u["s-ol"]=l,u));for(p=0;p<_t.length;p++)if(o=_t[p],u=o.$nodeToRelocate$,o.$slotRefNode$){for(y=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=u["s-ol"];l=l.previousSibling;)if(g=l["s-nr"],g&&g["s-sn"]===u["s-sn"]&&y===g.parentNode&&(g=g.nextSibling,!g||!g["s-nr"])){h=g;break}(!h&&y!==u.parentNode||u.nextSibling!==h)&&u!==h&&(!u["s-hn"]&&u["s-ol"]&&(u["s-hn"]=u["s-ol"].parentNode.nodeName),y.insertBefore(u,h))}else u.nodeType===1&&(u.hidden=!0)}Qr&&ps(i.$elm$),ot.$flags$&=-2,_t.length=0}},Wi=(a,e)=>{},vs=(a,e)=>(a.$flags$|=16,Wi(a,a.$ancestorComponent$),pa(()=>Gi(a,e))),Gi=(a,e)=>{const t=a.$hostElement$,r=er("scheduleUpdate",a.$cmpMeta$.$tagName$),n=t;let s;return e?s=fr(n,"componentWillLoad"):s=fr(n,"componentWillUpdate"),s=Vn(s,()=>fr(n,"componentWillRender")),r(),Vn(s,()=>Ki(a,n,e))},Vn=(a,e)=>Hi(a)?a.then(e):e(),Hi=a=>a instanceof Promise||a&&a.then&&typeof a.then=="function",Ki=async(a,e,t)=>{const r=a.$hostElement$,n=er("update",a.$cmpMeta$.$tagName$);r["s-rc"],t&&zi(a);const s=er("render",a.$cmpMeta$.$tagName$);Yi(a,e,r,t),s(),n(),Vi(a)},Yi=(a,e,t,r)=>{try{Mn=e,e=e.render&&e.render(),a.$flags$&=-17,a.$flags$|=2,(or.hasRenderFn||or.reflect)&&(or.vdomRender||or.reflect)&&(or.hydrateServerSide||Ui(a,e,r))}catch(u){Ar(u,a.$hostElement$)}return Mn=null,null},Vi=a=>{const e=a.$cmpMeta$.$tagName$,t=a.$hostElement$,r=er("postUpdate",e),n=t;a.$ancestorComponent$,fr(n,"componentDidRender"),a.$flags$&64?(fr(n,"componentDidUpdate"),r()):(a.$flags$|=64,fr(n,"componentDidLoad"),r())},fr=(a,e,t)=>{if(a&&a[e])try{return a[e](t)}catch(r){Ar(r)}},Zi=(a,e)=>Dr(a).$instanceValues$.get(e),Qi=(a,e,t,r)=>{const n=Dr(a),s=a,i=n.$instanceValues$.get(e),o=n.$flags$,u=s;t=Ni(t,r.$members$[e][0]);const l=Number.isNaN(i)&&Number.isNaN(t);if(t!==i&&!l){n.$instanceValues$.set(e,t);{if(r.$watchers$&&o&128){const h=r.$watchers$[e];h&&h.map(g=>{try{u[g](t,i,e)}catch(p){Ar(p,s)}})}if((o&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(t,i,e)===!1)return;vs(n,!1)}}}},Ji=(a,e,t)=>{var r;if(e.$members$){a.watchers&&(e.$watchers$=a.watchers);const n=Object.entries(e.$members$),s=a.prototype;n.map(([i,[o]])=>{(o&31||o&32)&&Object.defineProperty(s,i,{get(){return Zi(this,i)},set(u){Qi(this,i,u,e)},configurable:!0,enumerable:!0})});{const i=new Map;s.attributeChangedCallback=function(o,u,l){ot.jmp(()=>{const y=i.get(o);if(this.hasOwnProperty(y))l=this[y],delete this[y];else{if(s.hasOwnProperty(y)&&typeof this[y]=="number"&&this[y]==l)return;if(y==null){const h=Dr(this),g=h==null?void 0:h.$flags$;if(!(g&8)&&g&128&&l!==u){const E=this,b=e.$watchers$[o];b==null||b.forEach(T=>{E[T]!=null&&E[T].call(E,l,u,o)})}return}}this[y]=l===null&&typeof this[y]=="boolean"?!1:l})},a.observedAttributes=Array.from(new Set([...Object.keys((r=e.$watchers$)!==null&&r!==void 0?r:{}),...n.filter(([o,u])=>u[0]&15).map(([o,u])=>{const l=u[1]||o;return i.set(l,o),u[0]&512&&e.$attrsToReflect$.push([o,l]),l})]))}}return a},Xi=async(a,e,t,r)=>{let n;if(!(e.$flags$&32)&&(e.$flags$|=32,n=a.constructor,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),n.style)){let i=n.style;typeof i!="string"&&(i=i[e.$modeName$=Oi(a)]);const o=us(t,e.$modeName$);if(!en.has(o)){const u=er("registerStyles",t.$tagName$);Fi(o,i,!!(t.$flags$&1)),u()}}e.$ancestorComponent$,(()=>vs(e,!0))()},Zn=a=>{},ea=a=>{if(!(ot.$flags$&1)){const e=Dr(a),t=e.$cmpMeta$,r=er("connectedCallback",t.$tagName$);e.$flags$&1?(bs(a,e,t.$listeners$),e!=null&&e.$lazyInstance$?Zn(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>Zn(e.$lazyInstance$))):(e.$flags$|=1,t.$flags$&12&&ta(a),t.$members$&&Object.entries(t.$members$).map(([n,[s]])=>{if(s&31&&a.hasOwnProperty(n)){const i=a[n];delete a[n],a[n]=i}}),Xi(a,e,t)),r()}},ta=a=>{const e=a["s-cr"]=kt.createComment("");e["s-cn"]=!0,a.insertBefore(e,a.firstChild)},ra=async a=>{if(!(ot.$flags$&1)){const e=Dr(a);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},na=(a,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=a.$watchers$,t.$attrsToReflect$=[];const r=a.prototype.connectedCallback,n=a.prototype.disconnectedCallback;return Object.assign(a.prototype,{__registerHost(){oa(this,t)},connectedCallback(){ea(this),r&&r.call(this)},disconnectedCallback(){ra(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),a.is=t.$tagName$,Ji(a,t)},bs=(a,e,t,r)=>{t&&t.map(([n,s,i])=>{const o=ia(a,n),u=sa(e,i),l=aa(n);ot.ael(o,s,u,l),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>ot.rel(o,s,u,l))})},sa=(a,e)=>t=>{try{or.lazyLoad||a.$hostElement$[e](t)}catch(r){Ar(r)}},ia=(a,e)=>e&4?kt:e&8?sn:e&16?kt.body:a,aa=a=>ua?{passive:(a&1)!==0,capture:(a&2)!==0}:(a&2)!==0,ws=new WeakMap,Dr=a=>ws.get(a),oa=(a,e)=>{const t={$flags$:0,$hostElement$:a,$cmpMeta$:e,$instanceValues$:new Map};return bs(a,t,e.$listeners$),ws.set(a,t)},Qn=(a,e)=>e in a,Ar=(a,e)=>(0,console.error)(a,e),en=new Map,ca=[],sn=typeof window<"u"?window:{},kt=sn.document||{head:{}},la=sn.HTMLElement||class{},ot={$flags$:0,$resourcesUrl$:"",jmp:a=>a(),raf:a=>requestAnimationFrame(a),ael:(a,e,t,r)=>a.addEventListener(e,t,r),rel:(a,e,t,r)=>a.removeEventListener(e,t,r),ce:(a,e)=>new CustomEvent(a,e)},ua=(()=>{let a=!1;try{kt.addEventListener("e",null,Object.defineProperty({},"passive",{get(){a=!0}}))}catch{}return a})(),fa=a=>Promise.resolve(a),ha=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Jn=[],_s=[],da=(a,e)=>t=>{a.push(t),yn||(yn=!0,e&&ot.$flags$&4?ma(gn):ot.raf(gn))},Xn=a=>{for(let e=0;e<a.length;e++)try{a[e](performance.now())}catch(t){Ar(t)}a.length=0},gn=()=>{Xn(Jn),Xn(_s),(yn=Jn.length>0)&&ot.raf(gn)},ma=a=>fa().then(a),pa=da(_s,!0),$r=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Es(){throw new Error("setTimeout has not been defined")}function ks(){throw new Error("clearTimeout has not been defined")}var Mt=Es,qt=ks;typeof $r.setTimeout=="function"&&(Mt=setTimeout);typeof $r.clearTimeout=="function"&&(qt=clearTimeout);function Ts(a){if(Mt===setTimeout)return setTimeout(a,0);if((Mt===Es||!Mt)&&setTimeout)return Mt=setTimeout,setTimeout(a,0);try{return Mt(a,0)}catch{try{return Mt.call(null,a,0)}catch{return Mt.call(this,a,0)}}}function ya(a){if(qt===clearTimeout)return clearTimeout(a);if((qt===ks||!qt)&&clearTimeout)return qt=clearTimeout,clearTimeout(a);try{return qt(a)}catch{try{return qt.call(null,a)}catch{return qt.call(this,a)}}}var Ct=[],hr=!1,Jt,Vr=-1;function ga(){!hr||!Jt||(hr=!1,Jt.length?Ct=Jt.concat(Ct):Vr=-1,Ct.length&&Ss())}function Ss(){if(!hr){var a=Ts(ga);hr=!0;for(var e=Ct.length;e;){for(Jt=Ct,Ct=[];++Vr<e;)Jt&&Jt[Vr].run();Vr=-1,e=Ct.length}Jt=null,hr=!1,ya(a)}}function va(a){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ct.push(new xs(a,e)),Ct.length===1&&!hr&&Ts(Ss)}function xs(a,e){this.fun=a,this.array=e}xs.prototype.run=function(){this.fun.apply(null,this.array)};var ba="browser",wa="browser",_a=!0,Ea={},ka=[],Ta="",Sa={},xa={},Pa={};function tr(){}var $a=tr,Da=tr,Aa=tr,Ia=tr,Ra=tr,ja=tr,Oa=tr;function Na(a){throw new Error("process.binding is not supported")}function Ca(){return"/"}function Ba(a){throw new Error("process.chdir is not supported")}function Fa(){return 0}var ur=$r.performance||{},La=ur.now||ur.mozNow||ur.msNow||ur.oNow||ur.webkitNow||function(){return new Date().getTime()};function za(a){var e=La.call(ur)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return a&&(t=t-a[0],r=r-a[1],r<0&&(t--,r+=1e9)),[t,r]}var Ma=new Date;function qa(){var a=new Date,e=a-Ma;return e/1e3}var Ut={nextTick:va,title:ba,browser:_a,env:Ea,argv:ka,version:Ta,versions:Sa,on:$a,addListener:Da,once:Aa,off:Ia,removeListener:Ra,removeAllListeners:ja,emit:Oa,binding:Na,cwd:Ca,chdir:Ba,umask:Fa,hrtime:za,platform:wa,release:xa,config:Pa,uptime:qa};const Ua="/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist";var $t=[],vt=[],Wa=typeof Uint8Array<"u"?Uint8Array:Array,kn=!1;function Ps(){kn=!0;for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=a.length;e<t;++e)$t[e]=a[e],vt[a.charCodeAt(e)]=e;vt["-".charCodeAt(0)]=62,vt["_".charCodeAt(0)]=63}function Ga(a){kn||Ps();var e,t,r,n,s,i,o=a.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=a[o-2]==="="?2:a[o-1]==="="?1:0,i=new Wa(o*3/4-s),r=s>0?o-4:o;var u=0;for(e=0,t=0;e<r;e+=4,t+=3)n=vt[a.charCodeAt(e)]<<18|vt[a.charCodeAt(e+1)]<<12|vt[a.charCodeAt(e+2)]<<6|vt[a.charCodeAt(e+3)],i[u++]=n>>16&255,i[u++]=n>>8&255,i[u++]=n&255;return s===2?(n=vt[a.charCodeAt(e)]<<2|vt[a.charCodeAt(e+1)]>>4,i[u++]=n&255):s===1&&(n=vt[a.charCodeAt(e)]<<10|vt[a.charCodeAt(e+1)]<<4|vt[a.charCodeAt(e+2)]>>2,i[u++]=n>>8&255,i[u++]=n&255),i}function Ha(a){return $t[a>>18&63]+$t[a>>12&63]+$t[a>>6&63]+$t[a&63]}function Ka(a,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(a[s]<<16)+(a[s+1]<<8)+a[s+2],n.push(Ha(r));return n.join("")}function es(a){kn||Ps();for(var e,t=a.length,r=t%3,n="",s=[],i=16383,o=0,u=t-r;o<u;o+=i)s.push(Ka(a,o,o+i>u?u:o+i));return r===1?(e=a[t-1],n+=$t[e>>2],n+=$t[e<<4&63],n+="=="):r===2&&(e=(a[t-2]<<8)+a[t-1],n+=$t[e>>10],n+=$t[e>>4&63],n+=$t[e<<2&63],n+="="),s.push(n),s.join("")}function an(a,e,t,r,n){var s,i,o=n*8-r-1,u=(1<<o)-1,l=u>>1,y=-7,h=t?n-1:0,g=t?-1:1,p=a[e+h];for(h+=g,s=p&(1<<-y)-1,p>>=-y,y+=o;y>0;s=s*256+a[e+h],h+=g,y-=8);for(i=s&(1<<-y)-1,s>>=-y,y+=r;y>0;i=i*256+a[e+h],h+=g,y-=8);if(s===0)s=1-l;else{if(s===u)return i?NaN:(p?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-l}return(p?-1:1)*i*Math.pow(2,s-r)}function $s(a,e,t,r,n,s){var i,o,u,l=s*8-n-1,y=(1<<l)-1,h=y>>1,g=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,E=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=y):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),i+h>=1?e+=g/u:e+=g*Math.pow(2,1-h),e*u>=2&&(i++,u/=2),i+h>=y?(o=0,i=y):i+h>=1?(o=(e*u-1)*Math.pow(2,n),i=i+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),i=0));n>=8;a[t+p]=o&255,p+=E,o/=256,n-=8);for(i=i<<n|o,l+=n;l>0;a[t+p]=i&255,p+=E,i/=256,l-=8);a[t+p-E]|=b*128}var Ya={}.toString,Ds=Array.isArray||function(a){return Ya.call(a)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Va=50;ie.TYPED_ARRAY_SUPPORT=$r.TYPED_ARRAY_SUPPORT!==void 0?$r.TYPED_ARRAY_SUPPORT:!0;function vn(){return ie.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Bt(a,e){if(vn()<e)throw new RangeError("Invalid typed array length");return ie.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(e),a.__proto__=ie.prototype):(a===null&&(a=new ie(e)),a.length=e),a}function ie(a,e,t){if(!ie.TYPED_ARRAY_SUPPORT&&!(this instanceof ie))return new ie(a,e,t);if(typeof a=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Tn(this,a)}return As(this,a,e,t)}ie.poolSize=8192;ie._augment=function(a){return a.__proto__=ie.prototype,a};function As(a,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Ja(a,e,t,r):typeof e=="string"?Qa(a,e,t):Xa(a,e)}ie.from=function(a,e,t){return As(null,a,e,t)};ie.TYPED_ARRAY_SUPPORT&&(ie.prototype.__proto__=Uint8Array.prototype,ie.__proto__=Uint8Array);function Is(a){if(typeof a!="number")throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function Za(a,e,t,r){return Is(e),e<=0?Bt(a,e):t!==void 0?typeof r=="string"?Bt(a,e).fill(t,r):Bt(a,e).fill(t):Bt(a,e)}ie.alloc=function(a,e,t){return Za(null,a,e,t)};function Tn(a,e){if(Is(e),a=Bt(a,e<0?0:Sn(e)|0),!ie.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)a[t]=0;return a}ie.allocUnsafe=function(a){return Tn(null,a)};ie.allocUnsafeSlow=function(a){return Tn(null,a)};function Qa(a,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ie.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=Rs(e,t)|0;a=Bt(a,r);var n=a.write(e,t);return n!==r&&(a=a.slice(0,n)),a}function bn(a,e){var t=e.length<0?0:Sn(e.length)|0;a=Bt(a,t);for(var r=0;r<t;r+=1)a[r]=e[r]&255;return a}function Ja(a,e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),ie.TYPED_ARRAY_SUPPORT?(a=e,a.__proto__=ie.prototype):a=bn(a,e),a}function Xa(a,e){if(Dt(e)){var t=Sn(e.length)|0;return a=Bt(a,t),a.length===0||e.copy(a,0,0,t),a}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||bo(e.length)?Bt(a,0):bn(a,e);if(e.type==="Buffer"&&Ds(e.data))return bn(a,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Sn(a){if(a>=vn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vn().toString(16)+" bytes");return a|0}ie.isBuffer=wo;function Dt(a){return!!(a!=null&&a._isBuffer)}ie.compare=function(e,t){if(!Dt(e)||!Dt(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0};ie.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ie.concat=function(e,t){if(!Ds(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ie.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ie.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(!Dt(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s),s+=i.length}return n};function Rs(a,e){if(Dt(a))return a.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;typeof a!="string"&&(a=""+a);var t=a.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return tn(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ls(a).length;default:if(r)return tn(a).length;e=(""+e).toLowerCase(),r=!0}}ie.byteLength=Rs;function eo(a,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(a||(a="utf8");;)switch(a){case"hex":return uo(this,e,t);case"utf8":case"utf-8":return Ns(this,e,t);case"ascii":return co(this,e,t);case"latin1":case"binary":return lo(this,e,t);case"base64":return ao(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fo(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),r=!0}}ie.prototype._isBuffer=!0;function Xt(a,e,t){var r=a[e];a[e]=a[t],a[t]=r}ie.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Xt(this,t,t+1);return this};ie.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Xt(this,t,t+3),Xt(this,t+1,t+2);return this};ie.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Xt(this,t,t+7),Xt(this,t+1,t+6),Xt(this,t+2,t+5),Xt(this,t+3,t+4);return this};ie.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Ns(this,0,e):eo.apply(this,arguments)};ie.prototype.equals=function(e){if(!Dt(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ie.compare(this,e)===0};ie.prototype.inspect=function(){var e="",t=Va;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};ie.prototype.compare=function(e,t,r,n,s){if(!Dt(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var i=s-n,o=r-t,u=Math.min(i,o),l=this.slice(n,s),y=e.slice(t,r),h=0;h<u;++h)if(l[h]!==y[h]){i=l[h],o=y[h];break}return i<o?-1:o<i?1:0};function js(a,e,t,r,n){if(a.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:a.length-1),t<0&&(t=a.length+t),t>=a.length){if(n)return-1;t=a.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=ie.from(e,r)),Dt(e))return e.length===0?-1:ts(a,e,t,r,n);if(typeof e=="number")return e=e&255,ie.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(a,e,t):Uint8Array.prototype.lastIndexOf.call(a,e,t):ts(a,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function ts(a,e,t,r,n){var s=1,i=a.length,o=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(a.length<2||e.length<2)return-1;s=2,i/=2,o/=2,t/=2}function u(p,E){return s===1?p[E]:p.readUInt16BE(E*s)}var l;if(n){var y=-1;for(l=t;l<i;l++)if(u(a,l)===u(e,y===-1?0:l-y)){if(y===-1&&(y=l),l-y+1===o)return y*s}else y!==-1&&(l-=l-y),y=-1}else for(t+o>i&&(t=i-o),l=t;l>=0;l--){for(var h=!0,g=0;g<o;g++)if(u(a,l+g)!==u(e,g)){h=!1;break}if(h)return l}return-1}ie.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};ie.prototype.indexOf=function(e,t,r){return js(this,e,t,r,!0)};ie.prototype.lastIndexOf=function(e,t,r){return js(this,e,t,r,!1)};function to(a,e,t,r){t=Number(t)||0;var n=a.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var o=parseInt(e.substr(i*2,2),16);if(isNaN(o))return i;a[t+i]=o}return i}function ro(a,e,t,r){return ln(tn(e,a.length-t),a,t,r)}function Os(a,e,t,r){return ln(go(e),a,t,r)}function no(a,e,t,r){return Os(a,e,t,r)}function so(a,e,t,r){return ln(Ls(e),a,t,r)}function io(a,e,t,r){return ln(vo(e,a.length-t),a,t,r)}ie.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return to(this,e,t,r);case"utf8":case"utf-8":return ro(this,e,t,r);case"ascii":return Os(this,e,t,r);case"latin1":case"binary":return no(this,e,t,r);case"base64":return so(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return io(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}};ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ao(a,e,t){return e===0&&t===a.length?es(a):es(a.slice(e,t))}function Ns(a,e,t){t=Math.min(a.length,t);for(var r=[],n=e;n<t;){var s=a[n],i=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=t){var u,l,y,h;switch(o){case 1:s<128&&(i=s);break;case 2:u=a[n+1],(u&192)===128&&(h=(s&31)<<6|u&63,h>127&&(i=h));break;case 3:u=a[n+1],l=a[n+2],(u&192)===128&&(l&192)===128&&(h=(s&15)<<12|(u&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(i=h));break;case 4:u=a[n+1],l=a[n+2],y=a[n+3],(u&192)===128&&(l&192)===128&&(y&192)===128&&(h=(s&15)<<18|(u&63)<<12|(l&63)<<6|y&63,h>65535&&h<1114112&&(i=h))}}i===null?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),n+=o}return oo(r)}var rs=4096;function oo(a){var e=a.length;if(e<=rs)return String.fromCharCode.apply(String,a);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,a.slice(r,r+=rs));return t}function co(a,e,t){var r="";t=Math.min(a.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(a[n]&127);return r}function lo(a,e,t){var r="";t=Math.min(a.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(a[n]);return r}function uo(a,e,t){var r=a.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",s=e;s<t;++s)n+=yo(a[s]);return n}function fo(a,e,t){for(var r=a.slice(e,t),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}ie.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(ie.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=ie.prototype;else{var s=t-e;n=new ie(s,void 0);for(var i=0;i<s;++i)n[i]=this[i+e]}return n};function rt(a,e,t){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+e>t)throw new RangeError("Trying to access beyond buffer length")}ie.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||rt(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n};ie.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||rt(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};ie.prototype.readUInt8=function(e,t){return t||rt(e,1,this.length),this[e]};ie.prototype.readUInt16LE=function(e,t){return t||rt(e,2,this.length),this[e]|this[e+1]<<8};ie.prototype.readUInt16BE=function(e,t){return t||rt(e,2,this.length),this[e]<<8|this[e+1]};ie.prototype.readUInt32LE=function(e,t){return t||rt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ie.prototype.readUInt32BE=function(e,t){return t||rt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ie.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||rt(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};ie.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||rt(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};ie.prototype.readInt8=function(e,t){return t||rt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ie.prototype.readInt16LE=function(e,t){t||rt(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};ie.prototype.readInt16BE=function(e,t){t||rt(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};ie.prototype.readInt32LE=function(e,t){return t||rt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ie.prototype.readInt32BE=function(e,t){return t||rt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ie.prototype.readFloatLE=function(e,t){return t||rt(e,4,this.length),an(this,e,!0,23,4)};ie.prototype.readFloatBE=function(e,t){return t||rt(e,4,this.length),an(this,e,!1,23,4)};ie.prototype.readDoubleLE=function(e,t){return t||rt(e,8,this.length),an(this,e,!0,52,8)};ie.prototype.readDoubleBE=function(e,t){return t||rt(e,8,this.length),an(this,e,!1,52,8)};function ut(a,e,t,r,n,s){if(!Dt(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>a.length)throw new RangeError("Index out of range")}ie.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;ut(this,e,t,r,s,0)}var i=1,o=0;for(this[t]=e&255;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r};ie.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;ut(this,e,t,r,s,0)}var i=r-1,o=1;for(this[t+i]=e&255;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r};ie.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,1,255,0),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function on(a,e,t,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(a.length-t,2);n<s;++n)a[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}ie.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):on(this,e,t,!0),t+2};ie.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):on(this,e,t,!1),t+2};function cn(a,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(a.length-t,4);n<s;++n)a[t+n]=e>>>(r?n:3-n)*8&255}ie.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):cn(this,e,t,!0),t+4};ie.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):cn(this,e,t,!1),t+4};ie.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);ut(this,e,t,r,s-1,-s)}var i=0,o=1,u=0;for(this[t]=e&255;++i<r&&(o*=256);)e<0&&u===0&&this[t+i-1]!==0&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r};ie.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);ut(this,e,t,r,s-1,-s)}var i=r-1,o=1,u=0;for(this[t+i]=e&255;--i>=0&&(o*=256);)e<0&&u===0&&this[t+i+1]!==0&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r};ie.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,1,127,-128),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};ie.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):on(this,e,t,!0),t+2};ie.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):on(this,e,t,!1),t+2};ie.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,4,2147483647,-2147483648),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):cn(this,e,t,!0),t+4};ie.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||ut(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):cn(this,e,t,!1),t+4};function Cs(a,e,t,r,n,s){if(t+r>a.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Bs(a,e,t,r,n){return n||Cs(a,e,t,4),$s(a,e,t,r,23,4),t+4}ie.prototype.writeFloatLE=function(e,t,r){return Bs(this,e,t,!0,r)};ie.prototype.writeFloatBE=function(e,t,r){return Bs(this,e,t,!1,r)};function Fs(a,e,t,r,n){return n||Cs(a,e,t,8),$s(a,e,t,r,52,8),t+8}ie.prototype.writeDoubleLE=function(e,t,r){return Fs(this,e,t,!0,r)};ie.prototype.writeDoubleBE=function(e,t,r){return Fs(this,e,t,!1,r)};ie.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r,i;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!ie.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};ie.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ie.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var i;if(typeof e=="number")for(i=t;i<r;++i)this[i]=e;else{var o=Dt(e)?e:tn(new ie(e,n).toString()),u=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%u]}return this};var ho=/[^+\/0-9A-Za-z-_]/g;function mo(a){if(a=po(a).replace(ho,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function po(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function yo(a){return a<16?"0"+a.toString(16):a.toString(16)}function tn(a,e){e=e||1/0;for(var t,r=a.length,n=null,s=[],i=0;i<r;++i){if(t=a.charCodeAt(i),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function go(a){for(var e=[],t=0;t<a.length;++t)e.push(a.charCodeAt(t)&255);return e}function vo(a,e){for(var t,r,n,s=[],i=0;i<a.length&&!((e-=2)<0);++i)t=a.charCodeAt(i),r=t>>8,n=t%256,s.push(n),s.push(r);return s}function Ls(a){return Ga(mo(a))}function ln(a,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=a.length);++n)e[n+t]=a[n];return n}function bo(a){return a!==a}function wo(a){return a!=null&&(!!a._isBuffer||zs(a)||_o(a))}function zs(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function _o(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&zs(a.slice(0,0))}var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xn(a,e,t){return t={path:e,exports:{},require:function(r,n){return Ft()}},a(t,t.exports),t.exports}function Ms(a){if(a.__esModule)return a;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(t){var r=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return a[t]}})}),e}function Ft(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function qs(a,e){for(var t=0,r=a.length-1;r>=0;r--){var n=a[r];n==="."?a.splice(r,1):n===".."?(a.splice(r,1),t++):t&&(a.splice(r,1),t--)}if(e)for(;t--;t)a.unshift("..");return a}var Eo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Pn=function(a){return Eo.exec(a).slice(1)};function rn(){for(var a="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;a=r+"/"+a,e=r.charAt(0)==="/"}return a=qs(An(a.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+a||"."}function $n(a){var e=Dn(a),t=To(a,-1)==="/";return a=qs(An(a.split("/"),function(r){return!!r}),!e).join("/"),!a&&!e&&(a="."),a&&t&&(a+="/"),(e?"/":"")+a}function Dn(a){return a.charAt(0)==="/"}function Us(){var a=Array.prototype.slice.call(arguments,0);return $n(An(a,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Ws(a,e){a=rn(a).substr(1),e=rn(e).substr(1);function t(l){for(var y=0;y<l.length&&l[y]==="";y++);for(var h=l.length-1;h>=0&&l[h]==="";h--);return y>h?[]:l.slice(y,h-y+1)}for(var r=t(a.split("/")),n=t(e.split("/")),s=Math.min(r.length,n.length),i=s,o=0;o<s;o++)if(r[o]!==n[o]){i=o;break}for(var u=[],o=i;o<r.length;o++)u.push("..");return u=u.concat(n.slice(i)),u.join("/")}var Gs="/",Hs=":";function Ks(a){var e=Pn(a),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function Ys(a,e){var t=Pn(a)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function Vs(a){return Pn(a)[3]}const ko={extname:Vs,basename:Ys,dirname:Ks,sep:Gs,delimiter:Hs,relative:Ws,join:Us,isAbsolute:Dn,normalize:$n,resolve:rn};function An(a,e){if(a.filter)return a.filter(e);for(var t=[],r=0;r<a.length;r++)e(a[r],r,a)&&t.push(a[r]);return t}var To="ab".substr(-1)==="b"?function(a,e,t){return a.substr(e,t)}:function(a,e,t){return e<0&&(e=a.length+e),a.substr(e,t)};const So=Object.freeze({__proto__:null,resolve:rn,normalize:$n,isAbsolute:Dn,join:Us,relative:Ws,sep:Gs,delimiter:Hs,dirname:Ks,basename:Ys,extname:Vs,default:ko}),xo={},Po=Object.freeze({__proto__:null,default:xo}),ns=Ms(So),ss=Ms(Po);var $o=xn(function(a,e){var t=void 0,r=function(n){return t||(t=new Promise(function(s,i){var o=typeof n<"u"?n:{},u=o.onAbort;o.onAbort=function(c){i(new Error(c)),u&&u(c)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),a=void 0;var l;l||(l=typeof o<"u"?o:{}),l.onRuntimeInitialized=function(){function c(M,oe){switch(typeof oe){case"boolean":ki(M,oe?1:0);break;case"number":wi(M,oe);break;case"string":_i(M,oe,-1,-1);break;case"object":if(oe===null)Ln(M);else if(oe.length!=null){var Ee=_r(oe);Ei(M,Ee,oe.length,-1),Gr(Ee)}else Kr(M,"Wrong API use : tried to return a value of an unknown type ("+oe+").",-1);break;default:Ln(M)}}function f(M,oe){for(var Ee=[],Pe=0;Pe<M;Pe+=1){var Re=re(oe+4*Pe,"i32"),Me=pi(Re);if(Me===1||Me===2)Re=bi(Re);else if(Me===3)Re=gi(Re);else if(Me===4){Me=Re,Re=yi(Me),Me=vi(Me);for(var xt=new Uint8Array(Re),ht=0;ht<Re;ht+=1)xt[ht]=ee[Me+ht];Re=xt}else Re=null;Ee.push(Re)}return Ee}function m(M,oe){this.La=M,this.db=oe,this.Ja=1,this.fb=[]}function S(M,oe){if(this.db=oe,oe=J(M)+1,this.Ya=Zt(oe),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");v(M,Te,this.Ya,oe),this.eb=this.Ya,this.Ua=this.ib=null}function I(M){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),M!=null){var oe=this.filename,Ee="/",Pe=oe;if(Ee&&(Ee=typeof Ee=="string"?Ee:Ht(Ee),Pe=oe?ge(Ee+"/"+oe):Ee),oe=ar(!0,!0),Pe=rr(Pe,(oe!==void 0?oe:438)&4095|32768,0),M){if(typeof M=="string"){Ee=Array(M.length);for(var Re=0,Me=M.length;Re<Me;++Re)Ee[Re]=M.charCodeAt(Re);M=Ee}sr(Pe,oe|146),Ee=pt(Pe,577),Yt(Ee,M,0,M.length,0),ir(Ee),sr(Pe,oe)}}this.handleError($e(this.filename,Y)),this.db=re(Y,"i32"),Ti(this.db),this.Za={},this.Na={}}var Y=zt(4),te=l.cwrap,$e=te("sqlite3_open","number",["string","number"]),Le=te("sqlite3_close_v2","number",["number"]),Ce=te("sqlite3_exec","number",["number","string","number","number","number"]),Je=te("sqlite3_changes","number",["number"]),Nt=te("sqlite3_prepare_v2","number",["number","string","number","number","number"]),On=te("sqlite3_sql","string",["number"]),Js=te("sqlite3_normalized_sql","string",["number"]),Nn=te("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Xs=te("sqlite3_bind_text","number",["number","number","number","number","number"]),Cn=te("sqlite3_bind_blob","number",["number","number","number","number","number"]),ei=te("sqlite3_bind_double","number",["number","number","number"]),ti=te("sqlite3_bind_int","number",["number","number","number"]),ri=te("sqlite3_bind_parameter_index","number",["number","string"]),ni=te("sqlite3_step","number",["number"]),si=te("sqlite3_errmsg","string",["number"]),ii=te("sqlite3_column_count","number",["number"]),ai=te("sqlite3_data_count","number",["number"]),oi=te("sqlite3_column_double","number",["number","number"]),Bn=te("sqlite3_column_text","string",["number","number"]),ci=te("sqlite3_column_blob","number",["number","number"]),li=te("sqlite3_column_bytes","number",["number","number"]),ui=te("sqlite3_column_type","number",["number","number"]),fi=te("sqlite3_column_name","string",["number","number"]),hi=te("sqlite3_reset","number",["number"]),di=te("sqlite3_clear_bindings","number",["number"]),mi=te("sqlite3_finalize","number",["number"]),Fn=te("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),pi=te("sqlite3_value_type","number",["number"]),yi=te("sqlite3_value_bytes","number",["number"]),gi=te("sqlite3_value_text","string",["number"]),vi=te("sqlite3_value_blob","number",["number"]),bi=te("sqlite3_value_double","number",["number"]),wi=te("sqlite3_result_double","",["number","number"]),Ln=te("sqlite3_result_null","",["number"]),_i=te("sqlite3_result_text","",["number","string","number","number"]),Ei=te("sqlite3_result_blob","",["number","number","number","number"]),ki=te("sqlite3_result_int","",["number","number"]),Kr=te("sqlite3_result_error","",["number","string","number"]),zn=te("sqlite3_aggregate_context","number",["number","number"]),Ti=te("RegisterExtensionFunctions","number",["number"]);m.prototype.bind=function(M){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(M)?this.xb(M):M!=null&&typeof M=="object"?this.yb(M):!0},m.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var M=ni(this.La);switch(M){case 100:return!0;case 101:return!1;default:throw this.db.handleError(M)}},m.prototype.sb=function(M){return M==null&&(M=this.Ja,this.Ja+=1),oi(this.La,M)},m.prototype.Cb=function(M){if(M==null&&(M=this.Ja,this.Ja+=1),M=Bn(this.La,M),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(M)},m.prototype.Db=function(M){return M==null&&(M=this.Ja,this.Ja+=1),Bn(this.La,M)},m.prototype.getBlob=function(M){M==null&&(M=this.Ja,this.Ja+=1);var oe=li(this.La,M);M=ci(this.La,M);for(var Ee=new Uint8Array(oe),Pe=0;Pe<oe;Pe+=1)Ee[Pe]=ee[M+Pe];return Ee},m.prototype.get=function(M,oe){oe=oe||{},M!=null&&this.bind(M)&&this.step(),M=[];for(var Ee=ai(this.La),Pe=0;Pe<Ee;Pe+=1)switch(ui(this.La,Pe)){case 1:var Re=oe.useBigInt?this.Cb(Pe):this.sb(Pe);M.push(Re);break;case 2:M.push(this.sb(Pe));break;case 3:M.push(this.Db(Pe));break;case 4:M.push(this.getBlob(Pe));break;default:M.push(null)}return M},m.prototype.getColumnNames=function(){for(var M=[],oe=ii(this.La),Ee=0;Ee<oe;Ee+=1)M.push(fi(this.La,Ee));return M},m.prototype.getAsObject=function(M,oe){M=this.get(M,oe),oe=this.getColumnNames();for(var Ee={},Pe=0;Pe<oe.length;Pe+=1)Ee[oe[Pe]]=M[Pe];return Ee},m.prototype.getSQL=function(){return On(this.La)},m.prototype.getNormalizedSQL=function(){return Js(this.La)},m.prototype.run=function(M){return M!=null&&this.bind(M),this.step(),this.reset()},m.prototype.nb=function(M,oe){oe==null&&(oe=this.Ja,this.Ja+=1),M=tt(M);var Ee=_r(M);this.fb.push(Ee),this.db.handleError(Xs(this.La,oe,Ee,M.length-1,0))},m.prototype.wb=function(M,oe){oe==null&&(oe=this.Ja,this.Ja+=1);var Ee=_r(M);this.fb.push(Ee),this.db.handleError(Cn(this.La,oe,Ee,M.length,0))},m.prototype.mb=function(M,oe){oe==null&&(oe=this.Ja,this.Ja+=1),this.db.handleError((M===(M|0)?ti:ei)(this.La,oe,M))},m.prototype.zb=function(M){M==null&&(M=this.Ja,this.Ja+=1),Cn(this.La,M,0,0,0)},m.prototype.ob=function(M,oe){switch(oe==null&&(oe=this.Ja,this.Ja+=1),typeof M){case"string":this.nb(M,oe);return;case"number":this.mb(M,oe);return;case"bigint":this.nb(M.toString(),oe);return;case"boolean":this.mb(M+0,oe);return;case"object":if(M===null){this.zb(oe);return}if(M.length!=null){this.wb(M,oe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+M+")."},m.prototype.yb=function(M){var oe=this;return Object.keys(M).forEach(function(Ee){var Pe=ri(oe.La,Ee);Pe!==0&&oe.ob(M[Ee],Pe)}),!0},m.prototype.xb=function(M){for(var oe=0;oe<M.length;oe+=1)this.ob(M[oe],oe+1);return!0},m.prototype.reset=function(){return this.freemem(),di(this.La)===0&&hi(this.La)===0},m.prototype.freemem=function(){for(var M;(M=this.fb.pop())!==void 0;)Gr(M)},m.prototype.free=function(){this.freemem();var M=mi(this.La)===0;return delete this.db.Za[this.La],this.La=0,M},S.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var M=kr(),oe=zt(4);q(Y),q(oe);try{this.db.handleError(Nn(this.db.db,this.eb,-1,Y,oe)),this.eb=re(oe,"i32");var Ee=re(Y,"i32");return Ee===0?(this.gb(),{done:!0}):(this.Ua=new m(Ee,this.db),this.db.Za[Ee]=this.Ua,{value:this.Ua,done:!1})}catch(Pe){throw this.ib=W(this.eb),this.gb(),Pe}finally{Tr(M)}},S.prototype.gb=function(){Gr(this.Ya),this.Ya=null},S.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:W(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(S.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(M,oe){if(!this.db)throw"Database closed";if(oe){M=this.prepare(M,oe);try{M.step()}finally{M.free()}}else this.handleError(Ce(this.db,M,0,0,Y));return this},I.prototype.exec=function(M,oe,Ee){if(!this.db)throw"Database closed";var Pe=kr(),Re=null;try{var Me=J(M)+1,xt=zt(Me);v(M,ee,xt,Me);var ht=xt,yt=zt(4);for(M=[];re(ht,"i8")!==0;){q(Y),q(yt),this.handleError(Nn(this.db,ht,-1,Y,yt));var gt=re(Y,"i32");if(ht=re(yt,"i32"),gt!==0){for(Me=null,Re=new m(gt,this),oe!=null&&Re.bind(oe);Re.step();)Me===null&&(Me={columns:Re.getColumnNames(),values:[]},M.push(Me)),Me.values.push(Re.get(null,Ee));Re.free()}}return M}catch(Sr){throw Re&&Re.free(),Sr}finally{Tr(Pe)}},I.prototype.each=function(M,oe,Ee,Pe,Re){typeof oe=="function"&&(Pe=Ee,Ee=oe,oe=void 0),M=this.prepare(M,oe);try{for(;M.step();)Ee(M.getAsObject(null,Re))}finally{M.free()}if(typeof Pe=="function")return Pe()},I.prototype.prepare=function(M,oe){if(q(Y),this.handleError(Nt(this.db,M,-1,Y,0)),M=re(Y,"i32"),M===0)throw"Nothing to prepare";var Ee=new m(M,this);return oe!=null&&Ee.bind(oe),this.Za[M]=Ee},I.prototype.iterateStatements=function(M){return new S(M,this)},I.prototype.export=function(){Object.values(this.Za).forEach(function(oe){oe.free()}),Object.values(this.Na).forEach(Ot),this.Na={},this.handleError(Le(this.db));var M=br(this.filename);return this.handleError($e(this.filename,Y)),this.db=re(Y,"i32"),M},I.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(M){M.free()}),Object.values(this.Na).forEach(Ot),this.Na={},this.handleError(Le(this.db)),Fr("/"+this.filename),this.db=null)},I.prototype.handleError=function(M){if(M===0)return null;throw M=si(this.db),Error(M)},I.prototype.getRowsModified=function(){return Je(this.db)},I.prototype.create_function=function(M,oe){Object.prototype.hasOwnProperty.call(this.Na,M)&&(Ot(this.Na[M]),delete this.Na[M]);var Ee=jt(function(Pe,Re,Me){Re=f(Re,Me);try{var xt=oe.apply(null,Re)}catch(ht){Kr(Pe,ht,-1);return}c(Pe,xt)},"viii");return this.Na[M]=Ee,this.handleError(Fn(this.db,M,oe.length,1,0,Ee,0,0,0)),this},I.prototype.create_aggregate=function(M,oe){var Ee=oe.init||function(){return null},Pe=oe.finalize||function(yt){return yt},Re=oe.step;if(!Re)throw"An aggregate function must have a step function in "+M;var Me={};Object.hasOwnProperty.call(this.Na,M)&&(Ot(this.Na[M]),delete this.Na[M]),oe=M+"__finalize",Object.hasOwnProperty.call(this.Na,oe)&&(Ot(this.Na[oe]),delete this.Na[oe]);var xt=jt(function(yt,gt,Sr){var Qt=zn(yt,1);Object.hasOwnProperty.call(Me,Qt)||(Me[Qt]=Ee()),gt=f(gt,Sr),gt=[Me[Qt]].concat(gt);try{Me[Qt]=Re.apply(null,gt)}catch(Si){delete Me[Qt],Kr(yt,Si,-1)}},"viii"),ht=jt(function(yt){var gt=zn(yt,1);try{var Sr=Pe(Me[gt])}catch(Qt){delete Me[gt],Kr(yt,Qt,-1);return}c(yt,Sr),delete Me[gt]},"vi");return this.Na[M]=xt,this.Na[oe]=ht,this.handleError(Fn(this.db,M,Re.length-1,1,0,0,xt,ht,0)),this},l.Database=I};var y=Object.assign({},l),h="./this.program",g=typeof window=="object",p=typeof importScripts=="function",E=typeof Ut=="object"&&typeof Ut.versions=="object"&&typeof Ut.versions.node=="string",b="",T,k,P,j,F,D;E?(b=p?ns.dirname(b)+"/":Ua+"/",D=()=>{F||(j=ss,F=ns)},T=function(c,f){return D(),c=F.normalize(c),j.readFileSync(c,f?void 0:"utf8")},P=c=>(c=T(c,!0),c.buffer||(c=new Uint8Array(c)),c),k=(c,f,m)=>{D(),c=F.normalize(c),j.readFile(c,function(S,I){S?m(S):f(I.buffer)})},1<Ut.argv.length&&(h=Ut.argv[1].replace(/\\/g,"/")),a.exports=l,l.inspect=function(){return"[Emscripten Module object]"}):(g||p)&&(p?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",T=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.send(null),f.responseText},p&&(P=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),k=(c,f,m)=>{var S=new XMLHttpRequest;S.open("GET",c,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?f(S.response):m()},S.onerror=m,S.send(null)});var H=l.print||console.log.bind(console),z=l.printErr||console.warn.bind(console);Object.assign(l,y),y=null,l.thisProgram&&(h=l.thisProgram);var Z;l.wasmBinary&&(Z=l.wasmBinary),typeof WebAssembly!="object"&&Qe("no native wasm support detected");var G,ce=!1,be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function A(c,f,m){var S=f+m;for(m=f;c[m]&&!(m>=S);)++m;if(16<m-f&&c.buffer&&be)return be.decode(c.subarray(f,m));for(S="";f<m;){var I=c[f++];if(I&128){var Y=c[f++]&63;if((I&224)==192)S+=String.fromCharCode((I&31)<<6|Y);else{var te=c[f++]&63;I=(I&240)==224?(I&15)<<12|Y<<6|te:(I&7)<<18|Y<<12|te<<6|c[f++]&63,65536>I?S+=String.fromCharCode(I):(I-=65536,S+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else S+=String.fromCharCode(I)}return S}function W(c,f){return c?A(Te,c,f):""}function v(c,f,m,S){if(!(0<S))return 0;var I=m;S=m+S-1;for(var Y=0;Y<c.length;++Y){var te=c.charCodeAt(Y);if(55296<=te&&57343>=te){var $e=c.charCodeAt(++Y);te=65536+((te&1023)<<10)|$e&1023}if(127>=te){if(m>=S)break;f[m++]=te}else{if(2047>=te){if(m+1>=S)break;f[m++]=192|te>>6}else{if(65535>=te){if(m+2>=S)break;f[m++]=224|te>>12}else{if(m+3>=S)break;f[m++]=240|te>>18,f[m++]=128|te>>12&63}f[m++]=128|te>>6&63}f[m++]=128|te&63}}return f[m]=0,m-I}function J(c){for(var f=0,m=0;m<c.length;++m){var S=c.charCodeAt(m);127>=S?f++:2047>=S?f+=2:55296<=S&&57343>=S?(f+=4,++m):f+=3}return f}var Se,ee,Te,le,fe,L,U,ke;function ve(){var c=G.buffer;Se=c,l.HEAP8=ee=new Int8Array(c),l.HEAP16=le=new Int16Array(c),l.HEAP32=fe=new Int32Array(c),l.HEAPU8=Te=new Uint8Array(c),l.HEAPU16=new Uint16Array(c),l.HEAPU32=L=new Uint32Array(c),l.HEAPF32=U=new Float32Array(c),l.HEAPF64=ke=new Float64Array(c)}var pe,We=[],Ze=[],Ie=[];function Oe(){var c=l.preRun.shift();We.unshift(c)}var Ue=0,qe=null;function Qe(c){throw l.onAbort&&l.onAbort(c),c="Aborted("+c+")",z(c),ce=!0,new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info.")}function nt(){return d.startsWith("data:application/octet-stream;base64,")}var d;if(d="sql-wasm.wasm",!nt()){var V=d;d=l.locateFile?l.locateFile(V,b):b+V}function K(){var c=d;try{if(c==d&&Z)return new Uint8Array(Z);if(P)return P(c);throw"both async and sync fetching of the wasm failed"}catch(f){Qe(f)}}function $(){if(!Z&&(g||p)){if(typeof fetch=="function"&&!d.startsWith("file://"))return fetch(d,{credentials:"same-origin"}).then(function(c){if(!c.ok)throw"failed to load wasm binary file at '"+d+"'";return c.arrayBuffer()}).catch(function(){return K()});if(k)return new Promise(function(c,f){k(d,function(m){c(new Uint8Array(m))},f)})}return Promise.resolve().then(function(){return K()})}var _,O;function ne(c){for(;0<c.length;)c.shift()(l)}function re(c,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":return ee[c>>0];case"i8":return ee[c>>0];case"i16":return le[c>>1];case"i32":return fe[c>>2];case"i64":return fe[c>>2];case"float":return U[c>>2];case"double":return ke[c>>3];case"*":return L[c>>2];default:Qe("invalid type for getValue: "+f)}return null}function q(c){var f="i32";switch(f.endsWith("*")&&(f="*"),f){case"i1":ee[c>>0]=0;break;case"i8":ee[c>>0]=0;break;case"i16":le[c>>1]=0;break;case"i32":fe[c>>2]=0;break;case"i64":O=[0,(_=0,1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[c>>2]=O[0],fe[c+4>>2]=O[1];break;case"float":U[c>>2]=0;break;case"double":ke[c>>3]=0;break;case"*":L[c>>2]=0;break;default:Qe("invalid type for setValue: "+f)}}var he=(c,f)=>{for(var m=0,S=c.length-1;0<=S;S--){var I=c[S];I==="."?c.splice(S,1):I===".."?(c.splice(S,1),m++):m&&(c.splice(S,1),m--)}if(f)for(;m;m--)c.unshift("..");return c},ge=c=>{var f=c.charAt(0)==="/",m=c.substr(-1)==="/";return(c=he(c.split("/").filter(S=>!!S),!f).join("/"))||f||(c="."),c&&m&&(c+="/"),(f?"/":"")+c},me=c=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(c).slice(1);return c=f[0],f=f[1],!c&&!f?".":(f&&(f=f.substr(0,f.length-1)),c+f)},_e=c=>{if(c==="/")return"/";c=ge(c),c=c.replace(/\/$/,"");var f=c.lastIndexOf("/");return f===-1?c:c.substr(f+1)};function Fe(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var c=new Uint8Array(1);return()=>(crypto.getRandomValues(c),c[0])}if(E)try{var f=ss;return()=>f.randomBytes(1)[0]}catch{}return()=>Qe("randomDevice")}function De(){for(var c="",f=!1,m=arguments.length-1;-1<=m&&!f;m--){if(f=0<=m?arguments[m]:"/",typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";c=f+"/"+c,f=f.charAt(0)==="/"}return c=he(c.split("/").filter(S=>!!S),!f).join("/"),(f?"/":"")+c||"."}function tt(c,f){var m=Array(J(c)+1);return c=v(c,m,0,m.length),f&&(m.length=c),m}var bt=[];function st(c,f){bt[c]={input:[],output:[],Xa:f},yr(c,Tt)}var Tt={open:function(c){var f=bt[c.node.rdev];if(!f)throw new X(43);c.tty=f,c.seekable=!1},close:function(c){c.tty.Xa.fsync(c.tty)},fsync:function(c){c.tty.Xa.fsync(c.tty)},read:function(c,f,m,S){if(!c.tty||!c.tty.Xa.tb)throw new X(60);for(var I=0,Y=0;Y<S;Y++){try{var te=c.tty.Xa.tb(c.tty)}catch{throw new X(29)}if(te===void 0&&I===0)throw new X(6);if(te==null)break;I++,f[m+Y]=te}return I&&(c.node.timestamp=Date.now()),I},write:function(c,f,m,S){if(!c.tty||!c.tty.Xa.jb)throw new X(60);try{for(var I=0;I<S;I++)c.tty.Xa.jb(c.tty,f[m+I])}catch{throw new X(29)}return S&&(c.node.timestamp=Date.now()),I}},Ge={tb:function(c){if(!c.input.length){var f=null;if(E){var m=ie.alloc(256),S=0;try{S=j.readSync(Ut.stdin.fd,m,0,256,-1)}catch(I){if(I.toString().includes("EOF"))S=0;else throw I}0<S?f=m.slice(0,S).toString("utf-8"):f=null}else typeof window<"u"&&typeof window.prompt=="function"?(f=window.prompt("Input: "),f!==null&&(f+=`
`)):typeof readline=="function"&&(f=readline(),f!==null&&(f+=`
`));if(!f)return null;c.input=tt(f,!0)}return c.input.shift()},jb:function(c,f){f===null||f===10?(H(A(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync:function(c){c.output&&0<c.output.length&&(H(A(c.output,0)),c.output=[])}},St={jb:function(c,f){f===null||f===10?(z(A(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync:function(c){c.output&&0<c.output.length&&(z(A(c.output,0)),c.output=[])}},xe={Qa:null,Ra:function(){return xe.createNode(null,"/",16895,0)},createNode:function(c,f,m,S){if((m&61440)===24576||(m&61440)===4096)throw new X(63);return xe.Qa||(xe.Qa={dir:{node:{Pa:xe.Ga.Pa,Oa:xe.Ga.Oa,lookup:xe.Ga.lookup,ab:xe.Ga.ab,rename:xe.Ga.rename,unlink:xe.Ga.unlink,rmdir:xe.Ga.rmdir,readdir:xe.Ga.readdir,symlink:xe.Ga.symlink},stream:{Ta:xe.Ha.Ta}},file:{node:{Pa:xe.Ga.Pa,Oa:xe.Ga.Oa},stream:{Ta:xe.Ha.Ta,read:xe.Ha.read,write:xe.Ha.write,lb:xe.Ha.lb,bb:xe.Ha.bb,cb:xe.Ha.cb}},link:{node:{Pa:xe.Ga.Pa,Oa:xe.Ga.Oa,readlink:xe.Ga.readlink},stream:{}},pb:{node:{Pa:xe.Ga.Pa,Oa:xe.Ga.Oa},stream:dn}}),m=Rr(c,f,m,S),(m.mode&61440)===16384?(m.Ga=xe.Qa.dir.node,m.Ha=xe.Qa.dir.stream,m.Ia={}):(m.mode&61440)===32768?(m.Ga=xe.Qa.file.node,m.Ha=xe.Qa.file.stream,m.Ma=0,m.Ia=null):(m.mode&61440)===40960?(m.Ga=xe.Qa.link.node,m.Ha=xe.Qa.link.stream):(m.mode&61440)===8192&&(m.Ga=xe.Qa.pb.node,m.Ha=xe.Qa.pb.stream),m.timestamp=Date.now(),c&&(c.Ia[f]=m,c.timestamp=m.timestamp),m},Jb:function(c){return c.Ia?c.Ia.subarray?c.Ia.subarray(0,c.Ma):new Uint8Array(c.Ia):new Uint8Array(0)},qb:function(c,f){var m=c.Ia?c.Ia.length:0;m>=f||(f=Math.max(f,m*(1048576>m?2:1.125)>>>0),m!=0&&(f=Math.max(f,256)),m=c.Ia,c.Ia=new Uint8Array(f),0<c.Ma&&c.Ia.set(m.subarray(0,c.Ma),0))},Gb:function(c,f){if(c.Ma!=f)if(f==0)c.Ia=null,c.Ma=0;else{var m=c.Ia;c.Ia=new Uint8Array(f),m&&c.Ia.set(m.subarray(0,Math.min(f,c.Ma))),c.Ma=f}},Ga:{Pa:function(c){var f={};return f.dev=(c.mode&61440)===8192?c.id:1,f.ino=c.id,f.mode=c.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=c.rdev,(c.mode&61440)===16384?f.size=4096:(c.mode&61440)===32768?f.size=c.Ma:(c.mode&61440)===40960?f.size=c.link.length:f.size=0,f.atime=new Date(c.timestamp),f.mtime=new Date(c.timestamp),f.ctime=new Date(c.timestamp),f.Ab=4096,f.blocks=Math.ceil(f.size/f.Ab),f},Oa:function(c,f){f.mode!==void 0&&(c.mode=f.mode),f.timestamp!==void 0&&(c.timestamp=f.timestamp),f.size!==void 0&&xe.Gb(c,f.size)},lookup:function(){throw wt[44]},ab:function(c,f,m,S){return xe.createNode(c,f,m,S)},rename:function(c,f,m){if((c.mode&61440)===16384){try{var S=It(f,m)}catch{}if(S)for(var I in S.Ia)throw new X(55)}delete c.parent.Ia[c.name],c.parent.timestamp=Date.now(),c.name=m,f.Ia[m]=c,f.timestamp=c.parent.timestamp,c.parent=f},unlink:function(c,f){delete c.Ia[f],c.timestamp=Date.now()},rmdir:function(c,f){var m=It(c,f),S;for(S in m.Ia)throw new X(55);delete c.Ia[f],c.timestamp=Date.now()},readdir:function(c){var f=[".",".."],m;for(m in c.Ia)c.Ia.hasOwnProperty(m)&&f.push(m);return f},symlink:function(c,f,m){return c=xe.createNode(c,f,41471,0),c.link=m,c},readlink:function(c){if((c.mode&61440)!==40960)throw new X(28);return c.link}},Ha:{read:function(c,f,m,S,I){var Y=c.node.Ia;if(I>=c.node.Ma)return 0;if(c=Math.min(c.node.Ma-I,S),8<c&&Y.subarray)f.set(Y.subarray(I,I+c),m);else for(S=0;S<c;S++)f[m+S]=Y[I+S];return c},write:function(c,f,m,S,I,Y){if(f.buffer===ee.buffer&&(Y=!1),!S)return 0;if(c=c.node,c.timestamp=Date.now(),f.subarray&&(!c.Ia||c.Ia.subarray)){if(Y)return c.Ia=f.subarray(m,m+S),c.Ma=S;if(c.Ma===0&&I===0)return c.Ia=f.slice(m,m+S),c.Ma=S;if(I+S<=c.Ma)return c.Ia.set(f.subarray(m,m+S),I),S}if(xe.qb(c,I+S),c.Ia.subarray&&f.subarray)c.Ia.set(f.subarray(m,m+S),I);else for(Y=0;Y<S;Y++)c.Ia[I+Y]=f[m+Y];return c.Ma=Math.max(c.Ma,I+S),S},Ta:function(c,f,m){if(m===1?f+=c.position:m===2&&(c.node.mode&61440)===32768&&(f+=c.node.Ma),0>f)throw new X(28);return f},lb:function(c,f,m){xe.qb(c.node,f+m),c.node.Ma=Math.max(c.node.Ma,f+m)},bb:function(c,f,m,S,I){if((c.node.mode&61440)!==32768)throw new X(43);if(c=c.node.Ia,I&2||c.buffer!==Se){if((0<m||m+f<c.length)&&(c.subarray?c=c.subarray(m,m+f):c=Array.prototype.slice.call(c,m,m+f)),m=!0,f=65536*Math.ceil(f/65536),(I=Rn(65536,f))?(Te.fill(0,I,I+f),f=I):f=0,!f)throw new X(48);ee.set(c,f)}else m=!1,f=c.byteOffset;return{Fb:f,vb:m}},cb:function(c,f,m,S,I){if((c.node.mode&61440)!==32768)throw new X(43);return I&2||xe.Ha.write(c,f,0,S,m,!1),0}}},ct=null,At={},ft=[],dr=1,Xe=null,Gt=!0,X=null,wt={},it=(c,f={})=>{if(c=De("/",c),!c)return{path:"",node:null};if(f=Object.assign({rb:!0,kb:0},f),8<f.kb)throw new X(32);c=he(c.split("/").filter(te=>!!te),!1);for(var m=ct,S="/",I=0;I<c.length;I++){var Y=I===c.length-1;if(Y&&f.parent)break;if(m=It(m,c[I]),S=ge(S+"/"+c[I]),m.Va&&(!Y||Y&&f.rb)&&(m=m.Va.root),!Y||f.Sa){for(Y=0;(m.mode&61440)===40960;)if(m=Lr(S),S=De(me(S),m),m=it(S,{kb:f.kb+1}).node,40<Y++)throw new X(32)}}return{path:S,node:m}},Ht=c=>{for(var f;;){if(c===c.parent)return c=c.Ra.ub,f?c[c.length-1]!=="/"?c+"/"+f:c+f:c;f=f?c.name+"/"+f:c.name,c=c.parent}},mr=(c,f)=>{for(var m=0,S=0;S<f.length;S++)m=(m<<5)-m+f.charCodeAt(S)|0;return(c+m>>>0)%Xe.length},Ir=c=>{var f=mr(c.parent.id,c.name);if(Xe[f]===c)Xe[f]=c.Wa;else for(f=Xe[f];f;){if(f.Wa===c){f.Wa=c.Wa;break}f=f.Wa}},It=(c,f)=>{var m;if(m=(m=Lt(c,"x"))?m:c.Ga.lookup?0:2)throw new X(m,c);for(m=Xe[mr(c.id,f)];m;m=m.Wa){var S=m.name;if(m.parent.id===c.id&&S===f)return m}return c.Ga.lookup(c,f)},Rr=(c,f,m,S)=>(c=new mn(c,f,m,S),f=mr(c.parent.id,c.name),c.Wa=Xe[f],Xe[f]=c),fn={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},jr=c=>{var f=["r","w","rw"][c&3];return c&512&&(f+="w"),f},Lt=(c,f)=>{if(Gt)return 0;if(!f.includes("r")||c.mode&292){if(f.includes("w")&&!(c.mode&146)||f.includes("x")&&!(c.mode&73))return 2}else return 2;return 0},Or=(c,f)=>{try{return It(c,f),20}catch{}return Lt(c,"wx")},pr=(c,f,m)=>{try{var S=It(c,f)}catch(I){return I.Ka}if(c=Lt(c,"wx"))return c;if(m){if((S.mode&61440)!==16384)return 54;if(S===S.parent||Ht(S)==="/")return 10}else if((S.mode&61440)===16384)return 31;return 0},hn=(c=0)=>{for(;4096>=c;c++)if(!ft[c])return c;throw new X(33)},Nr=(c,f)=>(R||(R=function(){this.$a={}},R.prototype={},Object.defineProperties(R.prototype,{object:{get:function(){return this.node},set:function(m){this.node=m}},flags:{get:function(){return this.$a.flags},set:function(m){this.$a.flags=m}},position:{get:function(){return this.$a.position},set:function(m){this.$a.position=m}}})),c=Object.assign(new R,c),f=hn(f),c.fd=f,ft[f]=c),dn={open:c=>{c.Ha=At[c.node.rdev].Ha,c.Ha.open&&c.Ha.open(c)},Ta:()=>{throw new X(70)}},yr=(c,f)=>{At[c]={Ha:f}},Cr=(c,f)=>{var m=f==="/",S=!f;if(m&&ct)throw new X(10);if(!m&&!S){var I=it(f,{rb:!1});if(f=I.path,I=I.node,I.Va)throw new X(10);if((I.mode&61440)!==16384)throw new X(54)}f={type:c,Kb:{},ub:f,Eb:[]},c=c.Ra(f),c.Ra=f,f.root=c,m?ct=c:I&&(I.Va=f,I.Ra&&I.Ra.Eb.push(f))},rr=(c,f,m)=>{var S=it(c,{parent:!0}).node;if(c=_e(c),!c||c==="."||c==="..")throw new X(28);var I=Or(S,c);if(I)throw new X(I);if(!S.Ga.ab)throw new X(63);return S.Ga.ab(S,c,f,m)},mt=(c,f)=>rr(c,(f!==void 0?f:511)&1023|16384,0),nr=(c,f,m)=>{typeof m>"u"&&(m=f,f=438),rr(c,f|8192,m)},gr=(c,f)=>{if(!De(c))throw new X(44);var m=it(f,{parent:!0}).node;if(!m)throw new X(44);f=_e(f);var S=Or(m,f);if(S)throw new X(S);if(!m.Ga.symlink)throw new X(63);m.Ga.symlink(m,f,c)},Br=c=>{var f=it(c,{parent:!0}).node;c=_e(c);var m=It(f,c),S=pr(f,c,!0);if(S)throw new X(S);if(!f.Ga.rmdir)throw new X(63);if(m.Va)throw new X(10);f.Ga.rmdir(f,c),Ir(m)},Fr=c=>{var f=it(c,{parent:!0}).node;if(!f)throw new X(44);c=_e(c);var m=It(f,c),S=pr(f,c,!1);if(S)throw new X(S);if(!f.Ga.unlink)throw new X(63);if(m.Va)throw new X(10);f.Ga.unlink(f,c),Ir(m)},Lr=c=>{if(c=it(c).node,!c)throw new X(44);if(!c.Ga.readlink)throw new X(28);return De(Ht(c.parent),c.Ga.readlink(c))},Kt=(c,f)=>{if(c=it(c,{Sa:!f}).node,!c)throw new X(44);if(!c.Ga.Pa)throw new X(63);return c.Ga.Pa(c)},zr=c=>Kt(c,!0),sr=(c,f)=>{if(c=typeof c=="string"?it(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new X(63);c.Ga.Oa(c,{mode:f&4095|c.mode&-4096,timestamp:Date.now()})},vr=(c,f)=>{if(0>f)throw new X(28);if(c=typeof c=="string"?it(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new X(63);if((c.mode&61440)===16384)throw new X(31);if((c.mode&61440)!==32768)throw new X(28);var m=Lt(c,"w");if(m)throw new X(m);c.Ga.Oa(c,{size:f,timestamp:Date.now()})},pt=(c,f,m)=>{if(c==="")throw new X(44);if(typeof f=="string"){var S=fn[f];if(typeof S>"u")throw Error("Unknown file open mode: "+f);f=S}if(m=f&64?(typeof m>"u"?438:m)&4095|32768:0,typeof c=="object")var I=c;else{c=ge(c);try{I=it(c,{Sa:!(f&131072)}).node}catch{}}if(S=!1,f&64)if(I){if(f&128)throw new X(20)}else I=rr(c,m,0),S=!0;if(!I)throw new X(44);if((I.mode&61440)===8192&&(f&=-513),f&65536&&(I.mode&61440)!==16384)throw new X(54);if(!S&&(m=I?(I.mode&61440)===40960?32:(I.mode&61440)===16384&&(jr(f)!=="r"||f&512)?31:Lt(I,jr(f)):44))throw new X(m);return f&512&&!S&&vr(I,0),f&=-131713,I=Nr({node:I,path:Ht(I),flags:f,seekable:!0,position:0,Ha:I.Ha,Ib:[],error:!1}),I.Ha.open&&I.Ha.open(I),!l.logReadFiles||f&1||(x||(x={}),c in x||(x[c]=1)),I},ir=c=>{if(c.fd===null)throw new X(8);c.hb&&(c.hb=null);try{c.Ha.close&&c.Ha.close(c)}catch(f){throw f}finally{ft[c.fd]=null}c.fd=null},Rt=(c,f,m)=>{if(c.fd===null)throw new X(8);if(!c.seekable||!c.Ha.Ta)throw new X(70);if(m!=0&&m!=1&&m!=2)throw new X(28);c.position=c.Ha.Ta(c,f,m),c.Ib=[]},Mr=(c,f,m,S,I)=>{if(0>S||0>I)throw new X(28);if(c.fd===null)throw new X(8);if((c.flags&2097155)===1)throw new X(8);if((c.node.mode&61440)===16384)throw new X(31);if(!c.Ha.read)throw new X(28);var Y=typeof I<"u";if(!Y)I=c.position;else if(!c.seekable)throw new X(70);return f=c.Ha.read(c,f,m,S,I),Y||(c.position+=f),f},Yt=(c,f,m,S,I)=>{if(0>S||0>I)throw new X(28);if(c.fd===null)throw new X(8);if(!(c.flags&2097155))throw new X(8);if((c.node.mode&61440)===16384)throw new X(31);if(!c.Ha.write)throw new X(28);c.seekable&&c.flags&1024&&Rt(c,0,2);var Y=typeof I<"u";if(!Y)I=c.position;else if(!c.seekable)throw new X(70);return f=c.Ha.write(c,f,m,S,I,void 0),Y||(c.position+=f),f},br=c=>{var f,m=pt(c,m||0);c=Kt(c).size;var S=new Uint8Array(c);return Mr(m,S,0,c,0),f=S,ir(m),f},qr=()=>{X||(X=function(c,f){this.node=f,this.Hb=function(m){this.Ka=m},this.Hb(c),this.message="FS error"},X.prototype=Error(),X.prototype.constructor=X,[44].forEach(c=>{wt[c]=new X(c),wt[c].stack="<generic error, no stack>"}))},Ur,ar=(c,f)=>{var m=0;return c&&(m|=365),f&&(m|=146),m},Vt=(c,f,m)=>{c=ge("/dev/"+c);var S=ar(!!f,!!m);wr||(wr=64);var I=wr++<<8|0;yr(I,{open:Y=>{Y.seekable=!1},close:()=>{m&&m.buffer&&m.buffer.length&&m(10)},read:(Y,te,$e,Le)=>{for(var Ce=0,Je=0;Je<Le;Je++){try{var Nt=f()}catch{throw new X(29)}if(Nt===void 0&&Ce===0)throw new X(6);if(Nt==null)break;Ce++,te[$e+Je]=Nt}return Ce&&(Y.node.timestamp=Date.now()),Ce},write:(Y,te,$e,Le)=>{for(var Ce=0;Ce<Le;Ce++)try{m(te[$e+Ce])}catch{throw new X(29)}return Le&&(Y.node.timestamp=Date.now()),Ce}}),nr(c,S,I)},wr,w={},R,x;function C(c,f,m){if(f.charAt(0)==="/")return f;if(c=c===-100?"/":ae(c).path,f.length==0){if(!m)throw new X(44);return c}return ge(c+"/"+f)}function B(c,f,m){try{var S=c(f)}catch(I){if(I&&I.node&&ge(f)!==ge(Ht(I.node)))return-54;throw I}return fe[m>>2]=S.dev,fe[m+8>>2]=S.ino,fe[m+12>>2]=S.mode,L[m+16>>2]=S.nlink,fe[m+20>>2]=S.uid,fe[m+24>>2]=S.gid,fe[m+28>>2]=S.rdev,O=[S.size>>>0,(_=S.size,1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[m+40>>2]=O[0],fe[m+44>>2]=O[1],fe[m+48>>2]=4096,fe[m+52>>2]=S.blocks,O=[Math.floor(S.atime.getTime()/1e3)>>>0,(_=Math.floor(S.atime.getTime()/1e3),1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[m+56>>2]=O[0],fe[m+60>>2]=O[1],L[m+64>>2]=0,O=[Math.floor(S.mtime.getTime()/1e3)>>>0,(_=Math.floor(S.mtime.getTime()/1e3),1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[m+72>>2]=O[0],fe[m+76>>2]=O[1],L[m+80>>2]=0,O=[Math.floor(S.ctime.getTime()/1e3)>>>0,(_=Math.floor(S.ctime.getTime()/1e3),1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[m+88>>2]=O[0],fe[m+92>>2]=O[1],L[m+96>>2]=0,O=[S.ino>>>0,(_=S.ino,1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[m+104>>2]=O[0],fe[m+108>>2]=O[1],0}var N=void 0;function Q(){return N+=4,fe[N-4>>2]}function ae(c){if(c=ft[c],!c)throw new X(8);return c}function ue(c){return L[c>>2]+4294967296*fe[c+4>>2]}function de(c){var f=J(c)+1,m=Zt(f);return m&&v(c,ee,m,f),m}function ye(c,f,m){function S(Le){return(Le=Le.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Le[1]:"GMT"}var I=new Date().getFullYear(),Y=new Date(I,0,1),te=new Date(I,6,1);I=Y.getTimezoneOffset();var $e=te.getTimezoneOffset();fe[c>>2]=60*Math.max(I,$e),fe[f>>2]=+(I!=$e),c=S(Y),f=S(te),c=de(c),f=de(f),$e<I?(L[m>>2]=c,L[m+4>>2]=f):(L[m>>2]=f,L[m+4>>2]=c)}function we(c,f,m){we.Bb||(we.Bb=!0,ye(c,f,m))}var Ae;Ae=E?()=>{var c=Ut.hrtime();return 1e3*c[0]+c[1]/1e6}:()=>performance.now();var Ne={};function Be(){if(!Ke){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"},f;for(f in Ne)Ne[f]===void 0?delete c[f]:c[f]=Ne[f];var m=[];for(f in c)m.push(f+"="+c[f]);Ke=m}return Ke}var Ke,ze=void 0,at=[];function jt(c,f){if(!ze){ze=new WeakMap;var m=pe.length;if(ze)for(var S=0;S<0+m;S++){var I=pe.get(S);I&&ze.set(I,S)}}if(ze.has(c))return ze.get(c);if(at.length)m=at.pop();else{try{pe.grow(1)}catch($e){throw $e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":$e}m=pe.length-1}try{pe.set(m,c)}catch($e){if(!($e instanceof TypeError))throw $e;if(typeof WebAssembly.Function=="function"){S=WebAssembly.Function,I={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var Y={parameters:[],results:f[0]=="v"?[]:[I[f[0]]]},te=1;te<f.length;++te)Y.parameters.push(I[f[te]]);f=new S(Y,c)}else{for(S=[1,96],I=f.slice(0,1),f=f.slice(1),Y={i:127,p:127,j:126,f:125,d:124},te=f.length,128>te?S.push(te):S.push(te%128|128,te>>7),te=0;te<f.length;++te)S.push(Y[f[te]]);I=="v"?S.push(0):S.push(1,Y[I]),f=[0,97,115,109,1,0,0,0,1],I=S.length,128>I?f.push(I):f.push(I%128|128,I>>7),f.push.apply(f,S),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),f=new WebAssembly.Module(new Uint8Array(f)),f=new WebAssembly.Instance(f,{e:{f:c}}).exports.f}pe.set(m,f)}return ze.set(c,m),m}function Ot(c){ze.delete(pe.get(c)),at.push(c)}function _r(c){var f=Zt(c.length);return c.subarray||c.slice||(c=new Uint8Array(c)),Te.set(c,f),f}function Er(c,f,m,S){var I={string:Ce=>{var Je=0;if(Ce!=null&&Ce!==0){var Nt=(Ce.length<<2)+1;Je=zt(Nt),v(Ce,Te,Je,Nt)}return Je},array:Ce=>{var Je=zt(Ce.length);return ee.set(Ce,Je),Je}};c=l["_"+c];var Y=[],te=0;if(S)for(var $e=0;$e<S.length;$e++){var Le=I[m[$e]];Le?(te===0&&(te=kr()),Y[$e]=Le(S[$e])):Y[$e]=S[$e]}return m=c.apply(null,Y),m=function(Ce){return te!==0&&Tr(te),f==="string"?W(Ce):f==="boolean"?!!Ce:Ce}(m)}function mn(c,f,m,S){c||(c=this),this.parent=c,this.Ra=c.Ra,this.Va=null,this.id=dr++,this.name=f,this.mode=m,this.Ga={},this.Ha={},this.rdev=S}Object.defineProperties(mn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(c){c?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(c){c?this.mode|=146:this.mode&=-147}}}),qr(),Xe=Array(4096),Cr(xe,"/"),mt("/tmp"),mt("/home"),mt("/home/web_user"),(()=>{mt("/dev"),yr(259,{read:()=>0,write:(f,m,S,I)=>I}),nr("/dev/null",259),st(1280,Ge),st(1536,St),nr("/dev/tty",1280),nr("/dev/tty1",1536);var c=Fe();Vt("random",c),Vt("urandom",c),mt("/dev/shm"),mt("/dev/shm/tmp")})(),(()=>{mt("/proc");var c=mt("/proc/self");mt("/proc/self/fd"),Cr({Ra:()=>{var f=Rr(c,"fd",16895,73);return f.Ga={lookup:(m,S)=>{var I=ft[+S];if(!I)throw new X(8);return m={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>I.path}},m.parent=m}},f}},"/proc/self/fd")})();var pn={a:function(c,f,m,S){Qe("Assertion failed: "+W(c)+", at: "+[f?W(f):"unknown filename",m,S?W(S):"unknown function"])},h:function(c,f){try{return c=W(c),sr(c,f),0}catch(m){if(typeof w>"u"||!(m instanceof X))throw m;return-m.Ka}},H:function(c,f,m){try{if(f=W(f),f=C(c,f),m&-8)return-28;var S=it(f,{Sa:!0}).node;return S?(c="",m&4&&(c+="r"),m&2&&(c+="w"),m&1&&(c+="x"),c&&Lt(S,c)?-2:0):-44}catch(I){if(typeof w>"u"||!(I instanceof X))throw I;return-I.Ka}},i:function(c,f){try{var m=ft[c];if(!m)throw new X(8);return sr(m.node,f),0}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return-S.Ka}},g:function(c){try{var f=ft[c];if(!f)throw new X(8);var m=f.node,S=typeof m=="string"?it(m,{Sa:!0}).node:m;if(!S.Ga.Oa)throw new X(63);return S.Ga.Oa(S,{timestamp:Date.now()}),0}catch(I){if(typeof w>"u"||!(I instanceof X))throw I;return-I.Ka}},b:function(c,f,m){N=m;try{var S=ae(c);switch(f){case 0:var I=Q();return 0>I?-28:Nr(S,I).fd;case 1:case 2:return 0;case 3:return S.flags;case 4:return I=Q(),S.flags|=I,0;case 5:return I=Q(),le[I+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return fe[Wr()>>2]=28,-1;default:return-28}}catch(Y){if(typeof w>"u"||!(Y instanceof X))throw Y;return-Y.Ka}},G:function(c,f){try{var m=ae(c);return B(Kt,m.path,f)}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return-S.Ka}},l:function(c,f,m){try{if(f=m+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*m:NaN,isNaN(f))return-61;var S=ft[c];if(!S)throw new X(8);if(!(S.flags&2097155))throw new X(28);return vr(S.node,f),0}catch(I){if(typeof w>"u"||!(I instanceof X))throw I;return-I.Ka}},B:function(c,f){try{if(f===0)return-28;var m=J("/")+1;return f<m?-68:(v("/",Te,c,f),m)}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return-S.Ka}},E:function(c,f){try{return c=W(c),B(zr,c,f)}catch(m){if(typeof w>"u"||!(m instanceof X))throw m;return-m.Ka}},y:function(c,f,m){try{return f=W(f),f=C(c,f),f=ge(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),mt(f,m),0}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return-S.Ka}},D:function(c,f,m,S){try{f=W(f);var I=S&256;return f=C(c,f,S&4096),B(I?zr:Kt,f,m)}catch(Y){if(typeof w>"u"||!(Y instanceof X))throw Y;return-Y.Ka}},v:function(c,f,m,S){N=S;try{f=W(f),f=C(c,f);var I=S?Q():0;return pt(f,m,I).fd}catch(Y){if(typeof w>"u"||!(Y instanceof X))throw Y;return-Y.Ka}},t:function(c,f,m,S){try{if(f=W(f),f=C(c,f),0>=S)return-28;var I=Lr(f),Y=Math.min(S,J(I)),te=ee[m+Y];return v(I,Te,m,S+1),ee[m+Y]=te,Y}catch($e){if(typeof w>"u"||!($e instanceof X))throw $e;return-$e.Ka}},s:function(c){try{return c=W(c),Br(c),0}catch(f){if(typeof w>"u"||!(f instanceof X))throw f;return-f.Ka}},F:function(c,f){try{return c=W(c),B(Kt,c,f)}catch(m){if(typeof w>"u"||!(m instanceof X))throw m;return-m.Ka}},p:function(c,f,m){try{return f=W(f),f=C(c,f),m===0?Fr(f):m===512?Br(f):Qe("Invalid flags passed to unlinkat"),0}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return-S.Ka}},o:function(c,f,m){try{if(f=W(f),f=C(c,f,!0),m){var S=ue(m),I=fe[m+8>>2];Y=1e3*S+I/1e6,m+=16,S=ue(m),I=fe[m+8>>2],te=1e3*S+I/1e6}else var Y=Date.now(),te=Y;c=Y;var $e=it(f,{Sa:!0}).node;return $e.Ga.Oa($e,{timestamp:Math.max(c,te)}),0}catch(Le){if(typeof w>"u"||!(Le instanceof X))throw Le;return-Le.Ka}},e:function(){return Date.now()},j:function(c,f){c=new Date(1e3*ue(c)),fe[f>>2]=c.getSeconds(),fe[f+4>>2]=c.getMinutes(),fe[f+8>>2]=c.getHours(),fe[f+12>>2]=c.getDate(),fe[f+16>>2]=c.getMonth(),fe[f+20>>2]=c.getFullYear()-1900,fe[f+24>>2]=c.getDay();var m=new Date(c.getFullYear(),0,1);fe[f+28>>2]=(c.getTime()-m.getTime())/864e5|0,fe[f+36>>2]=-(60*c.getTimezoneOffset());var S=new Date(c.getFullYear(),6,1).getTimezoneOffset();m=m.getTimezoneOffset(),fe[f+32>>2]=(S!=m&&c.getTimezoneOffset()==Math.min(m,S))|0},w:function(c,f,m,S,I,Y){try{var te=ae(S);if(f&2&&!(m&2)&&(te.flags&2097155)!==2)throw new X(2);if((te.flags&2097155)===1)throw new X(2);if(!te.Ha.bb)throw new X(43);var $e=te.Ha.bb(te,c,I,f,m),Le=$e.Fb;return fe[Y>>2]=$e.vb,Le}catch(Ce){if(typeof w>"u"||!(Ce instanceof X))throw Ce;return-Ce.Ka}},x:function(c,f,m,S,I,Y){try{var te=ae(I);if(m&2){var $e=Te.slice(c,c+f);te&&te.Ha.cb&&te.Ha.cb(te,$e,Y,f,S)}}catch(Le){if(typeof w>"u"||!(Le instanceof X))throw Le;return-Le.Ka}},n:we,q:function(){return 2147483648},d:Ae,c:function(c){var f=Te.length;if(c>>>=0,2147483648<c)return!1;for(var m=1;4>=m;m*=2){var S=f*(1+.2/m);S=Math.min(S,c+100663296);var I=Math;S=Math.max(c,S),I=I.min.call(I,2147483648,S+(65536-S%65536)%65536);e:{try{G.grow(I-Se.byteLength+65535>>>16),ve();var Y=1;break e}catch{}Y=void 0}if(Y)return!0}return!1},z:function(c,f){var m=0;return Be().forEach(function(S,I){var Y=f+m;for(I=L[c+4*I>>2]=Y,Y=0;Y<S.length;++Y)ee[I++>>0]=S.charCodeAt(Y);ee[I>>0]=0,m+=S.length+1}),0},A:function(c,f){var m=Be();L[c>>2]=m.length;var S=0;return m.forEach(function(I){S+=I.length+1}),L[f>>2]=S,0},f:function(c){try{var f=ae(c);return ir(f),0}catch(m){if(typeof w>"u"||!(m instanceof X))throw m;return m.Ka}},m:function(c,f){try{var m=ae(c);return ee[f>>0]=m.tty?2:(m.mode&61440)===16384?3:(m.mode&61440)===40960?7:4,0}catch(S){if(typeof w>"u"||!(S instanceof X))throw S;return S.Ka}},u:function(c,f,m,S){try{e:{var I=ae(c);c=f;for(var Y=f=0;Y<m;Y++){var te=L[c>>2],$e=L[c+4>>2];c+=8;var Le=Mr(I,ee,te,$e);if(0>Le){var Ce=-1;break e}if(f+=Le,Le<$e)break}Ce=f}return L[S>>2]=Ce,0}catch(Je){if(typeof w>"u"||!(Je instanceof X))throw Je;return Je.Ka}},k:function(c,f,m,S,I){try{if(f=m+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*m:NaN,isNaN(f))return 61;var Y=ae(c);return Rt(Y,f,S),O=[Y.position>>>0,(_=Y.position,1<=+Math.abs(_)?0<_?(Math.min(+Math.floor(_/4294967296),4294967295)|0)>>>0:~~+Math.ceil((_-+(~~_>>>0))/4294967296)>>>0:0)],fe[I>>2]=O[0],fe[I+4>>2]=O[1],Y.hb&&f===0&&S===0&&(Y.hb=null),0}catch(te){if(typeof w>"u"||!(te instanceof X))throw te;return te.Ka}},C:function(c){try{var f=ae(c);return f.Ha&&f.Ha.fsync?f.Ha.fsync(f):0}catch(m){if(typeof w>"u"||!(m instanceof X))throw m;return m.Ka}},r:function(c,f,m,S){try{e:{var I=ae(c);c=f;for(var Y=f=0;Y<m;Y++){var te=L[c>>2],$e=L[c+4>>2];c+=8;var Le=Yt(I,ee,te,$e);if(0>Le){var Ce=-1;break e}f+=Le}Ce=f}return L[S>>2]=Ce,0}catch(Je){if(typeof w>"u"||!(Je instanceof X))throw Je;return Je.Ka}}};(function(){function c(I){l.asm=I.exports,G=l.asm.I,ve(),pe=l.asm.Aa,Ze.unshift(l.asm.J),Ue--,l.monitorRunDependencies&&l.monitorRunDependencies(Ue),Ue==0&&qe&&(I=qe,qe=null,I())}function f(I){c(I.instance)}function m(I){return $().then(function(Y){return WebAssembly.instantiate(Y,S)}).then(function(Y){return Y}).then(I,function(Y){z("failed to asynchronously prepare wasm: "+Y),Qe(Y)})}var S={a:pn};if(Ue++,l.monitorRunDependencies&&l.monitorRunDependencies(Ue),l.instantiateWasm)try{return l.instantiateWasm(S,c)}catch(I){return z("Module.instantiateWasm callback failed with error: "+I),!1}return function(){return Z||typeof WebAssembly.instantiateStreaming!="function"||nt()||d.startsWith("file://")||E||typeof fetch!="function"?m(f):fetch(d,{credentials:"same-origin"}).then(function(I){return WebAssembly.instantiateStreaming(I,S).then(f,function(Y){return z("wasm streaming compile failed: "+Y),z("falling back to ArrayBuffer instantiation"),m(f)})})}(),{}})(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.J).apply(null,arguments)},l._sqlite3_free=function(){return(l._sqlite3_free=l.asm.K).apply(null,arguments)},l._sqlite3_value_double=function(){return(l._sqlite3_value_double=l.asm.L).apply(null,arguments)},l._sqlite3_value_text=function(){return(l._sqlite3_value_text=l.asm.M).apply(null,arguments)};var Wr=l.___errno_location=function(){return(Wr=l.___errno_location=l.asm.N).apply(null,arguments)};l._sqlite3_prepare_v2=function(){return(l._sqlite3_prepare_v2=l.asm.O).apply(null,arguments)},l._sqlite3_step=function(){return(l._sqlite3_step=l.asm.P).apply(null,arguments)},l._sqlite3_finalize=function(){return(l._sqlite3_finalize=l.asm.Q).apply(null,arguments)},l._sqlite3_reset=function(){return(l._sqlite3_reset=l.asm.R).apply(null,arguments)},l._sqlite3_value_int=function(){return(l._sqlite3_value_int=l.asm.S).apply(null,arguments)},l._sqlite3_clear_bindings=function(){return(l._sqlite3_clear_bindings=l.asm.T).apply(null,arguments)},l._sqlite3_value_blob=function(){return(l._sqlite3_value_blob=l.asm.U).apply(null,arguments)},l._sqlite3_value_bytes=function(){return(l._sqlite3_value_bytes=l.asm.V).apply(null,arguments)},l._sqlite3_value_type=function(){return(l._sqlite3_value_type=l.asm.W).apply(null,arguments)},l._sqlite3_result_blob=function(){return(l._sqlite3_result_blob=l.asm.X).apply(null,arguments)},l._sqlite3_result_double=function(){return(l._sqlite3_result_double=l.asm.Y).apply(null,arguments)},l._sqlite3_result_error=function(){return(l._sqlite3_result_error=l.asm.Z).apply(null,arguments)},l._sqlite3_result_int=function(){return(l._sqlite3_result_int=l.asm._).apply(null,arguments)},l._sqlite3_result_int64=function(){return(l._sqlite3_result_int64=l.asm.$).apply(null,arguments)},l._sqlite3_result_null=function(){return(l._sqlite3_result_null=l.asm.aa).apply(null,arguments)},l._sqlite3_result_text=function(){return(l._sqlite3_result_text=l.asm.ba).apply(null,arguments)},l._sqlite3_sql=function(){return(l._sqlite3_sql=l.asm.ca).apply(null,arguments)},l._sqlite3_aggregate_context=function(){return(l._sqlite3_aggregate_context=l.asm.da).apply(null,arguments)},l._sqlite3_column_count=function(){return(l._sqlite3_column_count=l.asm.ea).apply(null,arguments)},l._sqlite3_data_count=function(){return(l._sqlite3_data_count=l.asm.fa).apply(null,arguments)},l._sqlite3_column_blob=function(){return(l._sqlite3_column_blob=l.asm.ga).apply(null,arguments)},l._sqlite3_column_bytes=function(){return(l._sqlite3_column_bytes=l.asm.ha).apply(null,arguments)},l._sqlite3_column_double=function(){return(l._sqlite3_column_double=l.asm.ia).apply(null,arguments)},l._sqlite3_column_text=function(){return(l._sqlite3_column_text=l.asm.ja).apply(null,arguments)},l._sqlite3_column_type=function(){return(l._sqlite3_column_type=l.asm.ka).apply(null,arguments)},l._sqlite3_column_name=function(){return(l._sqlite3_column_name=l.asm.la).apply(null,arguments)},l._sqlite3_bind_blob=function(){return(l._sqlite3_bind_blob=l.asm.ma).apply(null,arguments)},l._sqlite3_bind_double=function(){return(l._sqlite3_bind_double=l.asm.na).apply(null,arguments)},l._sqlite3_bind_int=function(){return(l._sqlite3_bind_int=l.asm.oa).apply(null,arguments)},l._sqlite3_bind_text=function(){return(l._sqlite3_bind_text=l.asm.pa).apply(null,arguments)},l._sqlite3_bind_parameter_index=function(){return(l._sqlite3_bind_parameter_index=l.asm.qa).apply(null,arguments)},l._sqlite3_normalized_sql=function(){return(l._sqlite3_normalized_sql=l.asm.ra).apply(null,arguments)},l._sqlite3_errmsg=function(){return(l._sqlite3_errmsg=l.asm.sa).apply(null,arguments)},l._sqlite3_exec=function(){return(l._sqlite3_exec=l.asm.ta).apply(null,arguments)},l._sqlite3_changes=function(){return(l._sqlite3_changes=l.asm.ua).apply(null,arguments)},l._sqlite3_close_v2=function(){return(l._sqlite3_close_v2=l.asm.va).apply(null,arguments)},l._sqlite3_create_function_v2=function(){return(l._sqlite3_create_function_v2=l.asm.wa).apply(null,arguments)},l._sqlite3_open=function(){return(l._sqlite3_open=l.asm.xa).apply(null,arguments)};var Zt=l._malloc=function(){return(Zt=l._malloc=l.asm.ya).apply(null,arguments)},Gr=l._free=function(){return(Gr=l._free=l.asm.za).apply(null,arguments)};l._RegisterExtensionFunctions=function(){return(l._RegisterExtensionFunctions=l.asm.Ba).apply(null,arguments)};var Rn=l._emscripten_builtin_memalign=function(){return(Rn=l._emscripten_builtin_memalign=l.asm.Ca).apply(null,arguments)},kr=l.stackSave=function(){return(kr=l.stackSave=l.asm.Da).apply(null,arguments)},Tr=l.stackRestore=function(){return(Tr=l.stackRestore=l.asm.Ea).apply(null,arguments)},zt=l.stackAlloc=function(){return(zt=l.stackAlloc=l.asm.Fa).apply(null,arguments)};l.UTF8ToString=W,l.stackAlloc=zt,l.stackSave=kr,l.stackRestore=Tr,l.cwrap=function(c,f,m,S){m=m||[];var I=m.every(Y=>Y==="number"||Y==="boolean");return f!=="string"&&I&&!S?l["_"+c]:function(){return Er(c,f,m,arguments)}};var Hr;qe=function c(){Hr||jn(),Hr||(qe=c)};function jn(){function c(){if(!Hr&&(Hr=!0,l.calledRun=!0,!ce)){if(l.noFSInit||Ur||(Ur=!0,qr(),l.stdin=l.stdin,l.stdout=l.stdout,l.stderr=l.stderr,l.stdin?Vt("stdin",l.stdin):gr("/dev/tty","/dev/stdin"),l.stdout?Vt("stdout",null,l.stdout):gr("/dev/tty","/dev/stdout"),l.stderr?Vt("stderr",null,l.stderr):gr("/dev/tty1","/dev/stderr"),pt("/dev/stdin",0),pt("/dev/stdout",1),pt("/dev/stderr",1)),Gt=!1,ne(Ze),l.onRuntimeInitialized&&l.onRuntimeInitialized(),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var f=l.postRun.shift();Ie.unshift(f)}ne(Ie)}}if(!(0<Ue)){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Oe();ne(We),0<Ue||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),c()},1)):c())}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return jn(),o}),t)};a.exports=r,a.exports.default=r});class je{static async getDBFromStore(e,t){try{const r=await t.getItem(e);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}}static async setInitialDBToStore(e,t){try{return await t.setItem(e,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}}static async setDBToStore(e,t,r){try{const n=e.export();return await je.saveDBToStore(t,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}}static async saveDBToStore(e,t,r){try{return await r.setItem(e,t),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}}static async removeDBFromStore(e,t){try{return await t.removeItem(e),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}}static async isDBInStore(e,t){try{const r=await t.getItem(e);return r!=null&&r.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}}static async restoreDBFromStore(e,t,r){const n=`${t}-${e}`;try{if(await je.isDBInStore(n,r))if(await je.isDBInStore(e,r)){const o=await je.getDBFromStore(n,r);return await je.saveDBToStore(e,o,r),await je.removeDBFromStore(n,r),Promise.resolve()}else return Promise.reject(new Error(`RestoreDBFromStore: ${e} does not exist`));else return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(s){return Promise.reject(`RestoreDBFromStore: ${s.message}`)}}static async copyDBToStore(e,t,r){try{if(await je.isDBInStore(e,r)){const s=await je.getDBFromStore(e,r);return await je.saveDBToStore(t,s,r),Promise.resolve()}else return Promise.reject(new Error(`CopyDBToStore: ${e} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}}static async getDBListFromStore(e){try{const t=await e.keys();return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}}}class Et{static async getTablesNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await se.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}}static async getViewsNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await se.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}}static async dropElements(e,t){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${t} not found`))}let s="SELECT name FROM sqlite_master WHERE ";s+=`type = '${t}' ${n};`;try{const i=await se.queryAll(e,s,[]);if(i.length>0){const o=t.toUpperCase(),u=[];for(const l of i){let y=`DROP ${o} IF EXISTS `;y+=`${l.name};`,u.push(y)}for(const l of u)if(await se.run(e,l,[],!1,"no")<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(i){return Promise.reject(new Error(`DropElements: ${r}: ${i.message}`))}}static async dropAll(e){try{return await Et.dropElements(e,"table"),await Et.dropElements(e,"index"),await Et.dropElements(e,"trigger"),await Et.dropElements(e,"view"),await se.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}}static async dropTempTables(e,t){const r=Object.keys(t),n=[];for(const s of r){let i="DROP TABLE IF EXISTS ";i+=`_temp_${s};`,n.push(i)}try{return await se.execute(e,n.join(`
`),!1)<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(s){return Promise.reject(new Error(`DropTempTables: ${s.message}`))}}}class He{static async isJsonSQLite(e){const t=["database","version","overwrite","encrypted","mode","tables","views"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e)){if(t.indexOf(r)===-1||r==="database"&&typeof e[r]!="string"||r==="version"&&typeof e[r]!="number"||r==="overwrite"&&typeof e[r]!="boolean"||r==="encrypted"&&typeof e[r]!="boolean"||r==="mode"&&typeof e[r]!="string"||r==="tables"&&typeof e[r]!="object")return!1;if(r==="tables"){for(const n of e[r])if(!await He.isTable(n))return!1}if(r==="views"&&typeof e[r]!="object")return!1;if(r==="views"){for(const n of e[r])if(!await He.isView(n))return!1}}return!0}static async isTable(e){const t=["name","schema","indexes","triggers","values"];let r=0;if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="schema"&&typeof e[n]!="object"||n==="indexes"&&typeof e[n]!="object"||n==="triggers"&&typeof e[n]!="object"||n==="values"&&typeof e[n]!="object")return!1;if(n==="schema"){e.schema.forEach(s=>{s.column&&r++});for(let s=0;s<r;s++)if(!await He.isSchema(e[n][s]))return!1}if(n==="indexes"){for(const s of e[n])if(!await He.isIndexes(s))return!1}if(n==="triggers"){for(const s of e[n])if(!await He.isTriggers(s))return!1}if(n==="values"&&r>0){for(const s of e[n])if(typeof s!="object"||s.length!=r)return!1}}return!0}static async isSchema(e){const t=["column","value","foreignkey","primarykey","constraint"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="column"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="foreignkey"&&typeof e[r]!="string"||r==="primarykey"&&typeof e[r]!="string"||r==="constraint"&&typeof e[r]!="string")return!1;return!0}static async isIndexes(e){const t=["name","value","mode"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="mode"&&(typeof e[r]!="string"||e[r].toUpperCase()!="UNIQUE"))return!1;return!0}static async isTriggers(e){const t=["name","timeevent","condition","logic"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="timeevent"&&typeof e[r]!="string"||r==="condition"&&typeof e[r]!="string"||r==="logic"&&typeof e[r]!="string")return!1;return!0}static async isView(e){const t=["name","value"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string")return!1;return!0}static async checkSchemaValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("column")&&(r.column=e[t].column),n.includes("value")&&(r.value=e[t].value),n.includes("foreignkey")&&(r.foreignkey=e[t].foreignkey),n.includes("constraint")&&(r.constraint=e[t].constraint),!await He.isSchema(r))return Promise.reject(new Error(`CheckSchemaValidity: schema[${t}] not valid`))}return Promise.resolve()}static async checkIndexesValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),n.includes("mode")&&(r.mode=e[t].mode),!await He.isIndexes(r))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${t}] not valid`))}return Promise.resolve()}static async checkTriggersValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("logic")&&(r.logic=e[t].logic),n.includes("name")&&(r.name=e[t].name),n.includes("timeevent")&&(r.timeevent=e[t].timeevent),n.includes("condition")&&(r.condition=e[t].condition),!await He.isTriggers(r))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${t}] not valid`))}return Promise.resolve()}static async checkViewsValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),!await He.isView(r))return Promise.reject(new Error(`CheckViewsValidity: views[${t}] not valid`))}return Promise.resolve()}static async getTableColumnNamesTypes(e,t){let r=[];const n=[],s=[],i=`PRAGMA table_info('${t}');`;try{if(r=await se.queryAll(e,i,[]),r.length>0)for(const o of r)n.push(o.name),s.push(o.type);return Promise.resolve({names:n,types:s})}catch(o){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${o.message}`))}}static async getValues(e,t,r){const n=[];try{const s=await He.getTableColumnNamesTypes(e,r);let i=[];if(Object.keys(s).includes("names"))i=s.names;else return Promise.reject(new Error(`GetValues: Table ${r} no names`));const o=await se.queryAll(e,t,[]);for(const u of o){const l=[];for(const y of i)Object.keys(u).includes(y)?l.push(u[y]):l.push(null);n.push(l)}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetValues: ${s.message}`))}}}class et{static extractTableName(e){const t=/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i,r=e.match(t);return r&&r[1]?r[1]:null}static extractWhereClause(e){const t=/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i,r=e.match(t);return r&&r[1]?r[1].trim():null}static addPrefixToWhereClause(e,t,r,n){let s;return e.includes("AND")?s=e.split("AND").map(u=>u.trim()):s=[e],s.map(o=>{const u=o.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!u)return o;const l=u[1].trim(),y=u[2].trim();let h=u[3].trim(),g=l;const p=et.findIndexOfStringInArray(l,r);return p!==-1&&(g=et.getStringAtIndex(t,p)),`${`${n}${g}`} ${y} ${h}`}).join(" AND ")}static findIndexOfStringInArray(e,t){return t.indexOf(e)}static getStringAtIndex(e,t){if(t>=0&&t<e.length)return e[t]}static extractForeignKeyInfo(e){const t=/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/,r=e.match(t);if(r)return{forKeys:r[1].split(",").map(s=>s.trim()),tableName:r[2],refKeys:r[3].split(",").map(s=>s.trim()),action:r[5]?r[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const t=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),r=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let n;const s=[];for(;(n=r.exec(e))!==null;){const i=n[1];if(i){const o=i.split(",");for(const u of o)s.push(u.trim())}else{const o=n[0];t.has(o.trim().toUpperCase())||s.push(o.trim())}}return s}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,t){const r="RETURNING",n={stmt:e,names:""},s=e.toUpperCase().indexOf(r);if(s!==-1){const i=e.substring(0,s);if(n.stmt=`${i};`,t.substring(0,2)==="wA"){const u=e.substring(s+r.length).trim();u.endsWith(";")?n.names=u.substring(0,u.length-1):n.names=u}}return n}static extractCombinedPrimaryKey(e){const t=/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g,r=new RegExp(t),n=e.matchAll(r),s=[];for(const i of n){const u=i[1].trim().split(",").map(l=>l.trim());s.push(u)}return s.length===0?null:s}static getWhereStmtForCombinedPK(e,t,r,n){let s=e;for(const i of n){const o=i.join(",")===t.join(",")?r:t;for(const[u,l]of i.entries())s=et.replaceAllString(s,l,o[u])}return s}static replaceAllString(e,t,r){return e.split(t).join(r)}static indicesOf(e,t,r=0){const n=[];let s=e.indexOf(t,r);for(;s!==-1;)n.push(s),s=e.indexOf(t,s+1);return n}static getWhereStmtForNonCombinedPK(e,t,r){let n="",s=e.substring(6);for(let i=0;i<t.length;i++){let o="withRefsNames",u=et.indicesOf(s,t[i]);if(u.length===0&&(u=et.indicesOf(s,r[i]),o="colNames"),u.length>0){let l="";const y=et.indicesOf(s,"=",u[0]);if(y.length>0){const h=et.indicesOf(s,"AND",y[0]);h.length>0?(l=s.substring(y[0]+1,h[0]-1),s=s.substring(h[0]+3)):l=s.substring(y[0]+1),i>0&&(n+=" AND "),o==="withRefsNames"?n+=r[i]+" = "+l:n+=t[i]+" = "+l}}}return n="WHERE "+n,n}static updateWhere(e,t,r){let n="";if(e.length<=0||e.toUpperCase().substring(0,5)!=="WHERE")return n;if(t.length===r.length){const s=et.extractCombinedPrimaryKey(e);s?n=et.getWhereStmtForCombinedPK(e,t,r,s):n=et.getWhereStmtForNonCombinedPK(e,t,r)}return n}}et.replaceString=(a,e,t)=>{const r=a.indexOf(e);return r!==-1?a.substring(0,r)+t+a.substring(r+e.length):a};class Ve{static findReferencesAndUpdate(e){return new Ve(e)}static getRefs(e){return new Ve(e)}static getReferences(e){return new Ve(e)}static searchForRelatedItems(e){return new Ve(e)}static upDateWhereForDefault(e){return new Ve(e)}static upDateWhereForRestrict(e){return new Ve(e)}static upDateWhereForCascade(e){return new Ve(e)}static executeUpdateForDelete(e){return new Ve(e)}constructor(e){this.message=e}}class Pt{static async findReferencesAndUpdate(e,t,r,n,s){try{let i=!0;const o=await Pt.getReferences(e,t),u=o.retRefs,l=o.tableWithRefs;if(u.length<=0||t===l)return i;for(const y of u){const h=et.extractForeignKeyInfo(y),g=h.tableName;if(g===""||g!==t)continue;const p=h.forKeys,E=h.refKeys;if(E.length!==p.length){const j="findReferencesAndUpdate: mismatch length";throw Ve.findReferencesAndUpdate(j)}const b=h.action;if(b==="NO_ACTION")continue;let T=l,k=p,P={uWhereStmt:"",setStmt:""};if(Pt.checkValuesMatch(p,n))throw Ve.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const j=await Pt.searchForRelatedItems(e,T,t,r,p,E,s);if(j.relatedItems.length===0&&j.key.length<=0)continue;if(T!==t)switch(b){case"RESTRICT":P=await Pt.upDateWhereForRestrict(j);break;case"CASCADE":P=await Pt.upDateWhereForCascade(j);break;default:P=await Pt.upDateWhereForDefault(p,j);break}}P.setStmt.length>0&&P.uWhereStmt.length>0&&Pt.executeUpdateForDelete(e,T,P.uWhereStmt,P.setStmt,k,s)}return i}catch(i){const o=i.message?i.message:i;throw i instanceof Ve?Ve.findReferencesAndUpdate(o):i}}static async getReferences(e,t){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{const n=await se.queryAll(e,r,[]);let s=[],i="";if(n.length>0){let o=Pt.getRefs(n[0].sql);s=o.foreignKeys,i=o.tableName}return Promise.resolve({tableWithRefs:i,retRefs:s})}catch(n){const i=`getReferences: ${n.message?n.message:n}`;throw Ve.getReferences(i)}}static getRefs(e){let t="";const r=[],n=et.flattenMultilineString(e);try{const s=/CREATE\s+TABLE\s+(\w+)\s+\(/,i=n.match(s);i&&(t=i[1]);const o=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,u=n.matchAll(o);for(const l of u){const y=l[0];r.push(y)}}catch(s){const i=`getRefs: Error creating regular expression: ${s}`;throw Ve.getRefs(i)}return{tableName:t,foreignKeys:r}}static async getReferencedTableName(e){var t="";if(e.length>0){const r=e.split(new RegExp("REFERENCES","i"));if(r.length===2){const n=r[1].indexOf("(");t=r[1].substring(0,n).trim()}}return t}static async searchForRelatedItems(e,t,r,n,s,i,o){const u=[];let l="";const y=s.map(g=>`t1.${g}`),h=i.map(g=>`t2.${g}`);try{let g=et.addPrefixToWhereClause(n,i,s,"t2.");g.endsWith(";")&&(g=g.slice(0,-1));const p=y.map((T,k)=>`${T} = ${h[k]}`).join(" AND "),E=`SELECT t1.rowid FROM ${t} t1 JOIN ${r} t2 ON ${p} WHERE ${g} AND t1.sql_deleted = 0;`,b=await se.queryAll(e,E,o);return b.length>0&&(l=Object.keys(b[0])[0],u.push(...b)),{key:l,relatedItems:u}}catch(g){const p=g.message?g.message:g;throw Ve.searchForRelatedItems(p)}}static async upDateWhereForDefault(e,t){let r="",n="";try{const s=t.key,i=[];for(const o of t.relatedItems){const u=o[s];u!==void 0&&i.push(u)}for(const o of e)r+=`${o} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${s} IN (`;for(const o of i)n+=`${o},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(s){const i=s.message?s.message:s;throw Ve.upDateWhereForDefault(i)}return{setStmt:r,uWhereStmt:n}}static async upDateWhereForRestrict(e){try{const t="",r="";if(e.relatedItems.length>0){const n="Restrict mode related items exist, please delete them first";throw Ve.upDateWhereForRestrict(n)}return{setStmt:t,uWhereStmt:r}}catch(t){const r=t.message?t.message:t;throw Ve.upDateWhereForRestrict(r)}}static async upDateWhereForCascade(e){let t="",r="";try{const n=e.key,s=[];for(const i of e.relatedItems){const o=i[n];o!==void 0&&s.push(o)}t+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const i of s)r+=`${i},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){const s=n.message?n.message:n;throw Ve.upDateWhereForCascade(s)}return{setStmt:t,uWhereStmt:r}}static executeUpdateForDelete(e,t,r,n,s,i){try{let o=-1;const u=`UPDATE ${t} SET ${n} ${r}`,l=[];if(i.length>0){const h=r.split("?");h[h.length-1]===";"&&h.pop();for(let g=0;g<h.length;g++)for(const p of s)et.indicesOf(h[g],p).length>0&&l.push(i[g])}if(o=se.run(e,u,l,!1,"no").lastId,o===-1){const h=`UPDATE sql_deleted failed for table: ${t}`;throw Ve.executeUpdateForDelete(h)}}catch(o){const u=o.message?o.message:o;throw Ve.executeUpdateForDelete(u)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(const r of e)if(!t.includes(r))return!1;return!0}}class se{static async beginTransaction(e,t){const r="BeginTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("BEGIN"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}}static async rollbackTransaction(e,t){const r="RollbackTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("ROLLBACK"),Promise.resolve()}catch(n){return Promise.reject(new Error(`${r}${n.message}`))}}static commitTransaction(e,t){const r="CommitTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));const n="COMMIT";try{return e.exec(n),Promise.resolve()}catch(s){return Promise.reject(new Error(`${r}${s.message}`))}}static async dbChanges(e){const t="SELECT total_changes()";let r=0;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message}`))}}static async getLastId(e){const t="SELECT last_insert_rowid()";let r=-1;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message}`))}}static async setForeignKeyConstraintsEnabled(e,t){let r="PRAGMA foreign_keys=OFF";t&&(r="PRAGMA foreign_keys=ON");try{return e.run(r),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`SetForeignKey: ${s}`))}}static async getVersion(e){let t=0;try{return t=e.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(t)}catch(r){return Promise.reject(new Error(`GetVersion: ${r.message}`))}}static async setVersion(e,t){try{return e.exec(`PRAGMA user_version = ${t}`),Promise.resolve()}catch(r){return Promise.reject(new Error(`SetVersion: ${r.message}`))}}static async execute(e,t,r){try{var n=t;if(!r&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){n=t.replace(/\n/g,"");let o=n.split(";");var s=[];for(const u of o)if(u.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&u.toLowerCase().includes("WHERE".toLowerCase())){const y=u.trim(),h=await se.deleteSQL(e,y,[]);s.push(h)}else s.push(u);n=s.join(";")}e.exec(n);const i=await se.dbChanges(e);return Promise.resolve(i)}catch(i){return Promise.reject(new Error(`Execute: ${i.message}`))}}static async executeSet(e,t,r,n){const s=[];let i=-1,o={};for(let u=0;u<t.length;u++){const l="statement"in t[u]?t[u].statement:null,y="values"in t[u]&&t[u].values.length>0?t[u].values:[];if(l==null){let h="ExecuteSet: Error No statement";return h+=` for index ${u}`,Promise.reject(new Error(h))}try{if(Array.isArray(y[0]))for(const h of y){const g=await se.replaceUndefinedByNull(h);o=await se.run(e,l,g,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}else{const h=await se.replaceUndefinedByNull(y);o=await se.run(e,l,h,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}}catch(h){return Promise.reject(new Error(`ExecuteSet: ${h.message}`))}}return o.lastId=i,o.values=n==="all"?s:n==="one"?s[0]:[],Promise.resolve(o)}static async queryAll(e,t,r){try{let n=[];if(r!=null&&r.length>0?n=e.exec(t,r):n=e.exec(t),n.length==0)return Promise.resolve([]);const s=n[0].values.map(i=>{const o={};return n[0].columns.forEach((u,l)=>{o[u]=i[l]}),o});return Promise.resolve(s)}catch(n){return Promise.reject(new Error(`queryAll: ${n.message}`))}}static async run(e,t,r,n,s){let i=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=t,u=[],l={};try{!n&&i==="DELETE"&&(o=await se.deleteSQL(e,t,r));const y=r||[];if(y.length>0){const g=await se.replaceUndefinedByNull(y),p=e.exec(o,g);if(s==="all"||s==="one")if(p&&p.length>0)u=se.getReturnedValues(p[0],s);else return Promise.reject(new Error(`run: ${o} does not returned any change`))}else{const g=e.exec(o);if(s==="all"||s==="one")if(g&&g.length>0)u=se.getReturnedValues(g[0],s);else return Promise.reject(new Error(`run: ${o} does not returned any change`))}const h=await se.getLastId(e);return l.lastId=h,u!=null&&u.length>0&&(l.values=u),Promise.resolve(l)}catch(y){return Promise.reject(new Error(`run: ${y.message}`))}}static getReturnedValues(e,t){const r=[];for(let n=0;n<e.values.length;n++){let s={};for(let i=0;i<e.columns.length;i++)s[e.columns[i]]=e.values[n][i];if(r.push(s),t==="one")break}return r}static async deleteSQL(e,t,r){let n=t;try{const s=await se.isLastModified(e,!0),i=await se.isSqlDeleted(e,!0);if(!s||!i)return n;const o=et.extractWhereClause(n);if(!o){const g="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${g}`))}const u=et.extractTableName(n);if(!u){const g="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${g}`))}const l=et.extractColumnNames(o);if(l.length===0){const g="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error(`${g}`))}const y="sql_deleted = 1";if(await Pt.findReferencesAndUpdate(e,u,o,l,r)){const g=o.endsWith(";")?o.slice(0,-1):o;n=`UPDATE ${u} SET ${y} WHERE ${g} AND sql_deleted = 0;`}else n="";return Promise.resolve(n)}catch(s){let i=s.message?s.message:s;return Promise.reject(new Error(`deleteSQL: ${i}`))}}static async getTableList(e){try{const t=await Et.getTablesNames(e);return Promise.resolve(t)}catch(t){return Promise.reject(new Error(`getTableList: ${t.message}`))}}static async isTableExists(e,t){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${t}';`;const s=(await se.queryAll(e,r,[])).length>0;return Promise.resolve(s)}catch(r){return Promise.reject(new Error(`isTableExists: ${r.message}`))}}static async isLastModified(e,t){if(!t)return Promise.reject("isLastModified: database not opened");try{const r=await Et.getTablesNames(e);for(const n of r)if((await He.getTableColumnNamesTypes(e,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isLastModified: ${r}`)}}static async isSqlDeleted(e,t){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{const r=await Et.getTablesNames(e);for(const n of r)if((await He.getTableColumnNamesTypes(e,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){return Promise.reject(`isSqlDeleted: ${r}`)}}static async replaceUndefinedByNull(e){const t=[];for(const r of e){let n=r;typeof r>"u"&&(n=null),t.push(n)}return Promise.resolve(t)}static async backupTables(e){const t="BackupTables: ";let r={};try{const n=await Et.getTablesNames(e);for(const s of n)try{const i=await se.backupTable(e,s);r[`${s}`]=i}catch(i){return Promise.reject(new Error(`${t}table ${s}: ${i.message}`))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`BackupTables: ${n.message}`))}}static async backupTable(e,t){try{await se.beginTransaction(e,!0);const r=await se.getTableColumnNames(e,t),n=`_temp_${t}`,s=`DROP TABLE IF EXISTS ${n};`;await se.run(e,s,[],!1,"no");let i=`ALTER TABLE ${t} RENAME `;if(i+=`TO ${n};`,await se.run(e,i,[],!1,"no")<0){let u="BackupTable: lastId < 0";try{await se.rollbackTransaction(e,!0)}catch(l){u+=`: ${l.message}`}return Promise.reject(new Error(`${u}`))}else try{return await se.commitTransaction(e,!0),Promise.resolve(r)}catch(u){return Promise.reject(new Error(`BackupTable: ${u.message}`))}}catch(r){return Promise.reject(new Error(`BackupTable: ${r.message}`))}}static async getTableColumnNames(e,t){let r=[];const n=[],s=`PRAGMA table_info('${t}');`;try{if(r=await se.queryAll(e,s,[]),r.length>0)for(const i of r)n.push(i.name);return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTableColumnNames: ${i.message}`))}}static async findCommonColumns(e,t){let r={};try{const n=await Et.getTablesNames(e);if(n.length===0)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const s of n){const i=await se.getTableColumnNames(e,s);Object.keys(t).includes(s)&&(r[s]=se.arraysIntersection(t[s],i))}return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`FindCommonColumns: ${n.message}`))}}static arraysIntersection(e,t){if(e!=null&&t!=null){const r=new Set(e),n=new Set(t);return[...r].filter(s=>n.has(s))}else return[]}static async updateNewTablesData(e,t){try{await se.beginTransaction(e,!0);const r=[];if(Object.keys(t).forEach(i=>{const o=t[i].join(",");let u=`INSERT INTO ${i} `;u+=`(${o}) `,u+=`SELECT ${o} FROM _temp_${i};`,r.push(u)}),await se.execute(e,r.join(`
`),!1)<0){let i="updateNewTablesData: changes < 0";try{await se.rollbackTransaction(e,!0)}catch(o){i+=`: ${o.message}`}return Promise.reject(new Error(`${i}`))}else try{return await se.commitTransaction(e,!0),Promise.resolve()}catch(i){return Promise.reject(new Error(`updateNewTablesData: ${i.message}`))}}catch(r){return Promise.reject(new Error(`updateNewTablesData: ${r.message}`))}}}class lt{static async createDatabaseSchema(e,t){let r=-1;const n=t.version;try{return await se.setVersion(e.mDb,n),t.mode==="full"&&await Et.dropAll(e.mDb),r=await lt.createSchema(e,t),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateDatabaseSchema: ${s.message}`))}}static async createSchema(e,t){let r=0;const n=e.mDb;try{await se.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(i){return Promise.reject(new Error(`CreateSchema: ${i.message}`))}const s=await lt.createSchemaStatement(t);if(s.length>0){const i=s.join(`
`);try{if(r=await se.execute(n,i,!0),r<0)try{await se.rollbackTransaction(n,!0),e.setIsTransActive(!1)}catch(o){return Promise.reject(new Error(`CreateSchema: changes < 0 ${o.message}`))}}catch(o){const u=o.message;try{return await se.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${u}`))}catch(l){return Promise.reject(new Error(`CreateSchema: changes < 0 ${l.message}: ${u}`))}}}try{return await se.commitTransaction(n,!0),e.setIsTransActive(!1),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateSchema: commit ${i.message}`))}}static async createSchemaStatement(e){const t=[];let r=!1,n=!1;try{for(const s of e.tables){if(s.schema!=null&&s.schema.length>=1){t.push(`CREATE TABLE IF NOT EXISTS ${s.name} (`);for(let i=0;i<s.schema.length;i++)i===s.schema.length-1?s.schema[i].column?(t.push(`${s.schema[i].column} ${s.schema[i].value}`),s.schema[i].column==="last_modified"&&(r=!0),s.schema[i].column==="sql_deleted"&&(n=!0)):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value}`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value}`):s.schema[i].column?t.push(`${s.schema[i].column} ${s.schema[i].value},`):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value},`):s.schema[i].primarykey?t.push(`FOREIGN KEY ${s.schema[i].value},`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value},`);if(t.push(");"),r&&n){let i="CREATE TRIGGER IF NOT EXISTS ";i+=`${s.name}`,i+="_trigger_last_modified ",i+=`AFTER UPDATE ON ${s.name} `,i+="FOR EACH ROW WHEN NEW.last_modified < ",i+="OLD.last_modified BEGIN UPDATE ",i+=`${s.name} `,i+="SET last_modified = ",i+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(i)}}if(s.indexes!=null&&s.indexes.length>=1)for(const i of s.indexes){const o=s.name;let u=`CREATE ${Object.keys(i).includes("mode")?i.mode+" ":""} INDEX IF NOT EXISTS `;u+=`${i.name} ON ${o} (${i.value});`,t.push(u)}if(s.triggers!=null&&s.triggers.length>=1)for(const i of s.triggers){const o=s.name;i.timeevent.toUpperCase().endsWith(" ON")&&(i.timeevent=i.timeevent.substring(0,i.timeevent.length-3));let u="CREATE TRIGGER IF NOT EXISTS ";u+=`${i.name} ${i.timeevent} ON ${o} `,i.condition&&(u+=`${i.condition} `),u+=`${i.logic};`,t.push(u)}}return Promise.resolve(t)}catch(s){return Promise.reject(s)}}static async createTablesData(e,t,r){let n=0,s=!1,i=-1,o="",u=-1;const l=e.mDb;try{u=await se.dbChanges(l),await se.beginTransaction(l,!0),e.setIsTransActive(!0)}catch(y){return Promise.reject(new Error(`createTablesData: ${y.message}`))}for(const y of t.tables)if(y.values!=null&&y.values.length>=1)try{i=await lt.createTableData(l,y,t.mode);const h=`create table data ${y.name}`;if(r.emit({progress:h}),i<0)break;s=!0}catch(h){o=h.message,s=!1;break}if(s)try{return await se.commitTransaction(l,!0),e.setIsTransActive(!1),n=await se.dbChanges(l)-u,Promise.resolve(n)}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}`))}else if(o.length>0)try{return await se.rollbackTransaction(l,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(y){return Promise.reject(new Error(`CreateTablesData: ${y.message}: ${o}`))}else return Promise.resolve(0)}static async createTableData(e,t,r){let n=-1;try{if(!await se.isTableExists(e,t.name))return Promise.reject(new Error(`CreateTableData: Table ${t.name} does not exist`));const i=await He.getTableColumnNamesTypes(e,t.name),o=i.types,u=i.names;if(o.length===0)return Promise.reject(new Error(`CreateTableData: Table ${t.name} info does not exist`));for(let l=0;l<t.values.length;l++){let y=t.values[l],h=!0;const g=await lt.createRowStatement(e,u,y,l,t.name,r);if(h=await lt.checkUpdate(e,g,y,t.name,u),h){if(g.substring(0,6).toUpperCase()==="DELETE"&&(y=[]),n=await se.run(e,g,y,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`CreateTableData: ${s.message}`))}}static async createRowStatement(e,t,r,n,s,i){if(r.length!=t.length||r.length===0||t.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not correct length`));try{const o=await lt.isIdExists(e,s,t[0],r[0]);let u;if(i==="full"||i==="partial"&&!o){const l=t.join(),y=await lt.createQuestionMarkString(t.length);u=`INSERT INTO ${s} (${l}) VALUES (`,u+=`${y});`}else{let l=!0;const y=g=>g==="sql_deleted",h=t.findIndex(y);if(h>=0&&r[h]===1&&(l=!1,u=`DELETE FROM ${s} WHERE `,typeof r[0]=="string"?u+=`${t[0]} = '${r[0]}';`:u+=`${t[0]} = ${r[0]};`),l){const g=await lt.setNameForUpdate(t);if(g.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not set to String`));u=`UPDATE ${s} SET ${g} WHERE `,typeof r[0]=="string"?u+=`${t[0]} = '${r[0]}';`:u+=`${t[0]} = ${r[0]};`}}return Promise.resolve(u)}catch(o){return Promise.reject(new Error(`CreateRowStatement: ${o.message}`))}}static async checkUpdate(e,t,r,n,s){let i=!0;if(t.substring(0,6)==="UPDATE")try{let o=`SELECT * FROM ${n} WHERE `;typeof r[0]=="string"?o+=`${s[0]} = '${r[0]}';`:o+=`${s[0]} = ${r[0]};`;const u=await He.getValues(e,o,n);let l=[];if(u.length>0&&(l=u[0]),r.length>0&&l.length>0&&r.length===l.length){for(let y=0;y<r.length;y++)if(r[y]!==l[y])return Promise.resolve(!0);return Promise.resolve(!1)}else{const y="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${y}`))}}catch(o){return Promise.reject(new Error(`CheckUpdate: ${o.message}`))}else return Promise.resolve(i)}static async isIdExists(e,t,r,n){let s=!1,i=`SELECT ${r} FROM ${t} WHERE ${r} = `;typeof n=="number"&&(i+=`${n};`),typeof n=="string"&&(i+=`'${n}';`);try{return(await se.queryAll(e,i,[])).length===1&&(s=!0),Promise.resolve(s)}catch(o){return Promise.reject(new Error(`IsIdExists: ${o.message}`))}}static async isType(e,t){let r=!1;return e==="NULL"&&typeof t=="object"&&(r=!0),e==="TEXT"&&typeof t=="string"&&(r=!0),e==="INTEGER"&&typeof t=="number"&&(r=!0),e==="REAL"&&typeof t=="number"&&(r=!0),e==="BLOB"&&typeof t=="string"&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))}static async checkColumnTypes(e,t){for(let r=0;r<t.length;r++)if(t[r]!=null)try{await lt.isType(e[r],t[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()}static async createQuestionMarkString(e){let t="";for(let r=0;r<e;r++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}static async setNameForUpdate(e){let t="";for(const r of e)t+=`${r} = ? ,`;return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))}static async createView(e,t){const r=`CREATE VIEW IF NOT EXISTS ${t.name} AS ${t.value};`;try{return await se.execute(e,r,!0)<0?Promise.reject(new Error(`CreateView: ${t.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}}static async createViews(e,t){const r=e.mDb;let n=!1,s="",i=-1,o=-1;try{i=await se.dbChanges(r),await se.beginTransaction(r,!0),e.setIsTransActive(!0)}catch(u){return Promise.reject(new Error(`createViews: ${u.message}`))}for(const u of t.views)if(u.value!=null)try{await lt.createView(r,u),n=!0}catch(l){s=l.message,n=!1;break}if(n)try{return await se.commitTransaction(r,!0),e.setIsTransActive(!1),o=await se.dbChanges(r)-i,Promise.resolve(o)}catch(u){return Promise.reject(new Error(`createViews: ${u.message}`))}else if(s.length>0)try{return await se.rollbackTransaction(r,!0),e.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${s}`))}catch(u){return Promise.reject(new Error(`createViews: ${u.message}: ${s}`))}else return Promise.resolve(0)}}class Ye{static async createExportObject(e,t,r){const n={};let s=[],i=[],o="";try{i=await Ye.getViewsName(e);const u=await Ye.getTablesNameSQL(e);if(u.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!await se.isTableExists(e,"sync_table")&&t.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":{s=await Ye.getTablesPartial(e,u,r);break}case"full":{s=await Ye.getTablesFull(e,u,r);break}default:{o="createExportObject: expMode "+t.mode+" not defined";break}}return o.length>0?Promise.reject(new Error(o)):(s.length>0&&(n.database=t.database,n.version=t.version,n.encrypted=t.encrypted,n.mode=t.mode,n.tables=s,i.length>0&&(n.views=i)),Promise.resolve(n))}catch(u){return Promise.reject(new Error("createExportObject: "+u.message))}}static async getViewsName(e){const t=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await se.queryAll(e,r,[]);for(const s of n){const i={};i.name=s.name,i.value=s.sql.substring(s.sql.indexOf("AS ")+3),t.push(i)}return Promise.resolve(t)}catch(s){return Promise.reject(new Error(`getViewsName: ${s.message}`))}}static async getTablesFull(e,t,r){const n=[];let s="";try{for(const i of t){let o,u;if(i.name)o=i.name;else{s="GetTablesFull: no name";break}if(i.sql)u=i.sql;else{s="GetTablesFull: no sql";break}const l={},y=await Ye.getSchema(u);if(y.length===0){s="GetTablesFull: no Schema returned";break}await He.checkSchemaValidity(y);const h=await Ye.getIndexes(e,o);h.length>0&&await He.checkIndexesValidity(h);const g=await Ye.getTriggers(e,o);g.length>0&&await He.checkTriggersValidity(g);let p=`Full: Table ${o} schema export completed ...`;r.emit({progress:p});const E=`SELECT * FROM ${o};`,b=await He.getValues(e,E,o);if(l.name=o,y.length>0)l.schema=y;else{s="GetTablesFull: must contain schema";break}if(h.length>0&&(l.indexes=h),g.length>0&&(l.triggers=g),b.length>0&&(l.values=b),Object.keys(l).length<=1){s=`GetTablesFull: table ${o} is not a jsonTable`;break}p=`Full: Table ${o} table data export completed ...`,r.emit({progress:p}),n.push(l)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTablesFull: ${i.message}`))}}static async getSchema(e){const t=[],r=e.indexOf("("),n=e.lastIndexOf(")");let s=e.substring(r+1,n);try{s=await Ye.modEmbeddedParentheses(s);const i=s.split(",");for(let o=0;o<i.length;o++){let u=[];const l=i[o].replace(/\n/g,"").trim();u[0]=l.substring(0,l.indexOf(" ")),u[1]=l.substring(l.indexOf(" ")+1);const y={};if(u[0].toUpperCase()==="FOREIGN"){const h=l.indexOf("("),g=l.indexOf(")"),E=l.substring(h+1,g).split("");u[0]=E.join(","),u[0]=u[0].replace(/, /g,","),u[1]=l.substring(g+2),y.foreignkey=u[0]}else if(u[0].toUpperCase()==="PRIMARY"){const h=l.indexOf("("),g=l.indexOf(")"),E=l.substring(h+1,g).split("");u[0]="CPK_"+E.join("_"),u[0]=u[0].replace(/_ /g,"_"),u[1]=l,y.constraint=u[0]}else if(u[0].toUpperCase()==="CONSTRAINT"){let h=[];const g=u[1].trim();h[0]=g.substring(0,g.indexOf(" ")),h[1]=g.substring(g.indexOf(" ")+1),u[0]=h[0],y.constraint=u[0],u[1]=h[1]}else y.column=u[0];y.value=u[1].replace(//g,","),t.push(y)}return Promise.resolve(t)}catch(i){return Promise.reject(new Error(i.message))}}static async getIndexes(e,t){const r=[];let n="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+=`type = 'index' AND tbl_name = '${t}' `,s+="AND sql NOTNULL;";const i=await se.queryAll(e,s,[]);if(i.length>0){for(const o of i)if(Object.keys(o).length===3)if(o.tbl_name===t){const l=o.sql,y=l.includes("UNIQUE")?"UNIQUE":"",h=l.lastIndexOf("("),g=l.lastIndexOf(")"),p={};p.name=o.name,p.value=l.slice(h+1,g),y.length>0&&(p.mode=y),r.push(p)}else{n=`GetIndexes: Table ${t} doesn't match`;break}else{n=`GetIndexes: Table ${t} creating indexes`;break}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(s){return Promise.reject(new Error(`GetIndexes: ${s.message}`))}}static async getTriggers(e,t){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${t}' `,n+="AND sql NOT NULL;";const s=await se.queryAll(e,n,[]);if(s.length>0)for(const i of s)if(Object.keys(i).length===3)if(i.tbl_name===t){const u=i.sql,l=i.name;let y=u.split(l);if(y.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!y[1].includes(t))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${t}`));const h=y[1].split(t,1)[0].trim();if(y=y[1].split(h+" "+t),y.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let g="",p="";if(y[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(y=y[1].trim().split("BEGIN"),y.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));g=y[0].trim(),p="BEGIN"+y[1]}else p=y[1].trim();const E={};E.name=l,E.logic=p,g.length>0&&(E.condition=g),E.timeevent=h,r.push(E)}else return Promise.reject(new Error(`GetTriggers: Table ${t} doesn't match`));else return Promise.reject(new Error(`GetTriggers: Table ${t} creating indexes`));return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}}static async getTablesPartial(e,t,r){const n=[];let s={},i=0,o=[],u="";try{const l=await Ye.getPartialModeData(e,t);Object.keys(l).includes("syncDate")&&(i=l.syncDate),Object.keys(l).includes("modTables")&&(s=l.modTables,o=Object.keys(s));for(const y of t){let h="",g="";if(y.name)h=y.name;else{u="GetTablesFull: no name";break}if(y.sql)g=y.sql;else{u="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(h)===-1||s[h]=="No")continue;const p={};let E=[],b=[],T=[];p.name=y,s[p.name]==="Create"&&(E=await Ye.getSchema(g),E.length>0&&await He.checkSchemaValidity(E),b=await Ye.getIndexes(e,h),b.length>0&&await He.checkIndexesValidity(b),T=await Ye.getTriggers(e,h),T.length>0&&await He.checkTriggersValidity(T));let k=`Partial: Table ${h} schema export completed ...`;r.emit({progress:k});let P="";s[h]==="Create"?P=`SELECT * FROM ${h};`:P=`SELECT * FROM ${h} WHERE last_modified > ${i};`;const j=await He.getValues(e,P,h);if(p.name=h,E.length>0&&(p.schema=E),b.length>0&&(p.indexes=b),T.length>0&&(p.triggers=T),j.length>0&&(p.values=j),Object.keys(p).length<=1){u=`GetTablesPartial: table ${h} is not a jsonTable`;break}k=`Partial: Table ${h} table data export completed ...`,r.emit({progress:k}),n.push(p)}return u.length>0?Promise.reject(new Error(u)):Promise.resolve(n)}catch(l){return Promise.reject(new Error(`GetTablesPartial: ${l.message}`))}}static async getPartialModeData(e,t){const r={};try{const n=await Ye.getSynchroDate(e);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const s=await Ye.getTablesModified(e,t,n);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=s,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}}static async getTablesNameSQL(e){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{const r=await se.queryAll(e,t,[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}}static async getTablesModified(e,t,r){let n="";try{const s={};for(const i of t){let o,u="SELECT count(*) AS tcount  ";u+=`FROM ${i.name};`;let l=await se.queryAll(e,u,[]);if(l.length!=1){n="GetTableModified: total count not returned";break}const y=l[0].tcount;if(u="SELECT count(*) AS mcount FROM ",u+=`${i.name} WHERE last_modified > `,u+=`${r};`,l=await se.queryAll(e,u,[]),l.length!=1)break;const h=l[0].mcount;h===0?o="No":y===h?o="Create":o="Modified";const g=i.name;s[g]=o}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(s)}catch(s){return Promise.reject(new Error(`GetTableModified: ${s.message}`))}}static async getSynchroDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 1;",r=await se.queryAll(e,t,[]);return Promise.resolve(r[0].sync_date)}catch(t){const r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}}static async getLastExportDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 2;",r=await se.queryAll(e,t,[]);return r.length===0?Promise.resolve(-1):Promise.resolve(r[0].sync_date)}catch(t){const r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}}static async setLastExportDate(e,t){try{if(!await se.isTableExists(e,"sync_table"))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let s="";return await Ye.getLastExportDate(e)>0?s=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:s=`INSERT INTO sync_table (sync_date) VALUES (${n});`,await se.execute(e,s,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}}static async delExportedRows(e){let t;try{if(!await se.isTableExists(e,"sync_table"))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=await Ye.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=await se.getTableList(e);if(n.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const s of n){let i=-1;const o=`DELETE FROM ${s}
              WHERE sql_deleted = 1 AND last_modified < ${t};`;if(i=await se.run(e,o,[],!0,"no"),i<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}}static async modEmbeddedParentheses(e){const t=Ye.indexOfChar(e,"("),r=Ye.indexOfChar(e,")");if(t.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(t.length===0)return Promise.resolve(e);let n=e.substring(0,t[0]-1);for(let s=0;s<t.length;s++){let i;s<t.length-1&&t[s+1]<r[s]?(i=e.substring(t[s]-1,r[s+1]),s++):i=e.substring(t[s]-1,r[s]);const o=i.replace(/,/g,"");n+=o,s<t.length-1&&(n+=e.substring(r[s],t[s+1]-1))}return n+=e.substring(r[r.length-1],e.length),Promise.resolve(n)}static indexOfChar(e,t){let r=[...e];return t=t.toLowerCase(),r.reduce((n,s,i)=>s.toLowerCase()===t?[...n,i]:n,[])}}class In{static async onUpgrade(e,t,r,n){let s=-1;const i=new Int32Array(Object.keys(t).map(o=>parseInt(o))).sort();for(const o of i)if(o>r&&o<=n){const u=t[o].statements;if(u.length===0)return Promise.reject("onUpgrade: statements not given");try{await se.setForeignKeyConstraintsEnabled(e.mDb,!1);const l=await se.dbChanges(e.mDb);await In.executeStatementsProcess(e,u),await se.setVersion(e.mDb,o),await se.setForeignKeyConstraintsEnabled(e.mDb,!0),s=await se.dbChanges(e.mDb)-l}catch(l){return Promise.reject(new Error(`onUpgrade: ${l.message}`))}}return Promise.resolve(s)}static async executeStatementsProcess(e,t){try{await se.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(const r of t)await se.execute(e.mDb,r,!1);return await se.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(r){return await se.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}}}class is{constructor(e,t,r,n,s,i){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=n,this.version=t,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=i}async open(){const e={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise((t,r)=>{try{$o(e).then(async n=>{const s=await je.getDBFromStore(this.dbName,this.store);s!=null?this.mDb=new n.Database(s):(this.mDb=new n.Database,await je.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let i=await se.getVersion(this.mDb);if(this.version>i&&Object.keys(this.vUpgDict).length>0)try{if(await je.isDBInStore(this.dbName,this.store)&&(await je.copyDBToStore(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0),await In.onUpgrade(this,this.vUpgDict,i,this.version)===-1)try{this.isBackup&&await je.restoreDBFromStore(this.dbName,"backup",this.store)}catch(l){return r(new Error(`Open: ${l.message}`))}this.isBackup&&await je.removeDBFromStore(`backup-${this.dbName}`,this.store)}catch{try{this.isBackup&&await je.restoreDBFromStore(this.dbName,"backup",this.store)}catch(u){return r(new Error(`Open: ${u.message}`))}}if(this.autoSave)try{await this.saveToStore()}catch(o){return this._isDBOpen=!1,r(`Open: ${o}`)}return await se.setForeignKeyConstraintsEnabled(this.mDb,!0),t()})}catch(n){return this._isDBOpen=!1,r(`in open ${n}`)}})}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){return this._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()}async saveToStore(e=!0){if(this.mDb!=null&&this._isDBOpen)try{await je.setDBToStore(this.mDb,this.dbName,this.store),e&&await se.setForeignKeyConstraintsEnabled(this.mDb,!0)}catch(t){return Promise.reject(`in saveToStore ${t}`)}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject(`exportDB: ${t}`)}}async getVersion(){if(this.mDb!=null&&this._isDBOpen)try{const e=await se.getVersion(this.mDb);return Promise.resolve(e)}catch(e){return this._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}}async isDBExists(e){try{const t=await je.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){return Promise.reject(`in isDBExists ${t}`)}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await je.removeDBFromStore(e,this.store),Promise.resolve()}catch(t){return Promise.reject(new Error(`DeleteDB: ${t.message}`))}}async beginTransaction(){if(!this._isDBOpen){let e=`BeginTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await se.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t=`BeginTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}async commitTransaction(){if(!this._isDBOpen){let e=`CommitTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await se.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`CommitTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}async rollbackTransaction(){if(!this._isDBOpen){let e=`RollbackTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await se.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`RollbackTransaction: ${e.message}`;return Promise.reject(new Error(`${t}`))}}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}async executeSQL(e,t=!0){if(!this._isDBOpen){let n=`ExecuteSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}let r=-1;try{r=await se.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(n){let s=`executeSQL: ${n.message}`;return Promise.reject(new Error(`${s}`))}try{if(await se.execute(this.mDb,e,!1)<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const s=await se.dbChanges(this.mDb)-r;return Promise.resolve(s)}catch(n){let s=`ExecuteSQL: ${n.message}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(i){s+=` : ${i.message}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(n){return this._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${n}`)}}}async execSet(e,t=!0,r="no"){if(!this._isDBOpen){let i=`ExecSet: Database ${this.dbName} `;return i+="not opened",Promise.reject(new Error(i))}const n={changes:-1,lastId:-1};let s=-1;try{s=await se.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(i){let o=`ExecSet: ${i.message}`;return Promise.reject(new Error(`${o}`))}try{const i=await se.executeSet(this.mDb,e,!1,r);let o=i.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const u=await se.dbChanges(this.mDb)-s;return n.changes=u,n.lastId=o,n.values=i.values?i.values:[],Promise.resolve(n)}catch(i){let o=`ExecSet: ${i.message}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(u){o+=` : ${u.message}`}return Promise.reject(new Error(`ExecSet: ${o}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(i){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${i}`)}}}async selectSQL(e,t){if(!this._isDBOpen){let r=`SelectSQL: Database ${this.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{let r=await se.queryAll(this.mDb,e,t);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`SelectSQL: ${r.message}`))}}async runSQL(e,t,r=!0,n){let s=-1;if(!this._isDBOpen){let u=`RunSQL: Database ${this.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const i={changes:-1,lastId:-1};let o=-1;try{o=await se.dbChanges(this.mDb),r&&!this.isTransactionActive&&await this.beginTransaction()}catch(u){let l=`RunSQL: ${u.message}`;return Promise.reject(new Error(`${l}`))}try{const u=await se.run(this.mDb,e,t,!1,n);if(s=u.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&this.isTransactionActive&&await this.commitTransaction();const l=await se.dbChanges(this.mDb)-o;return i.changes=l,i.lastId=s,i.values=u.values?u.values:[],Promise.resolve(i)}catch(u){let l=`RunSQL: ${u.message}`;try{r&&this.isTransactionActive&&await this.rollbackTransaction()}catch(y){l+=` : ${y.message}`}return Promise.reject(new Error(`${l}`))}finally{if(r&&this.setIsTransActive(!1),this.autoSave)try{await this.saveToStore()}catch(u){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${u}`)}}}async getTableNames(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=await se.getTableList(this.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}}async isTable(e){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}try{const t=await se.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){const r=`IsTable: ${t.message}`;return Promise.reject(new Error(r))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(await se.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{const r=await se.isLastModified(this.mDb,this._isDBOpen),n=await se.isSqlDeleted(this.mDb,this._isDBOpen);if(r&&n){const s=Math.round(new Date().getTime()/1e3);let i=`
                          CREATE TABLE IF NOT EXISTS sync_table (
                              id INTEGER PRIMARY KEY NOT NULL,
                              sync_date INTEGER
                              );`;return i+=`INSERT INTO sync_table (sync_date) VALUES (
                              "${s}");`,e=await se.execute(this.mDb,i,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const r=`CreateSyncTable: ${t.message}`;return Promise.reject(new Error(r))}}async getSyncDate(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!await se.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const t=await Ye.getSynchroDate(this.mDb);return Promise.resolve(t)}catch(e){const t=`getSyncDate: ${e.message}`;return Promise.reject(new Error(t))}}async setSyncDate(e){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;return t+="not opened",{result:!1,message:t}}try{if(!await se.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const r=Math.round(new Date(e).getTime()/1e3);let n="UPDATE sync_table SET sync_date = ";return n+=`${r} WHERE id = 1;`,await se.execute(this.mDb,n,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message}`}}}async importJson(e,t){let r=0;if(this._isDBOpen)try{if(await se.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){r=await lt.createDatabaseSchema(this,e);let n=`Schema creation completed changes: ${r}`;if(t.emit({progress:n}),r!=-1){r+=await lt.createTablesData(this,e,t);let s=`Tables data creation completed changes: ${r}`;t.emit({progress:s})}}return e.views&&e.views.length>0&&(r+=await lt.createViews(this,e)),await se.setForeignKeyConstraintsEnabled(this.mDb,!0),await this.saveToStore(),Promise.resolve(r)}catch(n){return Promise.reject(new Error(`ImportJson: ${n.message}`))}else return Promise.reject(new Error("ImportJson: database is closed"))}async exportJson(e,t){const r={};if(r.database=this.dbName.slice(0,-9),r.version=this.version,r.encrypted=!1,r.mode=e,this._isDBOpen)try{await se.isTableExists(this.mDb,"sync_table")&&await Ye.setLastExportDate(this.mDb,new Date().toISOString());const s=await Ye.createExportObject(this.mDb,r,t);if(Object.keys(s).length===0){const u="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(u))}return He.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(n){return Promise.reject(new Error(`ExportJson: ${n.message}`))}else return Promise.reject(new Error("ExportJson: database is closed"))}async deleteExportedRows(){if(this._isDBOpen)try{return await Ye.delExportedRows(this.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))}}var as=xn(function(a,e){/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t){a.exports=t()})(function(){return function t(r,n,s){function i(l,y){if(!n[l]){if(!r[l]){var h=typeof Ft=="function"&&Ft;if(!y&&h)return h(l,!0);if(o)return o(l,!0);var g=new Error("Cannot find module '"+l+"'");throw g.code="MODULE_NOT_FOUND",g}var p=n[l]={exports:{}};r[l][0].call(p.exports,function(E){var b=r[l][1][E];return i(b||E)},p,p.exports,t,r,n,s)}return n[l].exports}for(var o=typeof Ft=="function"&&Ft,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,r,n){(function(s){var i=s.MutationObserver||s.WebKitMutationObserver,o;if(i){var u=0,l=new i(E),y=s.document.createTextNode("");l.observe(y,{characterData:!0}),o=function(){y.data=u=++u%2}}else if(!s.setImmediate&&typeof globalThis.MessageChannel<"u"){var h=new globalThis.MessageChannel;h.port1.onmessage=E,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in globalThis.document.createElement("script")?o=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){E(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:o=function(){setTimeout(E,0)};var g,p=[];function E(){g=!0;for(var T,k,P=p.length;P;){for(k=p,p=[],T=-1;++T<P;)k[T]();P=p.length}g=!1}r.exports=b;function b(T){p.push(T)===1&&!g&&o()}}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var s=t(1);function i(){}var o={},u=["REJECTED"],l=["FULFILLED"],y=["PENDING"];r.exports=h;function h(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,D!==i&&b(this,D)}h.prototype.catch=function(D){return this.then(null,D)},h.prototype.then=function(D,H){if(typeof D!="function"&&this.state===l||typeof H!="function"&&this.state===u)return this;var z=new this.constructor(i);if(this.state!==y){var Z=this.state===l?D:H;p(z,Z,this.outcome)}else this.queue.push(new g(z,D,H));return z};function g(D,H,z){this.promise=D,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}g.prototype.callFulfilled=function(D){o.resolve(this.promise,D)},g.prototype.otherCallFulfilled=function(D){p(this.promise,this.onFulfilled,D)},g.prototype.callRejected=function(D){o.reject(this.promise,D)},g.prototype.otherCallRejected=function(D){p(this.promise,this.onRejected,D)};function p(D,H,z){s(function(){var Z;try{Z=H(z)}catch(G){return o.reject(D,G)}Z===D?o.reject(D,new TypeError("Cannot resolve promise with itself")):o.resolve(D,Z)})}o.resolve=function(D,H){var z=T(E,H);if(z.status==="error")return o.reject(D,z.value);var Z=z.value;if(Z)b(D,Z);else{D.state=l,D.outcome=H;for(var G=-1,ce=D.queue.length;++G<ce;)D.queue[G].callFulfilled(H)}return D},o.reject=function(D,H){D.state=u,D.outcome=H;for(var z=-1,Z=D.queue.length;++z<Z;)D.queue[z].callRejected(H);return D};function E(D){var H=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof H=="function")return function(){H.apply(D,arguments)}}function b(D,H){var z=!1;function Z(A){z||(z=!0,o.reject(D,A))}function G(A){z||(z=!0,o.resolve(D,A))}function ce(){H(G,Z)}var be=T(ce);be.status==="error"&&Z(be.value)}function T(D,H){var z={};try{z.value=D(H),z.status="success"}catch(Z){z.status="error",z.value=Z}return z}h.resolve=k;function k(D){return D instanceof this?D:o.resolve(new this(i),D)}h.reject=P;function P(D){var H=new this(i);return o.reject(H,D)}h.all=j;function j(D){var H=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,Z=!1;if(!z)return this.resolve([]);for(var G=new Array(z),ce=0,be=-1,A=new this(i);++be<z;)W(D[be],be);return A;function W(v,J){H.resolve(v).then(Se,function(ee){Z||(Z=!0,o.reject(A,ee))});function Se(ee){G[J]=ee,++ce===z&&!Z&&(Z=!0,o.resolve(A,G))}}}h.race=F;function F(D){var H=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,Z=!1;if(!z)return this.resolve([]);for(var G=-1,ce=new this(i);++G<z;)be(D[G]);return ce;function be(A){H.resolve(A).then(function(W){Z||(Z=!0,o.resolve(ce,W))},function(W){Z||(Z=!0,o.reject(ce,W))})}}},{1:1}],3:[function(t,r,n){(function(s){typeof globalThis.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function i(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=o();function l(){try{if(!u||!u.open)return!1;var w=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function y(w,R){w=w||[],R=R||{};try{return new Blob(w,R)}catch(N){if(N.name!=="TypeError")throw N;for(var x=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,C=new x,B=0;B<w.length;B+=1)C.append(w[B]);return C.getBlob(R.type)}}typeof Promise>"u"&&t(3);var h=Promise;function g(w,R){R&&w.then(function(x){R(null,x)},function(x){R(x)})}function p(w,R,x){typeof R=="function"&&w.then(R),typeof x=="function"&&w.catch(x)}function E(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",k=void 0,P={},j=Object.prototype.toString,F="readonly",D="readwrite";function H(w){for(var R=w.length,x=new ArrayBuffer(R),C=new Uint8Array(x),B=0;B<R;B++)C[B]=w.charCodeAt(B);return x}function z(w){return new h(function(R){var x=w.transaction(T,D),C=y([""]);x.objectStore(T).put(C,"key"),x.onabort=function(B){B.preventDefault(),B.stopPropagation(),R(!1)},x.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),N=navigator.userAgent.match(/Edge\//);R(N||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function Z(w){return typeof k=="boolean"?h.resolve(k):z(w).then(function(R){return k=R,k})}function G(w){var R=P[w.name],x={};x.promise=new h(function(C,B){x.resolve=C,x.reject=B}),R.deferredOperations.push(x),R.dbReady?R.dbReady=R.dbReady.then(function(){return x.promise}):R.dbReady=x.promise}function ce(w){var R=P[w.name],x=R.deferredOperations.pop();if(x)return x.resolve(),x.promise}function be(w,R){var x=P[w.name],C=x.deferredOperations.pop();if(C)return C.reject(R),C.promise}function A(w,R){return new h(function(x,C){if(P[w.name]=P[w.name]||U(),w.db)if(R)G(w),w.db.close();else return x(w.db);var B=[w.name];R&&B.push(w.version);var N=u.open.apply(u,B);R&&(N.onupgradeneeded=function(Q){var ae=N.result;try{ae.createObjectStore(w.storeName),Q.oldVersion<=1&&ae.createObjectStore(T)}catch(ue){if(ue.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+Q.oldVersion+" to version "+Q.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw ue}}),N.onerror=function(Q){Q.preventDefault(),C(N.error)},N.onsuccess=function(){var Q=N.result;Q.onversionchange=function(ae){ae.target.close()},x(Q),ce(w)}})}function W(w){return A(w,!1)}function v(w){return A(w,!0)}function J(w,R){if(!w.db)return!0;var x=!w.db.objectStoreNames.contains(w.storeName),C=w.version<w.db.version,B=w.version>w.db.version;if(C&&(w.version!==R&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),B||x){if(x){var N=w.db.version+1;N>w.version&&(w.version=N)}return!0}return!1}function Se(w){return new h(function(R,x){var C=new FileReader;C.onerror=x,C.onloadend=function(B){var N=btoa(B.target.result||"");R({__local_forage_encoded_blob:!0,data:N,type:w.type})},C.readAsBinaryString(w)})}function ee(w){var R=H(atob(w.data));return y([R],{type:w.type})}function Te(w){return w&&w.__local_forage_encoded_blob}function le(w){var R=this,x=R._initReady().then(function(){var C=P[R._dbInfo.name];if(C&&C.dbReady)return C.dbReady});return p(x,w,w),x}function fe(w){G(w);for(var R=P[w.name],x=R.forages,C=0;C<x.length;C++){var B=x[C];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return w.db=null,W(w).then(function(N){return w.db=N,J(w)?v(w):N}).then(function(N){w.db=R.db=N;for(var Q=0;Q<x.length;Q++)x[Q]._dbInfo.db=N}).catch(function(N){throw be(w,N),N})}function L(w,R,x,C){C===void 0&&(C=1);try{var B=w.db.transaction(w.storeName,R);x(null,B)}catch(N){if(C>0&&(!w.db||N.name==="InvalidStateError"||N.name==="NotFoundError"))return h.resolve().then(function(){if(!w.db||N.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),v(w)}).then(function(){return fe(w).then(function(){L(w,R,x,C-1)})}).catch(x);x(N)}}function U(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ke(w){var R=this,x={db:null};if(w)for(var C in w)x[C]=w[C];var B=P[x.name];B||(B=U(),P[x.name]=B),B.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=le);var N=[];function Q(){return h.resolve()}for(var ae=0;ae<B.forages.length;ae++){var ue=B.forages[ae];ue!==R&&N.push(ue._initReady().catch(Q))}var de=B.forages.slice(0);return h.all(N).then(function(){return x.db=B.db,W(x)}).then(function(ye){return x.db=ye,J(x,R._defaultConfig.version)?v(x):ye}).then(function(ye){x.db=B.db=ye,R._dbInfo=x;for(var we=0;we<de.length;we++){var Ae=de[we];Ae!==R&&(Ae._dbInfo.db=x.db,Ae._dbInfo.version=x.version)}})}function ve(w,R){var x=this;w=E(w);var C=new h(function(B,N){x.ready().then(function(){L(x._dbInfo,F,function(Q,ae){if(Q)return N(Q);try{var ue=ae.objectStore(x._dbInfo.storeName),de=ue.get(w);de.onsuccess=function(){var ye=de.result;ye===void 0&&(ye=null),Te(ye)&&(ye=ee(ye)),B(ye)},de.onerror=function(){N(de.error)}}catch(ye){N(ye)}})}).catch(N)});return g(C,R),C}function pe(w,R){var x=this,C=new h(function(B,N){x.ready().then(function(){L(x._dbInfo,F,function(Q,ae){if(Q)return N(Q);try{var ue=ae.objectStore(x._dbInfo.storeName),de=ue.openCursor(),ye=1;de.onsuccess=function(){var we=de.result;if(we){var Ae=we.value;Te(Ae)&&(Ae=ee(Ae));var Ne=w(Ae,we.key,ye++);Ne!==void 0?B(Ne):we.continue()}else B()},de.onerror=function(){N(de.error)}}catch(we){N(we)}})}).catch(N)});return g(C,R),C}function We(w,R,x){var C=this;w=E(w);var B=new h(function(N,Q){var ae;C.ready().then(function(){return ae=C._dbInfo,j.call(R)==="[object Blob]"?Z(ae.db).then(function(ue){return ue?R:Se(R)}):R}).then(function(ue){L(C._dbInfo,D,function(de,ye){if(de)return Q(de);try{var we=ye.objectStore(C._dbInfo.storeName);ue===null&&(ue=void 0);var Ae=we.put(ue,w);ye.oncomplete=function(){ue===void 0&&(ue=null),N(ue)},ye.onabort=ye.onerror=function(){var Ne=Ae.error?Ae.error:Ae.transaction.error;Q(Ne)}}catch(Ne){Q(Ne)}})}).catch(Q)});return g(B,x),B}function Ze(w,R){var x=this;w=E(w);var C=new h(function(B,N){x.ready().then(function(){L(x._dbInfo,D,function(Q,ae){if(Q)return N(Q);try{var ue=ae.objectStore(x._dbInfo.storeName),de=ue.delete(w);ae.oncomplete=function(){B()},ae.onerror=function(){N(de.error)},ae.onabort=function(){var ye=de.error?de.error:de.transaction.error;N(ye)}}catch(ye){N(ye)}})}).catch(N)});return g(C,R),C}function Ie(w){var R=this,x=new h(function(C,B){R.ready().then(function(){L(R._dbInfo,D,function(N,Q){if(N)return B(N);try{var ae=Q.objectStore(R._dbInfo.storeName),ue=ae.clear();Q.oncomplete=function(){C()},Q.onabort=Q.onerror=function(){var de=ue.error?ue.error:ue.transaction.error;B(de)}}catch(de){B(de)}})}).catch(B)});return g(x,w),x}function Oe(w){var R=this,x=new h(function(C,B){R.ready().then(function(){L(R._dbInfo,F,function(N,Q){if(N)return B(N);try{var ae=Q.objectStore(R._dbInfo.storeName),ue=ae.count();ue.onsuccess=function(){C(ue.result)},ue.onerror=function(){B(ue.error)}}catch(de){B(de)}})}).catch(B)});return g(x,w),x}function Ue(w,R){var x=this,C=new h(function(B,N){if(w<0){B(null);return}x.ready().then(function(){L(x._dbInfo,F,function(Q,ae){if(Q)return N(Q);try{var ue=ae.objectStore(x._dbInfo.storeName),de=!1,ye=ue.openKeyCursor();ye.onsuccess=function(){var we=ye.result;if(!we){B(null);return}w===0||de?B(we.key):(de=!0,we.advance(w))},ye.onerror=function(){N(ye.error)}}catch(we){N(we)}})}).catch(N)});return g(C,R),C}function qe(w){var R=this,x=new h(function(C,B){R.ready().then(function(){L(R._dbInfo,F,function(N,Q){if(N)return B(N);try{var ae=Q.objectStore(R._dbInfo.storeName),ue=ae.openKeyCursor(),de=[];ue.onsuccess=function(){var ye=ue.result;if(!ye){C(de);return}de.push(ye.key),ye.continue()},ue.onerror=function(){B(ue.error)}}catch(ye){B(ye)}})}).catch(B)});return g(x,w),x}function Qe(w,R){R=b.apply(this,arguments);var x=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||x.name,w.storeName=w.storeName||x.storeName);var C=this,B;if(!w.name)B=h.reject("Invalid arguments");else{var N=w.name===x.name&&C._dbInfo.db,Q=N?h.resolve(C._dbInfo.db):W(w).then(function(ae){var ue=P[w.name],de=ue.forages;ue.db=ae;for(var ye=0;ye<de.length;ye++)de[ye]._dbInfo.db=ae;return ae});w.storeName?B=Q.then(function(ae){if(ae.objectStoreNames.contains(w.storeName)){var ue=ae.version+1;G(w);var de=P[w.name],ye=de.forages;ae.close();for(var we=0;we<ye.length;we++){var Ae=ye[we];Ae._dbInfo.db=null,Ae._dbInfo.version=ue}var Ne=new h(function(Be,Ke){var ze=u.open(w.name,ue);ze.onerror=function(at){var jt=ze.result;jt.close(),Ke(at)},ze.onupgradeneeded=function(){var at=ze.result;at.deleteObjectStore(w.storeName)},ze.onsuccess=function(){var at=ze.result;at.close(),Be(at)}});return Ne.then(function(Be){de.db=Be;for(var Ke=0;Ke<ye.length;Ke++){var ze=ye[Ke];ze._dbInfo.db=Be,ce(ze._dbInfo)}}).catch(function(Be){throw(be(w,Be)||h.resolve()).catch(function(){}),Be})}}):B=Q.then(function(ae){G(w);var ue=P[w.name],de=ue.forages;ae.close();for(var ye=0;ye<de.length;ye++){var we=de[ye];we._dbInfo.db=null}var Ae=new h(function(Ne,Be){var Ke=u.deleteDatabase(w.name);Ke.onerror=function(){var ze=Ke.result;ze&&ze.close(),Be(Ke.error)},Ke.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},Ke.onsuccess=function(){var ze=Ke.result;ze&&ze.close(),Ne(ze)}});return Ae.then(function(Ne){ue.db=Ne;for(var Be=0;Be<de.length;Be++){var Ke=de[Be];ce(Ke._dbInfo)}}).catch(function(Ne){throw(be(w,Ne)||h.resolve()).catch(function(){}),Ne})})}return g(B,R),B}var nt={_driver:"asyncStorage",_initStorage:ke,_support:l(),iterate:pe,getItem:ve,setItem:We,removeItem:Ze,clear:Ie,length:Oe,key:Ue,keys:qe,dropInstance:Qe};function d(){return typeof openDatabase=="function"}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",$=/^~~local_forage_type~([^~]+)~/,_="__lfsc__:",O=_.length,ne="arbf",re="blob",q="si08",he="ui08",ge="uic8",me="si16",_e="si32",Fe="ur16",De="ui32",tt="fl32",bt="fl64",st=O+ne.length,Tt=Object.prototype.toString;function Ge(w){var R=w.length*.75,x=w.length,C,B=0,N,Q,ae,ue;w[w.length-1]==="="&&(R--,w[w.length-2]==="="&&R--);var de=new ArrayBuffer(R),ye=new Uint8Array(de);for(C=0;C<x;C+=4)N=V.indexOf(w[C]),Q=V.indexOf(w[C+1]),ae=V.indexOf(w[C+2]),ue=V.indexOf(w[C+3]),ye[B++]=N<<2|Q>>4,ye[B++]=(Q&15)<<4|ae>>2,ye[B++]=(ae&3)<<6|ue&63;return de}function St(w){var R=new Uint8Array(w),x="",C;for(C=0;C<R.length;C+=3)x+=V[R[C]>>2],x+=V[(R[C]&3)<<4|R[C+1]>>4],x+=V[(R[C+1]&15)<<2|R[C+2]>>6],x+=V[R[C+2]&63];return R.length%3===2?x=x.substring(0,x.length-1)+"=":R.length%3===1&&(x=x.substring(0,x.length-2)+"=="),x}function xe(w,R){var x="";if(w&&(x=Tt.call(w)),w&&(x==="[object ArrayBuffer]"||w.buffer&&Tt.call(w.buffer)==="[object ArrayBuffer]")){var C,B=_;w instanceof ArrayBuffer?(C=w,B+=ne):(C=w.buffer,x==="[object Int8Array]"?B+=q:x==="[object Uint8Array]"?B+=he:x==="[object Uint8ClampedArray]"?B+=ge:x==="[object Int16Array]"?B+=me:x==="[object Uint16Array]"?B+=Fe:x==="[object Int32Array]"?B+=_e:x==="[object Uint32Array]"?B+=De:x==="[object Float32Array]"?B+=tt:x==="[object Float64Array]"?B+=bt:R(new Error("Failed to get type for BinaryArray"))),R(B+St(C))}else if(x==="[object Blob]"){var N=new FileReader;N.onload=function(){var Q=K+w.type+"~"+St(this.result);R(_+re+Q)},N.readAsArrayBuffer(w)}else try{R(JSON.stringify(w))}catch(Q){console.error("Couldn't convert value into a JSON string: ",w),R(null,Q)}}function ct(w){if(w.substring(0,O)!==_)return JSON.parse(w);var R=w.substring(st),x=w.substring(O,st),C;if(x===re&&$.test(R)){var B=R.match($);C=B[1],R=R.substring(B[0].length)}var N=Ge(R);switch(x){case ne:return N;case re:return y([N],{type:C});case q:return new Int8Array(N);case he:return new Uint8Array(N);case ge:return new Uint8ClampedArray(N);case me:return new Int16Array(N);case Fe:return new Uint16Array(N);case _e:return new Int32Array(N);case De:return new Uint32Array(N);case tt:return new Float32Array(N);case bt:return new Float64Array(N);default:throw new Error("Unkown type: "+x)}}var At={serialize:xe,deserialize:ct,stringToBuffer:Ge,bufferToString:St};function ft(w,R,x,C){w.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],x,C)}function dr(w){var R=this,x={db:null};if(w)for(var C in w)x[C]=typeof w[C]!="string"?w[C].toString():w[C];var B=new h(function(N,Q){try{x.db=openDatabase(x.name,String(x.version),x.description,x.size)}catch(ae){return Q(ae)}x.db.transaction(function(ae){ft(ae,x,function(){R._dbInfo=x,N()},function(ue,de){Q(de)})},Q)});return x.serializer=At,B}function Xe(w,R,x,C,B,N){w.executeSql(x,C,B,function(Q,ae){ae.code===ae.SYNTAX_ERR?Q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ue,de){de.rows.length?N(ue,ae):ft(ue,R,function(){ue.executeSql(x,C,B,N)},N)},N):N(Q,ae)},N)}function Gt(w,R){var x=this;w=E(w);var C=new h(function(B,N){x.ready().then(function(){var Q=x._dbInfo;Q.db.transaction(function(ae){Xe(ae,Q,"SELECT * FROM "+Q.storeName+" WHERE key = ? LIMIT 1",[w],function(ue,de){var ye=de.rows.length?de.rows.item(0).value:null;ye&&(ye=Q.serializer.deserialize(ye)),B(ye)},function(ue,de){N(de)})})}).catch(N)});return g(C,R),C}function X(w,R){var x=this,C=new h(function(B,N){x.ready().then(function(){var Q=x._dbInfo;Q.db.transaction(function(ae){Xe(ae,Q,"SELECT * FROM "+Q.storeName,[],function(ue,de){for(var ye=de.rows,we=ye.length,Ae=0;Ae<we;Ae++){var Ne=ye.item(Ae),Be=Ne.value;if(Be&&(Be=Q.serializer.deserialize(Be)),Be=w(Be,Ne.key,Ae+1),Be!==void 0){B(Be);return}}B()},function(ue,de){N(de)})})}).catch(N)});return g(C,R),C}function wt(w,R,x,C){var B=this;w=E(w);var N=new h(function(Q,ae){B.ready().then(function(){R===void 0&&(R=null);var ue=R,de=B._dbInfo;de.serializer.serialize(R,function(ye,we){we?ae(we):de.db.transaction(function(Ae){Xe(Ae,de,"INSERT OR REPLACE INTO "+de.storeName+" (key, value) VALUES (?, ?)",[w,ye],function(){Q(ue)},function(Ne,Be){ae(Be)})},function(Ae){if(Ae.code===Ae.QUOTA_ERR){if(C>0){Q(wt.apply(B,[w,ue,x,C-1]));return}ae(Ae)}})})}).catch(ae)});return g(N,x),N}function it(w,R,x){return wt.apply(this,[w,R,x,1])}function Ht(w,R){var x=this;w=E(w);var C=new h(function(B,N){x.ready().then(function(){var Q=x._dbInfo;Q.db.transaction(function(ae){Xe(ae,Q,"DELETE FROM "+Q.storeName+" WHERE key = ?",[w],function(){B()},function(ue,de){N(de)})})}).catch(N)});return g(C,R),C}function mr(w){var R=this,x=new h(function(C,B){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function(Q){Xe(Q,N,"DELETE FROM "+N.storeName,[],function(){C()},function(ae,ue){B(ue)})})}).catch(B)});return g(x,w),x}function Ir(w){var R=this,x=new h(function(C,B){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function(Q){Xe(Q,N,"SELECT COUNT(key) as c FROM "+N.storeName,[],function(ae,ue){var de=ue.rows.item(0).c;C(de)},function(ae,ue){B(ue)})})}).catch(B)});return g(x,w),x}function It(w,R){var x=this,C=new h(function(B,N){x.ready().then(function(){var Q=x._dbInfo;Q.db.transaction(function(ae){Xe(ae,Q,"SELECT key FROM "+Q.storeName+" WHERE id = ? LIMIT 1",[w+1],function(ue,de){var ye=de.rows.length?de.rows.item(0).key:null;B(ye)},function(ue,de){N(de)})})}).catch(N)});return g(C,R),C}function Rr(w){var R=this,x=new h(function(C,B){R.ready().then(function(){var N=R._dbInfo;N.db.transaction(function(Q){Xe(Q,N,"SELECT key FROM "+N.storeName,[],function(ae,ue){for(var de=[],ye=0;ye<ue.rows.length;ye++)de.push(ue.rows.item(ye).key);C(de)},function(ae,ue){B(ue)})})}).catch(B)});return g(x,w),x}function fn(w){return new h(function(R,x){w.transaction(function(C){C.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,N){for(var Q=[],ae=0;ae<N.rows.length;ae++)Q.push(N.rows.item(ae).name);R({db:w,storeNames:Q})},function(B,N){x(N)})},function(C){x(C)})})}function jr(w,R){R=b.apply(this,arguments);var x=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||x.name,w.storeName=w.storeName||x.storeName);var C=this,B;return w.name?B=new h(function(N){var Q;w.name===x.name?Q=C._dbInfo.db:Q=openDatabase(w.name,"","",0),w.storeName?N({db:Q,storeNames:[w.storeName]}):N(fn(Q))}).then(function(N){return new h(function(Q,ae){N.db.transaction(function(ue){function de(Ne){return new h(function(Be,Ke){ue.executeSql("DROP TABLE IF EXISTS "+Ne,[],function(){Be()},function(ze,at){Ke(at)})})}for(var ye=[],we=0,Ae=N.storeNames.length;we<Ae;we++)ye.push(de(N.storeNames[we]));h.all(ye).then(function(){Q()}).catch(function(Ne){ae(Ne)})},function(ue){ae(ue)})})}):B=h.reject("Invalid arguments"),g(B,R),B}var Lt={_driver:"webSQLStorage",_initStorage:dr,_support:d(),iterate:X,getItem:Gt,setItem:it,removeItem:Ht,clear:mr,length:Ir,key:It,keys:Rr,dropInstance:jr};function Or(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pr(w,R){var x=w.name+"/";return w.storeName!==R.storeName&&(x+=w.storeName+"/"),x}function hn(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Nr(){return!hn()||localStorage.length>0}function dn(w){var R=this,x={};if(w)for(var C in w)x[C]=w[C];return x.keyPrefix=pr(w,R._defaultConfig),Nr()?(R._dbInfo=x,x.serializer=At,h.resolve()):h.reject()}function yr(w){var R=this,x=R.ready().then(function(){for(var C=R._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var N=localStorage.key(B);N.indexOf(C)===0&&localStorage.removeItem(N)}});return g(x,w),x}function Cr(w,R){var x=this;w=E(w);var C=x.ready().then(function(){var B=x._dbInfo,N=localStorage.getItem(B.keyPrefix+w);return N&&(N=B.serializer.deserialize(N)),N});return g(C,R),C}function rr(w,R){var x=this,C=x.ready().then(function(){for(var B=x._dbInfo,N=B.keyPrefix,Q=N.length,ae=localStorage.length,ue=1,de=0;de<ae;de++){var ye=localStorage.key(de);if(ye.indexOf(N)===0){var we=localStorage.getItem(ye);if(we&&(we=B.serializer.deserialize(we)),we=w(we,ye.substring(Q),ue++),we!==void 0)return we}}});return g(C,R),C}function mt(w,R){var x=this,C=x.ready().then(function(){var B=x._dbInfo,N;try{N=localStorage.key(w)}catch{N=null}return N&&(N=N.substring(B.keyPrefix.length)),N});return g(C,R),C}function nr(w){var R=this,x=R.ready().then(function(){for(var C=R._dbInfo,B=localStorage.length,N=[],Q=0;Q<B;Q++){var ae=localStorage.key(Q);ae.indexOf(C.keyPrefix)===0&&N.push(ae.substring(C.keyPrefix.length))}return N});return g(x,w),x}function gr(w){var R=this,x=R.keys().then(function(C){return C.length});return g(x,w),x}function Br(w,R){var x=this;w=E(w);var C=x.ready().then(function(){var B=x._dbInfo;localStorage.removeItem(B.keyPrefix+w)});return g(C,R),C}function Fr(w,R,x){var C=this;w=E(w);var B=C.ready().then(function(){R===void 0&&(R=null);var N=R;return new h(function(Q,ae){var ue=C._dbInfo;ue.serializer.serialize(R,function(de,ye){if(ye)ae(ye);else try{localStorage.setItem(ue.keyPrefix+w,de),Q(N)}catch(we){(we.name==="QuotaExceededError"||we.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ae(we),ae(we)}})})});return g(B,x),B}function Lr(w,R){if(R=b.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var x=this.config();w.name=w.name||x.name,w.storeName=w.storeName||x.storeName}var C=this,B;return w.name?B=new h(function(N){w.storeName?N(pr(w,C._defaultConfig)):N(w.name+"/")}).then(function(N){for(var Q=localStorage.length-1;Q>=0;Q--){var ae=localStorage.key(Q);ae.indexOf(N)===0&&localStorage.removeItem(ae)}}):B=h.reject("Invalid arguments"),g(B,R),B}var Kt={_driver:"localStorageWrapper",_initStorage:dn,_support:Or(),iterate:rr,getItem:Cr,setItem:Fr,removeItem:Br,clear:yr,length:gr,key:mt,keys:nr,dropInstance:Lr},zr=function(R,x){return R===x||typeof R=="number"&&typeof x=="number"&&isNaN(R)&&isNaN(x)},sr=function(R,x){for(var C=R.length,B=0;B<C;){if(zr(R[B],x))return!0;B++}return!1},vr=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},pt={},ir={},Rt={INDEXEDDB:nt,WEBSQL:Lt,LOCALSTORAGE:Kt},Mr=[Rt.INDEXEDDB._driver,Rt.WEBSQL._driver,Rt.LOCALSTORAGE._driver],Yt=["dropInstance"],br=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Yt),qr={description:"",driver:Mr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ur(w,R){w[R]=function(){var x=arguments;return w.ready().then(function(){return w[R].apply(w,x)})}}function ar(){for(var w=1;w<arguments.length;w++){var R=arguments[w];if(R)for(var x in R)R.hasOwnProperty(x)&&(vr(R[x])?arguments[0][x]=R[x].slice():arguments[0][x]=R[x])}return arguments[0]}var Vt=function(){function w(R){i(this,w);for(var x in Rt)if(Rt.hasOwnProperty(x)){var C=Rt[x],B=C._driver;this[x]=B,pt[B]||this.defineDriver(C)}this._defaultConfig=ar({},qr),this._config=ar({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(x){if((typeof x>"u"?"undefined":s(x))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var C in x){if(C==="storeName"&&(x[C]=x[C].replace(/\W/g,"_")),C==="version"&&typeof x[C]!="number")return new Error("Database version must be a number.");this._config[C]=x[C]}return"driver"in x&&x.driver?this.setDriver(this._config.driver):!0}else return typeof x=="string"?this._config[x]:this._config},w.prototype.defineDriver=function(x,C,B){var N=new h(function(Q,ae){try{var ue=x._driver,de=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!x._driver){ae(de);return}for(var ye=br.concat("_initStorage"),we=0,Ae=ye.length;we<Ae;we++){var Ne=ye[we],Be=!sr(Yt,Ne);if((Be||x[Ne])&&typeof x[Ne]!="function"){ae(de);return}}var Ke=function(){for(var jt=function(pn){return function(){var Wr=new Error("Method "+pn+" is not implemented by the current driver"),Zt=h.reject(Wr);return g(Zt,arguments[arguments.length-1]),Zt}},Ot=0,_r=Yt.length;Ot<_r;Ot++){var Er=Yt[Ot];x[Er]||(x[Er]=jt(Er))}};Ke();var ze=function(jt){pt[ue]&&console.info("Redefining LocalForage driver: "+ue),pt[ue]=x,ir[ue]=jt,Q()};"_support"in x?x._support&&typeof x._support=="function"?x._support().then(ze,ae):ze(!!x._support):ze(!0)}catch(at){ae(at)}});return p(N,C,B),N},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(x,C,B){var N=pt[x]?h.resolve(pt[x]):h.reject(new Error("Driver not found."));return p(N,C,B),N},w.prototype.getSerializer=function(x){var C=h.resolve(At);return p(C,x),C},w.prototype.ready=function(x){var C=this,B=C._driverSet.then(function(){return C._ready===null&&(C._ready=C._initDriver()),C._ready});return p(B,x,x),B},w.prototype.setDriver=function(x,C,B){var N=this;vr(x)||(x=[x]);var Q=this._getSupportedDrivers(x);function ae(){N._config.driver=N.driver()}function ue(we){return N._extend(we),ae(),N._ready=N._initStorage(N._config),N._ready}function de(we){return function(){var Ae=0;function Ne(){for(;Ae<we.length;){var Be=we[Ae];return Ae++,N._dbInfo=null,N._ready=null,N.getDriver(Be).then(ue).catch(Ne)}ae();var Ke=new Error("No available storage method found.");return N._driverSet=h.reject(Ke),N._driverSet}return Ne()}}var ye=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=ye.then(function(){var we=Q[0];return N._dbInfo=null,N._ready=null,N.getDriver(we).then(function(Ae){N._driver=Ae._driver,ae(),N._wrapLibraryMethodsWithReady(),N._initDriver=de(Q)})}).catch(function(){ae();var we=new Error("No available storage method found.");return N._driverSet=h.reject(we),N._driverSet}),p(this._driverSet,C,B),this._driverSet},w.prototype.supports=function(x){return!!ir[x]},w.prototype._extend=function(x){ar(this,x)},w.prototype._getSupportedDrivers=function(x){for(var C=[],B=0,N=x.length;B<N;B++){var Q=x[B];this.supports(Q)&&C.push(Q)}return C},w.prototype._wrapLibraryMethodsWithReady=function(){for(var x=0,C=br.length;x<C;x++)Ur(this,br[x])},w.prototype.createInstance=function(x){return new w(x)},w}(),wr=new Vt;r.exports=wr},{3:3}]},{},[4])(4)})}),Do=xn(function(a,e){/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t){a.exports=t()})(function(){return function t(r,n,s){function i(l,y){if(!n[l]){if(!r[l]){var h=typeof Ft=="function"&&Ft;if(!y&&h)return h(l,!0);if(o)return o(l,!0);var g=new Error("Cannot find module '"+l+"'");throw g.code="MODULE_NOT_FOUND",g}var p=n[l]={exports:{}};r[l][0].call(p.exports,function(E){var b=r[l][1][E];return i(b||E)},p,p.exports,t,r,n,s)}return n[l].exports}for(var o=typeof Ft=="function"&&Ft,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,r,n){var s=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var l,y,h,g,p,E,b,T=[],k=0,P=u.length,j=P,F=s.getTypeOf(u)!=="string";k<u.length;)j=P-k,h=F?(l=u[k++],y=k<P?u[k++]:0,k<P?u[k++]:0):(l=u.charCodeAt(k++),y=k<P?u.charCodeAt(k++):0,k<P?u.charCodeAt(k++):0),g=l>>2,p=(3&l)<<4|y>>4,E=1<j?(15&y)<<2|h>>6:64,b=2<j?63&h:64,T.push(o.charAt(g)+o.charAt(p)+o.charAt(E)+o.charAt(b));return T.join("")},n.decode=function(u){var l,y,h,g,p,E,b=0,T=0,k="data:";if(u.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var P,j=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&j--,u.charAt(u.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=i.uint8array?new Uint8Array(0|j):new Array(0|j);b<u.length;)l=o.indexOf(u.charAt(b++))<<2|(g=o.indexOf(u.charAt(b++)))>>4,y=(15&g)<<4|(p=o.indexOf(u.charAt(b++)))>>2,h=(3&p)<<6|(E=o.indexOf(u.charAt(b++))),P[T++]=l,p!==64&&(P[T++]=y),E!==64&&(P[T++]=h);return P}},{"./support":30,"./utils":32}],2:[function(t,r,n){var s=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(y,h,g,p,E){this.compressedSize=y,this.uncompressedSize=h,this.crc32=g,this.compression=p,this.compressedContent=E}l.prototype={getContentWorker:function(){var y=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return y.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(y,h,g){return y.pipe(new o).pipe(new u("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var s=t("./utils"),i=function(){for(var o,u=[],l=0;l<256;l++){o=l;for(var y=0;y<8;y++)o=1&o?3988292384^o>>>1:o>>>1;u[l]=o}return u}();r.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(l,y,h,g){var p=i,E=g+h;l^=-1;for(var b=g;b<E;b++)l=l>>>8^p[255&(l^y[b])];return-1^l}(0|u,o,o.length,0):function(l,y,h,g){var p=i,E=g+h;l^=-1;for(var b=g;b<E;b++)l=l>>>8^p[255&(l^y.charCodeAt(b))];return-1^l}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),o=t("./utils"),u=t("./stream/GenericWorker"),l=s?"uint8array":"array";function y(h,g){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}n.magic="\b\0",o.inherits(y,u),y.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,h.data),!1)},y.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},n.compressWorker=function(h){return new y("Deflate",h)},n.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function s(p,E){var b,T="";for(b=0;b<E;b++)T+=String.fromCharCode(255&p),p>>>=8;return T}function i(p,E,b,T,k,P){var j,F,D=p.file,H=p.compression,z=P!==l.utf8encode,Z=o.transformTo("string",P(D.name)),G=o.transformTo("string",l.utf8encode(D.name)),ce=D.comment,be=o.transformTo("string",P(ce)),A=o.transformTo("string",l.utf8encode(ce)),W=G.length!==D.name.length,v=A.length!==ce.length,J="",Se="",ee="",Te=D.dir,le=D.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};E&&!b||(fe.crc32=p.crc32,fe.compressedSize=p.compressedSize,fe.uncompressedSize=p.uncompressedSize);var L=0;E&&(L|=8),z||!W&&!v||(L|=2048);var U=0,ke=0;Te&&(U|=16),k==="UNIX"?(ke=798,U|=function(pe,We){var Ze=pe;return pe||(Ze=We?16893:33204),(65535&Ze)<<16}(D.unixPermissions,Te)):(ke=20,U|=function(pe){return 63&(pe||0)}(D.dosPermissions)),j=le.getUTCHours(),j<<=6,j|=le.getUTCMinutes(),j<<=5,j|=le.getUTCSeconds()/2,F=le.getUTCFullYear()-1980,F<<=4,F|=le.getUTCMonth()+1,F<<=5,F|=le.getUTCDate(),W&&(Se=s(1,1)+s(y(Z),4)+G,J+="up"+s(Se.length,2)+Se),v&&(ee=s(1,1)+s(y(be),4)+A,J+="uc"+s(ee.length,2)+ee);var ve="";return ve+=`
\0`,ve+=s(L,2),ve+=H.magic,ve+=s(j,2),ve+=s(F,2),ve+=s(fe.crc32,4),ve+=s(fe.compressedSize,4),ve+=s(fe.uncompressedSize,4),ve+=s(Z.length,2),ve+=s(J.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ve+Z+J,dirRecord:h.CENTRAL_FILE_HEADER+s(ke,2)+ve+s(be.length,2)+"\0\0\0\0"+s(U,4)+s(T,4)+Z+J+be}}var o=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),y=t("../crc32"),h=t("../signature");function g(p,E,b,T){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(g,u),g.prototype.push=function(p){var E=p.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,u.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:b?(E+100*(b-T-1))/b:100}}))},g.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var E=this.streamFiles&&!p.file.dir;if(E){var b=i(p,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(p){this.accumulate=!1;var E=this.streamFiles&&!p.file.dir,b=i(p,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),E)this.push({data:function(T){return h.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var p=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var b=this.bytesWritten-p,T=function(k,P,j,F,D){var H=o.transformTo("string",D(F));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(k,2)+s(k,2)+s(P,4)+s(j,4)+s(H.length,2)+H}(this.dirRecords.length,b,p,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(p){this._sources.push(p);var E=this;return p.on("data",function(b){E.processChunk(b)}),p.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),p.on("error",function(b){E.error(b)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(p){var E=this._sources;if(!u.prototype.error.call(this,p))return!1;for(var b=0;b<E.length;b++)try{E[b].error(p)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var p=this._sources,E=0;E<p.length;E++)p[E].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var s=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(o,u,l){var y=new i(u.streamFiles,l,u.platform,u.encodeFileName),h=0;try{o.forEach(function(g,p){h++;var E=function(P,j){var F=P||j,D=s[F];if(!D)throw new Error(F+" is not a valid compression method !");return D}(p.options.compression,u.compression),b=p.options.compressionOptions||u.compressionOptions||{},T=p.dir,k=p.date;p._compressWorker(E,b).withStreamInfo("file",{name:g,dir:T,date:k,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(y)}),y.entriesCount=h}catch(g){y.error(g)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(i,o){return new s().loadAsync(i,o)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var s=t("./utils"),i=t("./external"),o=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),y=t("./nodejsUtils");function h(g){return new i.Promise(function(p,E){var b=g.decompressed.getContentWorker().pipe(new l);b.on("error",function(T){E(T)}).on("end",function(){b.streamInfo.crc32!==g.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(g,p){var E=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),y.isNode&&y.isStream(g)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,p.optimizedBinaryString,p.base64).then(function(b){var T=new u(p);return T.load(b),T}).then(function(b){var T=[i.Promise.resolve(b)],k=b.files;if(p.checkCRC32)for(var P=0;P<k.length;P++)T.push(h(k[P]));return i.Promise.all(T)}).then(function(b){for(var T=b.shift(),k=T.files,P=0;P<k.length;P++){var j=k[P],F=j.fileNameStr,D=s.resolve(j.fileNameStr);E.file(D,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:p.createFolders}),j.dir||(E.file(D).unsafeOriginalName=F)}return T.zipComment.length&&(E.comment=T.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var s=t("../utils"),i=t("../stream/GenericWorker");function o(u,l){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,i),o.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(y){l.push({data:y,meta:{percent:0}})}).on("error",function(y){l.isPaused?this.generatedError=y:l.error(y)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var s=t("readable-stream").Readable;function i(o,u,l){s.call(this,u),this._helper=o;var y=this;o.on("data",function(h,g){y.push(h)||y._helper.pause(),l&&l(g)}).on("error",function(h){y.emit("error",h)}).on("end",function(){y.push(null)})}t("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof ie<"u",newBufferFrom:function(s,i){if(ie.from&&ie.from!==Uint8Array.from)return ie.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new ie(s,i)},allocBuffer:function(s){if(ie.alloc)return ie.alloc(s);var i=new ie(s);return i.fill(0),i},isBuffer:function(s){return ie.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,n){function s(D,H,z){var Z,G=o.getTypeOf(H),ce=o.extend(z||{},y);ce.date=ce.date||new Date,ce.compression!==null&&(ce.compression=ce.compression.toUpperCase()),typeof ce.unixPermissions=="string"&&(ce.unixPermissions=parseInt(ce.unixPermissions,8)),ce.unixPermissions&&16384&ce.unixPermissions&&(ce.dir=!0),ce.dosPermissions&&16&ce.dosPermissions&&(ce.dir=!0),ce.dir&&(D=k(D)),ce.createFolders&&(Z=T(D))&&P.call(this,Z,!0);var be=G==="string"&&ce.binary===!1&&ce.base64===!1;z&&z.binary!==void 0||(ce.binary=!be),(H instanceof h&&H.uncompressedSize===0||ce.dir||!H||H.length===0)&&(ce.base64=!1,ce.binary=!0,H="",ce.compression="STORE",G="string");var A=null;A=H instanceof h||H instanceof u?H:E.isNode&&E.isStream(H)?new b(D,H):o.prepareContent(D,H,ce.binary,ce.optimizedBinaryString,ce.base64);var W=new g(D,A,ce);this.files[D]=W}var i=t("./utf8"),o=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),y=t("./defaults"),h=t("./compressedObject"),g=t("./zipObject"),p=t("./generate"),E=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),T=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var H=D.lastIndexOf("/");return 0<H?D.substring(0,H):""},k=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},P=function(D,H){return H=H!==void 0?H:y.createFolders,D=k(D),this.files[D]||s.call(this,D,null,{dir:!0,createFolders:H}),this.files[D]};function j(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var H,z,Z;for(H in this.files)Z=this.files[H],(z=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&D(z,Z)},filter:function(D){var H=[];return this.forEach(function(z,Z){D(z,Z)&&H.push(Z)}),H},file:function(D,H,z){if(arguments.length!==1)return D=this.root+D,s.call(this,D,H,z),this;if(j(D)){var Z=D;return this.filter(function(ce,be){return!be.dir&&Z.test(ce)})}var G=this.files[this.root+D];return G&&!G.dir?G:null},folder:function(D){if(!D)return this;if(j(D))return this.filter(function(G,ce){return ce.dir&&D.test(G)});var H=this.root+D,z=P.call(this,H),Z=this.clone();return Z.root=z.name,Z},remove:function(D){D=this.root+D;var H=this.files[D];if(H||(D.slice(-1)!=="/"&&(D+="/"),H=this.files[D]),H&&!H.dir)delete this.files[D];else for(var z=this.filter(function(G,ce){return ce.name.slice(0,D.length)===D}),Z=0;Z<z.length;Z++)delete this.files[z[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var H,z={};try{if((z=o.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");o.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var Z=z.comment||this.comment||"";H=p.generateWorker(this,z,Z)}catch(G){(H=new u("error")).error(G)}return new l(H,z.type||"string",z.mimeType)},generateAsync:function(D,H){return this.generateInternalStream(D).accumulate(H)},generateNodeStream:function(D,H){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(H)}};r.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),l=o.charCodeAt(1),y=o.charCodeAt(2),h=o.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===l&&this.data[g+2]===y&&this.data[g+3]===h)return g-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),l=o.charCodeAt(1),y=o.charCodeAt(2),h=o.charCodeAt(3),g=this.readData(4);return u===g[0]&&l===g[1]&&y===g[2]&&h===g[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var s=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,l=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,n){var s=t("./Uint8ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var s=t("./ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var s=t("../utils"),i=t("../support"),o=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),y=t("./Uint8ArrayReader");r.exports=function(h){var g=s.getTypeOf(h);return s.checkSupport(g),g!=="string"||i.uint8array?g==="nodebuffer"?new l(h):i.uint8array?new y(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var s=t("./GenericWorker"),i=t("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var s=t("./GenericWorker"),i=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,i),o.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}i.prototype.processChunk.call(this,u)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(u){i.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(y){l.dataIsReady=!0,l.data=y,l.max=y&&y.length||0,l.type=s.getTypeOf(y),l.isPaused||l._tickAndRepeat()},function(y){l.error(y)})}s.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(u){o.processChunk(u)}),i.on("end",function(){o.end()}),i.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=s},{}],29:[function(t,r,n){var s=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),u=t("../base64"),l=t("../support"),y=t("../external"),h=null;if(l.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(E,b){return new y.Promise(function(T,k){var P=[],j=E._internalType,F=E._outputType,D=E._mimeType;E.on("data",function(H,z){P.push(H),b&&b(z)}).on("error",function(H){P=[],k(H)}).on("end",function(){try{var H=function(z,Z,G){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",Z),G);case"base64":return u.encode(Z);default:return s.transformTo(z,Z)}}(F,function(z,Z){var G,ce=0,be=null,A=0;for(G=0;G<Z.length;G++)A+=Z[G].length;switch(z){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(be=new Uint8Array(A),G=0;G<Z.length;G++)be.set(Z[G],ce),ce+=Z[G].length;return be;case"nodebuffer":return ie.concat(Z);default:throw new Error("concat : unsupported type '"+z+"'")}}(j,P),D);T(H)}catch(z){k(z)}P=[]}).resume()})}function p(E,b,T){var k=b;switch(b){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=b,this._mimeType=T,s.checkSupport(k),this._worker=E.pipe(new i(k)),E.lock()}catch(P){this._worker=new o("error"),this._worker.error(P)}}p.prototype={accumulate:function(E){return g(this,E)},on:function(E,b){var T=this;return E==="data"?this._worker.on(E,function(k){b.call(T,k.data,k.meta)}):this._worker.on(E,function(){s.delay(b,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof ie<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var s=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),y=0;y<256;y++)l[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;l[254]=l[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}n.utf8encode=function(p){return i.nodebuffer?o.newBufferFrom(p,"utf-8"):function(E){var b,T,k,P,j,F=E.length,D=0;for(P=0;P<F;P++)(64512&(T=E.charCodeAt(P)))==55296&&P+1<F&&(64512&(k=E.charCodeAt(P+1)))==56320&&(T=65536+(T-55296<<10)+(k-56320),P++),D+=T<128?1:T<2048?2:T<65536?3:4;for(b=i.uint8array?new Uint8Array(D):new Array(D),P=j=0;j<D;P++)(64512&(T=E.charCodeAt(P)))==55296&&P+1<F&&(64512&(k=E.charCodeAt(P+1)))==56320&&(T=65536+(T-55296<<10)+(k-56320),P++),T<128?b[j++]=T:(T<2048?b[j++]=192|T>>>6:(T<65536?b[j++]=224|T>>>12:(b[j++]=240|T>>>18,b[j++]=128|T>>>12&63),b[j++]=128|T>>>6&63),b[j++]=128|63&T);return b}(p)},n.utf8decode=function(p){return i.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(E){var b,T,k,P,j=E.length,F=new Array(2*j);for(b=T=0;b<j;)if((k=E[b++])<128)F[T++]=k;else if(4<(P=l[k]))F[T++]=65533,b+=P-1;else{for(k&=P===2?31:P===3?15:7;1<P&&b<j;)k=k<<6|63&E[b++],P--;1<P?F[T++]=65533:k<65536?F[T++]=k:(k-=65536,F[T++]=55296|k>>10&1023,F[T++]=56320|1023&k)}return F.length!==T&&(F.subarray?F=F.subarray(0,T):F.length=T),s.applyFromCharCode(F)}(p=s.transformTo(i.uint8array?"uint8array":"array",p))},s.inherits(h,u),h.prototype.processChunk=function(p){var E=s.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=E;(E=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),E.set(b,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var T=function(P,j){var F;for((j=j||P.length)>P.length&&(j=P.length),F=j-1;0<=F&&(192&P[F])==128;)F--;return F<0||F===0?j:F+l[P[F]]>j?F:j}(E),k=E;T!==E.length&&(i.uint8array?(k=E.subarray(0,T),this.leftOver=E.subarray(T,E.length)):(k=E.slice(0,T),this.leftOver=E.slice(T,E.length))),this.push({data:n.utf8decode(k),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,s.inherits(g,u),g.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var s=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),u=t("./external");function l(b){return b}function y(b,T){for(var k=0;k<b.length;++k)T[k]=255&b.charCodeAt(k);return T}t("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(b),k.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,T,k){var P=[],j=0,F=b.length;if(F<=k)return String.fromCharCode.apply(null,b);for(;j<F;)T==="array"||T==="nodebuffer"?P.push(String.fromCharCode.apply(null,b.slice(j,Math.min(j+k,F)))):P.push(String.fromCharCode.apply(null,b.subarray(j,Math.min(j+k,F)))),j+=k;return P.join("")},stringifyByChar:function(b){for(var T="",k=0;k<b.length;k++)T+=String.fromCharCode(b[k]);return T},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function g(b){var T=65536,k=n.getTypeOf(b),P=!0;if(k==="uint8array"?P=h.applyCanBeUsed.uint8array:k==="nodebuffer"&&(P=h.applyCanBeUsed.nodebuffer),P)for(;1<T;)try{return h.stringifyByChunk(b,k,T)}catch{T=Math.floor(T/2)}return h.stringifyByChar(b)}function p(b,T){for(var k=0;k<b.length;k++)T[k]=b[k];return T}n.applyFromCharCode=g;var E={};E.string={string:l,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return E.string.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:function(b){return y(b,o.allocBuffer(b.length))}},E.array={string:g,array:l,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},E.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return p(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:l,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},E.uint8array={string:g,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:l,nodebuffer:function(b){return o.newBufferFrom(b)}},E.nodebuffer={string:g,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return E.nodebuffer.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:l},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var k=n.getTypeOf(T);return E[k][b](T)},n.resolve=function(b){for(var T=b.split("/"),k=[],P=0;P<T.length;P++){var j=T[P];j==="."||j===""&&P!==0&&P!==T.length-1||(j===".."?k.pop():k.push(j))}return k.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,k,P="";for(k=0;k<(b||"").length;k++)P+="\\x"+((T=b.charCodeAt(k))<16?"0":"")+T.toString(16).toUpperCase();return P},n.delay=function(b,T,k){setImmediate(function(){b.apply(k||null,T||[])})},n.inherits=function(b,T){function k(){}k.prototype=T.prototype,b.prototype=new k},n.extend=function(){var b,T,k={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&k[T]===void 0&&(k[T]=arguments[b][T]);return k},n.prepareContent=function(b,T,k,P,j){return u.Promise.resolve(T).then(function(F){return s.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new u.Promise(function(D,H){var z=new FileReader;z.onload=function(Z){D(Z.target.result)},z.onerror=function(Z){H(Z.target.error)},z.readAsArrayBuffer(F)}):F}).then(function(F){var D=n.getTypeOf(F);return D?(D==="arraybuffer"?F=n.transformTo("uint8array",F):D==="string"&&(j?F=i.decode(F):k&&P!==!0&&(F=function(H){return y(H,s.uint8array?new Uint8Array(H.length):new Array(H.length))}(F))),F):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),u=t("./zipEntry"),l=t("./support");function y(h){this.files=[],this.loadOptions=h}y.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(g)+", expected "+i.pretty(h)+")")}},isSignature:function(h,g){var p=this.reader.index;this.reader.setIndex(h);var E=this.reader.readString(4)===g;return this.reader.setIndex(p),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=l.uint8array?"uint8array":"array",p=i.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,p,E=this.zip64EndOfCentralSize-44;0<E;)h=this.reader.readInt(2),g=this.reader.readInt(4),p=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var E=g-p;if(0<E)this.isSignature(g,o.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),y=t("./compressions"),h=t("./support");function g(p,E){this.options=p,this.loadOptions=E}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var E,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(T){for(var k in y)if(Object.prototype.hasOwnProperty.call(y,k)&&y[k].magic===T)return y[k];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,E,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var E=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(E),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var E,b,T,k=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<k;)E=p.readInt(2),b=p.readInt(2),T=p.readData(b),this.extraFields[E]={id:E,length:b,value:T};p.setIndex(k)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var b=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var k=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var E=s(p.value);return E.readInt(1)!==1||u(this.fileName)!==E.readInt(4)?null:l.utf8decode(E.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var E=s(p.value);return E.readInt(1)!==1||u(this.fileComment)!==E.readInt(4)?null:l.utf8decode(E.readData(p.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function s(E,b,T){this.name=E,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),y=t("./stream/GenericWorker");s.prototype={internalStream:function(E){var b=null,T="string";try{if(!E)throw new Error("No output type specified.");var k=(T=E.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),b=this._decompressWorker();var P=!this._dataBinary;P&&!k&&(b=b.pipe(new u.Utf8EncodeWorker)),!P&&k&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(j){(b=new y("error")).error(j)}return new i(b,T,"")},async:function(E,b){return this.internalStream(E).accumulate(b)},nodeStream:function(E,b){return this.internalStream(E||"nodebuffer").toNodejsStream(b)},_compressWorker:function(E,b){if(this._data instanceof l&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(T,E,b)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof y?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)s.prototype[h[p]]=g;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(s){var i,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var l=0,y=new u(E),h=s.document.createTextNode("");y.observe(h,{characterData:!0}),i=function(){h.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){E(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(E,0)};else{var g=new s.MessageChannel;g.port1.onmessage=E,i=function(){g.port2.postMessage(0)}}var p=[];function E(){var b,T;o=!0;for(var k=p.length;k;){for(T=p,p=[],b=-1;++b<k;)T[b]();k=p.length}o=!1}r.exports=function(b){p.push(b)!==1||o||i()}}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var s=t("immediate");function i(){}var o={},u=["REJECTED"],l=["FULFILLED"],y=["PENDING"];function h(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,k!==i&&b(this,k)}function g(k,P,j){this.promise=k,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function p(k,P,j){s(function(){var F;try{F=P(j)}catch(D){return o.reject(k,D)}F===k?o.reject(k,new TypeError("Cannot resolve promise with itself")):o.resolve(k,F)})}function E(k){var P=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof P=="function")return function(){P.apply(k,arguments)}}function b(k,P){var j=!1;function F(z){j||(j=!0,o.reject(k,z))}function D(z){j||(j=!0,o.resolve(k,z))}var H=T(function(){P(D,F)});H.status==="error"&&F(H.value)}function T(k,P){var j={};try{j.value=k(P),j.status="success"}catch(F){j.status="error",j.value=F}return j}(r.exports=h).prototype.finally=function(k){if(typeof k!="function")return this;var P=this.constructor;return this.then(function(j){return P.resolve(k()).then(function(){return j})},function(j){return P.resolve(k()).then(function(){throw j})})},h.prototype.catch=function(k){return this.then(null,k)},h.prototype.then=function(k,P){if(typeof k!="function"&&this.state===l||typeof P!="function"&&this.state===u)return this;var j=new this.constructor(i);return this.state!==y?p(j,this.state===l?k:P,this.outcome):this.queue.push(new g(j,k,P)),j},g.prototype.callFulfilled=function(k){o.resolve(this.promise,k)},g.prototype.otherCallFulfilled=function(k){p(this.promise,this.onFulfilled,k)},g.prototype.callRejected=function(k){o.reject(this.promise,k)},g.prototype.otherCallRejected=function(k){p(this.promise,this.onRejected,k)},o.resolve=function(k,P){var j=T(E,P);if(j.status==="error")return o.reject(k,j.value);var F=j.value;if(F)b(k,F);else{k.state=l,k.outcome=P;for(var D=-1,H=k.queue.length;++D<H;)k.queue[D].callFulfilled(P)}return k},o.reject=function(k,P){k.state=u,k.outcome=P;for(var j=-1,F=k.queue.length;++j<F;)k.queue[j].callRejected(P);return k},h.resolve=function(k){return k instanceof this?k:o.resolve(new this(i),k)},h.reject=function(k){var P=new this(i);return o.reject(P,k)},h.all=function(k){var P=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=k.length,F=!1;if(!j)return this.resolve([]);for(var D=new Array(j),H=0,z=-1,Z=new this(i);++z<j;)G(k[z],z);return Z;function G(ce,be){P.resolve(ce).then(function(A){D[be]=A,++H!==j||F||(F=!0,o.resolve(Z,D))},function(A){F||(F=!0,o.reject(Z,A))})}},h.race=function(k){var P=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=k.length,F=!1;if(!j)return this.resolve([]);for(var D=-1,H=new this(i);++D<j;)z=k[D],P.resolve(z).then(function(Z){F||(F=!0,o.resolve(H,Z))},function(Z){F||(F=!0,o.reject(H,Z))});var z;return H}},{immediate:36}],38:[function(t,r,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var s=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),y=Object.prototype.toString,h=0,g=-1,p=0,E=8;function b(k){if(!(this instanceof b))return new b(k);this.options=i.assign({level:g,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},k||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var j=s.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(j!==h)throw new Error(u[j]);if(P.header&&s.deflateSetHeader(this.strm,P.header),P.dictionary){var F;if(F=typeof P.dictionary=="string"?o.string2buf(P.dictionary):y.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(j=s.deflateSetDictionary(this.strm,F))!==h)throw new Error(u[j]);this._dict_set=!0}}function T(k,P){var j=new b(P);if(j.push(k,!0),j.err)throw j.msg||u[j.err];return j.result}b.prototype.push=function(k,P){var j,F,D=this.strm,H=this.options.chunkSize;if(this.ended)return!1;F=P===~~P?P:P===!0?4:0,typeof k=="string"?D.input=o.string2buf(k):y.call(k)==="[object ArrayBuffer]"?D.input=new Uint8Array(k):D.input=k,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new i.Buf8(H),D.next_out=0,D.avail_out=H),(j=s.deflate(D,F))!==1&&j!==h)return this.onEnd(j),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(D.output,D.next_out))):this.onData(i.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&j!==1);return F===4?(j=s.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===h):F!==2||(this.onEnd(h),!(D.avail_out=0))},b.prototype.onData=function(k){this.chunks.push(k)},b.prototype.onEnd=function(k){k===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(k,P){return(P=P||{}).raw=!0,T(k,P)},n.gzip=function(k,P){return(P=P||{}).gzip=!0,T(k,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var s=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),y=t("./zlib/zstream"),h=t("./zlib/gzheader"),g=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&!(15&T.windowBits)&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var k=s.inflateInit2(this.strm,T.windowBits);if(k!==u.Z_OK)throw new Error(l[k]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function E(b,T){var k=new p(T);if(k.push(b,!0),k.err)throw k.msg||l[k.err];return k.result}p.prototype.push=function(b,T){var k,P,j,F,D,H,z=this.strm,Z=this.options.chunkSize,G=this.options.dictionary,ce=!1;if(this.ended)return!1;P=T===~~T?T:T===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?z.input=o.binstring2buf(b):g.call(b)==="[object ArrayBuffer]"?z.input=new Uint8Array(b):z.input=b,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new i.Buf8(Z),z.next_out=0,z.avail_out=Z),(k=s.inflate(z,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&G&&(H=typeof G=="string"?o.string2buf(G):g.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,k=s.inflateSetDictionary(this.strm,H)),k===u.Z_BUF_ERROR&&ce===!0&&(k=u.Z_OK,ce=!1),k!==u.Z_STREAM_END&&k!==u.Z_OK)return this.onEnd(k),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&k!==u.Z_STREAM_END&&(z.avail_in!==0||P!==u.Z_FINISH&&P!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(z.output,z.next_out),F=z.next_out-j,D=o.buf2string(z.output,j),z.next_out=F,z.avail_out=Z-F,F&&i.arraySet(z.output,z.output,j,F,0),this.onData(D)):this.onData(i.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(ce=!0)}while((0<z.avail_in||z.avail_out===0)&&k!==u.Z_STREAM_END);return k===u.Z_STREAM_END&&(P=u.Z_FINISH),P===u.Z_FINISH?(k=s.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===u.Z_OK):P!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(z.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=p,n.inflate=E,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,E(b,T)},n.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var y=l.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var h in y)y.hasOwnProperty(h)&&(u[h]=y[h])}}return u},n.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var i={arraySet:function(u,l,y,h,g){if(l.subarray&&u.subarray)u.set(l.subarray(y,y+h),g);else for(var p=0;p<h;p++)u[g+p]=l[y+p]},flattenChunks:function(u){var l,y,h,g,p,E;for(l=h=0,y=u.length;l<y;l++)h+=u[l].length;for(E=new Uint8Array(h),l=g=0,y=u.length;l<y;l++)p=u[l],E.set(p,g),g+=p.length;return E}},o={arraySet:function(u,l,y,h,g){for(var p=0;p<h;p++)u[g+p]=l[y+p]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(t,r,n){var s=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function y(h,g){if(g<65537&&(h.subarray&&o||!h.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(h,g));for(var p="",E=0;E<g;E++)p+=String.fromCharCode(h[E]);return p}u[254]=u[254]=1,n.string2buf=function(h){var g,p,E,b,T,k=h.length,P=0;for(b=0;b<k;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<k&&(64512&(E=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),b++),P+=p<128?1:p<2048?2:p<65536?3:4;for(g=new s.Buf8(P),b=T=0;T<P;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<k&&(64512&(E=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),b++),p<128?g[T++]=p:(p<2048?g[T++]=192|p>>>6:(p<65536?g[T++]=224|p>>>12:(g[T++]=240|p>>>18,g[T++]=128|p>>>12&63),g[T++]=128|p>>>6&63),g[T++]=128|63&p);return g},n.buf2binstring=function(h){return y(h,h.length)},n.binstring2buf=function(h){for(var g=new s.Buf8(h.length),p=0,E=g.length;p<E;p++)g[p]=h.charCodeAt(p);return g},n.buf2string=function(h,g){var p,E,b,T,k=g||h.length,P=new Array(2*k);for(p=E=0;p<k;)if((b=h[p++])<128)P[E++]=b;else if(4<(T=u[b]))P[E++]=65533,p+=T-1;else{for(b&=T===2?31:T===3?15:7;1<T&&p<k;)b=b<<6|63&h[p++],T--;1<T?P[E++]=65533:b<65536?P[E++]=b:(b-=65536,P[E++]=55296|b>>10&1023,P[E++]=56320|1023&b)}return y(P,E)},n.utf8border=function(h,g){var p;for((g=g||h.length)>h.length&&(g=h.length),p=g-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?g:p+u[h[p]]>g?p:g}},{"./common":41}],43:[function(t,r,n){r.exports=function(s,i,o,u){for(var l=65535&s|0,y=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;y=y+(l=l+i[u++]|0)|0,--h;);l%=65521,y%=65521}return l|y<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var s=function(){for(var i,o=[],u=0;u<256;u++){i=u;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;o[u]=i}return o}();r.exports=function(i,o,u,l){var y=s,h=l+u;i^=-1;for(var g=l;g<h;g++)i=i>>>8^y[255&(i^o[g])];return-1^i}},{}],46:[function(t,r,n){var s,i=t("../utils/common"),o=t("./trees"),u=t("./adler32"),l=t("./crc32"),y=t("./messages"),h=0,g=4,p=0,E=-2,b=-1,T=4,k=2,P=8,j=9,F=286,D=30,H=19,z=2*F+1,Z=15,G=3,ce=258,be=ce+G+1,A=42,W=113,v=1,J=2,Se=3,ee=4;function Te(d,V){return d.msg=y[V],V}function le(d){return(d<<1)-(4<d?9:0)}function fe(d){for(var V=d.length;0<=--V;)d[V]=0}function L(d){var V=d.state,K=V.pending;K>d.avail_out&&(K=d.avail_out),K!==0&&(i.arraySet(d.output,V.pending_buf,V.pending_out,K,d.next_out),d.next_out+=K,V.pending_out+=K,d.total_out+=K,d.avail_out-=K,V.pending-=K,V.pending===0&&(V.pending_out=0))}function U(d,V){o._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,V),d.block_start=d.strstart,L(d.strm)}function ke(d,V){d.pending_buf[d.pending++]=V}function ve(d,V){d.pending_buf[d.pending++]=V>>>8&255,d.pending_buf[d.pending++]=255&V}function pe(d,V){var K,$,_=d.max_chain_length,O=d.strstart,ne=d.prev_length,re=d.nice_match,q=d.strstart>d.w_size-be?d.strstart-(d.w_size-be):0,he=d.window,ge=d.w_mask,me=d.prev,_e=d.strstart+ce,Fe=he[O+ne-1],De=he[O+ne];d.prev_length>=d.good_match&&(_>>=2),re>d.lookahead&&(re=d.lookahead);do if(he[(K=V)+ne]===De&&he[K+ne-1]===Fe&&he[K]===he[O]&&he[++K]===he[O+1]){O+=2,K++;do;while(he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&he[++O]===he[++K]&&O<_e);if($=ce-(_e-O),O=_e-ce,ne<$){if(d.match_start=V,re<=(ne=$))break;Fe=he[O+ne-1],De=he[O+ne]}}while((V=me[V&ge])>q&&--_!=0);return ne<=d.lookahead?ne:d.lookahead}function We(d){var V,K,$,_,O,ne,re,q,he,ge,me=d.w_size;do{if(_=d.window_size-d.lookahead-d.strstart,d.strstart>=me+(me-be)){for(i.arraySet(d.window,d.window,me,me,0),d.match_start-=me,d.strstart-=me,d.block_start-=me,V=K=d.hash_size;$=d.head[--V],d.head[V]=me<=$?$-me:0,--K;);for(V=K=me;$=d.prev[--V],d.prev[V]=me<=$?$-me:0,--K;);_+=me}if(d.strm.avail_in===0)break;if(ne=d.strm,re=d.window,q=d.strstart+d.lookahead,he=_,ge=void 0,ge=ne.avail_in,he<ge&&(ge=he),K=ge===0?0:(ne.avail_in-=ge,i.arraySet(re,ne.input,ne.next_in,ge,q),ne.state.wrap===1?ne.adler=u(ne.adler,re,ge,q):ne.state.wrap===2&&(ne.adler=l(ne.adler,re,ge,q)),ne.next_in+=ge,ne.total_in+=ge,ge),d.lookahead+=K,d.lookahead+d.insert>=G)for(O=d.strstart-d.insert,d.ins_h=d.window[O],d.ins_h=(d.ins_h<<d.hash_shift^d.window[O+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[O+G-1])&d.hash_mask,d.prev[O&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=O,O++,d.insert--,!(d.lookahead+d.insert<G)););}while(d.lookahead<be&&d.strm.avail_in!==0)}function Ze(d,V){for(var K,$;;){if(d.lookahead<be){if(We(d),d.lookahead<be&&V===h)return v;if(d.lookahead===0)break}if(K=0,d.lookahead>=G&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+G-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),K!==0&&d.strstart-K<=d.w_size-be&&(d.match_length=pe(d,K)),d.match_length>=G)if($=o._tr_tally(d,d.strstart-d.match_start,d.match_length-G),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=G){for(d.match_length--;d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+G-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart,--d.match_length!=0;);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else $=o._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if($&&(U(d,!1),d.strm.avail_out===0))return v}return d.insert=d.strstart<G-1?d.strstart:G-1,V===g?(U(d,!0),d.strm.avail_out===0?Se:ee):d.last_lit&&(U(d,!1),d.strm.avail_out===0)?v:J}function Ie(d,V){for(var K,$,_;;){if(d.lookahead<be){if(We(d),d.lookahead<be&&V===h)return v;if(d.lookahead===0)break}if(K=0,d.lookahead>=G&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+G-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=G-1,K!==0&&d.prev_length<d.max_lazy_match&&d.strstart-K<=d.w_size-be&&(d.match_length=pe(d,K),d.match_length<=5&&(d.strategy===1||d.match_length===G&&4096<d.strstart-d.match_start)&&(d.match_length=G-1)),d.prev_length>=G&&d.match_length<=d.prev_length){for(_=d.strstart+d.lookahead-G,$=o._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-G),d.lookahead-=d.prev_length-1,d.prev_length-=2;++d.strstart<=_&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+G-1])&d.hash_mask,K=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),--d.prev_length!=0;);if(d.match_available=0,d.match_length=G-1,d.strstart++,$&&(U(d,!1),d.strm.avail_out===0))return v}else if(d.match_available){if(($=o._tr_tally(d,0,d.window[d.strstart-1]))&&U(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return v}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&($=o._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<G-1?d.strstart:G-1,V===g?(U(d,!0),d.strm.avail_out===0?Se:ee):d.last_lit&&(U(d,!1),d.strm.avail_out===0)?v:J}function Oe(d,V,K,$,_){this.good_length=d,this.max_lazy=V,this.nice_length=K,this.max_chain=$,this.func=_}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*z),this.dyn_dtree=new i.Buf16(2*(2*D+1)),this.bl_tree=new i.Buf16(2*(2*H+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Z+1),this.heap=new i.Buf16(2*F+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*F+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qe(d){var V;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=k,(V=d.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?A:W,d.adler=V.wrap===2?0:1,V.last_flush=h,o._tr_init(V),p):Te(d,E)}function Qe(d){var V=qe(d);return V===p&&function(K){K.window_size=2*K.w_size,fe(K.head),K.max_lazy_match=s[K.level].max_lazy,K.good_match=s[K.level].good_length,K.nice_match=s[K.level].nice_length,K.max_chain_length=s[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=G-1,K.match_available=0,K.ins_h=0}(d.state),V}function nt(d,V,K,$,_,O){if(!d)return E;var ne=1;if(V===b&&(V=6),$<0?(ne=0,$=-$):15<$&&(ne=2,$-=16),_<1||j<_||K!==P||$<8||15<$||V<0||9<V||O<0||T<O)return Te(d,E);$===8&&($=9);var re=new Ue;return(d.state=re).strm=d,re.wrap=ne,re.gzhead=null,re.w_bits=$,re.w_size=1<<re.w_bits,re.w_mask=re.w_size-1,re.hash_bits=_+7,re.hash_size=1<<re.hash_bits,re.hash_mask=re.hash_size-1,re.hash_shift=~~((re.hash_bits+G-1)/G),re.window=new i.Buf8(2*re.w_size),re.head=new i.Buf16(re.hash_size),re.prev=new i.Buf16(re.w_size),re.lit_bufsize=1<<_+6,re.pending_buf_size=4*re.lit_bufsize,re.pending_buf=new i.Buf8(re.pending_buf_size),re.d_buf=1*re.lit_bufsize,re.l_buf=3*re.lit_bufsize,re.level=V,re.strategy=O,re.method=K,Qe(d)}s=[new Oe(0,0,0,0,function(d,V){var K=65535;for(K>d.pending_buf_size-5&&(K=d.pending_buf_size-5);;){if(d.lookahead<=1){if(We(d),d.lookahead===0&&V===h)return v;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var $=d.block_start+K;if((d.strstart===0||d.strstart>=$)&&(d.lookahead=d.strstart-$,d.strstart=$,U(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-be&&(U(d,!1),d.strm.avail_out===0))return v}return d.insert=0,V===g?(U(d,!0),d.strm.avail_out===0?Se:ee):(d.strstart>d.block_start&&(U(d,!1),d.strm.avail_out),v)}),new Oe(4,4,8,4,Ze),new Oe(4,5,16,8,Ze),new Oe(4,6,32,32,Ze),new Oe(4,4,16,16,Ie),new Oe(8,16,32,32,Ie),new Oe(8,16,128,128,Ie),new Oe(8,32,128,256,Ie),new Oe(32,128,258,1024,Ie),new Oe(32,258,258,4096,Ie)],n.deflateInit=function(d,V){return nt(d,V,P,15,8,0)},n.deflateInit2=nt,n.deflateReset=Qe,n.deflateResetKeep=qe,n.deflateSetHeader=function(d,V){return d&&d.state?d.state.wrap!==2?E:(d.state.gzhead=V,p):E},n.deflate=function(d,V){var K,$,_,O;if(!d||!d.state||5<V||V<0)return d?Te(d,E):E;if($=d.state,!d.output||!d.input&&d.avail_in!==0||$.status===666&&V!==g)return Te(d,d.avail_out===0?-5:E);if($.strm=d,K=$.last_flush,$.last_flush=V,$.status===A)if($.wrap===2)d.adler=0,ke($,31),ke($,139),ke($,8),$.gzhead?(ke($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),ke($,255&$.gzhead.time),ke($,$.gzhead.time>>8&255),ke($,$.gzhead.time>>16&255),ke($,$.gzhead.time>>24&255),ke($,$.level===9?2:2<=$.strategy||$.level<2?4:0),ke($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(ke($,255&$.gzhead.extra.length),ke($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(d.adler=l(d.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(ke($,0),ke($,0),ke($,0),ke($,0),ke($,0),ke($,$.level===9?2:2<=$.strategy||$.level<2?4:0),ke($,3),$.status=W);else{var ne=P+($.w_bits-8<<4)<<8;ne|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(ne|=32),ne+=31-ne%31,$.status=W,ve($,ne),$.strstart!==0&&(ve($,d.adler>>>16),ve($,65535&d.adler)),d.adler=1}if($.status===69)if($.gzhead.extra){for(_=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),L(d),_=$.pending,$.pending!==$.pending_buf_size));)ke($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){_=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),L(d),_=$.pending,$.pending===$.pending_buf_size)){O=1;break}O=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,ke($,O)}while(O!==0);$.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),O===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){_=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),L(d),_=$.pending,$.pending===$.pending_buf_size)){O=1;break}O=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,ke($,O)}while(O!==0);$.gzhead.hcrc&&$.pending>_&&(d.adler=l(d.adler,$.pending_buf,$.pending-_,_)),O===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&L(d),$.pending+2<=$.pending_buf_size&&(ke($,255&d.adler),ke($,d.adler>>8&255),d.adler=0,$.status=W)):$.status=W),$.pending!==0){if(L(d),d.avail_out===0)return $.last_flush=-1,p}else if(d.avail_in===0&&le(V)<=le(K)&&V!==g)return Te(d,-5);if($.status===666&&d.avail_in!==0)return Te(d,-5);if(d.avail_in!==0||$.lookahead!==0||V!==h&&$.status!==666){var re=$.strategy===2?function(q,he){for(var ge;;){if(q.lookahead===0&&(We(q),q.lookahead===0)){if(he===h)return v;break}if(q.match_length=0,ge=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ge&&(U(q,!1),q.strm.avail_out===0))return v}return q.insert=0,he===g?(U(q,!0),q.strm.avail_out===0?Se:ee):q.last_lit&&(U(q,!1),q.strm.avail_out===0)?v:J}($,V):$.strategy===3?function(q,he){for(var ge,me,_e,Fe,De=q.window;;){if(q.lookahead<=ce){if(We(q),q.lookahead<=ce&&he===h)return v;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=G&&0<q.strstart&&(me=De[_e=q.strstart-1])===De[++_e]&&me===De[++_e]&&me===De[++_e]){Fe=q.strstart+ce;do;while(me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&me===De[++_e]&&_e<Fe);q.match_length=ce-(Fe-_e),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=G?(ge=o._tr_tally(q,1,q.match_length-G),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ge=o._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ge&&(U(q,!1),q.strm.avail_out===0))return v}return q.insert=0,he===g?(U(q,!0),q.strm.avail_out===0?Se:ee):q.last_lit&&(U(q,!1),q.strm.avail_out===0)?v:J}($,V):s[$.level].func($,V);if(re!==Se&&re!==ee||($.status=666),re===v||re===Se)return d.avail_out===0&&($.last_flush=-1),p;if(re===J&&(V===1?o._tr_align($):V!==5&&(o._tr_stored_block($,0,0,!1),V===3&&(fe($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),L(d),d.avail_out===0))return $.last_flush=-1,p}return V!==g?p:$.wrap<=0?1:($.wrap===2?(ke($,255&d.adler),ke($,d.adler>>8&255),ke($,d.adler>>16&255),ke($,d.adler>>24&255),ke($,255&d.total_in),ke($,d.total_in>>8&255),ke($,d.total_in>>16&255),ke($,d.total_in>>24&255)):(ve($,d.adler>>>16),ve($,65535&d.adler)),L(d),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?p:1)},n.deflateEnd=function(d){var V;return d&&d.state?(V=d.state.status)!==A&&V!==69&&V!==73&&V!==91&&V!==103&&V!==W&&V!==666?Te(d,E):(d.state=null,V===W?Te(d,-3):p):E},n.deflateSetDictionary=function(d,V){var K,$,_,O,ne,re,q,he,ge=V.length;if(!d||!d.state||(O=(K=d.state).wrap)===2||O===1&&K.status!==A||K.lookahead)return E;for(O===1&&(d.adler=u(d.adler,V,ge,0)),K.wrap=0,ge>=K.w_size&&(O===0&&(fe(K.head),K.strstart=0,K.block_start=0,K.insert=0),he=new i.Buf8(K.w_size),i.arraySet(he,V,ge-K.w_size,K.w_size,0),V=he,ge=K.w_size),ne=d.avail_in,re=d.next_in,q=d.input,d.avail_in=ge,d.next_in=0,d.input=V,We(K);K.lookahead>=G;){for($=K.strstart,_=K.lookahead-(G-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[$+G-1])&K.hash_mask,K.prev[$&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=$,$++,--_;);K.strstart=$,K.lookahead=G-1,We(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=G-1,K.match_available=0,d.next_in=re,d.input=q,d.avail_in=ne,K.wrap=O,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(s,i){var o,u,l,y,h,g,p,E,b,T,k,P,j,F,D,H,z,Z,G,ce,be,A,W,v,J;o=s.state,u=s.next_in,v=s.input,l=u+(s.avail_in-5),y=s.next_out,J=s.output,h=y-(i-s.avail_out),g=y+(s.avail_out-257),p=o.dmax,E=o.wsize,b=o.whave,T=o.wnext,k=o.window,P=o.hold,j=o.bits,F=o.lencode,D=o.distcode,H=(1<<o.lenbits)-1,z=(1<<o.distbits)-1;e:do{j<15&&(P+=v[u++]<<j,j+=8,P+=v[u++]<<j,j+=8),Z=F[P&H];t:for(;;){if(P>>>=G=Z>>>24,j-=G,(G=Z>>>16&255)===0)J[y++]=65535&Z;else{if(!(16&G)){if(!(64&G)){Z=F[(65535&Z)+(P&(1<<G)-1)];continue t}if(32&G){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}ce=65535&Z,(G&=15)&&(j<G&&(P+=v[u++]<<j,j+=8),ce+=P&(1<<G)-1,P>>>=G,j-=G),j<15&&(P+=v[u++]<<j,j+=8,P+=v[u++]<<j,j+=8),Z=D[P&z];r:for(;;){if(P>>>=G=Z>>>24,j-=G,!(16&(G=Z>>>16&255))){if(!(64&G)){Z=D[(65535&Z)+(P&(1<<G)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(be=65535&Z,j<(G&=15)&&(P+=v[u++]<<j,(j+=8)<G&&(P+=v[u++]<<j,j+=8)),p<(be+=P&(1<<G)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(P>>>=G,j-=G,(G=y-h)<be){if(b<(G=be-G)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(W=k,(A=0)===T){if(A+=E-G,G<ce){for(ce-=G;J[y++]=k[A++],--G;);A=y-be,W=J}}else if(T<G){if(A+=E+T-G,(G-=T)<ce){for(ce-=G;J[y++]=k[A++],--G;);if(A=0,T<ce){for(ce-=G=T;J[y++]=k[A++],--G;);A=y-be,W=J}}}else if(A+=T-G,G<ce){for(ce-=G;J[y++]=k[A++],--G;);A=y-be,W=J}for(;2<ce;)J[y++]=W[A++],J[y++]=W[A++],J[y++]=W[A++],ce-=3;ce&&(J[y++]=W[A++],1<ce&&(J[y++]=W[A++]))}else{for(A=y-be;J[y++]=J[A++],J[y++]=J[A++],J[y++]=J[A++],2<(ce-=3););ce&&(J[y++]=J[A++],1<ce&&(J[y++]=J[A++]))}break}}break}}while(u<l&&y<g);u-=ce=j>>3,P&=(1<<(j-=ce<<3))-1,s.next_in=u,s.next_out=y,s.avail_in=u<l?l-u+5:5-(u-l),s.avail_out=y<g?g-y+257:257-(y-g),o.hold=P,o.bits=j}},{}],49:[function(t,r,n){var s=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),y=1,h=2,g=0,p=-2,E=1,b=852,T=592;function k(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(A){var W;return A&&A.state?(W=A.state,A.total_in=A.total_out=W.total=0,A.msg="",W.wrap&&(A.adler=1&W.wrap),W.mode=E,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new s.Buf32(b),W.distcode=W.distdyn=new s.Buf32(T),W.sane=1,W.back=-1,g):p}function F(A){var W;return A&&A.state?((W=A.state).wsize=0,W.whave=0,W.wnext=0,j(A)):p}function D(A,W){var v,J;return A&&A.state?(J=A.state,W<0?(v=0,W=-W):(v=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?p:(J.window!==null&&J.wbits!==W&&(J.window=null),J.wrap=v,J.wbits=W,F(A))):p}function H(A,W){var v,J;return A?(J=new P,(A.state=J).window=null,(v=D(A,W))!==g&&(A.state=null),v):p}var z,Z,G=!0;function ce(A){if(G){var W;for(z=new s.Buf32(512),Z=new s.Buf32(32),W=0;W<144;)A.lens[W++]=8;for(;W<256;)A.lens[W++]=9;for(;W<280;)A.lens[W++]=7;for(;W<288;)A.lens[W++]=8;for(l(y,A.lens,0,288,z,0,A.work,{bits:9}),W=0;W<32;)A.lens[W++]=5;l(h,A.lens,0,32,Z,0,A.work,{bits:5}),G=!1}A.lencode=z,A.lenbits=9,A.distcode=Z,A.distbits=5}function be(A,W,v,J){var Se,ee=A.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new s.Buf8(ee.wsize)),J>=ee.wsize?(s.arraySet(ee.window,W,v-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(J<(Se=ee.wsize-ee.wnext)&&(Se=J),s.arraySet(ee.window,W,v-J,Se,ee.wnext),(J-=Se)?(s.arraySet(ee.window,W,v-J,J,0),ee.wnext=J,ee.whave=ee.wsize):(ee.wnext+=Se,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=Se))),0}n.inflateReset=F,n.inflateReset2=D,n.inflateResetKeep=j,n.inflateInit=function(A){return H(A,15)},n.inflateInit2=H,n.inflate=function(A,W){var v,J,Se,ee,Te,le,fe,L,U,ke,ve,pe,We,Ze,Ie,Oe,Ue,qe,Qe,nt,d,V,K,$,_=0,O=new s.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return p;(v=A.state).mode===12&&(v.mode=13),Te=A.next_out,Se=A.output,fe=A.avail_out,ee=A.next_in,J=A.input,le=A.avail_in,L=v.hold,U=v.bits,ke=le,ve=fe,V=g;e:for(;;)switch(v.mode){case E:if(v.wrap===0){v.mode=13;break}for(;U<16;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(2&v.wrap&&L===35615){O[v.check=0]=255&L,O[1]=L>>>8&255,v.check=o(v.check,O,2,0),U=L=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&L)<<8)+(L>>8))%31){A.msg="incorrect header check",v.mode=30;break}if((15&L)!=8){A.msg="unknown compression method",v.mode=30;break}if(U-=4,d=8+(15&(L>>>=4)),v.wbits===0)v.wbits=d;else if(d>v.wbits){A.msg="invalid window size",v.mode=30;break}v.dmax=1<<d,A.adler=v.check=1,v.mode=512&L?10:12,U=L=0;break;case 2:for(;U<16;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(v.flags=L,(255&v.flags)!=8){A.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){A.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=L>>8&1),512&v.flags&&(O[0]=255&L,O[1]=L>>>8&255,v.check=o(v.check,O,2,0)),U=L=0,v.mode=3;case 3:for(;U<32;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.head&&(v.head.time=L),512&v.flags&&(O[0]=255&L,O[1]=L>>>8&255,O[2]=L>>>16&255,O[3]=L>>>24&255,v.check=o(v.check,O,4,0)),U=L=0,v.mode=4;case 4:for(;U<16;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.head&&(v.head.xflags=255&L,v.head.os=L>>8),512&v.flags&&(O[0]=255&L,O[1]=L>>>8&255,v.check=o(v.check,O,2,0)),U=L=0,v.mode=5;case 5:if(1024&v.flags){for(;U<16;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.length=L,v.head&&(v.head.extra_len=L),512&v.flags&&(O[0]=255&L,O[1]=L>>>8&255,v.check=o(v.check,O,2,0)),U=L=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(le<(pe=v.length)&&(pe=le),pe&&(v.head&&(d=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),s.arraySet(v.head.extra,J,ee,pe,d)),512&v.flags&&(v.check=o(v.check,J,pe,ee)),le-=pe,ee+=pe,v.length-=pe),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(le===0)break e;for(pe=0;d=J[ee+pe++],v.head&&d&&v.length<65536&&(v.head.name+=String.fromCharCode(d)),d&&pe<le;);if(512&v.flags&&(v.check=o(v.check,J,pe,ee)),le-=pe,ee+=pe,d)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(le===0)break e;for(pe=0;d=J[ee+pe++],v.head&&d&&v.length<65536&&(v.head.comment+=String.fromCharCode(d)),d&&pe<le;);if(512&v.flags&&(v.check=o(v.check,J,pe,ee)),le-=pe,ee+=pe,d)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;U<16;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(L!==(65535&v.check)){A.msg="header crc mismatch",v.mode=30;break}U=L=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),A.adler=v.check=0,v.mode=12;break;case 10:for(;U<32;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}A.adler=v.check=k(L),U=L=0,v.mode=11;case 11:if(v.havedict===0)return A.next_out=Te,A.avail_out=fe,A.next_in=ee,A.avail_in=le,v.hold=L,v.bits=U,2;A.adler=v.check=1,v.mode=12;case 12:if(W===5||W===6)break e;case 13:if(v.last){L>>>=7&U,U-=7&U,v.mode=27;break}for(;U<3;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}switch(v.last=1&L,U-=1,3&(L>>>=1)){case 0:v.mode=14;break;case 1:if(ce(v),v.mode=20,W!==6)break;L>>>=2,U-=2;break e;case 2:v.mode=17;break;case 3:A.msg="invalid block type",v.mode=30}L>>>=2,U-=2;break;case 14:for(L>>>=7&U,U-=7&U;U<32;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if((65535&L)!=(L>>>16^65535)){A.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&L,U=L=0,v.mode=15,W===6)break e;case 15:v.mode=16;case 16:if(pe=v.length){if(le<pe&&(pe=le),fe<pe&&(pe=fe),pe===0)break e;s.arraySet(Se,J,ee,pe,Te),le-=pe,ee+=pe,fe-=pe,Te+=pe,v.length-=pe;break}v.mode=12;break;case 17:for(;U<14;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(v.nlen=257+(31&L),L>>>=5,U-=5,v.ndist=1+(31&L),L>>>=5,U-=5,v.ncode=4+(15&L),L>>>=4,U-=4,286<v.nlen||30<v.ndist){A.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;U<3;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.lens[ne[v.have++]]=7&L,L>>>=3,U-=3}for(;v.have<19;)v.lens[ne[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,K={bits:v.lenbits},V=l(0,v.lens,0,19,v.lencode,0,v.work,K),v.lenbits=K.bits,V){A.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;Oe=(_=v.lencode[L&(1<<v.lenbits)-1])>>>16&255,Ue=65535&_,!((Ie=_>>>24)<=U);){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(Ue<16)L>>>=Ie,U-=Ie,v.lens[v.have++]=Ue;else{if(Ue===16){for($=Ie+2;U<$;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(L>>>=Ie,U-=Ie,v.have===0){A.msg="invalid bit length repeat",v.mode=30;break}d=v.lens[v.have-1],pe=3+(3&L),L>>>=2,U-=2}else if(Ue===17){for($=Ie+3;U<$;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}U-=Ie,d=0,pe=3+(7&(L>>>=Ie)),L>>>=3,U-=3}else{for($=Ie+7;U<$;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}U-=Ie,d=0,pe=11+(127&(L>>>=Ie)),L>>>=7,U-=7}if(v.have+pe>v.nlen+v.ndist){A.msg="invalid bit length repeat",v.mode=30;break}for(;pe--;)v.lens[v.have++]=d}}if(v.mode===30)break;if(v.lens[256]===0){A.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,K={bits:v.lenbits},V=l(y,v.lens,0,v.nlen,v.lencode,0,v.work,K),v.lenbits=K.bits,V){A.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,K={bits:v.distbits},V=l(h,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,K),v.distbits=K.bits,V){A.msg="invalid distances set",v.mode=30;break}if(v.mode=20,W===6)break e;case 20:v.mode=21;case 21:if(6<=le&&258<=fe){A.next_out=Te,A.avail_out=fe,A.next_in=ee,A.avail_in=le,v.hold=L,v.bits=U,u(A,ve),Te=A.next_out,Se=A.output,fe=A.avail_out,ee=A.next_in,J=A.input,le=A.avail_in,L=v.hold,U=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;Oe=(_=v.lencode[L&(1<<v.lenbits)-1])>>>16&255,Ue=65535&_,!((Ie=_>>>24)<=U);){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(Oe&&!(240&Oe)){for(qe=Ie,Qe=Oe,nt=Ue;Oe=(_=v.lencode[nt+((L&(1<<qe+Qe)-1)>>qe)])>>>16&255,Ue=65535&_,!(qe+(Ie=_>>>24)<=U);){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}L>>>=qe,U-=qe,v.back+=qe}if(L>>>=Ie,U-=Ie,v.back+=Ie,v.length=Ue,Oe===0){v.mode=26;break}if(32&Oe){v.back=-1,v.mode=12;break}if(64&Oe){A.msg="invalid literal/length code",v.mode=30;break}v.extra=15&Oe,v.mode=22;case 22:if(v.extra){for($=v.extra;U<$;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.length+=L&(1<<v.extra)-1,L>>>=v.extra,U-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;Oe=(_=v.distcode[L&(1<<v.distbits)-1])>>>16&255,Ue=65535&_,!((Ie=_>>>24)<=U);){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(!(240&Oe)){for(qe=Ie,Qe=Oe,nt=Ue;Oe=(_=v.distcode[nt+((L&(1<<qe+Qe)-1)>>qe)])>>>16&255,Ue=65535&_,!(qe+(Ie=_>>>24)<=U);){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}L>>>=qe,U-=qe,v.back+=qe}if(L>>>=Ie,U-=Ie,v.back+=Ie,64&Oe){A.msg="invalid distance code",v.mode=30;break}v.offset=Ue,v.extra=15&Oe,v.mode=24;case 24:if(v.extra){for($=v.extra;U<$;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}v.offset+=L&(1<<v.extra)-1,L>>>=v.extra,U-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){A.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(fe===0)break e;if(pe=ve-fe,v.offset>pe){if((pe=v.offset-pe)>v.whave&&v.sane){A.msg="invalid distance too far back",v.mode=30;break}We=pe>v.wnext?(pe-=v.wnext,v.wsize-pe):v.wnext-pe,pe>v.length&&(pe=v.length),Ze=v.window}else Ze=Se,We=Te-v.offset,pe=v.length;for(fe<pe&&(pe=fe),fe-=pe,v.length-=pe;Se[Te++]=Ze[We++],--pe;);v.length===0&&(v.mode=21);break;case 26:if(fe===0)break e;Se[Te++]=v.length,fe--,v.mode=21;break;case 27:if(v.wrap){for(;U<32;){if(le===0)break e;le--,L|=J[ee++]<<U,U+=8}if(ve-=fe,A.total_out+=ve,v.total+=ve,ve&&(A.adler=v.check=v.flags?o(v.check,Se,ve,Te-ve):i(v.check,Se,ve,Te-ve)),ve=fe,(v.flags?L:k(L))!==v.check){A.msg="incorrect data check",v.mode=30;break}U=L=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;U<32;){if(le===0)break e;le--,L+=J[ee++]<<U,U+=8}if(L!==(4294967295&v.total)){A.msg="incorrect length check",v.mode=30;break}U=L=0}v.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return p}return A.next_out=Te,A.avail_out=fe,A.next_in=ee,A.avail_in=le,v.hold=L,v.bits=U,(v.wsize||ve!==A.avail_out&&v.mode<30&&(v.mode<27||W!==4))&&be(A,A.output,A.next_out,ve-A.avail_out)?(v.mode=31,-4):(ke-=A.avail_in,ve-=A.avail_out,A.total_in+=ke,A.total_out+=ve,v.total+=ve,v.wrap&&ve&&(A.adler=v.check=v.flags?o(v.check,Se,ve,A.next_out-ve):i(v.check,Se,ve,A.next_out-ve)),A.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(ke==0&&ve===0||W===4)&&V===g&&(V=-5),V)},n.inflateEnd=function(A){if(!A||!A.state)return p;var W=A.state;return W.window&&(W.window=null),A.state=null,g},n.inflateGetHeader=function(A,W){var v;return A&&A.state&&2&(v=A.state).wrap?((v.head=W).done=!1,g):p},n.inflateSetDictionary=function(A,W){var v,J=W.length;return A&&A.state?(v=A.state).wrap!==0&&v.mode!==11?p:v.mode===11&&i(1,W,J,0)!==v.check?-3:be(A,W,J,J)?(v.mode=31,-4):(v.havedict=1,g):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var s=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(y,h,g,p,E,b,T,k){var P,j,F,D,H,z,Z,G,ce,be=k.bits,A=0,W=0,v=0,J=0,Se=0,ee=0,Te=0,le=0,fe=0,L=0,U=null,ke=0,ve=new s.Buf16(16),pe=new s.Buf16(16),We=null,Ze=0;for(A=0;A<=15;A++)ve[A]=0;for(W=0;W<p;W++)ve[h[g+W]]++;for(Se=be,J=15;1<=J&&ve[J]===0;J--);if(J<Se&&(Se=J),J===0)return E[b++]=20971520,E[b++]=20971520,k.bits=1,0;for(v=1;v<J&&ve[v]===0;v++);for(Se<v&&(Se=v),A=le=1;A<=15;A++)if(le<<=1,(le-=ve[A])<0)return-1;if(0<le&&(y===0||J!==1))return-1;for(pe[1]=0,A=1;A<15;A++)pe[A+1]=pe[A]+ve[A];for(W=0;W<p;W++)h[g+W]!==0&&(T[pe[h[g+W]]++]=W);if(z=y===0?(U=We=T,19):y===1?(U=i,ke-=257,We=o,Ze-=257,256):(U=u,We=l,-1),A=v,H=b,Te=W=L=0,F=-1,D=(fe=1<<(ee=Se))-1,y===1&&852<fe||y===2&&592<fe)return 1;for(;;){for(Z=A-Te,ce=T[W]<z?(G=0,T[W]):T[W]>z?(G=We[Ze+T[W]],U[ke+T[W]]):(G=96,0),P=1<<A-Te,v=j=1<<ee;E[H+(L>>Te)+(j-=P)]=Z<<24|G<<16|ce|0,j!==0;);for(P=1<<A-1;L&P;)P>>=1;if(P!==0?(L&=P-1,L+=P):L=0,W++,--ve[A]==0){if(A===J)break;A=h[g+T[W]]}if(Se<A&&(L&D)!==F){for(Te===0&&(Te=Se),H+=v,le=1<<(ee=A-Te);ee+Te<J&&!((le-=ve[ee+Te])<=0);)ee++,le<<=1;if(fe+=1<<ee,y===1&&852<fe||y===2&&592<fe)return 1;E[F=L&D]=Se<<24|ee<<16|H-b|0}}return L!==0&&(E[H+L]=A-Te<<24|64<<16|0),k.bits=Se,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var s=t("../utils/common"),i=0,o=1;function u(_){for(var O=_.length;0<=--O;)_[O]=0}var l=0,y=29,h=256,g=h+1+y,p=30,E=19,b=2*g+1,T=15,k=16,P=7,j=256,F=16,D=17,H=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],be=new Array(2*(g+2));u(be);var A=new Array(2*p);u(A);var W=new Array(512);u(W);var v=new Array(256);u(v);var J=new Array(y);u(J);var Se,ee,Te,le=new Array(p);function fe(_,O,ne,re,q){this.static_tree=_,this.extra_bits=O,this.extra_base=ne,this.elems=re,this.max_length=q,this.has_stree=_&&_.length}function L(_,O){this.dyn_tree=_,this.max_code=0,this.stat_desc=O}function U(_){return _<256?W[_]:W[256+(_>>>7)]}function ke(_,O){_.pending_buf[_.pending++]=255&O,_.pending_buf[_.pending++]=O>>>8&255}function ve(_,O,ne){_.bi_valid>k-ne?(_.bi_buf|=O<<_.bi_valid&65535,ke(_,_.bi_buf),_.bi_buf=O>>k-_.bi_valid,_.bi_valid+=ne-k):(_.bi_buf|=O<<_.bi_valid&65535,_.bi_valid+=ne)}function pe(_,O,ne){ve(_,ne[2*O],ne[2*O+1])}function We(_,O){for(var ne=0;ne|=1&_,_>>>=1,ne<<=1,0<--O;);return ne>>>1}function Ze(_,O,ne){var re,q,he=new Array(T+1),ge=0;for(re=1;re<=T;re++)he[re]=ge=ge+ne[re-1]<<1;for(q=0;q<=O;q++){var me=_[2*q+1];me!==0&&(_[2*q]=We(he[me]++,me))}}function Ie(_){var O;for(O=0;O<g;O++)_.dyn_ltree[2*O]=0;for(O=0;O<p;O++)_.dyn_dtree[2*O]=0;for(O=0;O<E;O++)_.bl_tree[2*O]=0;_.dyn_ltree[2*j]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function Oe(_){8<_.bi_valid?ke(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function Ue(_,O,ne,re){var q=2*O,he=2*ne;return _[q]<_[he]||_[q]===_[he]&&re[O]<=re[ne]}function qe(_,O,ne){for(var re=_.heap[ne],q=ne<<1;q<=_.heap_len&&(q<_.heap_len&&Ue(O,_.heap[q+1],_.heap[q],_.depth)&&q++,!Ue(O,re,_.heap[q],_.depth));)_.heap[ne]=_.heap[q],ne=q,q<<=1;_.heap[ne]=re}function Qe(_,O,ne){var re,q,he,ge,me=0;if(_.last_lit!==0)for(;re=_.pending_buf[_.d_buf+2*me]<<8|_.pending_buf[_.d_buf+2*me+1],q=_.pending_buf[_.l_buf+me],me++,re===0?pe(_,q,O):(pe(_,(he=v[q])+h+1,O),(ge=z[he])!==0&&ve(_,q-=J[he],ge),pe(_,he=U(--re),ne),(ge=Z[he])!==0&&ve(_,re-=le[he],ge)),me<_.last_lit;);pe(_,j,O)}function nt(_,O){var ne,re,q,he=O.dyn_tree,ge=O.stat_desc.static_tree,me=O.stat_desc.has_stree,_e=O.stat_desc.elems,Fe=-1;for(_.heap_len=0,_.heap_max=b,ne=0;ne<_e;ne++)he[2*ne]!==0?(_.heap[++_.heap_len]=Fe=ne,_.depth[ne]=0):he[2*ne+1]=0;for(;_.heap_len<2;)he[2*(q=_.heap[++_.heap_len]=Fe<2?++Fe:0)]=1,_.depth[q]=0,_.opt_len--,me&&(_.static_len-=ge[2*q+1]);for(O.max_code=Fe,ne=_.heap_len>>1;1<=ne;ne--)qe(_,he,ne);for(q=_e;ne=_.heap[1],_.heap[1]=_.heap[_.heap_len--],qe(_,he,1),re=_.heap[1],_.heap[--_.heap_max]=ne,_.heap[--_.heap_max]=re,he[2*q]=he[2*ne]+he[2*re],_.depth[q]=(_.depth[ne]>=_.depth[re]?_.depth[ne]:_.depth[re])+1,he[2*ne+1]=he[2*re+1]=q,_.heap[1]=q++,qe(_,he,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],function(De,tt){var bt,st,Tt,Ge,St,xe,ct=tt.dyn_tree,At=tt.max_code,ft=tt.stat_desc.static_tree,dr=tt.stat_desc.has_stree,Xe=tt.stat_desc.extra_bits,Gt=tt.stat_desc.extra_base,X=tt.stat_desc.max_length,wt=0;for(Ge=0;Ge<=T;Ge++)De.bl_count[Ge]=0;for(ct[2*De.heap[De.heap_max]+1]=0,bt=De.heap_max+1;bt<b;bt++)X<(Ge=ct[2*ct[2*(st=De.heap[bt])+1]+1]+1)&&(Ge=X,wt++),ct[2*st+1]=Ge,At<st||(De.bl_count[Ge]++,St=0,Gt<=st&&(St=Xe[st-Gt]),xe=ct[2*st],De.opt_len+=xe*(Ge+St),dr&&(De.static_len+=xe*(ft[2*st+1]+St)));if(wt!==0){do{for(Ge=X-1;De.bl_count[Ge]===0;)Ge--;De.bl_count[Ge]--,De.bl_count[Ge+1]+=2,De.bl_count[X]--,wt-=2}while(0<wt);for(Ge=X;Ge!==0;Ge--)for(st=De.bl_count[Ge];st!==0;)At<(Tt=De.heap[--bt])||(ct[2*Tt+1]!==Ge&&(De.opt_len+=(Ge-ct[2*Tt+1])*ct[2*Tt],ct[2*Tt+1]=Ge),st--)}}(_,O),Ze(he,Fe,_.bl_count)}function d(_,O,ne){var re,q,he=-1,ge=O[1],me=0,_e=7,Fe=4;for(ge===0&&(_e=138,Fe=3),O[2*(ne+1)+1]=65535,re=0;re<=ne;re++)q=ge,ge=O[2*(re+1)+1],++me<_e&&q===ge||(me<Fe?_.bl_tree[2*q]+=me:q!==0?(q!==he&&_.bl_tree[2*q]++,_.bl_tree[2*F]++):me<=10?_.bl_tree[2*D]++:_.bl_tree[2*H]++,he=q,Fe=(me=0)===ge?(_e=138,3):q===ge?(_e=6,3):(_e=7,4))}function V(_,O,ne){var re,q,he=-1,ge=O[1],me=0,_e=7,Fe=4;for(ge===0&&(_e=138,Fe=3),re=0;re<=ne;re++)if(q=ge,ge=O[2*(re+1)+1],!(++me<_e&&q===ge)){if(me<Fe)for(;pe(_,q,_.bl_tree),--me!=0;);else q!==0?(q!==he&&(pe(_,q,_.bl_tree),me--),pe(_,F,_.bl_tree),ve(_,me-3,2)):me<=10?(pe(_,D,_.bl_tree),ve(_,me-3,3)):(pe(_,H,_.bl_tree),ve(_,me-11,7));he=q,Fe=(me=0)===ge?(_e=138,3):q===ge?(_e=6,3):(_e=7,4)}}u(le);var K=!1;function $(_,O,ne,re){ve(_,(l<<1)+(re?1:0),3),function(q,he,ge,me){Oe(q),me&&(ke(q,ge),ke(q,~ge)),s.arraySet(q.pending_buf,q.window,he,ge,q.pending),q.pending+=ge}(_,O,ne,!0)}n._tr_init=function(_){K||(function(){var O,ne,re,q,he,ge=new Array(T+1);for(q=re=0;q<y-1;q++)for(J[q]=re,O=0;O<1<<z[q];O++)v[re++]=q;for(v[re-1]=q,q=he=0;q<16;q++)for(le[q]=he,O=0;O<1<<Z[q];O++)W[he++]=q;for(he>>=7;q<p;q++)for(le[q]=he<<7,O=0;O<1<<Z[q]-7;O++)W[256+he++]=q;for(ne=0;ne<=T;ne++)ge[ne]=0;for(O=0;O<=143;)be[2*O+1]=8,O++,ge[8]++;for(;O<=255;)be[2*O+1]=9,O++,ge[9]++;for(;O<=279;)be[2*O+1]=7,O++,ge[7]++;for(;O<=287;)be[2*O+1]=8,O++,ge[8]++;for(Ze(be,g+1,ge),O=0;O<p;O++)A[2*O+1]=5,A[2*O]=We(O,5);Se=new fe(be,z,h+1,g,T),ee=new fe(A,Z,0,p,T),Te=new fe(new Array(0),G,0,E,P)}(),K=!0),_.l_desc=new L(_.dyn_ltree,Se),_.d_desc=new L(_.dyn_dtree,ee),_.bl_desc=new L(_.bl_tree,Te),_.bi_buf=0,_.bi_valid=0,Ie(_)},n._tr_stored_block=$,n._tr_flush_block=function(_,O,ne,re){var q,he,ge=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=function(me){var _e,Fe=4093624447;for(_e=0;_e<=31;_e++,Fe>>>=1)if(1&Fe&&me.dyn_ltree[2*_e]!==0)return i;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return o;for(_e=32;_e<h;_e++)if(me.dyn_ltree[2*_e]!==0)return o;return i}(_)),nt(_,_.l_desc),nt(_,_.d_desc),ge=function(me){var _e;for(d(me,me.dyn_ltree,me.l_desc.max_code),d(me,me.dyn_dtree,me.d_desc.max_code),nt(me,me.bl_desc),_e=E-1;3<=_e&&me.bl_tree[2*ce[_e]+1]===0;_e--);return me.opt_len+=3*(_e+1)+5+5+4,_e}(_),q=_.opt_len+3+7>>>3,(he=_.static_len+3+7>>>3)<=q&&(q=he)):q=he=ne+5,ne+4<=q&&O!==-1?$(_,O,ne,re):_.strategy===4||he===q?(ve(_,2+(re?1:0),3),Qe(_,be,A)):(ve(_,4+(re?1:0),3),function(me,_e,Fe,De){var tt;for(ve(me,_e-257,5),ve(me,Fe-1,5),ve(me,De-4,4),tt=0;tt<De;tt++)ve(me,me.bl_tree[2*ce[tt]+1],3);V(me,me.dyn_ltree,_e-1),V(me,me.dyn_dtree,Fe-1)}(_,_.l_desc.max_code+1,_.d_desc.max_code+1,ge+1),Qe(_,_.dyn_ltree,_.dyn_dtree)),Ie(_),re&&Oe(_)},n._tr_tally=function(_,O,ne){return _.pending_buf[_.d_buf+2*_.last_lit]=O>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&O,_.pending_buf[_.l_buf+_.last_lit]=255&ne,_.last_lit++,O===0?_.dyn_ltree[2*ne]++:(_.matches++,O--,_.dyn_ltree[2*(v[ne]+h+1)]++,_.dyn_dtree[2*U(O)]++),_.last_lit===_.lit_bufsize-1},n._tr_align=function(_){ve(_,2,3),pe(_,j,be),function(O){O.bi_valid===16?(ke(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(_)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(s){(function(i,o){if(!i.setImmediate){var u,l,y,h,g=1,p={},E=!1,b=i.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(i);T=T&&T.setTimeout?T:i,u={}.toString.call(i.process)==="[object process]"?function(F){Ut.nextTick(function(){P(F)})}:function(){if(i.postMessage&&!i.importScripts){var F=!0,D=i.onmessage;return i.onmessage=function(){F=!1},i.postMessage("","*"),i.onmessage=D,F}}()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",j,!1):i.attachEvent("onmessage",j),function(F){i.postMessage(h+F,"*")}):i.MessageChannel?((y=new MessageChannel).port1.onmessage=function(F){P(F.data)},function(F){y.port2.postMessage(F)}):b&&"onreadystatechange"in b.createElement("script")?(l=b.documentElement,function(F){var D=b.createElement("script");D.onreadystatechange=function(){P(F),D.onreadystatechange=null,l.removeChild(D),D=null},l.appendChild(D)}):function(F){setTimeout(P,0,F)},T.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var D=new Array(arguments.length-1),H=0;H<D.length;H++)D[H]=arguments[H+1];var z={callback:F,args:D};return p[g]=z,u(g),g++},T.clearImmediate=k}function k(F){delete p[F]}function P(F){if(E)setTimeout(P,0,F);else{var D=p[F];if(D){E=!0;try{(function(H){var z=H.callback,Z=H.args;switch(Z.length){case 0:z();break;case 1:z(Z[0]);break;case 2:z(Z[0],Z[1]);break;case 3:z(Z[0],Z[1],Z[2]);break;default:z.apply(o,Z)}})(D)}finally{k(F),E=!1}}}}function j(F){F.source===i&&typeof F.data=="string"&&F.data.indexOf(h)===0&&P(+F.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Wt<"u"?Wt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});const un=(()=>typeof self>"u"?!1:"showOpenFilePicker"in self)(),Ao=un?Promise.resolve().then(function(){return Co}):Promise.resolve().then(function(){return qo});async function Io(...a){return(await Ao).default(...a)}un?Promise.resolve().then(function(){return Fo}):Promise.resolve().then(function(){return Wo});const Ro=un?Promise.resolve().then(function(){return zo}):Promise.resolve().then(function(){return Ho});async function jo(...a){return(await Ro).default(...a)}const Oo=async a=>{const e=await a.getFile();return e.handle=a,e};var No=async(a=[{}])=>{Array.isArray(a)||(a=[a]);const e=[];a.forEach((n,s)=>{e[s]={description:n.description||"Files",accept:{}},n.mimeTypes?n.mimeTypes.map(i=>{e[s].accept[i]=n.extensions||[]}):e[s].accept["*/*"]=n.extensions||[]});const t=await window.showOpenFilePicker({id:a[0].id,startIn:a[0].startIn,types:e,multiple:a[0].multiple||!1,excludeAcceptAllOption:a[0].excludeAcceptAllOption||!1}),r=await Promise.all(t.map(Oo));return a[0].multiple?r:r[0]},Co={__proto__:null,default:No};function Zr(a){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(n){return{value:n,done:r}})}return Zr=function(t){this.s=t,this.n=t.next},Zr.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return r===void 0?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return r===void 0?Promise.reject(t):e(r.apply(this.s,arguments))}},new Zr(a)}const Zs=async(a,e,t=a.name,r)=>{const n=[],s=[];var i,o=!1,u=!1;try{for(var l,y=function(h){var g,p,E,b=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,E=Symbol.iterator);b--;){if(p&&(g=h[p])!=null)return g.call(h);if(E&&(g=h[E])!=null)return new Zr(g.call(h));p="@@asyncIterator",E="@@iterator"}throw new TypeError("Object is not async iterable")}(a.values());o=!(l=await y.next()).done;o=!1){const h=l.value,g=`${t}/${h.name}`;h.kind==="file"?s.push(h.getFile().then(p=>(p.directoryHandle=a,p.handle=h,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>g})))):h.kind!=="directory"||!e||r&&r(h)||n.push(Zs(h,e,g,r))}}catch(h){u=!0,i=h}finally{try{o&&y.return!=null&&await y.return()}finally{if(u)throw i}}return[...(await Promise.all(n)).flat(),...await Promise.all(s)]};var Bo=async(a={})=>{a.recursive=a.recursive||!1,a.mode=a.mode||"read";const e=await window.showDirectoryPicker({id:a.id,startIn:a.startIn,mode:a.mode});return(await(await e.values()).next()).done?[e]:Zs(e,a.recursive,void 0,a.skipDirectory)},Fo={__proto__:null,default:Bo},Lo=async(a,e=[{}],t=null,r=!1,n=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let i=null;if(a instanceof Blob&&a.type?i=a.type:a.headers&&a.headers.get("content-type")&&(i=a.headers.get("content-type")),e.forEach((l,y)=>{s[y]={description:l.description||"Files",accept:{}},l.mimeTypes?(y===0&&i&&l.mimeTypes.push(i),l.mimeTypes.map(h=>{s[y].accept[h]=l.extensions||[]})):i?s[y].accept[i]=l.extensions||[]:s[y].accept["*/*"]=l.extensions||[]}),t)try{await t.getFile()}catch(l){if(t=null,r)throw l}const o=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&n&&n(o);const u=await o.createWritable();return"stream"in a?(await a.stream().pipeTo(u),o):"body"in a?(await a.body.pipeTo(u),o):(await u.write(await a),await u.close(),o)},zo={__proto__:null,default:Lo},Mo=async(a=[{}])=>(Array.isArray(a)||(a=[a]),new Promise((e,t)=>{const r=document.createElement("input");r.type="file";const n=[...a.map(u=>u.mimeTypes||[]),...a.map(u=>u.extensions||[])].join();r.multiple=a[0].multiple||!1,r.accept=n||"",r.style.display="none",document.body.append(r);const s=u=>{typeof i=="function"&&i(),e(u)},i=a[0].legacySetup&&a[0].legacySetup(s,()=>i(t),r),o=()=>{window.removeEventListener("focus",o),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",o)}),r.addEventListener("change",()=>{window.removeEventListener("focus",o),r.remove(),s(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),qo={__proto__:null,default:Mo},Uo=async(a=[{}])=>(Array.isArray(a)||(a=[a]),a[0].recursive=a[0].recursive||!1,new Promise((e,t)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const n=i=>{typeof s=="function"&&s(),e(i)},s=a[0].legacySetup&&a[0].legacySetup(n,()=>s(t),r);r.addEventListener("change",()=>{let i=Array.from(r.files);a[0].recursive?a[0].recursive&&a[0].skipDirectory&&(i=i.filter(o=>o.webkitRelativePath.split("/").every(u=>!a[0].skipDirectory({name:u,kind:"directory"})))):i=i.filter(o=>o.webkitRelativePath.split("/").length===2),n(i)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Wo={__proto__:null,default:Uo},Go=async(a,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let r=a;"body"in a&&(r=await async function(i,o){const u=i.getReader(),l=new ReadableStream({start:g=>async function p(){return u.read().then(({done:E,value:b})=>{if(!E)return g.enqueue(b),p();g.close()})}()}),y=new Response(l),h=await y.blob();return u.releaseLock(),new Blob([h],{type:o})}(a.body,a.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await r);const n=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(n,()=>s(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),n()}),t.click(),null},Ho={__proto__:null,default:Go};const Ko=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",Qs=na(class extends la{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=xr(this,"jeepSqliteImportProgress",7),this.exportProgress=xr(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=xr(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=xr(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=xr(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const r of t)switch(r){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[r]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[r]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[r]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[r]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[r]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[r]);break}}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return await this._createConnection(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1,s=await this._isConnection(r,n);return Promise.resolve(s)}async closeConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._closeConnection(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async open(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._open(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async close(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._close(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async getVersion(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getVersion(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async beginTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._beginTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async commitTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const s=await this._commitTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async rollbackTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._rollbackTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isTransactionActive(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const s=await this._isTransactionActive(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async execute(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");const r=e.database,n=e.statements;let s=!0;const i=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{const o=await this._execute(r,n,s,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async executeSet(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");const r=e.database,n=e.set;let s=!0;t.includes("transaction")&&(s=e.transaction);const i=e.readonly?e.readonly:!1,o=e.returnMode?e.returnMode:"no";try{const u=await this._executeSet(r,n,s,i,o);return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async run(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");const r=e.database,n=e.statement;let s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let i=!0;t.includes("transaction")&&(i=e.transaction);const o=e.readonly?e.readonly:!1,u=e.returnMode?e.returnMode:"no";try{const l=await this._run(r,n,s,i,o,u);return Promise.resolve(l)}catch(l){return Promise.reject(l)}}async query(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let r=[];t.includes("values")&&(r=e.values.length>0?e.values:[]);const n=e.database,s=e.statement,i=e.readonly?e.readonly:!1;try{const o=await this._query(n,s,r,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getTableList(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getTableList(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBExists(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBOpen(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteDatabase(r,n)}catch(s){return Promise.reject(s)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return await this._copyFromAssets(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async isTableExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const n=e.table,s=e.readonly?e.readonly:!1;try{const i=await this._isTableExists(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._createSyncTable(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getSyncDate(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=e.database,n=e.syncdate,s=e.readonly?e.readonly:!1;try{return await this._setSyncDate(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async importFromJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async exportToJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=e.database,n=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{const i=await this._exportToJson(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteExportedRows(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=e.database,n=e.upgrade;for(const s of n){const i=Object.keys(s);if(!i.includes("toVersion")||!i.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[r])this._versionUpgrades[r][s.toVersion]=s;else{const o={};o[s.toVersion]=s,this._versionUpgrades[r]=o}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{const n=await this._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=e.openModes;try{const s=await this._checkConnectionsConsistency(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async saveToStore(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._saveToStore(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{return await this._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(e){const t=e.overwrite?e.overwrite:!0;console.log(un?"Using the File System Access API.":"Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const r=e.url,n=e.overwrite?e.overwrite:!0;try{return await this._getFromHTTPRequest(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseTypeOrm(this.typeOrm!==void 0?this.typeOrm:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,r){let n={};const s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(n=this._versionUpgrades[e]);const i=Object.keys(this._dbDict);let o;try{i.length>0&&(i.includes("RW_"+e)||i.includes("RO_"+e))?o=i.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:o=new is(e+"SQLite.db",t,n,this.store,this.innerAutoSave,this.innerWasmPath);const u=r?"RO_"+e:"RW_"+e;return this._dbDict[u]=o,Promise.resolve()}catch(u){return Promise.reject(u.message)}}async _isConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;return r.includes(n)?{result:!0}:{result:!1}}async _closeConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${e}`);const s=this._dbDict[n];try{if(s.isDBOpen())try{await s.close()}catch(i){return Promise.reject(`CloseConnection: close ${e} failed ${i}`)}return delete this._dbDict[n],Promise.resolve()}catch(i){return Promise.reject(`CloseConnection: ${i.message}`)}}async _open(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];try{return await s.open(),Promise.resolve()}catch(i){return Promise.reject(`Open: ${i.message}`)}}async _close(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${e}`);const s=this._dbDict[n];try{return await s.close(),Promise.resolve()}catch(i){return Promise.reject(`Close: ${i.message}`)}}async _saveToStore(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${e}`);const s=this._dbDict[n];try{return await s.saveToStore(),Promise.resolve()}catch(i){return Promise.reject(`SaveToStore: ${i.message}`)}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`_saveToLocalDisk: No available connection for ${e}`);const s=await this._dbDict[r].exportDB();this._blob=await this.uint2blob(s);const i=`${e}SQLite.db`;return this._opts={fileName:i,extensions:[".db"]},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${i}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){return Promise.reject(`_saveToLocalDisk: ${t.message}`)}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await Io({extensions:[".db"]});let t=await this.blob2uint(e);const r=this.removePathSuffix(e.name),n=this.setPathSuffix(e.name);await je.isDBInStore(n,this.store)?this._overwrite?(await je.removeDBFromStore(n,this.store),await je.saveDBToStore(n,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):await je.saveDBToStore(n,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:r})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await jo(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];try{const i=await s.getVersion(),o={};return o.version=i,Promise.resolve(o)}catch(i){return Promise.reject(`Open: ${i.message}`)}}async _beginTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${e}`);const n=this._dbDict[r];let s={};return s={changes:{changes:await n.beginTransaction()}},Promise.resolve(s)}async _commitTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${e}`);const n=this._dbDict[r];let s={};return s={changes:{changes:await n.commitTransaction()}},Promise.resolve(s)}async _rollbackTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${e}`);const n=this._dbDict[r];let s={};return s={changes:{changes:await n.rollbackTransaction()}},Promise.resolve(s)}async _isTransactionActive(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${e}`);const n=this._dbDict[r];let s={};return s={result:n.isTransActive()},Promise.resolve(s)}async _execute(e,t,r,n){const s=Object.keys(this._dbDict),i="RW_"+e;if(!s.includes(i))return Promise.reject(`Execute: No available connection for ${e}`);const o=this._dbDict[i];if(n)return Promise.reject("Execute: not allowed in read-only mode");let u={};const l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT"&&this.innerTypeOrm)return u={changes:{changes:0}},Promise.resolve(u);try{return u={changes:{changes:await o.executeSQL(t,r)}},Promise.resolve(u)}catch(y){return Promise.reject(`Execute: ${y.message}`)}}async _executeSet(e,t,r,n,s){const i=Object.keys(this._dbDict),o="RW_"+e;if(!i.includes(o))return Promise.reject(`ExecuteSet: No available connection for ${e}`);const u=this._dbDict[o];if(n)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const l of t)if(!("statement"in l)||!("values"in l))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const l=await u.execSet(t,r,s),y={changes:{changes:l.changes,lastId:l.lastId,values:l.values}};return Promise.resolve(y)}catch(l){return Promise.reject(`ExecuteSet: ${l.message}`)}}async _run(e,t,r,n,s,i){const o=Object.keys(this._dbDict),u="RW_"+e;if(!o.includes(u))return Promise.reject(`Run: No available connection for ${e}`);const l=this._dbDict[u];if(s)return Promise.reject("Run: not allowed in read-only mode");let y={};const h=t.substring(0,6);if(this.innerAutoSave&&h==="COMMIT")return y={changes:{changes:0}},Promise.resolve(y);try{const g=await l.runSQL(t,r,n,i);return y={changes:{changes:g.changes,lastId:g.lastId,values:g.values}},Promise.resolve(y)}catch(g){return Promise.reject(`Run: ${g.message}`)}}async _query(e,t,r,n){const s=Object.keys(this._dbDict),i=n?"RO_"+e:"RW_"+e;if(!s.includes(i))return Promise.reject(`Query: No available connection for ${e}`);const o=this._dbDict[i];let u=[];const l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT")return Promise.resolve({values:u});try{return u=await o.selectSQL(t,r),Promise.resolve({values:u})}catch(y){return Promise.reject(`Query failed: ${y.message}`)}}async _getTableList(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${e}`);const s=this._dbDict[n];let i=[];try{return i=await s.getTableNames(),Promise.resolve({values:i})}catch(o){return Promise.reject(`GetTableList failed: ${o.message}`)}}async _isDBExists(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${e}`);const s=this._dbDict[n];try{const o={result:await s.isDBExists(e+"SQLite.db")};return Promise.resolve(o)}catch(i){return Promise.reject(`IsDBExists: ${i.message}`)}}async _isDBOpen(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${e}`);const s=this._dbDict[n];try{const o={result:await s.isDBOpen(e+"SQLite.db")};return Promise.resolve(o)}catch(i){return Promise.reject(`IsDBOpen: ${i.message}`)}}async _deleteDatabase(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);const s=this._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(i){return Promise.reject(`DeleteDatabase: ${i.message}`)}}async _isTableExists(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`IsTableExists: No available connection for ${e}`);const i=this._dbDict[s];try{const u={result:await i.isTable(t)};return Promise.resolve(u)}catch(o){return Promise.reject(`IsTableExists: ${o.message}`)}}async _createSyncTable(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);const s=this._dbDict[n];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const i=await s.createSyncTable();return Promise.resolve({changes:{changes:i}})}catch(i){return Promise.reject(`CreateSyncTable: ${i.message}`)}}async _getSyncDate(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${e}`);const s=this._dbDict[n];try{const i=await s.getSyncDate();return Promise.resolve({syncDate:i})}catch(i){return Promise.reject(`GetSyncDate: ${i.message}`)}}async _setSyncDate(e,t,r){const n=Object.keys(this._dbDict),s="RW_"+e;if(!n.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${e}`);const i=this._dbDict[s];if(r)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const o=await i.setSyncDate(t);return o.result?Promise.resolve():Promise.reject(`SetSyncDate: ${o.message}`)}catch(o){return Promise.reject(`SetSyncDate: ${o.message}`)}}async _isJsonValid(e){const t=JSON.parse(e);return await He.isJsonSQLite(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,r;const n=JSON.parse(e);if(!await He.isJsonSQLite(n))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const i=n,o=`${i.database}SQLite.db`,u=(t=i.version)!==null&&t!==void 0?t:1,l=i.mode,y=(r=i.overwrite)!==null&&r!==void 0?r:!1,h=new is(o,u,{},this.store,this.innerAutoSave,this.innerWasmPath);try{y&&l==="full"&&je.isDBInStore(o,this.store)&&await je.removeDBFromStore(o,this.store),await h.open();const g=await h.getTableNames();if(l==="full"&&g.length>0){const E=await h.getVersion();if(u<E)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${E}`);if(E===u)return Promise.resolve({changes:{changes:0}})}const p=await h.importJson(i,this.importProgress);return await h.close(),Promise.resolve({changes:{changes:p}})}catch(g){return Promise.reject(`ImportFromJson: ${g.message}`)}}async _exportToJson(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`ExportToJson: No available connection for ${e}`);const i=this._dbDict[s];try{const o=await i.exportJson(t,this.exportProgress);return Object.keys(o).includes("message")?Promise.reject(`ExportToJson: ${o.message}`):Promise.resolve({export:o})}catch(o){return Promise.reject(`ExportToJson: ${o.message}`)}}async _deleteExportedRows(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`ExportToJson: No available connection for ${e}`);const s=this._dbDict[n];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{await s.deleteExportedRows()}catch(i){return Promise.reject(`DeleteExportedRows: ${i.message}`)}}async _copyFromAssets(e){const t=await this.loadJSON("assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(const n of this.databaseList.databaseList)n.substring(n.length-3)===".db"&&await this.copyDatabase(`assets/databases/${n}`,e),n.substring(n.length-4)===".zip"&&await this.unzipDatabase(`assets/databases/${n}`,e);return Promise.resolve()}catch(n){return Promise.reject(`CopyFromAssets: ${n.message}`)}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder")}async _getFromHTTPRequest(e,t){try{let r;return e.substring(e.length-3)===".db"&&(await this.copyDatabase(e,t),r="db"),e.substring(e.length-4)===".zip"&&(await this.unzipDatabase(e,t),r="zip"),this.HTTPRequestEnded.emit({message:r}),Promise.resolve()}catch(r){return Promise.reject(`GetFromHTTPRequest: ${r.message}`)}}async _isDatabase(e){try{const r={result:await je.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(r)}catch(t){return Promise.reject(`IsDatabase: ${t.message}`)}}async _getDatabaseList(){try{const t={values:await je.getDBListFromStore(this.store)};return Promise.resolve(t)}catch(e){return Promise.reject(`GetDatabaseList: ${e.message}`)}}async _checkConnectionsConsistency(e,t){const r={};r.result=!1;const n=[];e.forEach((s,i)=>{n.push(`${t[i]}_${s}`)});try{let s=new Set(Object.keys(this._dbDict));const i=new Set(n);if(i.size===0)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size<i.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size>i.size){const o={};for(const u of s)if(!Array.from(i.keys()).includes(u)){let l=!1;u.substring(0,3)==="RO_"&&(l=!0),o.database=u.substring(3),o.readonly=l,await this._closeConnection(o.database,o.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===i.size?(await this.symmetricDifference(s,i)).size===0?(r.result=!0,Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r))}catch(s){return Promise.reject(`CheckConnectionsConsistency: ${s.message}`)}}async _resetDbDict(e){try{for(const t of e){const r={};let n=!1;t.substring(0,3)==="RO_"&&(n=!0),r.database=t.substring(3),r.readonly=n,await this._closeConnection(r.database,r.readonly)}}catch(t){return Promise.reject(`ResetDbDict: ${t.message}`)}}async symmetricDifference(e,t){let r=new Set;e.forEach(s=>{r.add(s.substring(3))});let n=new Set;t.forEach(s=>{n.add(s.substring(3))});for(const s of n)r.has(s)?r.delete(s):r.add(s);return r}async unzipDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("unzipDatabase: failed"))},s.onload=()=>{Do.loadAsync(s.response).then(async i=>{const o=Object.keys(i.files);try{for(const u of o)await this.retrieveDBFromZip(i.files,u,t);r()}catch(u){n(new Error(`unzipDatabase Error: ${u.message}`))}})},s.send()})}async retrieveDBFromZip(e,t,r){return new Promise((n,s)=>{e[t].async("nodebuffer").then(async i=>{try{const o=new Uint8Array(i),u=this.setPathSuffix(t);await je.isDBInStore(u,this.store)?r?(await je.removeDBFromStore(u,this.store),await je.saveDBToStore(u,o,this.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):await je.saveDBToStore(u,o,this.store),n()}catch(o){s(new Error(`retrieveDBFromZip:: ${o.message}`))}})})}async copyDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest,i;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("CopyDatabase: failed"))},s.onload=()=>{i=new Uint8Array(s.response)},s.onloadend=async()=>{const o=this.setPathSuffix(e);await je.isDBInStore(o,this.store)?t?(await je.removeDBFromStore(o,this.store),await je.saveDBToStore(o,i,this.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${o}`)):await je.saveDBToStore(o,i,this.store),r()},s.send()})}async loadJSON(e){return new Promise((t,r)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onerror=()=>{r(new Error("LoadJSON: failed"))},n.onreadystatechange=function(){n.status==404&&t(null),n.readyState==4&&n.status==200&&t(n.responseText)},n.send(null)})}async openStore(e,t){let r=!1;const n=this.setConfig(e,t);return this.store=as.createInstance(n),this.store!=null&&(this.storeName=e,r=!0),r}setConfig(e,t){return{name:e,storeName:t,driver:[as.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);const r=".db";return e.substring(e.length-3)===r&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return Ko}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]},void 0,{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}]);function Yo(){if(typeof customElements>"u")return;["jeep-sqlite"].forEach(e=>{switch(e){case"jeep-sqlite":customElements.get(e)||customElements.define(e,Qs);break}})}const Zo=Qs,Qo=Yo;export{Zo as JeepSqlite,Qo as defineCustomElement};
