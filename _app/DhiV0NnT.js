import{_ as b}from"./BIY3sABQ.js";import{_ as y}from"./x_MmvrKV.js";import{e as C,A as _,c as T,o as N,a as o,b as m,t as i,f as e,g as t,h as k,i as u,v as c,C as g,j as v,w as A,d as O,s as S,k as L,l as V,n as w}from"./DBDf4FMw.js";import{_ as B}from"./B2ZbWNyW.js";import{u as M}from"./BuEw67QF.js";import"./DlAUqK2U.js";const P={class:"container-fluid text-center"},D={class:"py-4"},I={class:"mb-3 position-relative form-floating"},R=["placeholder"],q={class:"invalid-tooltip"},F={class:"mb-3 position-relative form-floating"},U=["placeholder"],$={class:"invalid-tooltip"},j={class:"d-grid gap-2 mt-5 mt-auto"},E={class:"btn btn-primary",type:"submit",role:"button"},z={class:"mt-4 small"},Y=C({__name:"index",setup(G){const p=_(),n=M({email:"",password:""}),f=async s=>{const a=s.currentTarget;if(!a.checkValidity())return a.classList.add("was-validated");S("progress-dialog");const{error:l,error_key:d}=await p.login({email:n.value.email,password:n.value.password});await L(.5),V("progress-dialog"),l?(await g.showToast(t(d),"long"),a.classList.remove("was-validated")):(a.classList.add("was-validated"),w("/app/",{replace:!0}))},h=async()=>{await p.guestLogin(),w("/app/",{replace:!0})};return(s,a)=>{const l=b,d=y;return N(),T("section",null,[o("div",P,[o("div",D,[a[3]||(a[3]=o("img",{class:"img-fluid shadow-sm my-3 p-2 rounded bg-body",width:"90",height:"90",src:B},null,-1)),o("h1",null,[o("b",null,i(("t"in s?s.t:e(t))("app_name")),1)]),o("p",null,i(("t"in s?s.t:e(t))("enter_email_password")),1)]),o("form",{novalidate:"",onSubmit:k(f,["prevent"])},[o("div",I,[u(o("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>e(n).email=r),class:"form-control",type:"email",placeholder:("t"in s?s.t:e(t))("correo"),name:"email",autocomplete:"email",required:""},null,8,R),[[c,e(n).email]]),o("label",null,i(("t"in s?s.t:e(t))("correo")),1),o("div",q,i(("t"in s?s.t:e(t))("correo_incorrecto")),1)]),o("div",F,[u(o("input",{"onUpdate:modelValue":a[1]||(a[1]=r=>e(n).password=r),class:"form-control",type:"password",placeholder:("t"in s?s.t:e(t))("password"),name:"password",autocomplete:"current-password",minlength:"3",required:""},null,8,U),[[c,e(n).password]]),o("label",null,i(("t"in s?s.t:e(t))("password")),1),o("div",$,i(("t"in s?s.t:e(t))("password_limit")),1)]),o("div",j,[o("button",E,i(("t"in s?s.t:e(t))("login")),1),o("a",{class:"text-primary my-2",role:"button",onClick:a[2]||(a[2]=r=>("CAPACITOR"in s?s.CAPACITOR:e(g)).openBrowser(`${("CONST"in s?s.CONST:e(v)).url}/cuenta?s=restaurar`))},i(("t"in s?s.t:e(t))("olvido_pass")),1),m(l,{class:"btn btn-success",role:"button",to:"/registro/"},{default:A(()=>[O(i(("t"in s?s.t:e(t))("registrate")),1)]),_:1}),o("button",{class:"btn btn-secondary",type:"button",role:"button",onClick:h},i(("t"in s?s.t:e(t))("no_registro")),1)])],32),o("div",z,[o("i",null,i(("t"in s?s.t:e(t))("version"))+": "+i(("CONST"in s?s.CONST:e(v)).version),1)])]),m(d,{message:("t"in s?s.t:e(t))("iniciando_sesion")},null,8,["message"])])}}});export{Y as default};
