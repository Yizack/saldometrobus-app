import{_ as v}from"./nuxt-link.63ce1c32.js";import{_ as b}from"./ProgressDialog.07783f69.js";import{i as y,A as l,y as _,M as C,E as T,x as N,B as c,t,f as O,r as o,s as a,u as e,G as A,H as m,I as u,J as g,K as L,o as k,q as f,O as S}from"./entry.0907c2a1.js";import{_ as V}from"./logo.8eb22e9a.js";const $={name:"LoginPage",data(){return{form:{email:"",password:""}}},mounted(){l().exists&&this.$router.replace("/app/")},methods:{async login(){const s=this.$refs.login;if(s.checkValidity()){_("progress-dialog");const{error:i,error_key:d}=await l().login({email:this.form.email,password:await C(this.form.password)});await T(.5),N("progress-dialog"),i?(await c.showToast(t(d),"long"),s.classList.remove("was-validated")):(s.classList.add("was-validated"),this.$router.replace("/app/"))}else s.classList.add("was-validated")},async guestLogin(){await l().guestLogin(),this.$router.replace("/app/")}}},B={class:"container-fluid text-center"},M={class:"py-4"},P=o("img",{class:"img-fluid shadow-sm my-3 p-2 rounded bg-body",width:"90",height:"90",src:V},null,-1),I={class:"mb-3 position-relative form-floating"},q=["placeholder"],D={class:"invalid-tooltip"},R={class:"mb-3 position-relative form-floating"},E=["placeholder"],U={class:"invalid-tooltip"},G={class:"d-grid gap-2 mt-5 mt-auto"},H={class:"btn btn-primary",type:"submit",role:"button"},J={class:"mt-4 small"};function K(s,i,d,j,r,p){const h=v,w=b;return k(),O("section",null,[o("div",B,[o("div",M,[P,o("h1",null,[o("b",null,a(("t"in s?s.t:e(t))("app_name")),1)]),o("p",null,a(("t"in s?s.t:e(t))("enter_email_password")),1)]),o("form",{ref:"login",novalidate:"",onSubmit:i[4]||(i[4]=A(n=>p.login(),["prevent"]))},[o("div",I,[m(o("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>r.form.email=n),class:"form-control",type:"email",placeholder:("t"in s?s.t:e(t))("correo"),name:"email",autocomplete:"email",required:""},null,8,q),[[u,r.form.email]]),o("label",null,a(("t"in s?s.t:e(t))("correo")),1),o("div",D,a(("t"in s?s.t:e(t))("correo_incorrecto")),1)]),o("div",R,[m(o("input",{"onUpdate:modelValue":i[1]||(i[1]=n=>r.form.password=n),class:"form-control",type:"password",placeholder:("t"in s?s.t:e(t))("password"),name:"password",autocomplete:"current-password",minlength:"3",required:""},null,8,E),[[u,r.form.password]]),o("label",null,a(("t"in s?s.t:e(t))("password")),1),o("div",U,a(("t"in s?s.t:e(t))("password_limit")),1)]),o("div",G,[o("button",H,a(("t"in s?s.t:e(t))("login")),1),o("a",{class:"text-primary my-2",role:"button",onClick:i[2]||(i[2]=n=>("CAPACITOR"in s?s.CAPACITOR:e(c)).openBrowser(`${("CONST"in s?s.CONST:e(f)).url}/cuenta?s=restaurar`))},a(("t"in s?s.t:e(t))("olvido_pass")),1),g(h,{class:"btn btn-success",role:"button",to:"/registro/"},{default:L(()=>[S(a(("t"in s?s.t:e(t))("registrate")),1)]),_:1}),o("button",{class:"btn btn-secondary",type:"button",role:"button",onClick:i[3]||(i[3]=n=>p.guestLogin())},a(("t"in s?s.t:e(t))("no_registro")),1)])],544),o("div",J,[o("i",null,a(("t"in s?s.t:e(t))("version"))+": "+a(("CONST"in s?s.CONST:e(f)).version),1)])]),g(w,{message:("t"in s?s.t:e(t))("iniciando_sesion")},null,8,["message"])])}const X=y($,[["render",K]]);export{X as default};
