const lr={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let ur,wi,cn,_i=!1,en=!1,Tn=!1,ot=!1,Vn=null,En=!1;const tr=(r,e="")=>()=>{},Jn="http://www.w3.org/1999/xlink",Qn={},ta="http://www.w3.org/2000/svg",ra="http://www.w3.org/1999/xhtml",na=r=>r!=null,$n=r=>(r=typeof r,r==="object"||r==="function");function ia(r){var e,t,n;return(n=(t=(e=r.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&n!==void 0?n:void 0}const bi=(r,e,...t)=>{let n=null,i=null,s=null,a=!1,o=!1;const u=[],l=d=>{for(let _=0;_<d.length;_++)n=d[_],Array.isArray(n)?l(n):n!=null&&typeof n!="boolean"&&((a=typeof r!="function"&&!$n(n))&&(n=String(n)),a&&o?u[u.length-1].$text$+=n:u.push(a?tn(null,n):n),o=a)};if(l(t),e){e.key&&(i=e.key),e.name&&(s=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(_=>d[_]).join(" "))}}if(typeof r=="function")return r(e===null?{}:e,u,oa);const g=tn(r,null);return g.$attrs$=e,u.length>0&&(g.$children$=u),g.$key$=i,g.$name$=s,g},tn=(r,e)=>{const t={$flags$:0,$tag$:r,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},sa={},aa=r=>r&&r.$tag$===sa,oa={forEach:(r,e)=>r.map(Xn).forEach(e),map:(r,e)=>r.map(Xn).map(e).map(ca)},Xn=r=>({vattrs:r.$attrs$,vchildren:r.$children$,vkey:r.$key$,vname:r.$name$,vtag:r.$tag$,vtext:r.$text$}),ca=r=>{if(typeof r.vtag=="function"){const t=Object.assign({},r.vattrs);return r.vkey&&(t.key=r.vkey),r.vname&&(t.name=r.vname),bi(r.vtag,t,...r.vchildren||[])}const e=tn(r.vtag,r.vtext);return e.$attrs$=r.vattrs,e.$children$=r.vchildren,e.$key$=r.vkey,e.$name$=r.vname,e},la=r=>La.map(e=>e(r)).find(e=>!!e),ua=(r,e)=>r!=null&&!$n(r)?e&4?r==="false"?!1:r===""||!!r:e&2?parseFloat(r):e&1?String(r):r:r,fa=r=>r,Dr=(r,e,t)=>{const n=fa(r);return{emit:i=>ha(n,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:i})}},ha=(r,e,t)=>{const n=tt.ce(e,t);return r.dispatchEvent(n),n},ei=new WeakMap,da=(r,e,t)=>{let n=nn.get(r);Ma&&t?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,nn.set(r,n)},ma=(r,e,t,n)=>{var i;let s=Ei(e,t);const a=nn.get(s);if(r=r.nodeType===11?r:gt,a)if(typeof a=="string"){r=r.head||r;let o=ei.get(r),u;if(o||ei.set(r,o=new Set),!o.has(s)){{u=gt.createElement("style"),u.innerHTML=a;const l=(i=tt.$nonce$)!==null&&i!==void 0?i:ia(gt);l!=null&&u.setAttribute("nonce",l),r.insertBefore(u,r.querySelector("link"))}o&&o.add(s)}}else r.adoptedStyleSheets.includes(a)||(r.adoptedStyleSheets=[...r.adoptedStyleSheets,a]);return s},pa=r=>{const e=r.$cmpMeta$,t=r.$hostElement$,n=e.$flags$,i=tr("attachStyles",e.$tagName$),s=ma(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,r.$modeName$);n&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),n&2&&t.classList.add(s+"-s")),i()},Ei=(r,e)=>"sc-"+(e&&r.$flags$&32?r.$tagName$+"-"+e:r.$tagName$),ti=(r,e,t,n,i,s)=>{if(t!==n){let a=si(r,e),o=e.toLowerCase();if(e==="class"){const u=r.classList,l=ri(t),g=ri(n);u.remove(...l.filter(d=>d&&!g.includes(d))),u.add(...g.filter(d=>d&&!l.includes(d)))}else if(e==="style"){for(const u in t)(!n||n[u]==null)&&(u.includes("-")?r.style.removeProperty(u):r.style[u]="");for(const u in n)(!t||n[u]!==t[u])&&(u.includes("-")?r.style.setProperty(u,n[u]):r.style[u]=n[u])}else if(e!=="key")if(e==="ref")n&&n(r);else if(!r.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):si(un,o)?e=o.slice(2):e=o[2]+e.slice(3),t&&tt.rel(r,e,t,!1),n&&tt.ael(r,e,n,!1);else{const u=$n(n);if((a||u&&n!==null)&&!i)try{if(r.tagName.includes("-"))r[e]=n;else{const g=n??"";e==="list"?a=!1:(t==null||r[e]!=g)&&(r[e]=g)}}catch{}let l=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,l=!0),n==null||n===!1?(n!==!1||r.getAttribute(e)==="")&&(l?r.removeAttributeNS(Jn,e):r.removeAttribute(e)):(!a||s&4||i)&&!u&&(n=n===!0?"":n,l?r.setAttributeNS(Jn,e,n):r.setAttribute(e,n))}}},ya=/\s/,ri=r=>r?r.split(ya):[],Si=(r,e,t,n)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=r&&r.$attrs$||Qn,a=e.$attrs$||Qn;for(n in s)n in a||ti(i,n,s[n],void 0,t,e.$flags$);for(n in a)ti(i,n,s[n],a[n],t,e.$flags$)},rn=(r,e,t,n)=>{const i=e.$children$[t];let s=0,a,o,u;if(_i||(Tn=!0,i.$tag$==="slot"&&(ur&&n.classList.add(ur+"-s"),i.$flags$|=i.$children$?2:1)),i.$text$!==null)a=i.$elm$=gt.createTextNode(i.$text$);else if(i.$flags$&1)a=i.$elm$=gt.createTextNode("");else{if(ot||(ot=i.$tag$==="svg"),a=i.$elm$=gt.createElementNS(ot?ta:ra,i.$flags$&2?"slot-fb":i.$tag$),ot&&i.$tag$==="foreignObject"&&(ot=!1),Si(null,i,ot),na(ur)&&a["s-si"]!==ur&&a.classList.add(a["s-si"]=ur),i.$children$)for(s=0;s<i.$children$.length;++s)o=rn(r,i,s,a),o&&a.appendChild(o);i.$tag$==="svg"?ot=!1:a.tagName==="foreignObject"&&(ot=!0)}return a["s-hn"]=cn,i.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=wi,a["s-sn"]=i.$name$||"",u=r&&r.$children$&&r.$children$[t],u&&u.$tag$===i.$tag$&&r.$elm$&&Ar(r.$elm$,!1)),a},Ar=(r,e)=>{tt.$flags$|=1;const t=r.childNodes;for(let n=t.length-1;n>=0;n--){const i=t[n];i["s-hn"]!==cn&&i["s-ol"]&&(Pi(i).insertBefore(i,Dn(i)),i["s-ol"].remove(),i["s-ol"]=void 0,Tn=!0),e&&Ar(i,e)}tt.$flags$&=-2},xi=(r,e,t,n,i,s)=>{let a=r["s-cr"]&&r["s-cr"].parentNode||r,o;for(a.shadowRoot&&a.tagName===cn&&(a=a.shadowRoot);i<=s;++i)n[i]&&(o=rn(null,t,i,r),o&&(n[i].$elm$=o,a.insertBefore(o,Dn(e))))},ki=(r,e,t)=>{for(let n=e;n<=t;++n){const i=r[n];if(i){const s=i.$elm$;Di(i),s&&(en=!0,s["s-ol"]?s["s-ol"].remove():Ar(s,!0),s.remove())}}},ga=(r,e,t,n)=>{let i=0,s=0,a=0,o=0,u=e.length-1,l=e[0],g=e[u],d=n.length-1,_=n[0],y=n[d],S,w;for(;i<=u&&s<=d;)if(l==null)l=e[++i];else if(g==null)g=e[--u];else if(_==null)_=n[++s];else if(y==null)y=n[--d];else if(Vr(l,_))fr(l,_),l=e[++i],_=n[++s];else if(Vr(g,y))fr(g,y),g=e[--u],y=n[--d];else if(Vr(l,y))(l.$tag$==="slot"||y.$tag$==="slot")&&Ar(l.$elm$.parentNode,!1),fr(l,y),r.insertBefore(l.$elm$,g.$elm$.nextSibling),l=e[++i],y=n[--d];else if(Vr(g,_))(l.$tag$==="slot"||y.$tag$==="slot")&&Ar(g.$elm$.parentNode,!1),fr(g,_),r.insertBefore(g.$elm$,l.$elm$),g=e[--u],_=n[++s];else{for(a=-1,o=i;o<=u;++o)if(e[o]&&e[o].$key$!==null&&e[o].$key$===_.$key$){a=o;break}a>=0?(w=e[a],w.$tag$!==_.$tag$?S=rn(e&&e[s],t,a,r):(fr(w,_),e[a]=void 0,S=w.$elm$),_=n[++s]):(S=rn(e&&e[s],t,s,r),_=n[++s]),S&&Pi(l.$elm$).insertBefore(S,Dn(l.$elm$))}i>u?xi(r,n[d+1]==null?null:n[d+1].$elm$,t,n,s,d):s>d&&ki(e,i,u)},Vr=(r,e)=>r.$tag$===e.$tag$?r.$tag$==="slot"?r.$name$===e.$name$:r.$key$===e.$key$:!1,Dn=r=>r&&r["s-ol"]||r,Pi=r=>(r["s-ol"]?r["s-ol"]:r).parentNode,fr=(r,e)=>{const t=e.$elm$=r.$elm$,n=r.$children$,i=e.$children$,s=e.$tag$,a=e.$text$;let o;a===null?(ot=s==="svg"?!0:s==="foreignObject"?!1:ot,s==="slot"||Si(r,e,ot),n!==null&&i!==null?ga(t,n,e,i):i!==null?(r.$text$!==null&&(t.textContent=""),xi(t,null,e,i,0,i.length-1)):n!==null&&ki(n,0,n.length-1),ot&&s==="svg"&&(ot=!1)):(o=t["s-cr"])?o.parentNode.textContent=a:r.$text$!==a&&(t.data=a)},Ti=r=>{const e=r.childNodes;let t,n,i,s,a,o;for(n=0,i=e.length;n<i;n++)if(t=e[n],t.nodeType===1){if(t["s-sr"]){for(a=t["s-sn"],t.hidden=!1,s=0;s<i;s++)if(o=e[s].nodeType,e[s]["s-hn"]!==t["s-hn"]||a!==""){if(o===1&&a===e[s].getAttribute("slot")){t.hidden=!0;break}}else if(o===1||o===3&&e[s].textContent.trim()!==""){t.hidden=!0;break}}Ti(t)}},yt=[],$i=r=>{let e,t,n,i,s,a,o=0;const u=r.childNodes,l=u.length;for(;o<l;o++){if(e=u[o],e["s-sr"]&&(t=e["s-cr"])&&t.parentNode)for(n=t.parentNode.childNodes,i=e["s-sn"],a=n.length-1;a>=0;a--)t=n[a],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==e["s-hn"]&&(ni(t,i)?(s=yt.find(g=>g.$nodeToRelocate$===t),en=!0,t["s-sn"]=t["s-sn"]||i,s?s.$slotRefNode$=e:yt.push({$slotRefNode$:e,$nodeToRelocate$:t}),t["s-sr"]&&yt.map(g=>{ni(g.$nodeToRelocate$,t["s-sn"])&&(s=yt.find(d=>d.$nodeToRelocate$===t),s&&!g.$slotRefNode$&&(g.$slotRefNode$=s.$slotRefNode$))})):yt.some(g=>g.$nodeToRelocate$===t)||yt.push({$nodeToRelocate$:t}));e.nodeType===1&&$i(e)}},ni=(r,e)=>r.nodeType===1?r.getAttribute("slot")===null&&e===""||r.getAttribute("slot")===e:r["s-sn"]===e?!0:e==="",Di=r=>{r.$attrs$&&r.$attrs$.ref&&r.$attrs$.ref(null),r.$children$&&r.$children$.map(Di)},va=(r,e)=>{const t=r.$hostElement$,n=r.$cmpMeta$,i=r.$vnode$||tn(null,null),s=aa(e)?e:bi(null,null,e);cn=t.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([a,o])=>s.$attrs$[o]=t[a])),s.$tag$=null,s.$flags$|=4,r.$vnode$=s,s.$elm$=i.$elm$=t.shadowRoot||t,ur=t["s-sc"],wi=t["s-cr"],_i=(n.$flags$&1)!==0,en=!1,fr(i,s);{if(tt.$flags$|=1,Tn){$i(s.$elm$);let a,o,u,l,g,d,_=0;for(;_<yt.length;_++)a=yt[_],o=a.$nodeToRelocate$,o["s-ol"]||(u=gt.createTextNode(""),u["s-nr"]=o,o.parentNode.insertBefore(o["s-ol"]=u,o));for(_=0;_<yt.length;_++)if(a=yt[_],o=a.$nodeToRelocate$,a.$slotRefNode$){for(l=a.$slotRefNode$.parentNode,g=a.$slotRefNode$.nextSibling,u=o["s-ol"];u=u.previousSibling;)if(d=u["s-nr"],d&&d["s-sn"]===o["s-sn"]&&l===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){g=d;break}(!g&&l!==o.parentNode||o.nextSibling!==g)&&o!==g&&(!o["s-hn"]&&o["s-ol"]&&(o["s-hn"]=o["s-ol"].parentNode.nodeName),l.insertBefore(o,g))}else o.nodeType===1&&(o.hidden=!0)}en&&Ti(s.$elm$),tt.$flags$&=-2,yt.length=0}},wa=(r,e)=>{},Ai=(r,e)=>(r.$flags$|=16,wa(r,r.$ancestorComponent$),Ga(()=>_a(r,e))),_a=(r,e)=>{const t=r.$hostElement$,n=tr("scheduleUpdate",r.$cmpMeta$.$tagName$),i=t;let s;return e?s=mr(i,"componentWillLoad"):s=mr(i,"componentWillUpdate"),s=ii(s,()=>mr(i,"componentWillRender")),n(),ii(s,()=>Ea(r,i,e))},ii=(r,e)=>ba(r)?r.then(e):e(),ba=r=>r instanceof Promise||r&&r.then&&typeof r.then=="function",Ea=async(r,e,t)=>{const n=r.$hostElement$,i=tr("update",r.$cmpMeta$.$tagName$);n["s-rc"],t&&pa(r);const s=tr("render",r.$cmpMeta$.$tagName$);Sa(r,e,n),s(),i(),xa(r)},Sa=(r,e,t)=>{try{Vn=e,e=e.render&&e.render(),r.$flags$&=-17,r.$flags$|=2,(lr.hasRenderFn||lr.reflect)&&(lr.vdomRender||lr.reflect)&&(lr.hydrateServerSide||va(r,e))}catch(o){Rr(o,r.$hostElement$)}return Vn=null,null},xa=r=>{const e=r.$cmpMeta$.$tagName$,t=r.$hostElement$,n=tr("postUpdate",e),i=t;r.$ancestorComponent$,mr(i,"componentDidRender"),r.$flags$&64?(mr(i,"componentDidUpdate"),n()):(r.$flags$|=64,mr(i,"componentDidLoad"),n())},mr=(r,e,t)=>{if(r&&r[e])try{return r[e](t)}catch(n){Rr(n)}},ka=(r,e)=>ln(r).$instanceValues$.get(e),Pa=(r,e,t,n)=>{const i=ln(r),s=r,a=i.$instanceValues$.get(e),o=i.$flags$,u=s;t=ua(t,n.$members$[e][0]);const l=Number.isNaN(a)&&Number.isNaN(t);if(t!==a&&!l){i.$instanceValues$.set(e,t);{if(n.$watchers$&&o&128){const d=n.$watchers$[e];d&&d.map(_=>{try{u[_](t,a,e)}catch(y){Rr(y,s)}})}if((o&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(t,a,e)===!1)return;Ai(i,!1)}}}},Ta=(r,e,t)=>{if(e.$members$){r.watchers&&(e.$watchers$=r.watchers);const n=Object.entries(e.$members$),i=r.prototype;n.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(i,s,{get(){return ka(this,s)},set(o){Pa(this,s,o,e)},configurable:!0,enumerable:!0})});{const s=new Map;i.attributeChangedCallback=function(a,o,u){tt.jmp(()=>{const l=s.get(a);if(this.hasOwnProperty(l))u=this[l],delete this[l];else if(i.hasOwnProperty(l)&&typeof this[l]=="number"&&this[l]==u)return;this[l]=u===null&&typeof this[l]=="boolean"?!1:u})},r.observedAttributes=n.filter(([a,o])=>o[0]&15).map(([a,o])=>{const u=o[1]||a;return s.set(u,a),o[0]&512&&e.$attrsToReflect$.push([a,u]),u})}}return r},$a=async(r,e,t,n,i)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,i=r.constructor,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),i.style)){let a=i.style;typeof a!="string"&&(a=a[e.$modeName$=la(r)]);const o=Ei(t,e.$modeName$);if(!nn.has(o)){const u=tr("registerStyles",t.$tagName$);da(o,a,!!(t.$flags$&1)),u()}}e.$ancestorComponent$,(()=>Ai(e,!0))()},Da=r=>{},Aa=r=>{if(!(tt.$flags$&1)){const e=ln(r),t=e.$cmpMeta$,n=tr("connectedCallback",t.$tagName$);e.$flags$&1?(Oi(r,e,t.$listeners$),Da(e.$lazyInstance$)):(e.$flags$|=1,t.$flags$&12&&Oa(r),t.$members$&&Object.entries(t.$members$).map(([i,[s]])=>{if(s&31&&r.hasOwnProperty(i)){const a=r[i];delete r[i],r[i]=a}}),$a(r,e,t)),n()}},Oa=r=>{const e=r["s-cr"]=gt.createComment("");e["s-cn"]=!0,r.insertBefore(e,r.firstChild)},Ra=r=>{if(!(tt.$flags$&1)){const e=ln(r);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},Ia=(r,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=r.$watchers$,t.$attrsToReflect$=[];const n=r.prototype.connectedCallback,i=r.prototype.disconnectedCallback;return Object.assign(r.prototype,{__registerHost(){Ba(this,t)},connectedCallback(){Aa(this),n&&n.call(this)},disconnectedCallback(){Ra(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),r.is=t.$tagName$,Ta(r,t)},Oi=(r,e,t,n)=>{t&&t.map(([i,s,a])=>{const o=Na(r,i),u=ja(e,a),l=Ca(i);tt.ael(o,s,u,l),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>tt.rel(o,s,u,l))})},ja=(r,e)=>t=>{try{lr.lazyLoad||r.$hostElement$[e](t)}catch(n){Rr(n)}},Na=(r,e)=>e&4?gt:e&8?un:e&16?gt.body:r,Ca=r=>za?{passive:(r&1)!==0,capture:(r&2)!==0}:(r&2)!==0,Ri=new WeakMap,ln=r=>Ri.get(r),Ba=(r,e)=>{const t={$flags$:0,$hostElement$:r,$cmpMeta$:e,$instanceValues$:new Map};return Oi(r,t,e.$listeners$),Ri.set(r,t)},si=(r,e)=>e in r,Rr=(r,e)=>(0,console.error)(r,e),nn=new Map,La=[],un=typeof window<"u"?window:{},gt=un.document||{head:{}},Fa=un.HTMLElement||class{},tt={$flags$:0,$resourcesUrl$:"",jmp:r=>r(),raf:r=>requestAnimationFrame(r),ael:(r,e,t,n)=>r.addEventListener(e,t,n),rel:(r,e,t,n)=>r.removeEventListener(e,t,n),ce:(r,e)=>new CustomEvent(r,e)},za=(()=>{let r=!1;try{gt.addEventListener("e",null,Object.defineProperty({},"passive",{get(){r=!0}}))}catch{}return r})(),Ua=r=>Promise.resolve(r),Ma=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),ai=[],Ii=[],qa=(r,e)=>t=>{r.push(t),En||(En=!0,e&&tt.$flags$&4?Wa(Sn):tt.raf(Sn))},oi=r=>{for(let e=0;e<r.length;e++)try{r[e](performance.now())}catch(t){Rr(t)}r.length=0},Sn=()=>{oi(ai),oi(Ii),(En=ai.length>0)&&tt.raf(Sn)},Wa=r=>Ua().then(r),Ga=qa(Ii,!0),Or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function ji(){throw new Error("setTimeout has not been defined")}function Ni(){throw new Error("clearTimeout has not been defined")}var Bt=ji,Lt=Ni;typeof Or.setTimeout=="function"&&(Bt=setTimeout);typeof Or.clearTimeout=="function"&&(Lt=clearTimeout);function Ci(r){if(Bt===setTimeout)return setTimeout(r,0);if((Bt===ji||!Bt)&&setTimeout)return Bt=setTimeout,setTimeout(r,0);try{return Bt(r,0)}catch{try{return Bt.call(null,r,0)}catch{return Bt.call(this,r,0)}}}function Ha(r){if(Lt===clearTimeout)return clearTimeout(r);if((Lt===Ni||!Lt)&&clearTimeout)return Lt=clearTimeout,clearTimeout(r);try{return Lt(r)}catch{try{return Lt.call(null,r)}catch{return Lt.call(this,r)}}}var Rt=[],pr=!1,Kt,Qr=-1;function Ya(){!pr||!Kt||(pr=!1,Kt.length?Rt=Kt.concat(Rt):Qr=-1,Rt.length&&Bi())}function Bi(){if(!pr){var r=Ci(Ya);pr=!0;for(var e=Rt.length;e;){for(Kt=Rt,Rt=[];++Qr<e;)Kt&&Kt[Qr].run();Qr=-1,e=Rt.length}Kt=null,pr=!1,Ha(r)}}function Za(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Rt.push(new Li(r,e)),Rt.length===1&&!pr&&Ci(Bi)}function Li(r,e){this.fun=r,this.array=e}Li.prototype.run=function(){this.fun.apply(null,this.array)};var Ka="browser",Va="browser",Ja=!0,Qa={},Xa=[],eo="",to={},ro={},no={};function nr(){}var io=nr,so=nr,ao=nr,oo=nr,co=nr,lo=nr,uo=nr;function fo(r){throw new Error("process.binding is not supported")}function ho(){return"/"}function mo(r){throw new Error("process.chdir is not supported")}function po(){return 0}var hr=Or.performance||{},yo=hr.now||hr.mozNow||hr.msNow||hr.oNow||hr.webkitNow||function(){return new Date().getTime()};function go(r){var e=yo.call(hr)*.001,t=Math.floor(e),n=Math.floor(e%1*1e9);return r&&(t=t-r[0],n=n-r[1],n<0&&(t--,n+=1e9)),[t,n]}var vo=new Date;function wo(){var r=new Date,e=r-vo;return e/1e3}var Ft={nextTick:Za,title:Ka,browser:Ja,env:Qa,argv:Xa,version:eo,versions:to,on:io,addListener:so,once:ao,off:oo,removeListener:co,removeAllListeners:lo,emit:uo,binding:fo,cwd:ho,chdir:mo,umask:po,hrtime:go,platform:Va,release:ro,config:no,uptime:wo};const _o="/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist";var bt=[],ht=[],bo=typeof Uint8Array<"u"?Uint8Array:Array,An=!1;function Fi(){An=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=r.length;e<t;++e)bt[e]=r[e],ht[r.charCodeAt(e)]=e;ht["-".charCodeAt(0)]=62,ht["_".charCodeAt(0)]=63}function Eo(r){An||Fi();var e,t,n,i,s,a,o=r.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=r[o-2]==="="?2:r[o-1]==="="?1:0,a=new bo(o*3/4-s),n=s>0?o-4:o;var u=0;for(e=0,t=0;e<n;e+=4,t+=3)i=ht[r.charCodeAt(e)]<<18|ht[r.charCodeAt(e+1)]<<12|ht[r.charCodeAt(e+2)]<<6|ht[r.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=i&255;return s===2?(i=ht[r.charCodeAt(e)]<<2|ht[r.charCodeAt(e+1)]>>4,a[u++]=i&255):s===1&&(i=ht[r.charCodeAt(e)]<<10|ht[r.charCodeAt(e+1)]<<4|ht[r.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=i&255),a}function So(r){return bt[r>>18&63]+bt[r>>12&63]+bt[r>>6&63]+bt[r&63]}function xo(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16)+(r[s+1]<<8)+r[s+2],i.push(So(n));return i.join("")}function ci(r){An||Fi();for(var e,t=r.length,n=t%3,i="",s=[],a=16383,o=0,u=t-n;o<u;o+=a)s.push(xo(r,o,o+a>u?u:o+a));return n===1?(e=r[t-1],i+=bt[e>>2],i+=bt[e<<4&63],i+="=="):n===2&&(e=(r[t-2]<<8)+r[t-1],i+=bt[e>>10],i+=bt[e>>4&63],i+=bt[e<<2&63],i+="="),s.push(i),s.join("")}function fn(r,e,t,n,i){var s,a,o=i*8-n-1,u=(1<<o)-1,l=u>>1,g=-7,d=t?i-1:0,_=t?-1:1,y=r[e+d];for(d+=_,s=y&(1<<-g)-1,y>>=-g,g+=o;g>0;s=s*256+r[e+d],d+=_,g-=8);for(a=s&(1<<-g)-1,s>>=-g,g+=n;g>0;a=a*256+r[e+d],d+=_,g-=8);if(s===0)s=1-l;else{if(s===u)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-l}return(y?-1:1)*a*Math.pow(2,s-n)}function zi(r,e,t,n,i,s){var a,o,u,l=s*8-i-1,g=(1<<l)-1,d=g>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,S=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=g):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?e+=_/u:e+=_*Math.pow(2,1-d),e*u>=2&&(a++,u/=2),a+d>=g?(o=0,a=g):a+d>=1?(o=(e*u-1)*Math.pow(2,i),a=a+d):(o=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;r[t+y]=o&255,y+=S,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;r[t+y]=a&255,y+=S,a/=256,l-=8);r[t+y-S]|=w*128}var ko={}.toString,Ui=Array.isArray||function(r){return ko.call(r)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Po=50;ie.TYPED_ARRAY_SUPPORT=Or.TYPED_ARRAY_SUPPORT!==void 0?Or.TYPED_ARRAY_SUPPORT:!0;function xn(){return ie.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function It(r,e){if(xn()<e)throw new RangeError("Invalid typed array length");return ie.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=ie.prototype):(r===null&&(r=new ie(e)),r.length=e),r}function ie(r,e,t){if(!ie.TYPED_ARRAY_SUPPORT&&!(this instanceof ie))return new ie(r,e,t);if(typeof r=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return On(this,r)}return Mi(this,r,e,t)}ie.poolSize=8192;ie._augment=function(r){return r.__proto__=ie.prototype,r};function Mi(r,e,t,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Do(r,e,t,n):typeof e=="string"?$o(r,e,t):Ao(r,e)}ie.from=function(r,e,t){return Mi(null,r,e,t)};ie.TYPED_ARRAY_SUPPORT&&(ie.prototype.__proto__=Uint8Array.prototype,ie.__proto__=Uint8Array);function qi(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function To(r,e,t,n){return qi(e),e<=0?It(r,e):t!==void 0?typeof n=="string"?It(r,e).fill(t,n):It(r,e).fill(t):It(r,e)}ie.alloc=function(r,e,t){return To(null,r,e,t)};function On(r,e){if(qi(e),r=It(r,e<0?0:Rn(e)|0),!ie.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)r[t]=0;return r}ie.allocUnsafe=function(r){return On(null,r)};ie.allocUnsafeSlow=function(r){return On(null,r)};function $o(r,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ie.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=Wi(e,t)|0;r=It(r,n);var i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function kn(r,e){var t=e.length<0?0:Rn(e.length)|0;r=It(r,t);for(var n=0;n<t;n+=1)r[n]=e[n]&255;return r}function Do(r,e,t,n){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return t===void 0&&n===void 0?e=new Uint8Array(e):n===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,n),ie.TYPED_ARRAY_SUPPORT?(r=e,r.__proto__=ie.prototype):r=kn(r,e),r}function Ao(r,e){if(St(e)){var t=Rn(e.length)|0;return r=It(r,t),r.length===0||e.copy(r,0,0,t),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Ko(e.length)?It(r,0):kn(r,e);if(e.type==="Buffer"&&Ui(e.data))return kn(r,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Rn(r){if(r>=xn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xn().toString(16)+" bytes");return r|0}ie.isBuffer=Vo;function St(r){return!!(r!=null&&r._isBuffer)}ie.compare=function(e,t){if(!St(e)||!St(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,s=0,a=Math.min(n,i);s<a;++s)if(e[s]!==t[s]){n=e[s],i=t[s];break}return n<i?-1:i<n?1:0};ie.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ie.concat=function(e,t){if(!Ui(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ie.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=ie.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if(!St(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,s),s+=a.length}return i};function Wi(r,e){if(St(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var t=r.length;if(t===0)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return sn(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ji(r).length;default:if(n)return sn(r).length;e=(""+e).toLowerCase(),n=!0}}ie.byteLength=Wi;function Oo(r,e,t){var n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Uo(this,e,t);case"utf8":case"utf-8":return Yi(this,e,t);case"ascii":return Fo(this,e,t);case"latin1":case"binary":return zo(this,e,t);case"base64":return Bo(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Mo(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}ie.prototype._isBuffer=!0;function Vt(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}ie.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Vt(this,t,t+1);return this};ie.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Vt(this,t,t+3),Vt(this,t+1,t+2);return this};ie.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Vt(this,t,t+7),Vt(this,t+1,t+6),Vt(this,t+2,t+5),Vt(this,t+3,t+4);return this};ie.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Yi(this,0,e):Oo.apply(this,arguments)};ie.prototype.equals=function(e){if(!St(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:ie.compare(this,e)===0};ie.prototype.inspect=function(){var e="",t=Po;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};ie.prototype.compare=function(e,t,n,i,s){if(!St(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),t<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=n)return 0;if(i>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var a=s-i,o=n-t,u=Math.min(a,o),l=this.slice(i,s),g=e.slice(t,n),d=0;d<u;++d)if(l[d]!==g[d]){a=l[d],o=g[d];break}return a<o?-1:o<a?1:0};function Gi(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=ie.from(e,n)),St(e))return e.length===0?-1:li(r,e,t,n,i);if(typeof e=="number")return e=e&255,ie.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):li(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function li(r,e,t,n,i){var s=1,a=r.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,o/=2,t/=2}function u(y,S){return s===1?y[S]:y.readUInt16BE(S*s)}var l;if(i){var g=-1;for(l=t;l<a;l++)if(u(r,l)===u(e,g===-1?0:l-g)){if(g===-1&&(g=l),l-g+1===o)return g*s}else g!==-1&&(l-=l-g),g=-1}else for(t+o>a&&(t=a-o),l=t;l>=0;l--){for(var d=!0,_=0;_<o;_++)if(u(r,l+_)!==u(e,_)){d=!1;break}if(d)return l}return-1}ie.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};ie.prototype.indexOf=function(e,t,n){return Gi(this,e,t,n,!0)};ie.prototype.lastIndexOf=function(e,t,n){return Gi(this,e,t,n,!1)};function Ro(r,e,t,n){t=Number(t)||0;var i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(e.substr(a*2,2),16);if(isNaN(o))return a;r[t+a]=o}return a}function Io(r,e,t,n){return mn(sn(e,r.length-t),r,t,n)}function Hi(r,e,t,n){return mn(Yo(e),r,t,n)}function jo(r,e,t,n){return Hi(r,e,t,n)}function No(r,e,t,n){return mn(Ji(e),r,t,n)}function Co(r,e,t,n){return mn(Zo(e,r.length-t),r,t,n)}ie.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return Ro(this,e,t,n);case"utf8":case"utf-8":return Io(this,e,t,n);case"ascii":return Hi(this,e,t,n);case"latin1":case"binary":return jo(this,e,t,n);case"base64":return No(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Co(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Bo(r,e,t){return e===0&&t===r.length?ci(r):ci(r.slice(e,t))}function Yi(r,e,t){t=Math.min(r.length,t);for(var n=[],i=e;i<t;){var s=r[i],a=null,o=s>239?4:s>223?3:s>191?2:1;if(i+o<=t){var u,l,g,d;switch(o){case 1:s<128&&(a=s);break;case 2:u=r[i+1],(u&192)===128&&(d=(s&31)<<6|u&63,d>127&&(a=d));break;case 3:u=r[i+1],l=r[i+2],(u&192)===128&&(l&192)===128&&(d=(s&15)<<12|(u&63)<<6|l&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:u=r[i+1],l=r[i+2],g=r[i+3],(u&192)===128&&(l&192)===128&&(g&192)===128&&(d=(s&15)<<18|(u&63)<<12|(l&63)<<6|g&63,d>65535&&d<1114112&&(a=d))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=o}return Lo(n)}var ui=4096;function Lo(r){var e=r.length;if(e<=ui)return String.fromCharCode.apply(String,r);for(var t="",n=0;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ui));return t}function Fo(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function zo(r,e,t){var n="";t=Math.min(r.length,t);for(var i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function Uo(r,e,t){var n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);for(var i="",s=e;s<t;++s)i+=Ho(r[s]);return i}function Mo(r,e,t){for(var n=r.slice(e,t),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}ie.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(ie.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=ie.prototype;else{var s=t-e;i=new ie(s,void 0);for(var a=0;a<s;++a)i[a]=this[a+e]}return i};function Ve(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}ie.prototype.readUIntLE=function(e,t,n){e=e|0,t=t|0,n||Ve(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return i};ie.prototype.readUIntBE=function(e,t,n){e=e|0,t=t|0,n||Ve(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i};ie.prototype.readUInt8=function(e,t){return t||Ve(e,1,this.length),this[e]};ie.prototype.readUInt16LE=function(e,t){return t||Ve(e,2,this.length),this[e]|this[e+1]<<8};ie.prototype.readUInt16BE=function(e,t){return t||Ve(e,2,this.length),this[e]<<8|this[e+1]};ie.prototype.readUInt32LE=function(e,t){return t||Ve(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};ie.prototype.readUInt32BE=function(e,t){return t||Ve(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};ie.prototype.readIntLE=function(e,t,n){e=e|0,t=t|0,n||Ve(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};ie.prototype.readIntBE=function(e,t,n){e=e|0,t=t|0,n||Ve(e,t,this.length);for(var i=t,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};ie.prototype.readInt8=function(e,t){return t||Ve(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};ie.prototype.readInt16LE=function(e,t){t||Ve(e,2,this.length);var n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt16BE=function(e,t){t||Ve(e,2,this.length);var n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt32LE=function(e,t){return t||Ve(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};ie.prototype.readInt32BE=function(e,t){return t||Ve(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};ie.prototype.readFloatLE=function(e,t){return t||Ve(e,4,this.length),fn(this,e,!0,23,4)};ie.prototype.readFloatBE=function(e,t){return t||Ve(e,4,this.length),fn(this,e,!1,23,4)};ie.prototype.readDoubleLE=function(e,t){return t||Ve(e,8,this.length),fn(this,e,!0,52,8)};ie.prototype.readDoubleBE=function(e,t){return t||Ve(e,8,this.length),fn(this,e,!1,52,8)};function it(r,e,t,n,i,s){if(!St(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}ie.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;it(this,e,t,n,s,0)}var a=1,o=0;for(this[t]=e&255;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n};ie.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t|0,n=n|0,!i){var s=Math.pow(2,8*n)-1;it(this,e,t,n,s,0)}var a=n-1,o=1;for(this[t+a]=e&255;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n};ie.prototype.writeUInt8=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,1,255,0),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function hn(r,e,t,n){e<0&&(e=65535+e+1);for(var i=0,s=Math.min(r.length-t,2);i<s;++i)r[t+i]=(e&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}ie.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):hn(this,e,t,!0),t+2};ie.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):hn(this,e,t,!1),t+2};function dn(r,e,t,n){e<0&&(e=4294967295+e+1);for(var i=0,s=Math.min(r.length-t,4);i<s;++i)r[t+i]=e>>>(n?i:3-i)*8&255}ie.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):dn(this,e,t,!0),t+4};ie.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):dn(this,e,t,!1),t+4};ie.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);it(this,e,t,n,s-1,-s)}var a=0,o=1,u=0;for(this[t]=e&255;++a<n&&(o*=256);)e<0&&u===0&&this[t+a-1]!==0&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n};ie.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t|0,!i){var s=Math.pow(2,8*n-1);it(this,e,t,n,s-1,-s)}var a=n-1,o=1,u=0;for(this[t+a]=e&255;--a>=0&&(o*=256);)e<0&&u===0&&this[t+a+1]!==0&&(u=1),this[t+a]=(e/o>>0)-u&255;return t+n};ie.prototype.writeInt8=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,1,127,-128),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};ie.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):hn(this,e,t,!0),t+2};ie.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):hn(this,e,t,!1),t+2};ie.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,4,2147483647,-2147483648),ie.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):dn(this,e,t,!0),t+4};ie.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t|0,n||it(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):dn(this,e,t,!1),t+4};function Zi(r,e,t,n,i,s){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Ki(r,e,t,n,i){return i||Zi(r,e,t,4),zi(r,e,t,n,23,4),t+4}ie.prototype.writeFloatLE=function(e,t,n){return Ki(this,e,t,!0,n)};ie.prototype.writeFloatBE=function(e,t,n){return Ki(this,e,t,!1,n)};function Vi(r,e,t,n,i){return i||Zi(r,e,t,8),zi(r,e,t,n,52,8),t+8}ie.prototype.writeDoubleLE=function(e,t,n){return Vi(this,e,t,!0,n)};ie.prototype.writeDoubleBE=function(e,t,n){return Vi(this,e,t,!1,n)};ie.prototype.copy=function(e,t,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var s=i-n,a;if(this===e&&n<t&&t<i)for(a=s-1;a>=0;--a)e[a+t]=this[a+n];else if(s<1e3||!ie.TYPED_ARRAY_SUPPORT)for(a=0;a<s;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s};ie.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ie.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{var o=St(e)?e:sn(new ie(e,i).toString()),u=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var qo=/[^+\/0-9A-Za-z-_]/g;function Wo(r){if(r=Go(r).replace(qo,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Go(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Ho(r){return r<16?"0"+r.toString(16):r.toString(16)}function sn(r,e){e=e||1/0;for(var t,n=r.length,i=null,s=[],a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Yo(r){for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Zo(r,e){for(var t,n,i,s=[],a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),n=t>>8,i=t%256,s.push(i),s.push(n);return s}function Ji(r){return Eo(Wo(r))}function mn(r,e,t,n){for(var i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Ko(r){return r!==r}function Vo(r){return r!=null&&(!!r._isBuffer||Qi(r)||Jo(r))}function Qi(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Jo(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&Qi(r.slice(0,0))}var zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function In(r,e,t){return t={path:e,exports:{},require:function(n,i){return jt()}},r(t,t.exports),t.exports}function Xi(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}function jt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function es(r,e){for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];i==="."?r.splice(n,1):i===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var Qo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,jn=function(r){return Qo.exec(r).slice(1)};function an(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=es(Bn(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Nn(r){var e=Cn(r),t=ec(r,-1)==="/";return r=es(Bn(r.split("/"),function(n){return!!n}),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}function Cn(r){return r.charAt(0)==="/"}function ts(){var r=Array.prototype.slice.call(arguments,0);return Nn(Bn(r,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function rs(r,e){r=an(r).substr(1),e=an(e).substr(1);function t(l){for(var g=0;g<l.length&&l[g]==="";g++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return g>d?[]:l.slice(g,d-g+1)}for(var n=t(r.split("/")),i=t(e.split("/")),s=Math.min(n.length,i.length),a=s,o=0;o<s;o++)if(n[o]!==i[o]){a=o;break}for(var u=[],o=a;o<n.length;o++)u.push("..");return u=u.concat(i.slice(a)),u.join("/")}var ns="/",is=":";function ss(r){var e=jn(r),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function as(r,e){var t=jn(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function os(r){return jn(r)[3]}const Xo={extname:os,basename:as,dirname:ss,sep:ns,delimiter:is,relative:rs,join:ts,isAbsolute:Cn,normalize:Nn,resolve:an};function Bn(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var ec="ab".substr(-1)==="b"?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)};const tc=Object.freeze({__proto__:null,resolve:an,normalize:Nn,isAbsolute:Cn,join:ts,relative:rs,sep:ns,delimiter:is,dirname:ss,basename:as,extname:os,default:Xo}),rc={},nc=Object.freeze({__proto__:null,default:rc}),fi=Xi(tc),hi=Xi(nc);var ic=In(function(r,e){var t=void 0,n=function(i){return t||(t=new Promise(function(s,a){var o=typeof i<"u"?i:{},u=o.onAbort;o.onAbort=function(c){a(new Error(c)),u&&u(c)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),r=void 0;var l;l||(l=typeof o<"u"?o:{}),l.onRuntimeInitialized=function(){function c(U,ae){switch(typeof ae){case"boolean":Qs(U,ae?1:0);break;case"number":Ks(U,ae);break;case"string":Vs(U,ae,-1,-1);break;case"object":if(ae===null)Zn(U);else if(ae.length!=null){var be=xr(ae);Js(U,be,ae.length,-1),Yr(be)}else Kr(U,"Wrong API use : tried to return a value of an unknown type ("+ae+").",-1);break;default:Zn(U)}}function f(U,ae){for(var be=[],Pe=0;Pe<U;Pe+=1){var Oe=re(ae+4*Pe,"i32"),Fe=Ws(Oe);if(Fe===1||Fe===2)Oe=Zs(Oe);else if(Fe===3)Oe=Hs(Oe);else if(Fe===4){Fe=Oe,Oe=Gs(Fe),Fe=Ys(Fe);for(var _t=new Uint8Array(Oe),at=0;at<Oe;at+=1)_t[at]=ee[Fe+at];Oe=_t}else Oe=null;be.push(Oe)}return be}function m(U,ae){this.La=U,this.db=ae,this.Ja=1,this.fb=[]}function x(U,ae){if(this.db=ae,ae=Q(U)+1,this.Ya=Yt(ae),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");p(U,Se,this.Ya,ae),this.eb=this.Ya,this.Ua=this.ib=null}function O(U){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),U!=null){var ae=this.filename,be="/",Pe=ae;if(be&&(be=typeof be=="string"?be:qt(be),Pe=ae?ye(be+"/"+ae):be),ae=cr(!0,!0),Pe=ir(Pe,(ae!==void 0?ae:438)&4095|32768,0),U){if(typeof U=="string"){be=Array(U.length);for(var Oe=0,Fe=U.length;Oe<Fe;++Oe)be[Oe]=U.charCodeAt(Oe);U=be}ar(Pe,ae|146),be=lt(Pe,577),Gt(be,U,0,U.length,0),or(be),ar(Pe,ae)}}this.handleError(Te(this.filename,Z)),this.db=re(Z,"i32"),Xs(this.db),this.Za={},this.Na={}}var Z=Ct(4),te=l.cwrap,Te=te("sqlite3_open","number",["string","number"]),Be=te("sqlite3_close_v2","number",["number"]),je=te("sqlite3_exec","number",["number","string","number","number","number"]),Ye=te("sqlite3_changes","number",["number"]),Dt=te("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qn=te("sqlite3_sql","string",["number"]),Ts=te("sqlite3_normalized_sql","string",["number"]),Wn=te("sqlite3_prepare_v2","number",["number","number","number","number","number"]),$s=te("sqlite3_bind_text","number",["number","number","number","number","number"]),Gn=te("sqlite3_bind_blob","number",["number","number","number","number","number"]),Ds=te("sqlite3_bind_double","number",["number","number","number"]),As=te("sqlite3_bind_int","number",["number","number","number"]),Os=te("sqlite3_bind_parameter_index","number",["number","string"]),Rs=te("sqlite3_step","number",["number"]),Is=te("sqlite3_errmsg","string",["number"]),js=te("sqlite3_column_count","number",["number"]),Ns=te("sqlite3_data_count","number",["number"]),Cs=te("sqlite3_column_double","number",["number","number"]),Hn=te("sqlite3_column_text","string",["number","number"]),Bs=te("sqlite3_column_blob","number",["number","number"]),Ls=te("sqlite3_column_bytes","number",["number","number"]),Fs=te("sqlite3_column_type","number",["number","number"]),zs=te("sqlite3_column_name","string",["number","number"]),Us=te("sqlite3_reset","number",["number"]),Ms=te("sqlite3_clear_bindings","number",["number"]),qs=te("sqlite3_finalize","number",["number"]),Yn=te("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Ws=te("sqlite3_value_type","number",["number"]),Gs=te("sqlite3_value_bytes","number",["number"]),Hs=te("sqlite3_value_text","string",["number"]),Ys=te("sqlite3_value_blob","number",["number"]),Zs=te("sqlite3_value_double","number",["number"]),Ks=te("sqlite3_result_double","",["number","number"]),Zn=te("sqlite3_result_null","",["number"]),Vs=te("sqlite3_result_text","",["number","string","number","number"]),Js=te("sqlite3_result_blob","",["number","number","number","number"]),Qs=te("sqlite3_result_int","",["number","number"]),Kr=te("sqlite3_result_error","",["number","string","number"]),Kn=te("sqlite3_aggregate_context","number",["number","number"]),Xs=te("RegisterExtensionFunctions","number",["number"]);m.prototype.bind=function(U){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(U)?this.xb(U):U!=null&&typeof U=="object"?this.yb(U):!0},m.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var U=Rs(this.La);switch(U){case 100:return!0;case 101:return!1;default:throw this.db.handleError(U)}},m.prototype.sb=function(U){return U==null&&(U=this.Ja,this.Ja+=1),Cs(this.La,U)},m.prototype.Cb=function(U){if(U==null&&(U=this.Ja,this.Ja+=1),U=Hn(this.La,U),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(U)},m.prototype.Db=function(U){return U==null&&(U=this.Ja,this.Ja+=1),Hn(this.La,U)},m.prototype.getBlob=function(U){U==null&&(U=this.Ja,this.Ja+=1);var ae=Ls(this.La,U);U=Bs(this.La,U);for(var be=new Uint8Array(ae),Pe=0;Pe<ae;Pe+=1)be[Pe]=ee[U+Pe];return be},m.prototype.get=function(U,ae){ae=ae||{},U!=null&&this.bind(U)&&this.step(),U=[];for(var be=Ns(this.La),Pe=0;Pe<be;Pe+=1)switch(Fs(this.La,Pe)){case 1:var Oe=ae.useBigInt?this.Cb(Pe):this.sb(Pe);U.push(Oe);break;case 2:U.push(this.sb(Pe));break;case 3:U.push(this.Db(Pe));break;case 4:U.push(this.getBlob(Pe));break;default:U.push(null)}return U},m.prototype.getColumnNames=function(){for(var U=[],ae=js(this.La),be=0;be<ae;be+=1)U.push(zs(this.La,be));return U},m.prototype.getAsObject=function(U,ae){U=this.get(U,ae),ae=this.getColumnNames();for(var be={},Pe=0;Pe<ae.length;Pe+=1)be[ae[Pe]]=U[Pe];return be},m.prototype.getSQL=function(){return qn(this.La)},m.prototype.getNormalizedSQL=function(){return Ts(this.La)},m.prototype.run=function(U){return U!=null&&this.bind(U),this.step(),this.reset()},m.prototype.nb=function(U,ae){ae==null&&(ae=this.Ja,this.Ja+=1),U=Ke(U);var be=xr(U);this.fb.push(be),this.db.handleError($s(this.La,ae,be,U.length-1,0))},m.prototype.wb=function(U,ae){ae==null&&(ae=this.Ja,this.Ja+=1);var be=xr(U);this.fb.push(be),this.db.handleError(Gn(this.La,ae,be,U.length,0))},m.prototype.mb=function(U,ae){ae==null&&(ae=this.Ja,this.Ja+=1),this.db.handleError((U===(U|0)?As:Ds)(this.La,ae,U))},m.prototype.zb=function(U){U==null&&(U=this.Ja,this.Ja+=1),Gn(this.La,U,0,0,0)},m.prototype.ob=function(U,ae){switch(ae==null&&(ae=this.Ja,this.Ja+=1),typeof U){case"string":this.nb(U,ae);return;case"number":this.mb(U,ae);return;case"bigint":this.nb(U.toString(),ae);return;case"boolean":this.mb(U+0,ae);return;case"object":if(U===null){this.zb(ae);return}if(U.length!=null){this.wb(U,ae);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+U+")."},m.prototype.yb=function(U){var ae=this;return Object.keys(U).forEach(function(be){var Pe=Os(ae.La,be);Pe!==0&&ae.ob(U[be],Pe)}),!0},m.prototype.xb=function(U){for(var ae=0;ae<U.length;ae+=1)this.ob(U[ae],ae+1);return!0},m.prototype.reset=function(){return this.freemem(),Ms(this.La)===0&&Us(this.La)===0},m.prototype.freemem=function(){for(var U;(U=this.fb.pop())!==void 0;)Yr(U)},m.prototype.free=function(){this.freemem();var U=qs(this.La)===0;return delete this.db.Za[this.La],this.La=0,U},x.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var U=Pr(),ae=Ct(4);M(Z),M(ae);try{this.db.handleError(Wn(this.db.db,this.eb,-1,Z,ae)),this.eb=re(ae,"i32");var be=re(Z,"i32");return be===0?(this.gb(),{done:!0}):(this.Ua=new m(be,this.db),this.db.Za[be]=this.Ua,{value:this.Ua,done:!1})}catch(Pe){throw this.ib=W(this.eb),this.gb(),Pe}finally{Tr(U)}},x.prototype.gb=function(){Yr(this.Ya),this.Ya=null},x.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:W(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(x.prototype[Symbol.iterator]=function(){return this}),O.prototype.run=function(U,ae){if(!this.db)throw"Database closed";if(ae){U=this.prepare(U,ae);try{U.step()}finally{U.free()}}else this.handleError(je(this.db,U,0,0,Z));return this},O.prototype.exec=function(U,ae,be){if(!this.db)throw"Database closed";var Pe=Pr(),Oe=null;try{var Fe=Q(U)+1,_t=Ct(Fe);p(U,ee,_t,Fe);var at=_t,ut=Ct(4);for(U=[];re(at,"i8")!==0;){M(Z),M(ut),this.handleError(Wn(this.db,at,-1,Z,ut));var ft=re(Z,"i32");if(at=re(ut,"i32"),ft!==0){for(Fe=null,Oe=new m(ft,this),ae!=null&&Oe.bind(ae);Oe.step();)Fe===null&&(Fe={columns:Oe.getColumnNames(),values:[]},U.push(Fe)),Fe.values.push(Oe.get(null,be));Oe.free()}}return U}catch($r){throw Oe&&Oe.free(),$r}finally{Tr(Pe)}},O.prototype.each=function(U,ae,be,Pe,Oe){typeof ae=="function"&&(Pe=be,be=ae,ae=void 0),U=this.prepare(U,ae);try{for(;U.step();)be(U.getAsObject(null,Oe))}finally{U.free()}if(typeof Pe=="function")return Pe()},O.prototype.prepare=function(U,ae){if(M(Z),this.handleError(Dt(this.db,U,-1,Z,0)),U=re(Z,"i32"),U===0)throw"Nothing to prepare";var be=new m(U,this);return ae!=null&&be.bind(ae),this.Za[U]=be},O.prototype.iterateStatements=function(U){return new x(U,this)},O.prototype.export=function(){Object.values(this.Za).forEach(function(ae){ae.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Be(this.db));var U=Er(this.filename);return this.handleError(Te(this.filename,Z)),this.db=re(Z,"i32"),U},O.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(U){U.free()}),Object.values(this.Na).forEach($t),this.Na={},this.handleError(Be(this.db)),zr("/"+this.filename),this.db=null)},O.prototype.handleError=function(U){if(U===0)return null;throw U=Is(this.db),Error(U)},O.prototype.getRowsModified=function(){return Ye(this.db)},O.prototype.create_function=function(U,ae){Object.prototype.hasOwnProperty.call(this.Na,U)&&($t(this.Na[U]),delete this.Na[U]);var be=Tt(function(Pe,Oe,Fe){Oe=f(Oe,Fe);try{var _t=ae.apply(null,Oe)}catch(at){Kr(Pe,at,-1);return}c(Pe,_t)},"viii");return this.Na[U]=be,this.handleError(Yn(this.db,U,ae.length,1,0,be,0,0,0)),this},O.prototype.create_aggregate=function(U,ae){var be=ae.init||function(){return null},Pe=ae.finalize||function(ut){return ut},Oe=ae.step;if(!Oe)throw"An aggregate function must have a step function in "+U;var Fe={};Object.hasOwnProperty.call(this.Na,U)&&($t(this.Na[U]),delete this.Na[U]),ae=U+"__finalize",Object.hasOwnProperty.call(this.Na,ae)&&($t(this.Na[ae]),delete this.Na[ae]);var _t=Tt(function(ut,ft,$r){var Zt=Kn(ut,1);Object.hasOwnProperty.call(Fe,Zt)||(Fe[Zt]=be()),ft=f(ft,$r),ft=[Fe[Zt]].concat(ft);try{Fe[Zt]=Oe.apply(null,ft)}catch(ea){delete Fe[Zt],Kr(ut,ea,-1)}},"viii"),at=Tt(function(ut){var ft=Kn(ut,1);try{var $r=Pe(Fe[ft])}catch(Zt){delete Fe[ft],Kr(ut,Zt,-1);return}c(ut,$r),delete Fe[ft]},"vi");return this.Na[U]=_t,this.Na[ae]=at,this.handleError(Yn(this.db,U,Oe.length-1,1,0,0,_t,at,0)),this},l.Database=O};var g=Object.assign({},l),d="./this.program",_=typeof window=="object",y=typeof importScripts=="function",S=typeof Ft=="object"&&typeof Ft.versions=="object"&&typeof Ft.versions.node=="string",w="",P,E,T,N,L,D;S?(w=y?fi.dirname(w)+"/":_o+"/",D=()=>{L||(N=hi,L=fi)},P=function(c,f){return D(),c=L.normalize(c),N.readFileSync(c,f?void 0:"utf8")},T=c=>(c=P(c,!0),c.buffer||(c=new Uint8Array(c)),c),E=(c,f,m)=>{D(),c=L.normalize(c),N.readFile(c,function(x,O){x?m(x):f(O.buffer)})},1<Ft.argv.length&&(d=Ft.argv[1].replace(/\\/g,"/")),r.exports=l,l.inspect=function(){return"[Emscripten Module object]"}):(_||y)&&(y?w=self.location.href:typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),w=w.indexOf("blob:")!==0?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",P=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.send(null),f.responseText},y&&(T=c=>{var f=new XMLHttpRequest;return f.open("GET",c,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),E=(c,f,m)=>{var x=new XMLHttpRequest;x.open("GET",c,!0),x.responseType="arraybuffer",x.onload=()=>{x.status==200||x.status==0&&x.response?f(x.response):m()},x.onerror=m,x.send(null)});var H=l.print||console.log.bind(console),z=l.printErr||console.warn.bind(console);Object.assign(l,g),g=null,l.thisProgram&&(d=l.thisProgram);var V;l.wasmBinary&&(V=l.wasmBinary),typeof WebAssembly!="object"&&He("no native wasm support detected");var G,oe=!1,ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function A(c,f,m){var x=f+m;for(m=f;c[m]&&!(m>=x);)++m;if(16<m-f&&c.buffer&&ve)return ve.decode(c.subarray(f,m));for(x="";f<m;){var O=c[f++];if(O&128){var Z=c[f++]&63;if((O&224)==192)x+=String.fromCharCode((O&31)<<6|Z);else{var te=c[f++]&63;O=(O&240)==224?(O&15)<<12|Z<<6|te:(O&7)<<18|Z<<12|te<<6|c[f++]&63,65536>O?x+=String.fromCharCode(O):(O-=65536,x+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else x+=String.fromCharCode(O)}return x}function W(c,f){return c?A(Se,c,f):""}function p(c,f,m,x){if(!(0<x))return 0;var O=m;x=m+x-1;for(var Z=0;Z<c.length;++Z){var te=c.charCodeAt(Z);if(55296<=te&&57343>=te){var Te=c.charCodeAt(++Z);te=65536+((te&1023)<<10)|Te&1023}if(127>=te){if(m>=x)break;f[m++]=te}else{if(2047>=te){if(m+1>=x)break;f[m++]=192|te>>6}else{if(65535>=te){if(m+2>=x)break;f[m++]=224|te>>12}else{if(m+3>=x)break;f[m++]=240|te>>18,f[m++]=128|te>>12&63}f[m++]=128|te>>6&63}f[m++]=128|te&63}}return f[m]=0,m-O}function Q(c){for(var f=0,m=0;m<c.length;++m){var x=c.charCodeAt(m);127>=x?f++:2047>=x?f+=2:55296<=x&&57343>=x?(f+=4,++m):f+=3}return f}var xe,ee,Se,ce,ue,F,q,Ee;function ge(){var c=G.buffer;xe=c,l.HEAP8=ee=new Int8Array(c),l.HEAP16=ce=new Int16Array(c),l.HEAP32=ue=new Int32Array(c),l.HEAPU8=Se=new Uint8Array(c),l.HEAPU16=new Uint16Array(c),l.HEAPU32=F=new Uint32Array(c),l.HEAPF32=q=new Float32Array(c),l.HEAPF64=Ee=new Float64Array(c)}var me,Me=[],Ge=[],Ae=[];function Re(){var c=l.preRun.shift();Me.unshift(c)}var Ue=0,ze=null;function He(c){throw l.onAbort&&l.onAbort(c),c="Aborted("+c+")",z(c),oe=!0,new WebAssembly.RuntimeError(c+". Build with -sASSERTIONS for more info.")}function Je(){return h.startsWith("data:application/octet-stream;base64,")}var h;if(h="sql-wasm.wasm",!Je()){var K=h;h=l.locateFile?l.locateFile(K,w):w+K}function Y(){var c=h;try{if(c==h&&V)return new Uint8Array(V);if(T)return T(c);throw"both async and sync fetching of the wasm failed"}catch(f){He(f)}}function $(){if(!V&&(_||y)){if(typeof fetch=="function"&&!h.startsWith("file://"))return fetch(h,{credentials:"same-origin"}).then(function(c){if(!c.ok)throw"failed to load wasm binary file at '"+h+"'";return c.arrayBuffer()}).catch(function(){return Y()});if(E)return new Promise(function(c,f){E(h,function(m){c(new Uint8Array(m))},f)})}return Promise.resolve().then(function(){return Y()})}var b,I;function ne(c){for(;0<c.length;)c.shift()(l)}function re(c,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":return ee[c>>0];case"i8":return ee[c>>0];case"i16":return ce[c>>1];case"i32":return ue[c>>2];case"i64":return ue[c>>2];case"float":return q[c>>2];case"double":return Ee[c>>3];case"*":return F[c>>2];default:He("invalid type for getValue: "+f)}return null}function M(c){var f="i32";switch(f.endsWith("*")&&(f="*"),f){case"i1":ee[c>>0]=0;break;case"i8":ee[c>>0]=0;break;case"i16":ce[c>>1]=0;break;case"i32":ue[c>>2]=0;break;case"i64":I=[0,(b=0,1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[c>>2]=I[0],ue[c+4>>2]=I[1];break;case"float":q[c>>2]=0;break;case"double":Ee[c>>3]=0;break;case"*":F[c>>2]=0;break;default:He("invalid type for setValue: "+f)}}var fe=(c,f)=>{for(var m=0,x=c.length-1;0<=x;x--){var O=c[x];O==="."?c.splice(x,1):O===".."?(c.splice(x,1),m++):m&&(c.splice(x,1),m--)}if(f)for(;m;m--)c.unshift("..");return c},ye=c=>{var f=c.charAt(0)==="/",m=c.substr(-1)==="/";return(c=fe(c.split("/").filter(x=>!!x),!f).join("/"))||f||(c="."),c&&m&&(c+="/"),(f?"/":"")+c},de=c=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(c).slice(1);return c=f[0],f=f[1],!c&&!f?".":(f&&(f=f.substr(0,f.length-1)),c+f)},_e=c=>{if(c==="/")return"/";c=ye(c),c=c.replace(/\/$/,"");var f=c.lastIndexOf("/");return f===-1?c:c.substr(f+1)};function Ce(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var c=new Uint8Array(1);return()=>(crypto.getRandomValues(c),c[0])}if(S)try{var f=hi;return()=>f.randomBytes(1)[0]}catch{}return()=>He("randomDevice")}function $e(){for(var c="",f=!1,m=arguments.length-1;-1<=m&&!f;m--){if(f=0<=m?arguments[m]:"/",typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";c=f+"/"+c,f=f.charAt(0)==="/"}return c=fe(c.split("/").filter(x=>!!x),!f).join("/"),(f?"/":"")+c||"."}function Ke(c,f){var m=Array(Q(c)+1);return c=p(c,m,0,m.length),f&&(m.length=c),m}var mt=[];function Qe(c,f){mt[c]={input:[],output:[],Xa:f},wr(c,vt)}var vt={open:function(c){var f=mt[c.node.rdev];if(!f)throw new X(43);c.tty=f,c.seekable=!1},close:function(c){c.tty.Xa.fsync(c.tty)},fsync:function(c){c.tty.Xa.fsync(c.tty)},read:function(c,f,m,x){if(!c.tty||!c.tty.Xa.tb)throw new X(60);for(var O=0,Z=0;Z<x;Z++){try{var te=c.tty.Xa.tb(c.tty)}catch{throw new X(29)}if(te===void 0&&O===0)throw new X(6);if(te==null)break;O++,f[m+Z]=te}return O&&(c.node.timestamp=Date.now()),O},write:function(c,f,m,x){if(!c.tty||!c.tty.Xa.jb)throw new X(60);try{for(var O=0;O<x;O++)c.tty.Xa.jb(c.tty,f[m+O])}catch{throw new X(29)}return x&&(c.node.timestamp=Date.now()),O}},qe={tb:function(c){if(!c.input.length){var f=null;if(S){var m=ie.alloc(256),x=0;try{x=N.readSync(Ft.stdin.fd,m,0,256,-1)}catch(O){if(O.toString().includes("EOF"))x=0;else throw O}0<x?f=m.slice(0,x).toString("utf-8"):f=null}else typeof window<"u"&&typeof window.prompt=="function"?(f=window.prompt("Input: "),f!==null&&(f+=`
`)):typeof readline=="function"&&(f=readline(),f!==null&&(f+=`
`));if(!f)return null;c.input=Ke(f,!0)}return c.input.shift()},jb:function(c,f){f===null||f===10?(H(A(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync:function(c){c.output&&0<c.output.length&&(H(A(c.output,0)),c.output=[])}},wt={jb:function(c,f){f===null||f===10?(z(A(c.output,0)),c.output=[]):f!=0&&c.output.push(f)},fsync:function(c){c.output&&0<c.output.length&&(z(A(c.output,0)),c.output=[])}},ke={Qa:null,Ra:function(){return ke.createNode(null,"/",16895,0)},createNode:function(c,f,m,x){if((m&61440)===24576||(m&61440)===4096)throw new X(63);return ke.Qa||(ke.Qa={dir:{node:{Pa:ke.Ga.Pa,Oa:ke.Ga.Oa,lookup:ke.Ga.lookup,ab:ke.Ga.ab,rename:ke.Ga.rename,unlink:ke.Ga.unlink,rmdir:ke.Ga.rmdir,readdir:ke.Ga.readdir,symlink:ke.Ga.symlink},stream:{Ta:ke.Ha.Ta}},file:{node:{Pa:ke.Ga.Pa,Oa:ke.Ga.Oa},stream:{Ta:ke.Ha.Ta,read:ke.Ha.read,write:ke.Ha.write,lb:ke.Ha.lb,bb:ke.Ha.bb,cb:ke.Ha.cb}},link:{node:{Pa:ke.Ga.Pa,Oa:ke.Ga.Oa,readlink:ke.Ga.readlink},stream:{}},pb:{node:{Pa:ke.Ga.Pa,Oa:ke.Ga.Oa},stream:wn}}),m=jr(c,f,m,x),(m.mode&61440)===16384?(m.Ga=ke.Qa.dir.node,m.Ha=ke.Qa.dir.stream,m.Ia={}):(m.mode&61440)===32768?(m.Ga=ke.Qa.file.node,m.Ha=ke.Qa.file.stream,m.Ma=0,m.Ia=null):(m.mode&61440)===40960?(m.Ga=ke.Qa.link.node,m.Ha=ke.Qa.link.stream):(m.mode&61440)===8192&&(m.Ga=ke.Qa.pb.node,m.Ha=ke.Qa.pb.stream),m.timestamp=Date.now(),c&&(c.Ia[f]=m,c.timestamp=m.timestamp),m},Jb:function(c){return c.Ia?c.Ia.subarray?c.Ia.subarray(0,c.Ma):new Uint8Array(c.Ia):new Uint8Array(0)},qb:function(c,f){var m=c.Ia?c.Ia.length:0;m>=f||(f=Math.max(f,m*(1048576>m?2:1.125)>>>0),m!=0&&(f=Math.max(f,256)),m=c.Ia,c.Ia=new Uint8Array(f),0<c.Ma&&c.Ia.set(m.subarray(0,c.Ma),0))},Gb:function(c,f){if(c.Ma!=f)if(f==0)c.Ia=null,c.Ma=0;else{var m=c.Ia;c.Ia=new Uint8Array(f),m&&c.Ia.set(m.subarray(0,Math.min(f,c.Ma))),c.Ma=f}},Ga:{Pa:function(c){var f={};return f.dev=(c.mode&61440)===8192?c.id:1,f.ino=c.id,f.mode=c.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=c.rdev,(c.mode&61440)===16384?f.size=4096:(c.mode&61440)===32768?f.size=c.Ma:(c.mode&61440)===40960?f.size=c.link.length:f.size=0,f.atime=new Date(c.timestamp),f.mtime=new Date(c.timestamp),f.ctime=new Date(c.timestamp),f.Ab=4096,f.blocks=Math.ceil(f.size/f.Ab),f},Oa:function(c,f){f.mode!==void 0&&(c.mode=f.mode),f.timestamp!==void 0&&(c.timestamp=f.timestamp),f.size!==void 0&&ke.Gb(c,f.size)},lookup:function(){throw pt[44]},ab:function(c,f,m,x){return ke.createNode(c,f,m,x)},rename:function(c,f,m){if((c.mode&61440)===16384){try{var x=kt(f,m)}catch{}if(x)for(var O in x.Ia)throw new X(55)}delete c.parent.Ia[c.name],c.parent.timestamp=Date.now(),c.name=m,f.Ia[m]=c,f.timestamp=c.parent.timestamp,c.parent=f},unlink:function(c,f){delete c.Ia[f],c.timestamp=Date.now()},rmdir:function(c,f){var m=kt(c,f),x;for(x in m.Ia)throw new X(55);delete c.Ia[f],c.timestamp=Date.now()},readdir:function(c){var f=[".",".."],m;for(m in c.Ia)c.Ia.hasOwnProperty(m)&&f.push(m);return f},symlink:function(c,f,m){return c=ke.createNode(c,f,41471,0),c.link=m,c},readlink:function(c){if((c.mode&61440)!==40960)throw new X(28);return c.link}},Ha:{read:function(c,f,m,x,O){var Z=c.node.Ia;if(O>=c.node.Ma)return 0;if(c=Math.min(c.node.Ma-O,x),8<c&&Z.subarray)f.set(Z.subarray(O,O+c),m);else for(x=0;x<c;x++)f[m+x]=Z[O+x];return c},write:function(c,f,m,x,O,Z){if(f.buffer===ee.buffer&&(Z=!1),!x)return 0;if(c=c.node,c.timestamp=Date.now(),f.subarray&&(!c.Ia||c.Ia.subarray)){if(Z)return c.Ia=f.subarray(m,m+x),c.Ma=x;if(c.Ma===0&&O===0)return c.Ia=f.slice(m,m+x),c.Ma=x;if(O+x<=c.Ma)return c.Ia.set(f.subarray(m,m+x),O),x}if(ke.qb(c,O+x),c.Ia.subarray&&f.subarray)c.Ia.set(f.subarray(m,m+x),O);else for(Z=0;Z<x;Z++)c.Ia[O+Z]=f[m+Z];return c.Ma=Math.max(c.Ma,O+x),x},Ta:function(c,f,m){if(m===1?f+=c.position:m===2&&(c.node.mode&61440)===32768&&(f+=c.node.Ma),0>f)throw new X(28);return f},lb:function(c,f,m){ke.qb(c.node,f+m),c.node.Ma=Math.max(c.node.Ma,f+m)},bb:function(c,f,m,x,O){if((c.node.mode&61440)!==32768)throw new X(43);if(c=c.node.Ia,O&2||c.buffer!==xe){if((0<m||m+f<c.length)&&(c.subarray?c=c.subarray(m,m+f):c=Array.prototype.slice.call(c,m,m+f)),m=!0,f=65536*Math.ceil(f/65536),(O=Un(65536,f))?(Se.fill(0,O,O+f),f=O):f=0,!f)throw new X(48);ee.set(c,f)}else m=!1,f=c.byteOffset;return{Fb:f,vb:m}},cb:function(c,f,m,x,O){if((c.node.mode&61440)!==32768)throw new X(43);return O&2||ke.Ha.write(c,f,0,x,m,!1),0}}},nt=null,xt={},st=[],yr=1,Ze=null,Mt=!0,X=null,pt={},Xe=(c,f={})=>{if(c=$e("/",c),!c)return{path:"",node:null};if(f=Object.assign({rb:!0,kb:0},f),8<f.kb)throw new X(32);c=fe(c.split("/").filter(te=>!!te),!1);for(var m=nt,x="/",O=0;O<c.length;O++){var Z=O===c.length-1;if(Z&&f.parent)break;if(m=kt(m,c[O]),x=ye(x+"/"+c[O]),m.Va&&(!Z||Z&&f.rb)&&(m=m.Va.root),!Z||f.Sa){for(Z=0;(m.mode&61440)===40960;)if(m=Ur(x),x=$e(de(x),m),m=Xe(x,{kb:f.kb+1}).node,40<Z++)throw new X(32)}}return{path:x,node:m}},qt=c=>{for(var f;;){if(c===c.parent)return c=c.Ra.ub,f?c[c.length-1]!=="/"?c+"/"+f:c+f:c;f=f?c.name+"/"+f:c.name,c=c.parent}},gr=(c,f)=>{for(var m=0,x=0;x<f.length;x++)m=(m<<5)-m+f.charCodeAt(x)|0;return(c+m>>>0)%Ze.length},Ir=c=>{var f=gr(c.parent.id,c.name);if(Ze[f]===c)Ze[f]=c.Wa;else for(f=Ze[f];f;){if(f.Wa===c){f.Wa=c.Wa;break}f=f.Wa}},kt=(c,f)=>{var m;if(m=(m=Nt(c,"x"))?m:c.Ga.lookup?0:2)throw new X(m,c);for(m=Ze[gr(c.id,f)];m;m=m.Wa){var x=m.name;if(m.parent.id===c.id&&x===f)return m}return c.Ga.lookup(c,f)},jr=(c,f,m,x)=>(c=new _n(c,f,m,x),f=gr(c.parent.id,c.name),c.Wa=Ze[f],Ze[f]=c),gn={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Nr=c=>{var f=["r","w","rw"][c&3];return c&512&&(f+="w"),f},Nt=(c,f)=>{if(Mt)return 0;if(!f.includes("r")||c.mode&292){if(f.includes("w")&&!(c.mode&146)||f.includes("x")&&!(c.mode&73))return 2}else return 2;return 0},Cr=(c,f)=>{try{return kt(c,f),20}catch{}return Nt(c,"wx")},vr=(c,f,m)=>{try{var x=kt(c,f)}catch(O){return O.Ka}if(c=Nt(c,"wx"))return c;if(m){if((x.mode&61440)!==16384)return 54;if(x===x.parent||qt(x)==="/")return 10}else if((x.mode&61440)===16384)return 31;return 0},vn=(c=0)=>{for(;4096>=c;c++)if(!st[c])return c;throw new X(33)},Br=(c,f)=>(R||(R=function(){this.$a={}},R.prototype={},Object.defineProperties(R.prototype,{object:{get:function(){return this.node},set:function(m){this.node=m}},flags:{get:function(){return this.$a.flags},set:function(m){this.$a.flags=m}},position:{get:function(){return this.$a.position},set:function(m){this.$a.position=m}}})),c=Object.assign(new R,c),f=vn(f),c.fd=f,st[f]=c),wn={open:c=>{c.Ha=xt[c.node.rdev].Ha,c.Ha.open&&c.Ha.open(c)},Ta:()=>{throw new X(70)}},wr=(c,f)=>{xt[c]={Ha:f}},Lr=(c,f)=>{var m=f==="/",x=!f;if(m&&nt)throw new X(10);if(!m&&!x){var O=Xe(f,{rb:!1});if(f=O.path,O=O.node,O.Va)throw new X(10);if((O.mode&61440)!==16384)throw new X(54)}f={type:c,Kb:{},ub:f,Eb:[]},c=c.Ra(f),c.Ra=f,f.root=c,m?nt=c:O&&(O.Va=f,O.Ra&&O.Ra.Eb.push(f))},ir=(c,f,m)=>{var x=Xe(c,{parent:!0}).node;if(c=_e(c),!c||c==="."||c==="..")throw new X(28);var O=Cr(x,c);if(O)throw new X(O);if(!x.Ga.ab)throw new X(63);return x.Ga.ab(x,c,f,m)},ct=(c,f)=>ir(c,(f!==void 0?f:511)&1023|16384,0),sr=(c,f,m)=>{typeof m>"u"&&(m=f,f=438),ir(c,f|8192,m)},_r=(c,f)=>{if(!$e(c))throw new X(44);var m=Xe(f,{parent:!0}).node;if(!m)throw new X(44);f=_e(f);var x=Cr(m,f);if(x)throw new X(x);if(!m.Ga.symlink)throw new X(63);m.Ga.symlink(m,f,c)},Fr=c=>{var f=Xe(c,{parent:!0}).node;c=_e(c);var m=kt(f,c),x=vr(f,c,!0);if(x)throw new X(x);if(!f.Ga.rmdir)throw new X(63);if(m.Va)throw new X(10);f.Ga.rmdir(f,c),Ir(m)},zr=c=>{var f=Xe(c,{parent:!0}).node;if(!f)throw new X(44);c=_e(c);var m=kt(f,c),x=vr(f,c,!1);if(x)throw new X(x);if(!f.Ga.unlink)throw new X(63);if(m.Va)throw new X(10);f.Ga.unlink(f,c),Ir(m)},Ur=c=>{if(c=Xe(c).node,!c)throw new X(44);if(!c.Ga.readlink)throw new X(28);return $e(qt(c.parent),c.Ga.readlink(c))},Wt=(c,f)=>{if(c=Xe(c,{Sa:!f}).node,!c)throw new X(44);if(!c.Ga.Pa)throw new X(63);return c.Ga.Pa(c)},Mr=c=>Wt(c,!0),ar=(c,f)=>{if(c=typeof c=="string"?Xe(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new X(63);c.Ga.Oa(c,{mode:f&4095|c.mode&-4096,timestamp:Date.now()})},br=(c,f)=>{if(0>f)throw new X(28);if(c=typeof c=="string"?Xe(c,{Sa:!0}).node:c,!c.Ga.Oa)throw new X(63);if((c.mode&61440)===16384)throw new X(31);if((c.mode&61440)!==32768)throw new X(28);var m=Nt(c,"w");if(m)throw new X(m);c.Ga.Oa(c,{size:f,timestamp:Date.now()})},lt=(c,f,m)=>{if(c==="")throw new X(44);if(typeof f=="string"){var x=gn[f];if(typeof x>"u")throw Error("Unknown file open mode: "+f);f=x}if(m=f&64?(typeof m>"u"?438:m)&4095|32768:0,typeof c=="object")var O=c;else{c=ye(c);try{O=Xe(c,{Sa:!(f&131072)}).node}catch{}}if(x=!1,f&64)if(O){if(f&128)throw new X(20)}else O=ir(c,m,0),x=!0;if(!O)throw new X(44);if((O.mode&61440)===8192&&(f&=-513),f&65536&&(O.mode&61440)!==16384)throw new X(54);if(!x&&(m=O?(O.mode&61440)===40960?32:(O.mode&61440)===16384&&(Nr(f)!=="r"||f&512)?31:Nt(O,Nr(f)):44))throw new X(m);return f&512&&!x&&br(O,0),f&=-131713,O=Br({node:O,path:qt(O),flags:f,seekable:!0,position:0,Ha:O.Ha,Ib:[],error:!1}),O.Ha.open&&O.Ha.open(O),!l.logReadFiles||f&1||(k||(k={}),c in k||(k[c]=1)),O},or=c=>{if(c.fd===null)throw new X(8);c.hb&&(c.hb=null);try{c.Ha.close&&c.Ha.close(c)}catch(f){throw f}finally{st[c.fd]=null}c.fd=null},Pt=(c,f,m)=>{if(c.fd===null)throw new X(8);if(!c.seekable||!c.Ha.Ta)throw new X(70);if(m!=0&&m!=1&&m!=2)throw new X(28);c.position=c.Ha.Ta(c,f,m),c.Ib=[]},qr=(c,f,m,x,O)=>{if(0>x||0>O)throw new X(28);if(c.fd===null)throw new X(8);if((c.flags&2097155)===1)throw new X(8);if((c.node.mode&61440)===16384)throw new X(31);if(!c.Ha.read)throw new X(28);var Z=typeof O<"u";if(!Z)O=c.position;else if(!c.seekable)throw new X(70);return f=c.Ha.read(c,f,m,x,O),Z||(c.position+=f),f},Gt=(c,f,m,x,O)=>{if(0>x||0>O)throw new X(28);if(c.fd===null)throw new X(8);if(!(c.flags&2097155))throw new X(8);if((c.node.mode&61440)===16384)throw new X(31);if(!c.Ha.write)throw new X(28);c.seekable&&c.flags&1024&&Pt(c,0,2);var Z=typeof O<"u";if(!Z)O=c.position;else if(!c.seekable)throw new X(70);return f=c.Ha.write(c,f,m,x,O,void 0),Z||(c.position+=f),f},Er=c=>{var f,m=lt(c,m||0);c=Wt(c).size;var x=new Uint8Array(c);return qr(m,x,0,c,0),f=x,or(m),f},Wr=()=>{X||(X=function(c,f){this.node=f,this.Hb=function(m){this.Ka=m},this.Hb(c),this.message="FS error"},X.prototype=Error(),X.prototype.constructor=X,[44].forEach(c=>{pt[c]=new X(c),pt[c].stack="<generic error, no stack>"}))},Gr,cr=(c,f)=>{var m=0;return c&&(m|=365),f&&(m|=146),m},Ht=(c,f,m)=>{c=ye("/dev/"+c);var x=cr(!!f,!!m);Sr||(Sr=64);var O=Sr++<<8|0;wr(O,{open:Z=>{Z.seekable=!1},close:()=>{m&&m.buffer&&m.buffer.length&&m(10)},read:(Z,te,Te,Be)=>{for(var je=0,Ye=0;Ye<Be;Ye++){try{var Dt=f()}catch{throw new X(29)}if(Dt===void 0&&je===0)throw new X(6);if(Dt==null)break;je++,te[Te+Ye]=Dt}return je&&(Z.node.timestamp=Date.now()),je},write:(Z,te,Te,Be)=>{for(var je=0;je<Be;je++)try{m(te[Te+je])}catch{throw new X(29)}return Be&&(Z.node.timestamp=Date.now()),je}}),sr(c,x,O)},Sr,v={},R,k;function C(c,f,m){if(f.charAt(0)==="/")return f;if(c=c===-100?"/":se(c).path,f.length==0){if(!m)throw new X(44);return c}return ye(c+"/"+f)}function B(c,f,m){try{var x=c(f)}catch(O){if(O&&O.node&&ye(f)!==ye(qt(O.node)))return-54;throw O}return ue[m>>2]=x.dev,ue[m+8>>2]=x.ino,ue[m+12>>2]=x.mode,F[m+16>>2]=x.nlink,ue[m+20>>2]=x.uid,ue[m+24>>2]=x.gid,ue[m+28>>2]=x.rdev,I=[x.size>>>0,(b=x.size,1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[m+40>>2]=I[0],ue[m+44>>2]=I[1],ue[m+48>>2]=4096,ue[m+52>>2]=x.blocks,I=[Math.floor(x.atime.getTime()/1e3)>>>0,(b=Math.floor(x.atime.getTime()/1e3),1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[m+56>>2]=I[0],ue[m+60>>2]=I[1],F[m+64>>2]=0,I=[Math.floor(x.mtime.getTime()/1e3)>>>0,(b=Math.floor(x.mtime.getTime()/1e3),1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[m+72>>2]=I[0],ue[m+76>>2]=I[1],F[m+80>>2]=0,I=[Math.floor(x.ctime.getTime()/1e3)>>>0,(b=Math.floor(x.ctime.getTime()/1e3),1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[m+88>>2]=I[0],ue[m+92>>2]=I[1],F[m+96>>2]=0,I=[x.ino>>>0,(b=x.ino,1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[m+104>>2]=I[0],ue[m+108>>2]=I[1],0}var j=void 0;function J(){return j+=4,ue[j-4>>2]}function se(c){if(c=st[c],!c)throw new X(8);return c}function le(c){return F[c>>2]+4294967296*ue[c+4>>2]}function he(c){var f=Q(c)+1,m=Yt(f);return m&&p(c,ee,m,f),m}function pe(c,f,m){function x(Be){return(Be=Be.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Be[1]:"GMT"}var O=new Date().getFullYear(),Z=new Date(O,0,1),te=new Date(O,6,1);O=Z.getTimezoneOffset();var Te=te.getTimezoneOffset();ue[c>>2]=60*Math.max(O,Te),ue[f>>2]=+(O!=Te),c=x(Z),f=x(te),c=he(c),f=he(f),Te<O?(F[m>>2]=c,F[m+4>>2]=f):(F[m>>2]=f,F[m+4>>2]=c)}function we(c,f,m){we.Bb||(we.Bb=!0,pe(c,f,m))}var De;De=S?()=>{var c=Ft.hrtime();return 1e3*c[0]+c[1]/1e6}:()=>performance.now();var Ie={};function Ne(){if(!We){var c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"},f;for(f in Ie)Ie[f]===void 0?delete c[f]:c[f]=Ie[f];var m=[];for(f in c)m.push(f+"="+c[f]);We=m}return We}var We,Le=void 0,et=[];function Tt(c,f){if(!Le){Le=new WeakMap;var m=me.length;if(Le)for(var x=0;x<0+m;x++){var O=me.get(x);O&&Le.set(O,x)}}if(Le.has(c))return Le.get(c);if(et.length)m=et.pop();else{try{me.grow(1)}catch(Te){throw Te instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Te}m=me.length-1}try{me.set(m,c)}catch(Te){if(!(Te instanceof TypeError))throw Te;if(typeof WebAssembly.Function=="function"){x=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var Z={parameters:[],results:f[0]=="v"?[]:[O[f[0]]]},te=1;te<f.length;++te)Z.parameters.push(O[f[te]]);f=new x(Z,c)}else{for(x=[1,96],O=f.slice(0,1),f=f.slice(1),Z={i:127,p:127,j:126,f:125,d:124},te=f.length,128>te?x.push(te):x.push(te%128|128,te>>7),te=0;te<f.length;++te)x.push(Z[f[te]]);O=="v"?x.push(0):x.push(1,Z[O]),f=[0,97,115,109,1,0,0,0,1],O=x.length,128>O?f.push(O):f.push(O%128|128,O>>7),f.push.apply(f,x),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),f=new WebAssembly.Module(new Uint8Array(f)),f=new WebAssembly.Instance(f,{e:{f:c}}).exports.f}me.set(m,f)}return Le.set(c,m),m}function $t(c){Le.delete(me.get(c)),et.push(c)}function xr(c){var f=Yt(c.length);return c.subarray||c.slice||(c=new Uint8Array(c)),Se.set(c,f),f}function kr(c,f,m,x){var O={string:je=>{var Ye=0;if(je!=null&&je!==0){var Dt=(je.length<<2)+1;Ye=Ct(Dt),p(je,Se,Ye,Dt)}return Ye},array:je=>{var Ye=Ct(je.length);return ee.set(je,Ye),Ye}};c=l["_"+c];var Z=[],te=0;if(x)for(var Te=0;Te<x.length;Te++){var Be=O[m[Te]];Be?(te===0&&(te=Pr()),Z[Te]=Be(x[Te])):Z[Te]=x[Te]}return m=c.apply(null,Z),m=function(je){return te!==0&&Tr(te),f==="string"?W(je):f==="boolean"?!!je:je}(m)}function _n(c,f,m,x){c||(c=this),this.parent=c,this.Ra=c.Ra,this.Va=null,this.id=yr++,this.name=f,this.mode=m,this.Ga={},this.Ha={},this.rdev=x}Object.defineProperties(_n.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(c){c?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(c){c?this.mode|=146:this.mode&=-147}}}),Wr(),Ze=Array(4096),Lr(ke,"/"),ct("/tmp"),ct("/home"),ct("/home/web_user"),(()=>{ct("/dev"),wr(259,{read:()=>0,write:(f,m,x,O)=>O}),sr("/dev/null",259),Qe(1280,qe),Qe(1536,wt),sr("/dev/tty",1280),sr("/dev/tty1",1536);var c=Ce();Ht("random",c),Ht("urandom",c),ct("/dev/shm"),ct("/dev/shm/tmp")})(),(()=>{ct("/proc");var c=ct("/proc/self");ct("/proc/self/fd"),Lr({Ra:()=>{var f=jr(c,"fd",16895,73);return f.Ga={lookup:(m,x)=>{var O=st[+x];if(!O)throw new X(8);return m={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>O.path}},m.parent=m}},f}},"/proc/self/fd")})();var bn={a:function(c,f,m,x){He("Assertion failed: "+W(c)+", at: "+[f?W(f):"unknown filename",m,x?W(x):"unknown function"])},h:function(c,f){try{return c=W(c),ar(c,f),0}catch(m){if(typeof v>"u"||!(m instanceof X))throw m;return-m.Ka}},H:function(c,f,m){try{if(f=W(f),f=C(c,f),m&-8)return-28;var x=Xe(f,{Sa:!0}).node;return x?(c="",m&4&&(c+="r"),m&2&&(c+="w"),m&1&&(c+="x"),c&&Nt(x,c)?-2:0):-44}catch(O){if(typeof v>"u"||!(O instanceof X))throw O;return-O.Ka}},i:function(c,f){try{var m=st[c];if(!m)throw new X(8);return ar(m.node,f),0}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return-x.Ka}},g:function(c){try{var f=st[c];if(!f)throw new X(8);var m=f.node,x=typeof m=="string"?Xe(m,{Sa:!0}).node:m;if(!x.Ga.Oa)throw new X(63);return x.Ga.Oa(x,{timestamp:Date.now()}),0}catch(O){if(typeof v>"u"||!(O instanceof X))throw O;return-O.Ka}},b:function(c,f,m){j=m;try{var x=se(c);switch(f){case 0:var O=J();return 0>O?-28:Br(x,O).fd;case 1:case 2:return 0;case 3:return x.flags;case 4:return O=J(),x.flags|=O,0;case 5:return O=J(),ce[O+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return ue[Hr()>>2]=28,-1;default:return-28}}catch(Z){if(typeof v>"u"||!(Z instanceof X))throw Z;return-Z.Ka}},G:function(c,f){try{var m=se(c);return B(Wt,m.path,f)}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return-x.Ka}},l:function(c,f,m){try{if(f=m+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*m:NaN,isNaN(f))return-61;var x=st[c];if(!x)throw new X(8);if(!(x.flags&2097155))throw new X(28);return br(x.node,f),0}catch(O){if(typeof v>"u"||!(O instanceof X))throw O;return-O.Ka}},B:function(c,f){try{if(f===0)return-28;var m=Q("/")+1;return f<m?-68:(p("/",Se,c,f),m)}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return-x.Ka}},E:function(c,f){try{return c=W(c),B(Mr,c,f)}catch(m){if(typeof v>"u"||!(m instanceof X))throw m;return-m.Ka}},y:function(c,f,m){try{return f=W(f),f=C(c,f),f=ye(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),ct(f,m),0}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return-x.Ka}},D:function(c,f,m,x){try{f=W(f);var O=x&256;return f=C(c,f,x&4096),B(O?Mr:Wt,f,m)}catch(Z){if(typeof v>"u"||!(Z instanceof X))throw Z;return-Z.Ka}},v:function(c,f,m,x){j=x;try{f=W(f),f=C(c,f);var O=x?J():0;return lt(f,m,O).fd}catch(Z){if(typeof v>"u"||!(Z instanceof X))throw Z;return-Z.Ka}},t:function(c,f,m,x){try{if(f=W(f),f=C(c,f),0>=x)return-28;var O=Ur(f),Z=Math.min(x,Q(O)),te=ee[m+Z];return p(O,Se,m,x+1),ee[m+Z]=te,Z}catch(Te){if(typeof v>"u"||!(Te instanceof X))throw Te;return-Te.Ka}},s:function(c){try{return c=W(c),Fr(c),0}catch(f){if(typeof v>"u"||!(f instanceof X))throw f;return-f.Ka}},F:function(c,f){try{return c=W(c),B(Wt,c,f)}catch(m){if(typeof v>"u"||!(m instanceof X))throw m;return-m.Ka}},p:function(c,f,m){try{return f=W(f),f=C(c,f),m===0?zr(f):m===512?Fr(f):He("Invalid flags passed to unlinkat"),0}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return-x.Ka}},o:function(c,f,m){try{if(f=W(f),f=C(c,f,!0),m){var x=le(m),O=ue[m+8>>2];Z=1e3*x+O/1e6,m+=16,x=le(m),O=ue[m+8>>2],te=1e3*x+O/1e6}else var Z=Date.now(),te=Z;c=Z;var Te=Xe(f,{Sa:!0}).node;return Te.Ga.Oa(Te,{timestamp:Math.max(c,te)}),0}catch(Be){if(typeof v>"u"||!(Be instanceof X))throw Be;return-Be.Ka}},e:function(){return Date.now()},j:function(c,f){c=new Date(1e3*le(c)),ue[f>>2]=c.getSeconds(),ue[f+4>>2]=c.getMinutes(),ue[f+8>>2]=c.getHours(),ue[f+12>>2]=c.getDate(),ue[f+16>>2]=c.getMonth(),ue[f+20>>2]=c.getFullYear()-1900,ue[f+24>>2]=c.getDay();var m=new Date(c.getFullYear(),0,1);ue[f+28>>2]=(c.getTime()-m.getTime())/864e5|0,ue[f+36>>2]=-(60*c.getTimezoneOffset());var x=new Date(c.getFullYear(),6,1).getTimezoneOffset();m=m.getTimezoneOffset(),ue[f+32>>2]=(x!=m&&c.getTimezoneOffset()==Math.min(m,x))|0},w:function(c,f,m,x,O,Z){try{var te=se(x);if(f&2&&!(m&2)&&(te.flags&2097155)!==2)throw new X(2);if((te.flags&2097155)===1)throw new X(2);if(!te.Ha.bb)throw new X(43);var Te=te.Ha.bb(te,c,O,f,m),Be=Te.Fb;return ue[Z>>2]=Te.vb,Be}catch(je){if(typeof v>"u"||!(je instanceof X))throw je;return-je.Ka}},x:function(c,f,m,x,O,Z){try{var te=se(O);if(m&2){var Te=Se.slice(c,c+f);te&&te.Ha.cb&&te.Ha.cb(te,Te,Z,f,x)}}catch(Be){if(typeof v>"u"||!(Be instanceof X))throw Be;return-Be.Ka}},n:we,q:function(){return 2147483648},d:De,c:function(c){var f=Se.length;if(c>>>=0,2147483648<c)return!1;for(var m=1;4>=m;m*=2){var x=f*(1+.2/m);x=Math.min(x,c+100663296);var O=Math;x=Math.max(c,x),O=O.min.call(O,2147483648,x+(65536-x%65536)%65536);e:{try{G.grow(O-xe.byteLength+65535>>>16),ge();var Z=1;break e}catch{}Z=void 0}if(Z)return!0}return!1},z:function(c,f){var m=0;return Ne().forEach(function(x,O){var Z=f+m;for(O=F[c+4*O>>2]=Z,Z=0;Z<x.length;++Z)ee[O++>>0]=x.charCodeAt(Z);ee[O>>0]=0,m+=x.length+1}),0},A:function(c,f){var m=Ne();F[c>>2]=m.length;var x=0;return m.forEach(function(O){x+=O.length+1}),F[f>>2]=x,0},f:function(c){try{var f=se(c);return or(f),0}catch(m){if(typeof v>"u"||!(m instanceof X))throw m;return m.Ka}},m:function(c,f){try{var m=se(c);return ee[f>>0]=m.tty?2:(m.mode&61440)===16384?3:(m.mode&61440)===40960?7:4,0}catch(x){if(typeof v>"u"||!(x instanceof X))throw x;return x.Ka}},u:function(c,f,m,x){try{e:{var O=se(c);c=f;for(var Z=f=0;Z<m;Z++){var te=F[c>>2],Te=F[c+4>>2];c+=8;var Be=qr(O,ee,te,Te);if(0>Be){var je=-1;break e}if(f+=Be,Be<Te)break}je=f}return F[x>>2]=je,0}catch(Ye){if(typeof v>"u"||!(Ye instanceof X))throw Ye;return Ye.Ka}},k:function(c,f,m,x,O){try{if(f=m+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*m:NaN,isNaN(f))return 61;var Z=se(c);return Pt(Z,f,x),I=[Z.position>>>0,(b=Z.position,1<=+Math.abs(b)?0<b?(Math.min(+Math.floor(b/4294967296),4294967295)|0)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],ue[O>>2]=I[0],ue[O+4>>2]=I[1],Z.hb&&f===0&&x===0&&(Z.hb=null),0}catch(te){if(typeof v>"u"||!(te instanceof X))throw te;return te.Ka}},C:function(c){try{var f=se(c);return f.Ha&&f.Ha.fsync?f.Ha.fsync(f):0}catch(m){if(typeof v>"u"||!(m instanceof X))throw m;return m.Ka}},r:function(c,f,m,x){try{e:{var O=se(c);c=f;for(var Z=f=0;Z<m;Z++){var te=F[c>>2],Te=F[c+4>>2];c+=8;var Be=Gt(O,ee,te,Te);if(0>Be){var je=-1;break e}f+=Be}je=f}return F[x>>2]=je,0}catch(Ye){if(typeof v>"u"||!(Ye instanceof X))throw Ye;return Ye.Ka}}};(function(){function c(O){l.asm=O.exports,G=l.asm.I,ge(),me=l.asm.Aa,Ge.unshift(l.asm.J),Ue--,l.monitorRunDependencies&&l.monitorRunDependencies(Ue),Ue==0&&ze&&(O=ze,ze=null,O())}function f(O){c(O.instance)}function m(O){return $().then(function(Z){return WebAssembly.instantiate(Z,x)}).then(function(Z){return Z}).then(O,function(Z){z("failed to asynchronously prepare wasm: "+Z),He(Z)})}var x={a:bn};if(Ue++,l.monitorRunDependencies&&l.monitorRunDependencies(Ue),l.instantiateWasm)try{return l.instantiateWasm(x,c)}catch(O){return z("Module.instantiateWasm callback failed with error: "+O),!1}return function(){return V||typeof WebAssembly.instantiateStreaming!="function"||Je()||h.startsWith("file://")||S||typeof fetch!="function"?m(f):fetch(h,{credentials:"same-origin"}).then(function(O){return WebAssembly.instantiateStreaming(O,x).then(f,function(Z){return z("wasm streaming compile failed: "+Z),z("falling back to ArrayBuffer instantiation"),m(f)})})}(),{}})(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.J).apply(null,arguments)},l._sqlite3_free=function(){return(l._sqlite3_free=l.asm.K).apply(null,arguments)},l._sqlite3_value_double=function(){return(l._sqlite3_value_double=l.asm.L).apply(null,arguments)},l._sqlite3_value_text=function(){return(l._sqlite3_value_text=l.asm.M).apply(null,arguments)};var Hr=l.___errno_location=function(){return(Hr=l.___errno_location=l.asm.N).apply(null,arguments)};l._sqlite3_prepare_v2=function(){return(l._sqlite3_prepare_v2=l.asm.O).apply(null,arguments)},l._sqlite3_step=function(){return(l._sqlite3_step=l.asm.P).apply(null,arguments)},l._sqlite3_finalize=function(){return(l._sqlite3_finalize=l.asm.Q).apply(null,arguments)},l._sqlite3_reset=function(){return(l._sqlite3_reset=l.asm.R).apply(null,arguments)},l._sqlite3_value_int=function(){return(l._sqlite3_value_int=l.asm.S).apply(null,arguments)},l._sqlite3_clear_bindings=function(){return(l._sqlite3_clear_bindings=l.asm.T).apply(null,arguments)},l._sqlite3_value_blob=function(){return(l._sqlite3_value_blob=l.asm.U).apply(null,arguments)},l._sqlite3_value_bytes=function(){return(l._sqlite3_value_bytes=l.asm.V).apply(null,arguments)},l._sqlite3_value_type=function(){return(l._sqlite3_value_type=l.asm.W).apply(null,arguments)},l._sqlite3_result_blob=function(){return(l._sqlite3_result_blob=l.asm.X).apply(null,arguments)},l._sqlite3_result_double=function(){return(l._sqlite3_result_double=l.asm.Y).apply(null,arguments)},l._sqlite3_result_error=function(){return(l._sqlite3_result_error=l.asm.Z).apply(null,arguments)},l._sqlite3_result_int=function(){return(l._sqlite3_result_int=l.asm._).apply(null,arguments)},l._sqlite3_result_int64=function(){return(l._sqlite3_result_int64=l.asm.$).apply(null,arguments)},l._sqlite3_result_null=function(){return(l._sqlite3_result_null=l.asm.aa).apply(null,arguments)},l._sqlite3_result_text=function(){return(l._sqlite3_result_text=l.asm.ba).apply(null,arguments)},l._sqlite3_sql=function(){return(l._sqlite3_sql=l.asm.ca).apply(null,arguments)},l._sqlite3_aggregate_context=function(){return(l._sqlite3_aggregate_context=l.asm.da).apply(null,arguments)},l._sqlite3_column_count=function(){return(l._sqlite3_column_count=l.asm.ea).apply(null,arguments)},l._sqlite3_data_count=function(){return(l._sqlite3_data_count=l.asm.fa).apply(null,arguments)},l._sqlite3_column_blob=function(){return(l._sqlite3_column_blob=l.asm.ga).apply(null,arguments)},l._sqlite3_column_bytes=function(){return(l._sqlite3_column_bytes=l.asm.ha).apply(null,arguments)},l._sqlite3_column_double=function(){return(l._sqlite3_column_double=l.asm.ia).apply(null,arguments)},l._sqlite3_column_text=function(){return(l._sqlite3_column_text=l.asm.ja).apply(null,arguments)},l._sqlite3_column_type=function(){return(l._sqlite3_column_type=l.asm.ka).apply(null,arguments)},l._sqlite3_column_name=function(){return(l._sqlite3_column_name=l.asm.la).apply(null,arguments)},l._sqlite3_bind_blob=function(){return(l._sqlite3_bind_blob=l.asm.ma).apply(null,arguments)},l._sqlite3_bind_double=function(){return(l._sqlite3_bind_double=l.asm.na).apply(null,arguments)},l._sqlite3_bind_int=function(){return(l._sqlite3_bind_int=l.asm.oa).apply(null,arguments)},l._sqlite3_bind_text=function(){return(l._sqlite3_bind_text=l.asm.pa).apply(null,arguments)},l._sqlite3_bind_parameter_index=function(){return(l._sqlite3_bind_parameter_index=l.asm.qa).apply(null,arguments)},l._sqlite3_normalized_sql=function(){return(l._sqlite3_normalized_sql=l.asm.ra).apply(null,arguments)},l._sqlite3_errmsg=function(){return(l._sqlite3_errmsg=l.asm.sa).apply(null,arguments)},l._sqlite3_exec=function(){return(l._sqlite3_exec=l.asm.ta).apply(null,arguments)},l._sqlite3_changes=function(){return(l._sqlite3_changes=l.asm.ua).apply(null,arguments)},l._sqlite3_close_v2=function(){return(l._sqlite3_close_v2=l.asm.va).apply(null,arguments)},l._sqlite3_create_function_v2=function(){return(l._sqlite3_create_function_v2=l.asm.wa).apply(null,arguments)},l._sqlite3_open=function(){return(l._sqlite3_open=l.asm.xa).apply(null,arguments)};var Yt=l._malloc=function(){return(Yt=l._malloc=l.asm.ya).apply(null,arguments)},Yr=l._free=function(){return(Yr=l._free=l.asm.za).apply(null,arguments)};l._RegisterExtensionFunctions=function(){return(l._RegisterExtensionFunctions=l.asm.Ba).apply(null,arguments)};var Un=l._emscripten_builtin_memalign=function(){return(Un=l._emscripten_builtin_memalign=l.asm.Ca).apply(null,arguments)},Pr=l.stackSave=function(){return(Pr=l.stackSave=l.asm.Da).apply(null,arguments)},Tr=l.stackRestore=function(){return(Tr=l.stackRestore=l.asm.Ea).apply(null,arguments)},Ct=l.stackAlloc=function(){return(Ct=l.stackAlloc=l.asm.Fa).apply(null,arguments)};l.UTF8ToString=W,l.stackAlloc=Ct,l.stackSave=Pr,l.stackRestore=Tr,l.cwrap=function(c,f,m,x){m=m||[];var O=m.every(Z=>Z==="number"||Z==="boolean");return f!=="string"&&O&&!x?l["_"+c]:function(){return kr(c,f,m,arguments)}};var Zr;ze=function c(){Zr||Mn(),Zr||(ze=c)};function Mn(){function c(){if(!Zr&&(Zr=!0,l.calledRun=!0,!oe)){if(l.noFSInit||Gr||(Gr=!0,Wr(),l.stdin=l.stdin,l.stdout=l.stdout,l.stderr=l.stderr,l.stdin?Ht("stdin",l.stdin):_r("/dev/tty","/dev/stdin"),l.stdout?Ht("stdout",null,l.stdout):_r("/dev/tty","/dev/stdout"),l.stderr?Ht("stderr",null,l.stderr):_r("/dev/tty1","/dev/stderr"),lt("/dev/stdin",0),lt("/dev/stdout",1),lt("/dev/stderr",1)),Mt=!1,ne(Ge),l.onRuntimeInitialized&&l.onRuntimeInitialized(),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var f=l.postRun.shift();Ae.unshift(f)}ne(Ae)}}if(!(0<Ue)){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)Re();ne(Me),0<Ue||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),c()},1)):c())}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return Mn(),o}),t)};r.exports=n,r.exports.default=n});const Ln=async(r,e)=>{try{const t=await e.getItem(r);return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBFromStore: ${t.message}`)}},sc=async(r,e)=>{try{return await e.setItem(r,null),Promise.resolve()}catch(t){return Promise.reject(`SetInitialDBToStore: ${t.message}`)}},ac=async(r,e,t)=>{try{const n=r.export();return await At(e,n,t),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}},At=async(r,e,t)=>{try{return await t.setItem(r,e),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}},Jt=async(r,e)=>{try{return await e.removeItem(r),Promise.resolve()}catch(t){return Promise.reject(`RemoveDBFromStore: ${t.message}`)}},Et=async(r,e)=>{try{const t=await e.getItem(r);return t!=null&&t.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(t){return Promise.reject(`IsDBInStore: ${t}`)}},di=async(r,e,t)=>{const n=`${e}-${r}`;try{if(await Et(n,t))if(await Et(r,t)){const a=await Ln(n,t);return await At(r,a,t),await Jt(n,t),Promise.resolve()}else return Promise.reject(new Error(`RestoreDBFromStore: ${r} does not exist`));else return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(i){return Promise.reject(`RestoreDBFromStore: ${i.message}`)}},oc=async(r,e,t)=>{try{if(await Et(r,t)){const i=await Ln(r,t);return await At(e,i,t),Promise.resolve()}else return Promise.reject(new Error(`CopyDBToStore: ${r} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}},cc=async r=>{try{const e=await r.keys();return Promise.resolve(e)}catch(e){return Promise.reject(`GetDBListFromStore: ${e.message}`)}},Fn=async r=>{let e="SELECT name FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%' ",e+="ORDER BY rootpage DESC;";const t=[];try{const n=await rt(r,e,[]);for(const i of n)t.push(i.name);return Promise.resolve(t)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}},Jr=async(r,e)=>{let t="",n="AND name NOT LIKE ('sqlite_%')";switch(e){case"index":t="DropIndexes";break;case"trigger":t="DropTriggers";break;case"table":t="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":t="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${e} not found`))}let i="SELECT name FROM sqlite_master WHERE ";i+=`type = '${e}' ${n};`;try{const s=await rt(r,i,[]);if(s.length>0){const a=e.toUpperCase(),o=[];for(const u of s){let l=`DROP ${a} IF EXISTS `;l+=`${u.name};`,o.push(l)}for(const u of o)if(await rr(r,u,[],!1,"no")<0)return Promise.reject(new Error(`DropElements: ${t}: lastId < 0`))}return Promise.resolve()}catch(s){return Promise.reject(new Error(`DropElements: ${t}: ${s.message}`))}},lc=async r=>{try{return await Jr(r,"table"),await Jr(r,"index"),await Jr(r,"trigger"),await Jr(r,"view"),await rr(r,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(e){return Promise.reject(new Error(`DropAll: ${e.message}`))}},Pn=async r=>{const e=["database","version","overwrite","encrypted","mode","tables","views"];if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const t of Object.keys(r)){if(e.indexOf(t)===-1||t==="database"&&typeof r[t]!="string"||t==="version"&&typeof r[t]!="number"||t==="overwrite"&&typeof r[t]!="boolean"||t==="encrypted"&&typeof r[t]!="boolean"||t==="mode"&&typeof r[t]!="string"||t==="tables"&&typeof r[t]!="object")return!1;if(t==="tables"){for(const n of r[t])if(!await uc(n))return!1}if(t==="views"&&typeof r[t]!="object")return!1;if(t==="views"){for(const n of r[t])if(!await fc(n))return!1}}return!0},uc=async r=>{const e=["name","schema","indexes","triggers","values"];let t=0;if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const n of Object.keys(r)){if(e.indexOf(n)===-1||n==="name"&&typeof r[n]!="string"||n==="schema"&&typeof r[n]!="object"||n==="indexes"&&typeof r[n]!="object"||n==="triggers"&&typeof r[n]!="object"||n==="values"&&typeof r[n]!="object")return!1;if(n==="schema"){r.schema.forEach(i=>{i.column&&t++});for(let i=0;i<t;i++)if(!await cs(r[n][i]))return!1}if(n==="indexes"){for(const i of r[n])if(!await ls(i))return!1}if(n==="triggers"){for(const i of r[n])if(!await us(i))return!1}if(n==="values"&&t>0){for(const i of r[n])if(typeof i!="object"||i.length!=t)return!1}}return!0},cs=async r=>{const e=["column","value","foreignkey","primarykey","constraint"];if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const t of Object.keys(r))if(e.indexOf(t)===-1||t==="column"&&typeof r[t]!="string"||t==="value"&&typeof r[t]!="string"||t==="foreignkey"&&typeof r[t]!="string"||t==="primarykey"&&typeof r[t]!="string"||t==="constraint"&&typeof r[t]!="string")return!1;return!0},ls=async r=>{const e=["name","value","mode"];if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const t of Object.keys(r))if(e.indexOf(t)===-1||t==="name"&&typeof r[t]!="string"||t==="value"&&typeof r[t]!="string"||t==="mode"&&(typeof r[t]!="string"||r[t].toUpperCase()!="UNIQUE"))return!1;return!0},us=async r=>{const e=["name","timeevent","condition","logic"];if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const t of Object.keys(r))if(e.indexOf(t)===-1||t==="name"&&typeof r[t]!="string"||t==="timeevent"&&typeof r[t]!="string"||t==="condition"&&typeof r[t]!="string"||t==="logic"&&typeof r[t]!="string")return!1;return!0},fc=async r=>{const e=["name","value"];if(r==null||Object.keys(r).length===0&&r.constructor===Object)return!1;for(const t of Object.keys(r))if(e.indexOf(t)===-1||t==="name"&&typeof r[t]!="string"||t==="value"&&typeof r[t]!="string")return!1;return!0},fs=async r=>{for(let e=0;e<r.length;e++){const t={},n=Object.keys(r[e]);if(n.includes("column")&&(t.column=r[e].column),n.includes("value")&&(t.value=r[e].value),n.includes("foreignkey")&&(t.foreignkey=r[e].foreignkey),n.includes("constraint")&&(t.constraint=r[e].constraint),!await cs(t))return Promise.reject(new Error(`CheckSchemaValidity: schema[${e}] not valid`))}return Promise.resolve()},hs=async r=>{for(let e=0;e<r.length;e++){const t={},n=Object.keys(r[e]);if(n.includes("value")&&(t.value=r[e].value),n.includes("name")&&(t.name=r[e].name),n.includes("mode")&&(t.mode=r[e].mode),!await ls(t))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${e}] not valid`))}return Promise.resolve()},ds=async r=>{for(let e=0;e<r.length;e++){const t={},n=Object.keys(r[e]);if(n.includes("logic")&&(t.logic=r[e].logic),n.includes("name")&&(t.name=r[e].name),n.includes("timeevent")&&(t.timeevent=r[e].timeevent),n.includes("condition")&&(t.condition=r[e].condition),!await us(t))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${e}] not valid`))}return Promise.resolve()},pn=async(r,e)=>{let t=[];const n=[],i=[],s=`PRAGMA table_info('${e}');`;try{if(t=await rt(r,s,[]),t.length>0)for(const a of t)n.push(a.name),i.push(a.type);return Promise.resolve({names:n,types:i})}catch(a){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${a.message}`))}},zn=async(r,e,t)=>{const n=[];try{const i=await pn(r,t);let s=[];if(Object.keys(i).includes("names"))s=i.names;else return Promise.reject(new Error(`GetValues: Table ${t} no names`));const a=await rt(r,e,[]);for(const o of a){const u=[];for(const l of s)Object.keys(o).includes(l)?u.push(o[l]):u.push(null);n.push(u)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetValues: ${i.message}`))}},Qt=async(r,e)=>{const t="BeginTransaction: ";if(!e)return Promise.reject(new Error(`${t}database not opened`));const n="BEGIN TRANSACTION;";try{return r.exec(n),Promise.resolve()}catch(i){return Promise.reject(new Error(`${t}${i.message}`))}},Ut=async(r,e)=>{const t="RollbackTransaction: ";if(!e)return Promise.reject(new Error(`${t}database not opened`));const n="ROLLBACK TRANSACTION;";try{return r.exec(n),Promise.resolve()}catch(i){return Promise.reject(new Error(`${t}${i.message}`))}},Xt=async(r,e)=>{const t="CommitTransaction: ";if(!e)return Promise.reject(new Error(`${t}database not opened`));const n="COMMIT TRANSACTION;";try{return r.exec(n),Promise.resolve()}catch(i){return Promise.reject(new Error(`${t}${i.message}`))}},dt=async r=>{const e="SELECT total_changes()";let t=0;try{return t=r.exec(e)[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error(`DbChanges failed: ${n.message}`))}},ms=async r=>{const e="SELECT last_insert_rowid()";let t=-1;try{return t=r.exec(e)[0].values[0][0],Promise.resolve(t)}catch(n){return Promise.reject(new Error(`GetLastId failed: ${n.message}`))}},dr=async(r,e)=>{let t="PRAGMA foreign_keys=OFF";e&&(t="PRAGMA foreign_keys=ON");try{return r.run(t),Promise.resolve()}catch(n){const i=n.message?n.message:n;return Promise.reject(new Error(`SetForeignKey: ${i}`))}},mi=async r=>{let e=0;try{return e=r.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(e)}catch(t){return Promise.reject(new Error(`GetVersion: ${t.message}`))}},ps=async(r,e)=>{try{return r.exec(`PRAGMA user_version = ${e}`),Promise.resolve()}catch(t){return Promise.reject(new Error(`SetVersion: ${t.message}`))}},er=async(r,e,t)=>{let n=-1,i=-1;try{i=await dt(r);var s=e;if(!t&&e.toLowerCase().includes("DELETE FROM".toLowerCase())){s=e.replace(/\n/g,"");let o=s.split(";");var a=[];for(const u of o)if(u.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&u.toLowerCase().includes("WHERE".toLowerCase())){const g=u.trim(),d=await ys(r,g,[]);a.push(d)}else a.push(u);s=a.join(";")}return r.exec(s),n=await dt(r)-i,Promise.resolve(n)}catch(o){return Promise.reject(new Error(`Execute: ${o.message}`))}},hc=async(r,e,t,n)=>{const i=[];let s=-1,a={};for(let o=0;o<e.length;o++){const u="statement"in e[o]?e[o].statement:null,l="values"in e[o]&&e[o].values.length>0?e[o].values:[];if(u==null){let g="ExecuteSet: Error No statement";return g+=` for index ${o}`,Promise.reject(new Error(g))}try{if(Array.isArray(l[0]))for(const g of l){const d=await on(g);a=await rr(r,u,d,t,n),s=a.lastId,Object.keys(a).includes("values")&&a.values.length>0&&i.push(a.values)}else{const g=await on(l);a=await rr(r,u,g,t,n),s=a.lastId,Object.keys(a).includes("values")&&a.values.length>0&&i.push(a.values)}}catch(g){return Promise.reject(new Error(`ExecuteSet: ${g.message}`))}}return a.lastId=s,a.values=n==="all"?i:n==="one"?i[0]:[],Promise.resolve(a)},rt=async(r,e,t)=>{const n=[];try{let i=[];if(t!=null&&t.length>0?i=r.exec(e,t):i=r.exec(e),i.length==0)return Promise.resolve([]);for(const s of i[0].values){const a={};for(let o=0;o<i[0].columns.length;o++)a[i[0].columns[o]]=s[o];n.push(a)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`queryAll: ${i.message}`))}},rr=async(r,e,t,n,i)=>{let s=e.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),a=e,o=[],u={};try{!n&&s==="DELETE"&&(a=await ys(r,e,t));const l=t||[];if(l.length>0){const d=await on(l),_=r.exec(a,d);if(i==="all"||i==="one")if(_&&_.length>0)o=pi(_[0],i);else return Promise.reject(new Error(`run: ${a} does not returned any change`))}else{const d=r.exec(a);if(i==="all"||i==="one")if(d&&d.length>0)o=pi(d[0],i);else return Promise.reject(new Error(`run: ${a} does not returned any change`))}const g=await ms(r);return u.lastId=g,o!=null&&o.length>0&&(u.values=o),Promise.resolve(u)}catch(l){return Promise.reject(new Error(`run: ${l.message}`))}},pi=(r,e)=>{const t=[];for(let n=0;n<r.values.length;n++){let i={};for(let s=0;s<r.columns.length;s++)i[r.columns[s]]=r.values[n][s];if(t.push(i),e==="one")break}return t},ys=async(r,e,t)=>{let n=e;try{const i=await vs(r,!0),s=await ws(r,!0);if(i&&s){const a=e.toUpperCase().indexOf("WHERE"),o=e.substring(0,a-1),u=e.substring(a,e.length),l=o.substring(11).trim();n=`UPDATE ${l} SET sql_deleted = 1 ${u}`,await dc(r,l,u,t)}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`deleteSQL: ${i.message}`))}},dc=async(r,e,t,n)=>{try{const i=await vc(r,e),s=i.pop();for(const a of i){const o=await mc(a);if(o.length<=0)continue;const u=await yc(a);if(u.length<=0)continue;const l=await pc(a);if(l.length<=0)continue;const g=await gc(t,u,l);if(g.length<=6)continue;let d=s,_=l;s===e&&(d=o,_=u);const y="UPDATE "+d+" SET sql_deleted = 1 "+g;if(n!=null&&n.length>0){const w=await on(n);let P=t.split("?");P[P.length-1]===";"&&(P=P.slice(0,-1));let E=[];for(const[T,N]of P.entries())for(let L=0;L<_.length;L++)N.indexOf(_[L])>-1&&E.push(w[T]);r.exec(y,E)}else r.exec(y);if(await ms(r)==-1){const w=`UPDATE sql_deleted failed for references table: ${o}`;return Promise.reject(new Error(`findReferencesAndUpdate: ${w}`))}}return}catch(i){return Promise.reject(new Error(`findReferencesAndUpdate: ${i.message}`))}},mc=async r=>{var e="";if(r.length>0){const t=r.split(new RegExp("REFERENCES","i"));if(t.length===2){const n=t[1].indexOf("(");e=t[1].substring(0,n).trim()}}return e},pc=async r=>{let e=[];if(r.length>0){const t=r.split(new RegExp("REFERENCES","i"));if(t.length===2){const n=t[1].indexOf("("),i=t[1].indexOf(")");e=t[1].substring(n+1,i).trim().split(",")}}return e},yc=async r=>{let e=[];if(r.length>0){const t=r.split(new RegExp("REFERENCES","i"));if(t.length===2){const n=t[0].indexOf("("),i=t[0].indexOf(")");e=t[0].substring(n+1,i).trim().split(",")}}return e},gc=async(r,e,t)=>{var n="";if(r.length>0){const i=r.toLowerCase().indexOf("WHERE".toLowerCase()),s=r.substring(i+6);if(e.length===t.length){for(let a=0;a<e.length;a++){let o="withRefsNames",u=s.indexOf(e[a]);if(u===-1&&(u=s.indexOf(t[a]),o="colNames"),u>-1){let l="";const g=s.indexOf("=",u);if(g>-1){const d=s.indexOf("AND",g),_=s.indexOf("and",g);d>-1?l=s.substring(g+1,d-1).trim():_>-1?l=s.substring(g+1,_-1).trim():l=s.substring(g+1,s.length).trim(),a>0&&(n+=" AND "),o==="withRefsNames"?n+=`${t[a]} = ${l}`:n+=`${e[a]} = ${l}`}}}n="WHERE "+n}}return n},vc=async(r,e)=>{const t="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+e+"%') AND sql LIKE('%ON DELETE%');";try{const n=await rt(r,t,[]);let i=[];return n.length>0&&(i=wc(n[0].sql)),Promise.resolve(i)}catch(n){return Promise.reject(new Error(`getReferences: ${n.message}`))}},gs=async r=>{try{const e=await Fn(r);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`getTableList: ${e.message}`))}},Ot=async(r,e)=>{try{let t="SELECT name FROM sqlite_master WHERE ";t+=`type='table' AND name='${e}';`;const i=(await rt(r,t,[])).length>0;return Promise.resolve(i)}catch(t){return Promise.reject(new Error(`isTableExists: ${t.message}`))}},vs=async(r,e)=>{if(!e)return Promise.reject("isLastModified: database not opened");try{const t=await Fn(r);for(const n of t)if((await pn(r,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(t){return Promise.reject(`isLastModified: ${t}`)}},ws=async(r,e)=>{if(!e)return Promise.reject("isSqlDeleted: database not opened");try{const t=await Fn(r);for(const n of t)if((await pn(r,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(t){return Promise.reject(`isSqlDeleted: ${t}`)}},on=async r=>{const e=[];for(const t of r){let n=t;typeof t>"u"&&(n=null),e.push(n)}return Promise.resolve(e)},wc=r=>{let e=[];const t=r.split(new RegExp("FOREIGN KEY","i"));for(let n=1;n<t.length;n++)e.push(t[n].split(new RegExp("ON DELETE","i"))[0].trim());if(r.substring(0,12).toLowerCase()==="CREATE TABLE".toLowerCase()){const n=r.indexOf("("),i=r.substring(13,n).trim();e.push(i)}return e},_c=async(r,e)=>{let t=-1;const n=e.version;try{return await ps(r,n),e.mode==="full"&&await lc(r),t=await bc(r,e),Promise.resolve(t)}catch(i){return Promise.reject(new Error(`CreateDatabaseSchema: ${i.message}`))}},bc=async(r,e)=>{let t=0;try{await Qt(r,!0)}catch(i){return Promise.reject(new Error(`CreateSchema: ${i.message}`))}const n=await Ec(e);if(n.length>0){const i=n.join(`
`);try{if(t=await er(r,i,!0),t<0)try{await Ut(r,!0)}catch(s){return Promise.reject(new Error(`CreateSchema: changes < 0 ${s.message}`))}}catch(s){const a=s.message;try{return await Ut(r,!0),Promise.reject(new Error(`CreateSchema: ${a}`))}catch(o){return Promise.reject(new Error(`CreateSchema: changes < 0 ${o.message}: ${a}`))}}}try{return await Xt(r,!0),Promise.resolve(t)}catch(i){return Promise.reject(new Error(`CreateSchema: commit ${i.message}`))}},Ec=async r=>{const e=[];let t=!1,n=!1;try{for(const i of r.tables){if(i.schema!=null&&i.schema.length>=1){e.push(`CREATE TABLE IF NOT EXISTS ${i.name} (`);for(let s=0;s<i.schema.length;s++)s===i.schema.length-1?i.schema[s].column?(e.push(`${i.schema[s].column} ${i.schema[s].value}`),i.schema[s].column==="last_modified"&&(t=!0),i.schema[s].column==="sql_deleted"&&(n=!0)):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value}`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value}`):i.schema[s].column?e.push(`${i.schema[s].column} ${i.schema[s].value},`):i.schema[s].foreignkey?e.push(`FOREIGN KEY (${i.schema[s].foreignkey}) ${i.schema[s].value},`):i.schema[s].primarykey?e.push(`FOREIGN KEY ${i.schema[s].value},`):i.schema[s].constraint&&e.push(`CONSTRAINT ${i.schema[s].constraint} ${i.schema[s].value},`);if(e.push(");"),t&&n){let s="CREATE TRIGGER IF NOT EXISTS ";s+=`${i.name}`,s+="_trigger_last_modified ",s+=`AFTER UPDATE ON ${i.name} `,s+="FOR EACH ROW WHEN NEW.last_modified < ",s+="OLD.last_modified BEGIN UPDATE ",s+=`${i.name} `,s+="SET last_modified = ",s+="(strftime('%s','now')) WHERE id=OLD.id; END;",e.push(s)}}if(i.indexes!=null&&i.indexes.length>=1)for(const s of i.indexes){const a=i.name;let o=`CREATE ${Object.keys(s).includes("mode")?s.mode+" ":""} INDEX IF NOT EXISTS `;o+=`${s.name} ON ${a} (${s.value});`,e.push(o)}if(i.triggers!=null&&i.triggers.length>=1)for(const s of i.triggers){const a=i.name;s.timeevent.toUpperCase().endsWith(" ON")&&(s.timeevent=s.timeevent.substring(0,s.timeevent.length-3));let o="CREATE TRIGGER IF NOT EXISTS ";o+=`${s.name} ${s.timeevent} ON ${a} `,s.condition&&(o+=`${s.condition} `),o+=`${s.logic};`,e.push(o)}}return Promise.resolve(e)}catch(i){return Promise.reject(i)}},Sc=async(r,e,t)=>{let n=0,i=!1,s=-1,a="",o=-1;try{o=await dt(r),await Qt(r,!0)}catch(u){return Promise.reject(new Error(`createTablesData: ${u.message}`))}for(const u of e.tables)if(u.values!=null&&u.values.length>=1)try{s=await xc(r,u,e.mode);const l=`create table data ${u.name}`;if(t.emit({progress:l}),s<0)break;i=!0}catch(l){a=l.message,i=!1;break}if(i)try{return await Xt(r,!0),n=await dt(r)-o,Promise.resolve(n)}catch(u){return Promise.reject(new Error(`CreateTablesData: ${u.message}`))}else if(a.length>0)try{return await Ut(r,!0),Promise.reject(new Error(`CreateTablesData: ${a}`))}catch(u){return Promise.reject(new Error(`CreateTablesData: ${u.message}: ${a}`))}else return Promise.resolve(0)},xc=async(r,e,t)=>{let n=-1;try{if(!await Ot(r,e.name))return Promise.reject(new Error(`CreateTableData: Table ${e.name} does not exist`));const s=await pn(r,e.name),a=s.types,o=s.names;if(a.length===0)return Promise.reject(new Error(`CreateTableData: Table ${e.name} info does not exist`));for(let u=0;u<e.values.length;u++){let l=e.values[u],g=!0;const d=await kc(r,o,l,u,e.name,t);if(g=await Pc(r,d,l,e.name,o),g){if(d.substring(0,6).toUpperCase()==="DELETE"&&(l=[]),n=await rr(r,d,l,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(i){return Promise.reject(new Error(`CreateTableData: ${i.message}`))}},kc=async(r,e,t,n,i,s)=>{if(t.length!=e.length||t.length===0||e.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not correct length`));try{const a=await Tc(r,i,e[0],t[0]);let o;if(s==="full"||s==="partial"&&!a){const u=e.join(),l=await $c(e.length);o=`INSERT INTO ${i} (${u}) VALUES (`,o+=`${l});`}else{let u=!0;const l=d=>d==="sql_deleted",g=e.findIndex(l);if(g>=0&&t[g]===1&&(u=!1,o=`DELETE FROM ${i} WHERE `,typeof t[0]=="string"?o+=`${e[0]} = '${t[0]}';`:o+=`${e[0]} = ${t[0]};`),u){const d=await Dc(e);if(d.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${i} values row ${n} not set to String`));o=`UPDATE ${i} SET ${d} WHERE `,typeof t[0]=="string"?o+=`${e[0]} = '${t[0]}';`:o+=`${e[0]} = ${t[0]};`}}return Promise.resolve(o)}catch(a){return Promise.reject(new Error(`CreateRowStatement: ${a.message}`))}},Pc=async(r,e,t,n,i)=>{let s=!0;if(e.substring(0,6)==="UPDATE")try{let a=`SELECT * FROM ${n} WHERE `;typeof t[0]=="string"?a+=`${i[0]} = '${t[0]}';`:a+=`${i[0]} = ${t[0]};`;const o=await zn(r,a,n);let u=[];if(o.length>0&&(u=o[0]),t.length>0&&u.length>0&&t.length===u.length){for(let l=0;l<t.length;l++)if(t[l]!==u[l])return Promise.resolve(!0);return Promise.resolve(!1)}else{const l="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${l}`))}}catch(a){return Promise.reject(new Error(`CheckUpdate: ${a.message}`))}else return Promise.resolve(s)},Tc=async(r,e,t,n)=>{let i=!1,s=`SELECT ${t} FROM ${e} WHERE ${t} = `;typeof n=="number"&&(s+=`${n};`),typeof n=="string"&&(s+=`'${n}';`);try{return(await rt(r,s,[])).length===1&&(i=!0),Promise.resolve(i)}catch(a){return Promise.reject(new Error(`IsIdExists: ${a.message}`))}},$c=async r=>{let e="";for(let t=0;t<r;t++)e+="?,";return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))},Dc=async r=>{let e="";for(const t of r)e+=`${t} = ? ,`;return e.length>1?(e=e.slice(0,-1),Promise.resolve(e)):Promise.reject(new Error("SetNameForUpdate: length = 0"))},Ac=async(r,e)=>{const t=`CREATE VIEW IF NOT EXISTS ${e.name} AS ${e.value};`;try{return await er(r,t,!0)<0?Promise.reject(new Error(`CreateView: ${e.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}},Oc=async(r,e)=>{let t=!1,n="",i=-1,s=-1;try{i=await dt(r),await Qt(r,!0)}catch(a){return Promise.reject(new Error(`createViews: ${a.message}`))}for(const a of e.views)if(a.value!=null)try{await Ac(r,a),t=!0}catch(o){n=o.message,t=!1;break}if(t)try{return await Xt(r,!0),s=await dt(r)-i,Promise.resolve(s)}catch(a){return Promise.reject(new Error(`createViews: ${a.message}`))}else if(n.length>0)try{return await Ut(r,!0),Promise.reject(new Error(`createViews: ${n}`))}catch(a){return Promise.reject(new Error(`createViews: ${a.message}: ${n}`))}else return Promise.resolve(0)},Rc=async(r,e,t)=>{const n={};let i=[],s=[],a="";try{s=await Ic(r);const o=await Bc(r);if(o.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!await Ot(r,"sync_table")&&e.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(e.mode){case"partial":{i=await Nc(r,o,t);break}case"full":{i=await jc(r,o,t);break}default:{a="createExportObject: expMode "+e.mode+" not defined";break}}return a.length>0?Promise.reject(new Error(a)):(i.length>0&&(n.database=e.database,n.version=e.version,n.encrypted=e.encrypted,n.mode=e.mode,n.tables=i,s.length>0&&(n.views=s)),Promise.resolve(n))}catch(o){return Promise.reject(new Error("createExportObject: "+o.message))}},Ic=async r=>{const e=[];let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await rt(r,t,[]);for(const i of n){const s={};s.name=i.name,s.value=i.sql.substring(i.sql.indexOf("AS ")+3),e.push(s)}return Promise.resolve(e)}catch(i){return Promise.reject(new Error(`getViewsName: ${i.message}`))}},jc=async(r,e,t)=>{const n=[];let i="";try{for(const s of e){let a,o;if(s.name)a=s.name;else{i="GetTablesFull: no name";break}if(s.sql)o=s.sql;else{i="GetTablesFull: no sql";break}const u={},l=await _s(o);if(l.length===0){i="GetTablesFull: no Schema returned";break}await fs(l);const g=await bs(r,a);g.length>0&&await hs(g);const d=await Es(r,a);d.length>0&&await ds(d);let _=`Full: Table ${a} schema export completed ...`;t.emit({progress:_});const y=`SELECT * FROM ${a};`,S=await zn(r,y,a);if(u.name=a,l.length>0)u.schema=l;else{i="GetTablesFull: must contain schema";break}if(g.length>0&&(u.indexes=g),d.length>0&&(u.triggers=d),S.length>0&&(u.values=S),Object.keys(u).length<=1){i=`GetTablesFull: table ${a} is not a jsonTable`;break}_=`Full: Table ${a} table data export completed ...`,t.emit({progress:_}),n.push(u)}return i.length>0?Promise.reject(new Error(i)):Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetTablesFull: ${s.message}`))}},_s=async r=>{const e=[],t=r.indexOf("("),n=r.lastIndexOf(")");let i=r.substring(t+1,n);try{i=await Uc(i);const s=i.split(",");for(let a=0;a<s.length;a++){let o=[];const u=s[a].replace(/\n/g,"").trim();o[0]=u.substring(0,u.indexOf(" ")),o[1]=u.substring(u.indexOf(" ")+1);const l={};if(o[0].toUpperCase()==="FOREIGN"){const g=u.indexOf("("),d=u.indexOf(")"),y=u.substring(g+1,d).split("");o[0]=y.join(","),o[0]=o[0].replace(/, /g,","),o[1]=u.substring(d+2),l.foreignkey=o[0]}else if(o[0].toUpperCase()==="PRIMARY"){const g=u.indexOf("("),d=u.indexOf(")"),y=u.substring(g+1,d).split("");o[0]="CPK_"+y.join("_"),o[0]=o[0].replace(/_ /g,"_"),o[1]=u,l.constraint=o[0]}else if(o[0].toUpperCase()==="CONSTRAINT"){let g=[];const d=o[1].trim();g[0]=d.substring(0,d.indexOf(" ")),g[1]=d.substring(d.indexOf(" ")+1),o[0]=g[0],l.constraint=o[0],o[1]=g[1]}else l.column=o[0];l.value=o[1].replace(//g,","),e.push(l)}return Promise.resolve(e)}catch(s){return Promise.reject(new Error(s.message))}},bs=async(r,e)=>{const t=[];let n="";try{let i="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";i+=`type = 'index' AND tbl_name = '${e}' `,i+="AND sql NOTNULL;";const s=await rt(r,i,[]);if(s.length>0){for(const a of s)if(Object.keys(a).length===3)if(a.tbl_name===e){const u=a.sql,l=u.includes("UNIQUE")?"UNIQUE":"",g=u.lastIndexOf("("),d=u.lastIndexOf(")"),_={};_.name=a.name,_.value=u.slice(g+1,d),l.length>0&&(_.mode=l),t.push(_)}else{n=`GetIndexes: Table ${e} doesn't match`;break}else{n=`GetIndexes: Table ${e} creating indexes`;break}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(t)}catch(i){return Promise.reject(new Error(`GetIndexes: ${i.message}`))}},Es=async(r,e)=>{const t=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${e}' `,n+="AND sql NOT NULL;";const i=await rt(r,n,[]);if(i.length>0)for(const s of i)if(Object.keys(s).length===3)if(s.tbl_name===e){const o=s.sql,u=s.name;let l=o.split(u);if(l.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!l[1].includes(e))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${e}`));const g=l[1].split(e,1)[0].trim();if(l=l[1].split(g+" "+e),l.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let d="",_="";if(l[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(l=l[1].trim().split("BEGIN"),l.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));d=l[0].trim(),_="BEGIN"+l[1]}else _=l[1].trim();const y={};y.name=u,y.logic=_,d.length>0&&(y.condition=d),y.timeevent=g,t.push(y)}else return Promise.reject(new Error(`GetTriggers: Table ${e} doesn't match`));else return Promise.reject(new Error(`GetTriggers: Table ${e} creating indexes`));return Promise.resolve(t)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}},Nc=async(r,e,t)=>{const n=[];let i={},s=0,a=[],o="";try{const u=await Cc(r,e);Object.keys(u).includes("syncDate")&&(s=u.syncDate),Object.keys(u).includes("modTables")&&(i=u.modTables,a=Object.keys(i));for(const l of e){let g="",d="";if(l.name)g=l.name;else{o="GetTablesFull: no name";break}if(l.sql)d=l.sql;else{o="GetTablesFull: no sql";break}if(a.length==0||a.indexOf(g)===-1||i[g]=="No")continue;const _={};let y=[],S=[],w=[];_.name=l,i[_.name]==="Create"&&(y=await _s(d),y.length>0&&await fs(y),S=await bs(r,g),S.length>0&&await hs(S),w=await Es(r,g),w.length>0&&await ds(w));let P=`Partial: Table ${g} schema export completed ...`;t.emit({progress:P});let E="";i[g]==="Create"?E=`SELECT * FROM ${g};`:E=`SELECT * FROM ${g} WHERE last_modified > ${s};`;const T=await zn(r,E,g);if(_.name=g,y.length>0&&(_.schema=y),S.length>0&&(_.indexes=S),w.length>0&&(_.triggers=w),T.length>0&&(_.values=T),Object.keys(_).length<=1){o=`GetTablesPartial: table ${g} is not a jsonTable`;break}P=`Partial: Table ${g} table data export completed ...`,t.emit({progress:P}),n.push(_)}return o.length>0?Promise.reject(new Error(o)):Promise.resolve(n)}catch(u){return Promise.reject(new Error(`GetTablesPartial: ${u.message}`))}},Cc=async(r,e)=>{const t={};try{const n=await Ss(r);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const i=await Lc(r,e,n);return i.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(t.syncDate=n,t.modTables=i,Promise.resolve(t))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}},Bc=async r=>{let e="SELECT name,sql FROM sqlite_master WHERE ";e+="type='table' AND name NOT LIKE 'sync_table' ",e+="AND name NOT LIKE '_temp_%' ",e+="AND name NOT LIKE 'sqlite_%';";try{const t=await rt(r,e,[]);return Promise.resolve(t)}catch(t){return Promise.reject(new Error(`getTablesNamesSQL: ${t.message}`))}},Lc=async(r,e,t)=>{let n="";try{const i={};for(const s of e){let a,o="SELECT count(*) AS tcount  ";o+=`FROM ${s.name};`;let u=await rt(r,o,[]);if(u.length!=1){n="GetTableModified: total count not returned";break}const l=u[0].tcount;if(o="SELECT count(*) AS mcount FROM ",o+=`${s.name} WHERE last_modified > `,o+=`${t};`,u=await rt(r,o,[]),u.length!=1)break;const g=u[0].mcount;g===0?a="No":l===g?a="Create":a="Modified";const d=s.name;i[d]=a}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(i)}catch(i){return Promise.reject(new Error(`GetTableModified: ${i.message}`))}},Ss=async r=>{try{const t=await rt(r,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(t[0].sync_date)}catch(e){const t=`GetSynchroDate: ${e.message}`;return Promise.reject(new Error(t))}},xs=async r=>{try{const t=await rt(r,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return t.length===0?Promise.resolve(-1):Promise.resolve(t[0].sync_date)}catch(e){const t=`getLastExport: ${e.message}`;return Promise.reject(new Error(t))}},Fc=async(r,e)=>{try{if(!await Ot(r,"sync_table"))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="";return await xs(r)>0?i=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:i=`INSERT INTO sync_table (sync_date) VALUES (${n});`,await er(r,i,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setLastExportDate failed: ${t.message}`}}},zc=async r=>{let e;try{if(!await Ot(r,"sync_table"))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(e=await xs(r),e<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=await gs(r);if(n.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const i of n){let s=-1;const a=`DELETE FROM ${i}
            WHERE sql_deleted = 1 AND last_modified < ${e};`;if(s=await rr(r,a,[],!0,"no"),s<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(t){return Promise.reject(new Error(`DelExportedRows failed: ${t.message}`))}},Uc=async r=>{const e=yi(r,"("),t=yi(r,")");if(e.length!=t.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(e.length===0)return Promise.resolve(r);let n=r.substring(0,e[0]-1);for(let i=0;i<e.length;i++){let s;i<e.length-1&&e[i+1]<t[i]?(s=r.substring(e[i]-1,t[i+1]),i++):s=r.substring(e[i]-1,t[i]);const a=s.replace(/,/g,"");n+=a,i<e.length-1&&(n+=r.substring(t[i],e[i+1]-1))}return n+=r.substring(t[t.length-1],r.length),Promise.resolve(n)},yi=(r,e)=>{let t=[...r];return e=e.toLowerCase(),t.reduce((n,i,s)=>i.toLowerCase()===e?[...n,s]:n,[])},Mc=async(r,e,t,n)=>{let i=-1;const s=new Int32Array(Object.keys(e).map(a=>parseInt(a))).sort();for(const a of s)if(a>t&&a<=n){const o=e[a].statements;if(o.length===0)return Promise.reject("onUpgrade: statements not given");try{await dr(r,!1);const u=await dt(r);await qc(r,o),await ps(r,a),await dr(r,!0),i=await dt(r)-u}catch(u){return Promise.reject(new Error(`onUpgrade: ${u.message}`))}}return Promise.resolve(i)},qc=async(r,e)=>{try{await Qt(r,!0);for(const t of e)await er(r,t,!1);return await Xt(r,!0),Promise.resolve()}catch(t){return await Ut(r,!0),Promise.reject(`ExecuteStatementProcess: ${t}`)}};class gi{constructor(e,t,n,i,s,a){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=i,this.version=t,this.mDb=null,this.vUpgDict=n,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=a}async open(){const e={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise((t,n)=>{try{ic(e).then(async i=>{const s=await Ln(this.dbName,this.store);s!=null?this.mDb=new i.Database(s):(this.mDb=new i.Database,await sc(this.dbName,this.store)),this._isDBOpen=!0;let a=await mi(this.mDb);if(this.version>a&&Object.keys(this.vUpgDict).length>0)try{if(await Et(this.dbName,this.store)&&(await oc(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0),await Mc(this.mDb,this.vUpgDict,a,this.version)===-1)try{this.isBackup&&await di(this.dbName,"backup",this.store)}catch(l){return n(new Error(`Open: ${l.message}`))}this.isBackup&&await Jt(`backup-${this.dbName}`,this.store)}catch{try{this.isBackup&&await di(this.dbName,"backup",this.store)}catch(u){return n(new Error(`Open: ${u.message}`))}}if(this.autoSave)try{await this.saveToStore()}catch(o){return this._isDBOpen=!1,n(`Open: ${o}`)}return await dr(this.mDb,!0),t()})}catch(i){return this._isDBOpen=!1,n(`in open ${i}`)}})}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){return this._isDBOpen=!1,Promise.reject(`in close ${e}`)}return Promise.resolve()}async saveToStore(e=!0){if(this.mDb!=null&&this._isDBOpen)try{await ac(this.mDb,this.dbName,this.store),e&&await dr(this.mDb,!0)}catch(t){return Promise.reject(`in saveToStore ${t}`)}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject(`exportDB: ${t}`)}}async getVersion(){if(this.mDb!=null&&this._isDBOpen)try{const e=await mi(this.mDb);return Promise.resolve(e)}catch(e){return this._isDBOpen=!1,Promise.reject(`in getVersion ${e}`)}}async isDBExists(e){try{const t=await Et(e,this.store);return Promise.resolve(t)}catch(t){return Promise.reject(`in isDBExists ${t}`)}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await Jt(e,this.store),Promise.resolve()}catch(t){return Promise.reject(new Error(`DeleteDB: ${t.message}`))}}async executeSQL(e,t=!0){if(!this._isDBOpen){let n=`ExecuteSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{t&&!this.isTransactionActive&&(await Qt(this.mDb,this._isDBOpen),this.isTransactionActive=!0)}catch(n){let i=`executeSQL: ${n.message}`;return Promise.reject(new Error(`${i}`))}try{const n=await er(this.mDb,e,!1);return n<0?Promise.reject(new Error("ExecuteSQL: changes < 0")):(t&&this.isTransactionActive&&await Xt(this.mDb,this._isDBOpen),Promise.resolve(n))}catch(n){let i=`ExecuteSQL: ${n.message}`;try{t&&this.isTransactionActive&&await Ut(this.mDb,this._isDBOpen)}catch(s){i+=` : ${s.message}`}return Promise.reject(new Error(`ExecuteSQL: ${i}`))}finally{if(this.isTransactionActive=!1,this.autoSave)try{await this.saveToStore()}catch(n){return this._isDBOpen=!1,Promise.reject(`ExecuteSQL: ${n}`)}}}async execSet(e,t=!0,n="no"){if(!this._isDBOpen){let a=`ExecSet: Database ${this.dbName} `;return a+="not opened",Promise.reject(new Error(a))}const i={changes:-1,lastId:-1};let s=-1;try{s=await dt(this.mDb),t&&!this.isTransactionActive&&(await Qt(this.mDb,this._isDBOpen),this.isTransactionActive=!0)}catch(a){let o=`ExecSet: ${a.message}`;return Promise.reject(new Error(`${o}`))}try{const a=await hc(this.mDb,e,!1,n);let o=a.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await Xt(this.mDb,this._isDBOpen);const u=await dt(this.mDb)-s;return i.changes=u,i.lastId=o,i.values=a.values?a.values:[],Promise.resolve(i)}catch(a){let o=`ExecSet: ${a.message}`;try{t&&this.isTransactionActive&&await Ut(this.mDb,this._isDBOpen)}catch(u){o+=` : ${u.message}`}return Promise.reject(new Error(`ExecSet: ${o}`))}finally{if(this.isTransactionActive=!1,this.autoSave)try{await this.saveToStore()}catch(a){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${a}`)}}}async selectSQL(e,t){if(!this._isDBOpen){let n=`SelectSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}try{let n=await rt(this.mDb,e,t);return Promise.resolve(n)}catch(n){return Promise.reject(new Error(`SelectSQL: ${n.message}`))}}async runSQL(e,t,n=!0,i){let s=-1;if(!this._isDBOpen){let u=`RunSQL: Database ${this.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const a={changes:-1,lastId:-1};let o=-1;try{o=await dt(this.mDb),n&&!this.isTransactionActive&&(await Qt(this.mDb,this._isDBOpen),this.isTransactionActive=!0)}catch(u){let l=`RunSQL: ${u.message}`;return Promise.reject(new Error(`${l}`))}try{const u=await rr(this.mDb,e,t,!1,i);if(s=u.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));n&&this.isTransactionActive&&await Xt(this.mDb,this._isDBOpen);const l=await dt(this.mDb)-o;return a.changes=l,a.lastId=s,a.values=u.values?u.values:[],Promise.resolve(a)}catch(u){let l=`RunSQL: ${u.message}`;try{n&&this.isTransactionActive&&await Ut(this.mDb,this._isDBOpen)}catch(g){l+=` : ${g.message}`}return Promise.reject(new Error(`${l}`))}finally{if(this.isTransactionActive=!1,this.autoSave)try{await this.saveToStore()}catch(u){return this._isDBOpen=!1,Promise.reject(`ExecSet: ${u}`)}}}async getTableNames(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=await gs(this.mDb);return Promise.resolve(e)}catch(e){return Promise.reject(new Error(`GetTableNames: ${e.message}`))}}async isTable(e){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}try{const t=await Ot(this.mDb,e);return Promise.resolve(t)}catch(t){const n=`IsTable: ${t.message}`;return Promise.reject(new Error(n))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(await Ot(this.mDb,"sync_table"))return Promise.resolve(0);{const n=await vs(this.mDb,this._isDBOpen),i=await ws(this.mDb,this._isDBOpen);if(n&&i){const s=Math.round(new Date().getTime()/1e3);let a=`
                          CREATE TABLE IF NOT EXISTS sync_table (
                              id INTEGER PRIMARY KEY NOT NULL,
                              sync_date INTEGER
                              );`;return a+=`INSERT INTO sync_table (sync_date) VALUES (
                              "${s}");`,e=await er(this.mDb,a,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const n=`CreateSyncTable: ${t.message}`;return Promise.reject(new Error(n))}}async getSyncDate(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!await Ot(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const t=await Ss(this.mDb);return Promise.resolve(t)}catch(e){const t=`getSyncDate: ${e.message}`;return Promise.reject(new Error(t))}}async setSyncDate(e){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;return t+="not opened",{result:!1,message:t}}try{if(!await Ot(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const n=Math.round(new Date(e).getTime()/1e3);let i="UPDATE sync_table SET sync_date = ";return i+=`${n} WHERE id = 1;`,await er(this.mDb,i,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message}`}}}async importJson(e,t){let n=0;if(this._isDBOpen)try{if(await dr(this.mDb,!1),e.tables&&e.tables.length>0){n=await _c(this.mDb,e);let i=`Schema creation completed changes: ${n}`;if(t.emit({progress:i}),n!=-1){n+=await Sc(this.mDb,e,t);let s=`Tables data creation completed changes: ${n}`;t.emit({progress:s})}}return e.views&&e.views.length>0&&(n+=await Oc(this.mDb,e)),await dr(this.mDb,!0),await this.saveToStore(),Promise.resolve(n)}catch(i){return Promise.reject(new Error(`ImportJson: ${i.message}`))}else return Promise.reject(new Error("ImportJson: database is closed"))}async exportJson(e,t){const n={};if(n.database=this.dbName.slice(0,-9),n.version=this.version,n.encrypted=!1,n.mode=e,this._isDBOpen)try{await Ot(this.mDb,"sync_table")&&await Fc(this.mDb,new Date().toISOString());const s=await Rc(this.mDb,n,t);if(Object.keys(s).length===0){const u="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(u))}return Pn(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(i){return Promise.reject(new Error(`ExportJson: ${i.message}`))}else return Promise.reject(new Error("ExportJson: database is closed"))}async deleteExportedRows(){if(this._isDBOpen)try{return await zc(this.mDb),Promise.resolve()}catch(e){return Promise.reject(new Error(`deleteExportedRows: ${e.message}`))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))}}var vi=In(function(r,e){/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t){r.exports=t()})(function(){return function t(n,i,s){function a(l,g){if(!i[l]){if(!n[l]){var d=typeof jt=="function"&&jt;if(!g&&d)return d(l,!0);if(o)return o(l,!0);var _=new Error("Cannot find module '"+l+"'");throw _.code="MODULE_NOT_FOUND",_}var y=i[l]={exports:{}};n[l][0].call(y.exports,function(S){var w=n[l][1][S];return a(w||S)},y,y.exports,t,n,i,s)}return i[l].exports}for(var o=typeof jt=="function"&&jt,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(t,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var u=0,l=new a(S),g=s.document.createTextNode("");l.observe(g,{characterData:!0}),o=function(){g.data=u=++u%2}}else if(!s.setImmediate&&typeof globalThis.MessageChannel<"u"){var d=new globalThis.MessageChannel;d.port1.onmessage=S,o=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in globalThis.document.createElement("script")?o=function(){var P=s.document.createElement("script");P.onreadystatechange=function(){S(),P.onreadystatechange=null,P.parentNode.removeChild(P),P=null},s.document.documentElement.appendChild(P)}:o=function(){setTimeout(S,0)};var _,y=[];function S(){_=!0;for(var P,E,T=y.length;T;){for(E=y,y=[],P=-1;++P<T;)E[P]();T=y.length}_=!1}n.exports=w;function w(P){y.push(P)===1&&!_&&o()}}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],g=["PENDING"];n.exports=d;function d(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,D!==a&&w(this,D)}d.prototype.catch=function(D){return this.then(null,D)},d.prototype.then=function(D,H){if(typeof D!="function"&&this.state===l||typeof H!="function"&&this.state===u)return this;var z=new this.constructor(a);if(this.state!==g){var V=this.state===l?D:H;y(z,V,this.outcome)}else this.queue.push(new _(z,D,H));return z};function _(D,H,z){this.promise=D,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}_.prototype.callFulfilled=function(D){o.resolve(this.promise,D)},_.prototype.otherCallFulfilled=function(D){y(this.promise,this.onFulfilled,D)},_.prototype.callRejected=function(D){o.reject(this.promise,D)},_.prototype.otherCallRejected=function(D){y(this.promise,this.onRejected,D)};function y(D,H,z){s(function(){var V;try{V=H(z)}catch(G){return o.reject(D,G)}V===D?o.reject(D,new TypeError("Cannot resolve promise with itself")):o.resolve(D,V)})}o.resolve=function(D,H){var z=P(S,H);if(z.status==="error")return o.reject(D,z.value);var V=z.value;if(V)w(D,V);else{D.state=l,D.outcome=H;for(var G=-1,oe=D.queue.length;++G<oe;)D.queue[G].callFulfilled(H)}return D},o.reject=function(D,H){D.state=u,D.outcome=H;for(var z=-1,V=D.queue.length;++z<V;)D.queue[z].callRejected(H);return D};function S(D){var H=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof H=="function")return function(){H.apply(D,arguments)}}function w(D,H){var z=!1;function V(A){z||(z=!0,o.reject(D,A))}function G(A){z||(z=!0,o.resolve(D,A))}function oe(){H(G,V)}var ve=P(oe);ve.status==="error"&&V(ve.value)}function P(D,H){var z={};try{z.value=D(H),z.status="success"}catch(V){z.status="error",z.value=V}return z}d.resolve=E;function E(D){return D instanceof this?D:o.resolve(new this(a),D)}d.reject=T;function T(D){var H=new this(a);return o.reject(H,D)}d.all=N;function N(D){var H=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,V=!1;if(!z)return this.resolve([]);for(var G=new Array(z),oe=0,ve=-1,A=new this(a);++ve<z;)W(D[ve],ve);return A;function W(p,Q){H.resolve(p).then(xe,function(ee){V||(V=!0,o.reject(A,ee))});function xe(ee){G[Q]=ee,++oe===z&&!V&&(V=!0,o.resolve(A,G))}}}d.race=L;function L(D){var H=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,V=!1;if(!z)return this.resolve([]);for(var G=-1,oe=new this(a);++G<z;)ve(D[G]);return oe;function ve(A){H.resolve(A).then(function(W){V||(V=!0,o.resolve(oe,W))},function(W){V||(V=!0,o.reject(oe,W))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof globalThis.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v};function a(v,R){if(!(v instanceof R))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=o();function l(){try{if(!u||!u.open)return!1;var v=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!v||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(v,R){v=v||[],R=R||{};try{return new Blob(v,R)}catch(j){if(j.name!=="TypeError")throw j;for(var k=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,C=new k,B=0;B<v.length;B+=1)C.append(v[B]);return C.getBlob(R.type)}}typeof Promise>"u"&&t(3);var d=Promise;function _(v,R){R&&v.then(function(k){R(null,k)},function(k){R(k)})}function y(v,R,k){typeof R=="function"&&v.then(R),typeof k=="function"&&v.catch(k)}function S(v){return typeof v!="string"&&(console.warn(v+" used as a key, but it is not a string."),v=String(v)),v}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var P="local-forage-detect-blob-support",E=void 0,T={},N=Object.prototype.toString,L="readonly",D="readwrite";function H(v){for(var R=v.length,k=new ArrayBuffer(R),C=new Uint8Array(k),B=0;B<R;B++)C[B]=v.charCodeAt(B);return k}function z(v){return new d(function(R){var k=v.transaction(P,D),C=g([""]);k.objectStore(P).put(C,"key"),k.onabort=function(B){B.preventDefault(),B.stopPropagation(),R(!1)},k.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),j=navigator.userAgent.match(/Edge\//);R(j||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function V(v){return typeof E=="boolean"?d.resolve(E):z(v).then(function(R){return E=R,E})}function G(v){var R=T[v.name],k={};k.promise=new d(function(C,B){k.resolve=C,k.reject=B}),R.deferredOperations.push(k),R.dbReady?R.dbReady=R.dbReady.then(function(){return k.promise}):R.dbReady=k.promise}function oe(v){var R=T[v.name],k=R.deferredOperations.pop();if(k)return k.resolve(),k.promise}function ve(v,R){var k=T[v.name],C=k.deferredOperations.pop();if(C)return C.reject(R),C.promise}function A(v,R){return new d(function(k,C){if(T[v.name]=T[v.name]||q(),v.db)if(R)G(v),v.db.close();else return k(v.db);var B=[v.name];R&&B.push(v.version);var j=u.open.apply(u,B);R&&(j.onupgradeneeded=function(J){var se=j.result;try{se.createObjectStore(v.storeName),J.oldVersion<=1&&se.createObjectStore(P)}catch(le){if(le.name==="ConstraintError")console.warn('The database "'+v.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+v.storeName+'" already exists.');else throw le}}),j.onerror=function(J){J.preventDefault(),C(j.error)},j.onsuccess=function(){var J=j.result;J.onversionchange=function(se){se.target.close()},k(J),oe(v)}})}function W(v){return A(v,!1)}function p(v){return A(v,!0)}function Q(v,R){if(!v.db)return!0;var k=!v.db.objectStoreNames.contains(v.storeName),C=v.version<v.db.version,B=v.version>v.db.version;if(C&&(v.version!==R&&console.warn('The database "'+v.name+`" can't be downgraded from version `+v.db.version+" to version "+v.version+"."),v.version=v.db.version),B||k){if(k){var j=v.db.version+1;j>v.version&&(v.version=j)}return!0}return!1}function xe(v){return new d(function(R,k){var C=new FileReader;C.onerror=k,C.onloadend=function(B){var j=btoa(B.target.result||"");R({__local_forage_encoded_blob:!0,data:j,type:v.type})},C.readAsBinaryString(v)})}function ee(v){var R=H(atob(v.data));return g([R],{type:v.type})}function Se(v){return v&&v.__local_forage_encoded_blob}function ce(v){var R=this,k=R._initReady().then(function(){var C=T[R._dbInfo.name];if(C&&C.dbReady)return C.dbReady});return y(k,v,v),k}function ue(v){G(v);for(var R=T[v.name],k=R.forages,C=0;C<k.length;C++){var B=k[C];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return v.db=null,W(v).then(function(j){return v.db=j,Q(v)?p(v):j}).then(function(j){v.db=R.db=j;for(var J=0;J<k.length;J++)k[J]._dbInfo.db=j}).catch(function(j){throw ve(v,j),j})}function F(v,R,k,C){C===void 0&&(C=1);try{var B=v.db.transaction(v.storeName,R);k(null,B)}catch(j){if(C>0&&(!v.db||j.name==="InvalidStateError"||j.name==="NotFoundError"))return d.resolve().then(function(){if(!v.db||j.name==="NotFoundError"&&!v.db.objectStoreNames.contains(v.storeName)&&v.version<=v.db.version)return v.db&&(v.version=v.db.version+1),p(v)}).then(function(){return ue(v).then(function(){F(v,R,k,C-1)})}).catch(k);k(j)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ee(v){var R=this,k={db:null};if(v)for(var C in v)k[C]=v[C];var B=T[k.name];B||(B=q(),T[k.name]=B),B.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=ce);var j=[];function J(){return d.resolve()}for(var se=0;se<B.forages.length;se++){var le=B.forages[se];le!==R&&j.push(le._initReady().catch(J))}var he=B.forages.slice(0);return d.all(j).then(function(){return k.db=B.db,W(k)}).then(function(pe){return k.db=pe,Q(k,R._defaultConfig.version)?p(k):pe}).then(function(pe){k.db=B.db=pe,R._dbInfo=k;for(var we=0;we<he.length;we++){var De=he[we];De!==R&&(De._dbInfo.db=k.db,De._dbInfo.version=k.version)}})}function ge(v,R){var k=this;v=S(v);var C=new d(function(B,j){k.ready().then(function(){F(k._dbInfo,L,function(J,se){if(J)return j(J);try{var le=se.objectStore(k._dbInfo.storeName),he=le.get(v);he.onsuccess=function(){var pe=he.result;pe===void 0&&(pe=null),Se(pe)&&(pe=ee(pe)),B(pe)},he.onerror=function(){j(he.error)}}catch(pe){j(pe)}})}).catch(j)});return _(C,R),C}function me(v,R){var k=this,C=new d(function(B,j){k.ready().then(function(){F(k._dbInfo,L,function(J,se){if(J)return j(J);try{var le=se.objectStore(k._dbInfo.storeName),he=le.openCursor(),pe=1;he.onsuccess=function(){var we=he.result;if(we){var De=we.value;Se(De)&&(De=ee(De));var Ie=v(De,we.key,pe++);Ie!==void 0?B(Ie):we.continue()}else B()},he.onerror=function(){j(he.error)}}catch(we){j(we)}})}).catch(j)});return _(C,R),C}function Me(v,R,k){var C=this;v=S(v);var B=new d(function(j,J){var se;C.ready().then(function(){return se=C._dbInfo,N.call(R)==="[object Blob]"?V(se.db).then(function(le){return le?R:xe(R)}):R}).then(function(le){F(C._dbInfo,D,function(he,pe){if(he)return J(he);try{var we=pe.objectStore(C._dbInfo.storeName);le===null&&(le=void 0);var De=we.put(le,v);pe.oncomplete=function(){le===void 0&&(le=null),j(le)},pe.onabort=pe.onerror=function(){var Ie=De.error?De.error:De.transaction.error;J(Ie)}}catch(Ie){J(Ie)}})}).catch(J)});return _(B,k),B}function Ge(v,R){var k=this;v=S(v);var C=new d(function(B,j){k.ready().then(function(){F(k._dbInfo,D,function(J,se){if(J)return j(J);try{var le=se.objectStore(k._dbInfo.storeName),he=le.delete(v);se.oncomplete=function(){B()},se.onerror=function(){j(he.error)},se.onabort=function(){var pe=he.error?he.error:he.transaction.error;j(pe)}}catch(pe){j(pe)}})}).catch(j)});return _(C,R),C}function Ae(v){var R=this,k=new d(function(C,B){R.ready().then(function(){F(R._dbInfo,D,function(j,J){if(j)return B(j);try{var se=J.objectStore(R._dbInfo.storeName),le=se.clear();J.oncomplete=function(){C()},J.onabort=J.onerror=function(){var he=le.error?le.error:le.transaction.error;B(he)}}catch(he){B(he)}})}).catch(B)});return _(k,v),k}function Re(v){var R=this,k=new d(function(C,B){R.ready().then(function(){F(R._dbInfo,L,function(j,J){if(j)return B(j);try{var se=J.objectStore(R._dbInfo.storeName),le=se.count();le.onsuccess=function(){C(le.result)},le.onerror=function(){B(le.error)}}catch(he){B(he)}})}).catch(B)});return _(k,v),k}function Ue(v,R){var k=this,C=new d(function(B,j){if(v<0){B(null);return}k.ready().then(function(){F(k._dbInfo,L,function(J,se){if(J)return j(J);try{var le=se.objectStore(k._dbInfo.storeName),he=!1,pe=le.openKeyCursor();pe.onsuccess=function(){var we=pe.result;if(!we){B(null);return}v===0||he?B(we.key):(he=!0,we.advance(v))},pe.onerror=function(){j(pe.error)}}catch(we){j(we)}})}).catch(j)});return _(C,R),C}function ze(v){var R=this,k=new d(function(C,B){R.ready().then(function(){F(R._dbInfo,L,function(j,J){if(j)return B(j);try{var se=J.objectStore(R._dbInfo.storeName),le=se.openKeyCursor(),he=[];le.onsuccess=function(){var pe=le.result;if(!pe){C(he);return}he.push(pe.key),pe.continue()},le.onerror=function(){B(le.error)}}catch(pe){B(pe)}})}).catch(B)});return _(k,v),k}function He(v,R){R=w.apply(this,arguments);var k=this.config();v=typeof v!="function"&&v||{},v.name||(v.name=v.name||k.name,v.storeName=v.storeName||k.storeName);var C=this,B;if(!v.name)B=d.reject("Invalid arguments");else{var j=v.name===k.name&&C._dbInfo.db,J=j?d.resolve(C._dbInfo.db):W(v).then(function(se){var le=T[v.name],he=le.forages;le.db=se;for(var pe=0;pe<he.length;pe++)he[pe]._dbInfo.db=se;return se});v.storeName?B=J.then(function(se){if(se.objectStoreNames.contains(v.storeName)){var le=se.version+1;G(v);var he=T[v.name],pe=he.forages;se.close();for(var we=0;we<pe.length;we++){var De=pe[we];De._dbInfo.db=null,De._dbInfo.version=le}var Ie=new d(function(Ne,We){var Le=u.open(v.name,le);Le.onerror=function(et){var Tt=Le.result;Tt.close(),We(et)},Le.onupgradeneeded=function(){var et=Le.result;et.deleteObjectStore(v.storeName)},Le.onsuccess=function(){var et=Le.result;et.close(),Ne(et)}});return Ie.then(function(Ne){he.db=Ne;for(var We=0;We<pe.length;We++){var Le=pe[We];Le._dbInfo.db=Ne,oe(Le._dbInfo)}}).catch(function(Ne){throw(ve(v,Ne)||d.resolve()).catch(function(){}),Ne})}}):B=J.then(function(se){G(v);var le=T[v.name],he=le.forages;se.close();for(var pe=0;pe<he.length;pe++){var we=he[pe];we._dbInfo.db=null}var De=new d(function(Ie,Ne){var We=u.deleteDatabase(v.name);We.onerror=function(){var Le=We.result;Le&&Le.close(),Ne(We.error)},We.onblocked=function(){console.warn('dropInstance blocked for database "'+v.name+'" until all open connections are closed')},We.onsuccess=function(){var Le=We.result;Le&&Le.close(),Ie(Le)}});return De.then(function(Ie){le.db=Ie;for(var Ne=0;Ne<he.length;Ne++){var We=he[Ne];oe(We._dbInfo)}}).catch(function(Ie){throw(ve(v,Ie)||d.resolve()).catch(function(){}),Ie})})}return _(B,R),B}var Je={_driver:"asyncStorage",_initStorage:Ee,_support:l(),iterate:me,getItem:ge,setItem:Me,removeItem:Ge,clear:Ae,length:Re,key:Ue,keys:ze,dropInstance:He};function h(){return typeof openDatabase=="function"}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",$=/^~~local_forage_type~([^~]+)~/,b="__lfsc__:",I=b.length,ne="arbf",re="blob",M="si08",fe="ui08",ye="uic8",de="si16",_e="si32",Ce="ur16",$e="ui32",Ke="fl32",mt="fl64",Qe=I+ne.length,vt=Object.prototype.toString;function qe(v){var R=v.length*.75,k=v.length,C,B=0,j,J,se,le;v[v.length-1]==="="&&(R--,v[v.length-2]==="="&&R--);var he=new ArrayBuffer(R),pe=new Uint8Array(he);for(C=0;C<k;C+=4)j=K.indexOf(v[C]),J=K.indexOf(v[C+1]),se=K.indexOf(v[C+2]),le=K.indexOf(v[C+3]),pe[B++]=j<<2|J>>4,pe[B++]=(J&15)<<4|se>>2,pe[B++]=(se&3)<<6|le&63;return he}function wt(v){var R=new Uint8Array(v),k="",C;for(C=0;C<R.length;C+=3)k+=K[R[C]>>2],k+=K[(R[C]&3)<<4|R[C+1]>>4],k+=K[(R[C+1]&15)<<2|R[C+2]>>6],k+=K[R[C+2]&63];return R.length%3===2?k=k.substring(0,k.length-1)+"=":R.length%3===1&&(k=k.substring(0,k.length-2)+"=="),k}function ke(v,R){var k="";if(v&&(k=vt.call(v)),v&&(k==="[object ArrayBuffer]"||v.buffer&&vt.call(v.buffer)==="[object ArrayBuffer]")){var C,B=b;v instanceof ArrayBuffer?(C=v,B+=ne):(C=v.buffer,k==="[object Int8Array]"?B+=M:k==="[object Uint8Array]"?B+=fe:k==="[object Uint8ClampedArray]"?B+=ye:k==="[object Int16Array]"?B+=de:k==="[object Uint16Array]"?B+=Ce:k==="[object Int32Array]"?B+=_e:k==="[object Uint32Array]"?B+=$e:k==="[object Float32Array]"?B+=Ke:k==="[object Float64Array]"?B+=mt:R(new Error("Failed to get type for BinaryArray"))),R(B+wt(C))}else if(k==="[object Blob]"){var j=new FileReader;j.onload=function(){var J=Y+v.type+"~"+wt(this.result);R(b+re+J)},j.readAsArrayBuffer(v)}else try{R(JSON.stringify(v))}catch(J){console.error("Couldn't convert value into a JSON string: ",v),R(null,J)}}function nt(v){if(v.substring(0,I)!==b)return JSON.parse(v);var R=v.substring(Qe),k=v.substring(I,Qe),C;if(k===re&&$.test(R)){var B=R.match($);C=B[1],R=R.substring(B[0].length)}var j=qe(R);switch(k){case ne:return j;case re:return g([j],{type:C});case M:return new Int8Array(j);case fe:return new Uint8Array(j);case ye:return new Uint8ClampedArray(j);case de:return new Int16Array(j);case Ce:return new Uint16Array(j);case _e:return new Int32Array(j);case $e:return new Uint32Array(j);case Ke:return new Float32Array(j);case mt:return new Float64Array(j);default:throw new Error("Unkown type: "+k)}}var xt={serialize:ke,deserialize:nt,stringToBuffer:qe,bufferToString:wt};function st(v,R,k,C){v.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,C)}function yr(v){var R=this,k={db:null};if(v)for(var C in v)k[C]=typeof v[C]!="string"?v[C].toString():v[C];var B=new d(function(j,J){try{k.db=openDatabase(k.name,String(k.version),k.description,k.size)}catch(se){return J(se)}k.db.transaction(function(se){st(se,k,function(){R._dbInfo=k,j()},function(le,he){J(he)})},J)});return k.serializer=xt,B}function Ze(v,R,k,C,B,j){v.executeSql(k,C,B,function(J,se){se.code===se.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(le,he){he.rows.length?j(le,se):st(le,R,function(){le.executeSql(k,C,B,j)},j)},j):j(J,se)},j)}function Mt(v,R){var k=this;v=S(v);var C=new d(function(B,j){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(se){Ze(se,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[v],function(le,he){var pe=he.rows.length?he.rows.item(0).value:null;pe&&(pe=J.serializer.deserialize(pe)),B(pe)},function(le,he){j(he)})})}).catch(j)});return _(C,R),C}function X(v,R){var k=this,C=new d(function(B,j){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(se){Ze(se,J,"SELECT * FROM "+J.storeName,[],function(le,he){for(var pe=he.rows,we=pe.length,De=0;De<we;De++){var Ie=pe.item(De),Ne=Ie.value;if(Ne&&(Ne=J.serializer.deserialize(Ne)),Ne=v(Ne,Ie.key,De+1),Ne!==void 0){B(Ne);return}}B()},function(le,he){j(he)})})}).catch(j)});return _(C,R),C}function pt(v,R,k,C){var B=this;v=S(v);var j=new d(function(J,se){B.ready().then(function(){R===void 0&&(R=null);var le=R,he=B._dbInfo;he.serializer.serialize(R,function(pe,we){we?se(we):he.db.transaction(function(De){Ze(De,he,"INSERT OR REPLACE INTO "+he.storeName+" (key, value) VALUES (?, ?)",[v,pe],function(){J(le)},function(Ie,Ne){se(Ne)})},function(De){if(De.code===De.QUOTA_ERR){if(C>0){J(pt.apply(B,[v,le,k,C-1]));return}se(De)}})})}).catch(se)});return _(j,k),j}function Xe(v,R,k){return pt.apply(this,[v,R,k,1])}function qt(v,R){var k=this;v=S(v);var C=new d(function(B,j){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(se){Ze(se,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[v],function(){B()},function(le,he){j(he)})})}).catch(j)});return _(C,R),C}function gr(v){var R=this,k=new d(function(C,B){R.ready().then(function(){var j=R._dbInfo;j.db.transaction(function(J){Ze(J,j,"DELETE FROM "+j.storeName,[],function(){C()},function(se,le){B(le)})})}).catch(B)});return _(k,v),k}function Ir(v){var R=this,k=new d(function(C,B){R.ready().then(function(){var j=R._dbInfo;j.db.transaction(function(J){Ze(J,j,"SELECT COUNT(key) as c FROM "+j.storeName,[],function(se,le){var he=le.rows.item(0).c;C(he)},function(se,le){B(le)})})}).catch(B)});return _(k,v),k}function kt(v,R){var k=this,C=new d(function(B,j){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(se){Ze(se,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[v+1],function(le,he){var pe=he.rows.length?he.rows.item(0).key:null;B(pe)},function(le,he){j(he)})})}).catch(j)});return _(C,R),C}function jr(v){var R=this,k=new d(function(C,B){R.ready().then(function(){var j=R._dbInfo;j.db.transaction(function(J){Ze(J,j,"SELECT key FROM "+j.storeName,[],function(se,le){for(var he=[],pe=0;pe<le.rows.length;pe++)he.push(le.rows.item(pe).key);C(he)},function(se,le){B(le)})})}).catch(B)});return _(k,v),k}function gn(v){return new d(function(R,k){v.transaction(function(C){C.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,j){for(var J=[],se=0;se<j.rows.length;se++)J.push(j.rows.item(se).name);R({db:v,storeNames:J})},function(B,j){k(j)})},function(C){k(C)})})}function Nr(v,R){R=w.apply(this,arguments);var k=this.config();v=typeof v!="function"&&v||{},v.name||(v.name=v.name||k.name,v.storeName=v.storeName||k.storeName);var C=this,B;return v.name?B=new d(function(j){var J;v.name===k.name?J=C._dbInfo.db:J=openDatabase(v.name,"","",0),v.storeName?j({db:J,storeNames:[v.storeName]}):j(gn(J))}).then(function(j){return new d(function(J,se){j.db.transaction(function(le){function he(Ie){return new d(function(Ne,We){le.executeSql("DROP TABLE IF EXISTS "+Ie,[],function(){Ne()},function(Le,et){We(et)})})}for(var pe=[],we=0,De=j.storeNames.length;we<De;we++)pe.push(he(j.storeNames[we]));d.all(pe).then(function(){J()}).catch(function(Ie){se(Ie)})},function(le){se(le)})})}):B=d.reject("Invalid arguments"),_(B,R),B}var Nt={_driver:"webSQLStorage",_initStorage:yr,_support:h(),iterate:X,getItem:Mt,setItem:Xe,removeItem:qt,clear:gr,length:Ir,key:kt,keys:jr,dropInstance:Nr};function Cr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function vr(v,R){var k=v.name+"/";return v.storeName!==R.storeName&&(k+=v.storeName+"/"),k}function vn(){var v="_localforage_support_test";try{return localStorage.setItem(v,!0),localStorage.removeItem(v),!1}catch{return!0}}function Br(){return!vn()||localStorage.length>0}function wn(v){var R=this,k={};if(v)for(var C in v)k[C]=v[C];return k.keyPrefix=vr(v,R._defaultConfig),Br()?(R._dbInfo=k,k.serializer=xt,d.resolve()):d.reject()}function wr(v){var R=this,k=R.ready().then(function(){for(var C=R._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var j=localStorage.key(B);j.indexOf(C)===0&&localStorage.removeItem(j)}});return _(k,v),k}function Lr(v,R){var k=this;v=S(v);var C=k.ready().then(function(){var B=k._dbInfo,j=localStorage.getItem(B.keyPrefix+v);return j&&(j=B.serializer.deserialize(j)),j});return _(C,R),C}function ir(v,R){var k=this,C=k.ready().then(function(){for(var B=k._dbInfo,j=B.keyPrefix,J=j.length,se=localStorage.length,le=1,he=0;he<se;he++){var pe=localStorage.key(he);if(pe.indexOf(j)===0){var we=localStorage.getItem(pe);if(we&&(we=B.serializer.deserialize(we)),we=v(we,pe.substring(J),le++),we!==void 0)return we}}});return _(C,R),C}function ct(v,R){var k=this,C=k.ready().then(function(){var B=k._dbInfo,j;try{j=localStorage.key(v)}catch{j=null}return j&&(j=j.substring(B.keyPrefix.length)),j});return _(C,R),C}function sr(v){var R=this,k=R.ready().then(function(){for(var C=R._dbInfo,B=localStorage.length,j=[],J=0;J<B;J++){var se=localStorage.key(J);se.indexOf(C.keyPrefix)===0&&j.push(se.substring(C.keyPrefix.length))}return j});return _(k,v),k}function _r(v){var R=this,k=R.keys().then(function(C){return C.length});return _(k,v),k}function Fr(v,R){var k=this;v=S(v);var C=k.ready().then(function(){var B=k._dbInfo;localStorage.removeItem(B.keyPrefix+v)});return _(C,R),C}function zr(v,R,k){var C=this;v=S(v);var B=C.ready().then(function(){R===void 0&&(R=null);var j=R;return new d(function(J,se){var le=C._dbInfo;le.serializer.serialize(R,function(he,pe){if(pe)se(pe);else try{localStorage.setItem(le.keyPrefix+v,he),J(j)}catch(we){(we.name==="QuotaExceededError"||we.name==="NS_ERROR_DOM_QUOTA_REACHED")&&se(we),se(we)}})})});return _(B,k),B}function Ur(v,R){if(R=w.apply(this,arguments),v=typeof v!="function"&&v||{},!v.name){var k=this.config();v.name=v.name||k.name,v.storeName=v.storeName||k.storeName}var C=this,B;return v.name?B=new d(function(j){v.storeName?j(vr(v,C._defaultConfig)):j(v.name+"/")}).then(function(j){for(var J=localStorage.length-1;J>=0;J--){var se=localStorage.key(J);se.indexOf(j)===0&&localStorage.removeItem(se)}}):B=d.reject("Invalid arguments"),_(B,R),B}var Wt={_driver:"localStorageWrapper",_initStorage:wn,_support:Cr(),iterate:ir,getItem:Lr,setItem:zr,removeItem:Fr,clear:wr,length:_r,key:ct,keys:sr,dropInstance:Ur},Mr=function(R,k){return R===k||typeof R=="number"&&typeof k=="number"&&isNaN(R)&&isNaN(k)},ar=function(R,k){for(var C=R.length,B=0;B<C;){if(Mr(R[B],k))return!0;B++}return!1},br=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"},lt={},or={},Pt={INDEXEDDB:Je,WEBSQL:Nt,LOCALSTORAGE:Wt},qr=[Pt.INDEXEDDB._driver,Pt.WEBSQL._driver,Pt.LOCALSTORAGE._driver],Gt=["dropInstance"],Er=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Gt),Wr={description:"",driver:qr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Gr(v,R){v[R]=function(){var k=arguments;return v.ready().then(function(){return v[R].apply(v,k)})}}function cr(){for(var v=1;v<arguments.length;v++){var R=arguments[v];if(R)for(var k in R)R.hasOwnProperty(k)&&(br(R[k])?arguments[0][k]=R[k].slice():arguments[0][k]=R[k])}return arguments[0]}var Ht=function(){function v(R){a(this,v);for(var k in Pt)if(Pt.hasOwnProperty(k)){var C=Pt[k],B=C._driver;this[k]=B,lt[B]||this.defineDriver(C)}this._defaultConfig=cr({},Wr),this._config=cr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return v.prototype.config=function(k){if((typeof k>"u"?"undefined":s(k))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var C in k){if(C==="storeName"&&(k[C]=k[C].replace(/\W/g,"_")),C==="version"&&typeof k[C]!="number")return new Error("Database version must be a number.");this._config[C]=k[C]}return"driver"in k&&k.driver?this.setDriver(this._config.driver):!0}else return typeof k=="string"?this._config[k]:this._config},v.prototype.defineDriver=function(k,C,B){var j=new d(function(J,se){try{var le=k._driver,he=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!k._driver){se(he);return}for(var pe=Er.concat("_initStorage"),we=0,De=pe.length;we<De;we++){var Ie=pe[we],Ne=!ar(Gt,Ie);if((Ne||k[Ie])&&typeof k[Ie]!="function"){se(he);return}}var We=function(){for(var Tt=function(bn){return function(){var Hr=new Error("Method "+bn+" is not implemented by the current driver"),Yt=d.reject(Hr);return _(Yt,arguments[arguments.length-1]),Yt}},$t=0,xr=Gt.length;$t<xr;$t++){var kr=Gt[$t];k[kr]||(k[kr]=Tt(kr))}};We();var Le=function(Tt){lt[le]&&console.info("Redefining LocalForage driver: "+le),lt[le]=k,or[le]=Tt,J()};"_support"in k?k._support&&typeof k._support=="function"?k._support().then(Le,se):Le(!!k._support):Le(!0)}catch(et){se(et)}});return y(j,C,B),j},v.prototype.driver=function(){return this._driver||null},v.prototype.getDriver=function(k,C,B){var j=lt[k]?d.resolve(lt[k]):d.reject(new Error("Driver not found."));return y(j,C,B),j},v.prototype.getSerializer=function(k){var C=d.resolve(xt);return y(C,k),C},v.prototype.ready=function(k){var C=this,B=C._driverSet.then(function(){return C._ready===null&&(C._ready=C._initDriver()),C._ready});return y(B,k,k),B},v.prototype.setDriver=function(k,C,B){var j=this;br(k)||(k=[k]);var J=this._getSupportedDrivers(k);function se(){j._config.driver=j.driver()}function le(we){return j._extend(we),se(),j._ready=j._initStorage(j._config),j._ready}function he(we){return function(){var De=0;function Ie(){for(;De<we.length;){var Ne=we[De];return De++,j._dbInfo=null,j._ready=null,j.getDriver(Ne).then(le).catch(Ie)}se();var We=new Error("No available storage method found.");return j._driverSet=d.reject(We),j._driverSet}return Ie()}}var pe=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=pe.then(function(){var we=J[0];return j._dbInfo=null,j._ready=null,j.getDriver(we).then(function(De){j._driver=De._driver,se(),j._wrapLibraryMethodsWithReady(),j._initDriver=he(J)})}).catch(function(){se();var we=new Error("No available storage method found.");return j._driverSet=d.reject(we),j._driverSet}),y(this._driverSet,C,B),this._driverSet},v.prototype.supports=function(k){return!!or[k]},v.prototype._extend=function(k){cr(this,k)},v.prototype._getSupportedDrivers=function(k){for(var C=[],B=0,j=k.length;B<j;B++){var J=k[B];this.supports(J)&&C.push(J)}return C},v.prototype._wrapLibraryMethodsWithReady=function(){for(var k=0,C=Er.length;k<C;k++)Gr(this,Er[k])},v.prototype.createInstance=function(k){return new v(k)},v}(),Sr=new Ht;n.exports=Sr},{3:3}]},{},[4])(4)})}),Wc=In(function(r,e){/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t){r.exports=t()})(function(){return function t(n,i,s){function a(l,g){if(!i[l]){if(!n[l]){var d=typeof jt=="function"&&jt;if(!g&&d)return d(l,!0);if(o)return o(l,!0);var _=new Error("Cannot find module '"+l+"'");throw _.code="MODULE_NOT_FOUND",_}var y=i[l]={exports:{}};n[l][0].call(y.exports,function(S){var w=n[l][1][S];return a(w||S)},y,y.exports,t,n,i,s)}return i[l].exports}for(var o=typeof jt=="function"&&jt,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(t,n,i){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l,g,d,_,y,S,w,P=[],E=0,T=u.length,N=T,L=s.getTypeOf(u)!=="string";E<u.length;)N=T-E,d=L?(l=u[E++],g=E<T?u[E++]:0,E<T?u[E++]:0):(l=u.charCodeAt(E++),g=E<T?u.charCodeAt(E++):0,E<T?u.charCodeAt(E++):0),_=l>>2,y=(3&l)<<4|g>>4,S=1<N?(15&g)<<2|d>>6:64,w=2<N?63&d:64,P.push(o.charAt(_)+o.charAt(y)+o.charAt(S)+o.charAt(w));return P.join("")},i.decode=function(u){var l,g,d,_,y,S,w=0,P=0,E="data:";if(u.substr(0,E.length)===E)throw new Error("Invalid base64 input, it looks like a data url.");var T,N=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===o.charAt(64)&&N--,u.charAt(u.length-2)===o.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=a.uint8array?new Uint8Array(0|N):new Array(0|N);w<u.length;)l=o.indexOf(u.charAt(w++))<<2|(_=o.indexOf(u.charAt(w++)))>>4,g=(15&_)<<4|(y=o.indexOf(u.charAt(w++)))>>2,d=(3&y)<<6|(S=o.indexOf(u.charAt(w++))),T[P++]=l,y!==64&&(T[P++]=g),S!==64&&(T[P++]=d);return T}},{"./support":30,"./utils":32}],2:[function(t,n,i){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(g,d,_,y,S){this.compressedSize=g,this.uncompressedSize=d,this.crc32=_,this.compression=y,this.compressedContent=S}l.prototype={getContentWorker:function(){var g=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),d=this;return g.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(g,d,_){return g.pipe(new o).pipe(new u("uncompressedSize")).pipe(d.compressWorker(_)).pipe(new u("compressedSize")).withStreamInfo("compression",d)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var s=t("./utils"),a=function(){for(var o,u=[],l=0;l<256;l++){o=l;for(var g=0;g<8;g++)o=1&o?3988292384^o>>>1:o>>>1;u[l]=o}return u}();n.exports=function(o,u){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(l,g,d,_){var y=a,S=_+d;l^=-1;for(var w=_;w<S;w++)l=l>>>8^y[255&(l^g[w])];return-1^l}(0|u,o,o.length,0):function(l,g,d,_){var y=a,S=_+d;l^=-1;for(var w=_;w<S;w++)l=l>>>8^y[255&(l^g.charCodeAt(w))];return-1^l}(0|u,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),u=t("./stream/GenericWorker"),l=s?"uint8array":"array";function g(d,_){u.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=_,this.meta={}}i.magic="\b\0",o.inherits(g,u),g.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,d.data),!1)},g.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(_){d.push({data:_,meta:d.meta})}},i.compressWorker=function(d){return new g("Deflate",d)},i.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function s(y,S){var w,P="";for(w=0;w<S;w++)P+=String.fromCharCode(255&y),y>>>=8;return P}function a(y,S,w,P,E,T){var N,L,D=y.file,H=y.compression,z=T!==l.utf8encode,V=o.transformTo("string",T(D.name)),G=o.transformTo("string",l.utf8encode(D.name)),oe=D.comment,ve=o.transformTo("string",T(oe)),A=o.transformTo("string",l.utf8encode(oe)),W=G.length!==D.name.length,p=A.length!==oe.length,Q="",xe="",ee="",Se=D.dir,ce=D.date,ue={crc32:0,compressedSize:0,uncompressedSize:0};S&&!w||(ue.crc32=y.crc32,ue.compressedSize=y.compressedSize,ue.uncompressedSize=y.uncompressedSize);var F=0;S&&(F|=8),z||!W&&!p||(F|=2048);var q=0,Ee=0;Se&&(q|=16),E==="UNIX"?(Ee=798,q|=function(me,Me){var Ge=me;return me||(Ge=Me?16893:33204),(65535&Ge)<<16}(D.unixPermissions,Se)):(Ee=20,q|=function(me){return 63&(me||0)}(D.dosPermissions)),N=ce.getUTCHours(),N<<=6,N|=ce.getUTCMinutes(),N<<=5,N|=ce.getUTCSeconds()/2,L=ce.getUTCFullYear()-1980,L<<=4,L|=ce.getUTCMonth()+1,L<<=5,L|=ce.getUTCDate(),W&&(xe=s(1,1)+s(g(V),4)+G,Q+="up"+s(xe.length,2)+xe),p&&(ee=s(1,1)+s(g(ve),4)+A,Q+="uc"+s(ee.length,2)+ee);var ge="";return ge+=`
\0`,ge+=s(F,2),ge+=H.magic,ge+=s(N,2),ge+=s(L,2),ge+=s(ue.crc32,4),ge+=s(ue.compressedSize,4),ge+=s(ue.uncompressedSize,4),ge+=s(V.length,2),ge+=s(Q.length,2),{fileRecord:d.LOCAL_FILE_HEADER+ge+V+Q,dirRecord:d.CENTRAL_FILE_HEADER+s(Ee,2)+ge+s(ve.length,2)+"\0\0\0\0"+s(q,4)+s(P,4)+V+Q+ve}}var o=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),g=t("../crc32"),d=t("../signature");function _(y,S,w,P){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=w,this.encodeFileName=P,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(_,u),_.prototype.push=function(y){var S=y.meta.percent||0,w=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,u.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:w?(S+100*(w-P-1))/w:100}}))},_.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var S=this.streamFiles&&!y.file.dir;if(S){var w=a(y,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(y){this.accumulate=!1;var S=this.streamFiles&&!y.file.dir,w=a(y,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),S)this.push({data:function(P){return d.DATA_DESCRIPTOR+s(P.crc32,4)+s(P.compressedSize,4)+s(P.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var y=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var w=this.bytesWritten-y,P=function(E,T,N,L,D){var H=o.transformTo("string",D(L));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(E,2)+s(E,2)+s(T,4)+s(N,4)+s(H.length,2)+H}(this.dirRecords.length,w,y,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(y){this._sources.push(y);var S=this;return y.on("data",function(w){S.processChunk(w)}),y.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),y.on("error",function(w){S.error(w)}),this},_.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(y){var S=this._sources;if(!u.prototype.error.call(this,y))return!1;for(var w=0;w<S.length;w++)try{S[w].error(y)}catch{}return!0},_.prototype.lock=function(){u.prototype.lock.call(this);for(var y=this._sources,S=0;S<y.length;S++)y[S].lock()},n.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var s=t("../compressions"),a=t("./ZipFileWorker");i.generateWorker=function(o,u,l){var g=new a(u.streamFiles,l,u.platform,u.encodeFileName),d=0;try{o.forEach(function(_,y){d++;var S=function(T,N){var L=T||N,D=s[L];if(!D)throw new Error(L+" is not a valid compression method !");return D}(y.options.compression,u.compression),w=y.options.compressionOptions||u.compressionOptions||{},P=y.dir,E=y.date;y._compressWorker(S,w).withStreamInfo("file",{name:_,dir:P,date:E,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(g)}),g.entriesCount=d}catch(_){g.error(_)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var s=t("./utils"),a=t("./external"),o=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),g=t("./nodejsUtils");function d(_){return new a.Promise(function(y,S){var w=_.decompressed.getContentWorker().pipe(new l);w.on("error",function(P){S(P)}).on("end",function(){w.streamInfo.crc32!==_.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(_,y){var S=this;return y=s.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),g.isNode&&g.isStream(_)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",_,!0,y.optimizedBinaryString,y.base64).then(function(w){var P=new u(y);return P.load(w),P}).then(function(w){var P=[a.Promise.resolve(w)],E=w.files;if(y.checkCRC32)for(var T=0;T<E.length;T++)P.push(d(E[T]));return a.Promise.all(P)}).then(function(w){for(var P=w.shift(),E=P.files,T=0;T<E.length;T++){var N=E[T],L=N.fileNameStr,D=s.resolve(N.fileNameStr);S.file(D,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:y.createFolders}),N.dir||(S.file(D).unsafeOriginalName=L)}return P.zipComment.length&&(S.comment=P.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var s=t("../utils"),a=t("../stream/GenericWorker");function o(u,l){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(g){l.push({data:g,meta:{percent:0}})}).on("error",function(g){l.isPaused?this.generatedError=g:l.error(g)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var s=t("readable-stream").Readable;function a(o,u,l){s.call(this,u),this._helper=o;var g=this;o.on("data",function(d,_){g.push(d)||g._helper.pause(),l&&l(_)}).on("error",function(d){g.emit("error",d)}).on("end",function(){g.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof ie<"u",newBufferFrom:function(s,a){if(ie.from&&ie.from!==Uint8Array.from)return ie.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new ie(s,a)},allocBuffer:function(s){if(ie.alloc)return ie.alloc(s);var a=new ie(s);return a.fill(0),a},isBuffer:function(s){return ie.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,i){function s(D,H,z){var V,G=o.getTypeOf(H),oe=o.extend(z||{},g);oe.date=oe.date||new Date,oe.compression!==null&&(oe.compression=oe.compression.toUpperCase()),typeof oe.unixPermissions=="string"&&(oe.unixPermissions=parseInt(oe.unixPermissions,8)),oe.unixPermissions&&16384&oe.unixPermissions&&(oe.dir=!0),oe.dosPermissions&&16&oe.dosPermissions&&(oe.dir=!0),oe.dir&&(D=E(D)),oe.createFolders&&(V=P(D))&&T.call(this,V,!0);var ve=G==="string"&&oe.binary===!1&&oe.base64===!1;z&&z.binary!==void 0||(oe.binary=!ve),(H instanceof d&&H.uncompressedSize===0||oe.dir||!H||H.length===0)&&(oe.base64=!1,oe.binary=!0,H="",oe.compression="STORE",G="string");var A=null;A=H instanceof d||H instanceof u?H:S.isNode&&S.isStream(H)?new w(D,H):o.prepareContent(D,H,oe.binary,oe.optimizedBinaryString,oe.base64);var W=new _(D,A,oe);this.files[D]=W}var a=t("./utf8"),o=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),g=t("./defaults"),d=t("./compressedObject"),_=t("./zipObject"),y=t("./generate"),S=t("./nodejsUtils"),w=t("./nodejs/NodejsStreamInputAdapter"),P=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var H=D.lastIndexOf("/");return 0<H?D.substring(0,H):""},E=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},T=function(D,H){return H=H!==void 0?H:g.createFolders,D=E(D),this.files[D]||s.call(this,D,null,{dir:!0,createFolders:H}),this.files[D]};function N(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var H,z,V;for(H in this.files)V=this.files[H],(z=H.slice(this.root.length,H.length))&&H.slice(0,this.root.length)===this.root&&D(z,V)},filter:function(D){var H=[];return this.forEach(function(z,V){D(z,V)&&H.push(V)}),H},file:function(D,H,z){if(arguments.length!==1)return D=this.root+D,s.call(this,D,H,z),this;if(N(D)){var V=D;return this.filter(function(oe,ve){return!ve.dir&&V.test(oe)})}var G=this.files[this.root+D];return G&&!G.dir?G:null},folder:function(D){if(!D)return this;if(N(D))return this.filter(function(G,oe){return oe.dir&&D.test(G)});var H=this.root+D,z=T.call(this,H),V=this.clone();return V.root=z.name,V},remove:function(D){D=this.root+D;var H=this.files[D];if(H||(D.slice(-1)!=="/"&&(D+="/"),H=this.files[D]),H&&!H.dir)delete this.files[D];else for(var z=this.filter(function(G,oe){return oe.name.slice(0,D.length)===D}),V=0;V<z.length;V++)delete this.files[z[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var H,z={};try{if((z=o.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");o.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var V=z.comment||this.comment||"";H=y.generateWorker(this,z,V)}catch(G){(H=new u("error")).error(G)}return new l(H,z.type||"string",z.mimeType)},generateAsync:function(D,H){return this.generateInternalStream(D).accumulate(H)},generateNodeStream:function(D,H){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(H)}};n.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o);for(var u=0;u<this.data.length;u++)o[u]=255&o[u]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var u=o.charCodeAt(0),l=o.charCodeAt(1),g=o.charCodeAt(2),d=o.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===u&&this.data[_+1]===l&&this.data[_+2]===g&&this.data[_+3]===d)return _-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var u=o.charCodeAt(0),l=o.charCodeAt(1),g=o.charCodeAt(2),d=o.charCodeAt(3),_=this.readData(4);return u===_[0]&&l===_[1]&&g===_[2]&&d===_[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u,l=0;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,i){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var u=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,u},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),g=t("./Uint8ArrayReader");n.exports=function(d){var _=s.getTypeOf(d);return s.checkSupport(_),_!=="string"||a.uint8array?_==="nodebuffer"?new l(d):a.uint8array?new g(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new u(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var s=t("./GenericWorker"),a=t("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}a.prototype.processChunk.call(this,u)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(u){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(g){l.dataIsReady=!0,l.data=g,l.max=g&&g.length||0,l.type=s.getTypeOf(g),l.isPaused||l._tickAndRepeat()},function(g){l.error(g)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,i){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),u=t("../base64"),l=t("../support"),g=t("../external"),d=null;if(l.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(S,w){return new g.Promise(function(P,E){var T=[],N=S._internalType,L=S._outputType,D=S._mimeType;S.on("data",function(H,z){T.push(H),w&&w(z)}).on("error",function(H){T=[],E(H)}).on("end",function(){try{var H=function(z,V,G){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",V),G);case"base64":return u.encode(V);default:return s.transformTo(z,V)}}(L,function(z,V){var G,oe=0,ve=null,A=0;for(G=0;G<V.length;G++)A+=V[G].length;switch(z){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(ve=new Uint8Array(A),G=0;G<V.length;G++)ve.set(V[G],oe),oe+=V[G].length;return ve;case"nodebuffer":return ie.concat(V);default:throw new Error("concat : unsupported type '"+z+"'")}}(N,T),D);P(H)}catch(z){E(z)}T=[]}).resume()})}function y(S,w,P){var E=w;switch(w){case"blob":case"arraybuffer":E="uint8array";break;case"base64":E="string"}try{this._internalType=E,this._outputType=w,this._mimeType=P,s.checkSupport(E),this._worker=S.pipe(new a(E)),S.lock()}catch(T){this._worker=new o("error"),this._worker.error(T)}}y.prototype={accumulate:function(S){return _(this,S)},on:function(S,w){var P=this;return S==="data"?this._worker.on(S,function(E){w.call(P,E.data,E.meta)}):this._worker.on(S,function(){s.delay(w,arguments,P)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},S)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof ie<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),g=0;g<256;g++)l[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;l[254]=l[254]=1;function d(){u.call(this,"utf-8 decode"),this.leftOver=null}function _(){u.call(this,"utf-8 encode")}i.utf8encode=function(y){return a.nodebuffer?o.newBufferFrom(y,"utf-8"):function(S){var w,P,E,T,N,L=S.length,D=0;for(T=0;T<L;T++)(64512&(P=S.charCodeAt(T)))==55296&&T+1<L&&(64512&(E=S.charCodeAt(T+1)))==56320&&(P=65536+(P-55296<<10)+(E-56320),T++),D+=P<128?1:P<2048?2:P<65536?3:4;for(w=a.uint8array?new Uint8Array(D):new Array(D),T=N=0;N<D;T++)(64512&(P=S.charCodeAt(T)))==55296&&T+1<L&&(64512&(E=S.charCodeAt(T+1)))==56320&&(P=65536+(P-55296<<10)+(E-56320),T++),P<128?w[N++]=P:(P<2048?w[N++]=192|P>>>6:(P<65536?w[N++]=224|P>>>12:(w[N++]=240|P>>>18,w[N++]=128|P>>>12&63),w[N++]=128|P>>>6&63),w[N++]=128|63&P);return w}(y)},i.utf8decode=function(y){return a.nodebuffer?s.transformTo("nodebuffer",y).toString("utf-8"):function(S){var w,P,E,T,N=S.length,L=new Array(2*N);for(w=P=0;w<N;)if((E=S[w++])<128)L[P++]=E;else if(4<(T=l[E]))L[P++]=65533,w+=T-1;else{for(E&=T===2?31:T===3?15:7;1<T&&w<N;)E=E<<6|63&S[w++],T--;1<T?L[P++]=65533:E<65536?L[P++]=E:(E-=65536,L[P++]=55296|E>>10&1023,L[P++]=56320|1023&E)}return L.length!==P&&(L.subarray?L=L.subarray(0,P):L.length=P),s.applyFromCharCode(L)}(y=s.transformTo(a.uint8array?"uint8array":"array",y))},s.inherits(d,u),d.prototype.processChunk=function(y){var S=s.transformTo(a.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var w=S;(S=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),S.set(w,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var P=function(T,N){var L;for((N=N||T.length)>T.length&&(N=T.length),L=N-1;0<=L&&(192&T[L])==128;)L--;return L<0||L===0?N:L+l[T[L]]>N?L:N}(S),E=S;P!==S.length&&(a.uint8array?(E=S.subarray(0,P),this.leftOver=S.subarray(P,S.length)):(E=S.slice(0,P),this.leftOver=S.slice(P,S.length))),this.push({data:i.utf8decode(E),meta:y.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(_,u),_.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),u=t("./external");function l(w){return w}function g(w,P){for(var E=0;E<w.length;++E)P[E]=255&w.charCodeAt(E);return P}t("setimmediate"),i.newBlob=function(w,P){i.checkSupport("blob");try{return new Blob([w],{type:P})}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return E.append(w),E.getBlob(P)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(w,P,E){var T=[],N=0,L=w.length;if(L<=E)return String.fromCharCode.apply(null,w);for(;N<L;)P==="array"||P==="nodebuffer"?T.push(String.fromCharCode.apply(null,w.slice(N,Math.min(N+E,L)))):T.push(String.fromCharCode.apply(null,w.subarray(N,Math.min(N+E,L)))),N+=E;return T.join("")},stringifyByChar:function(w){for(var P="",E=0;E<w.length;E++)P+=String.fromCharCode(w[E]);return P},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function _(w){var P=65536,E=i.getTypeOf(w),T=!0;if(E==="uint8array"?T=d.applyCanBeUsed.uint8array:E==="nodebuffer"&&(T=d.applyCanBeUsed.nodebuffer),T)for(;1<P;)try{return d.stringifyByChunk(w,E,P)}catch{P=Math.floor(P/2)}return d.stringifyByChar(w)}function y(w,P){for(var E=0;E<w.length;E++)P[E]=w[E];return P}i.applyFromCharCode=_;var S={};S.string={string:l,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return S.string.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:function(w){return g(w,o.allocBuffer(w.length))}},S.array={string:_,array:l,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(w)}},S.arraybuffer={string:function(w){return _(new Uint8Array(w))},array:function(w){return y(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:l,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return o.newBufferFrom(new Uint8Array(w))}},S.uint8array={string:_,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:l,nodebuffer:function(w){return o.newBufferFrom(w)}},S.nodebuffer={string:_,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return S.nodebuffer.uint8array(w).buffer},uint8array:function(w){return y(w,new Uint8Array(w.length))},nodebuffer:l},i.transformTo=function(w,P){if(P=P||"",!w)return P;i.checkSupport(w);var E=i.getTypeOf(P);return S[E][w](P)},i.resolve=function(w){for(var P=w.split("/"),E=[],T=0;T<P.length;T++){var N=P[T];N==="."||N===""&&T!==0&&T!==P.length-1||(N===".."?E.pop():E.push(N))}return E.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var P,E,T="";for(E=0;E<(w||"").length;E++)T+="\\x"+((P=w.charCodeAt(E))<16?"0":"")+P.toString(16).toUpperCase();return T},i.delay=function(w,P,E){setImmediate(function(){w.apply(E||null,P||[])})},i.inherits=function(w,P){function E(){}E.prototype=P.prototype,w.prototype=new E},i.extend=function(){var w,P,E={};for(w=0;w<arguments.length;w++)for(P in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],P)&&E[P]===void 0&&(E[P]=arguments[w][P]);return E},i.prepareContent=function(w,P,E,T,N){return u.Promise.resolve(P).then(function(L){return s.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new u.Promise(function(D,H){var z=new FileReader;z.onload=function(V){D(V.target.result)},z.onerror=function(V){H(V.target.error)},z.readAsArrayBuffer(L)}):L}).then(function(L){var D=i.getTypeOf(L);return D?(D==="arraybuffer"?L=i.transformTo("uint8array",L):D==="string"&&(N?L=a.decode(L):E&&T!==!0&&(L=function(H){return g(H,s.uint8array?new Uint8Array(H.length):new Array(H.length))}(L))),L):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),u=t("./zipEntry"),l=t("./support");function g(d){this.files=[],this.loadOptions=d}g.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(_)+", expected "+a.pretty(d)+")")}},isSignature:function(d,_){var y=this.reader.index;this.reader.setIndex(d);var S=this.reader.readString(4)===_;return this.reader.setIndex(y),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),_=l.uint8array?"uint8array":"array",y=a.transformTo(_,d);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,_,y,S=this.zip64EndOfCentralSize-44;0<S;)d=this.reader.readInt(2),_=this.reader.readInt(4),y=this.reader.readData(_),this.zip64ExtensibleData[d]={id:d,length:_,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,_;for(d=0;d<this.files.length;d++)_=this.files[d],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var _=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var S=_-y;if(0<S)this.isSignature(_,o.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),g=t("./compressions"),d=t("./support");function _(y,S){this.options=y,this.loadOptions=S}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var S,w;if(y.skip(22),this.fileNameLength=y.readInt(2),w=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=function(P){for(var E in g)if(Object.prototype.hasOwnProperty.call(g,E)&&g[E].magic===P)return g[E];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,S,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var S=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(S),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var S,w,P,E=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<E;)S=y.readInt(2),w=y.readInt(2),P=y.readData(w),this.extraFields[S]={id:S,length:w,value:P};y.setIndex(E)},handleUTF8:function(){var y=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var w=a.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var P=this.findExtraFieldUnicodeComment();if(P!==null)this.fileCommentStr=P;else{var E=a.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(E)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var S=s(y.value);return S.readInt(1)!==1||u(this.fileName)!==S.readInt(4)?null:l.utf8decode(S.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var S=s(y.value);return S.readInt(1)!==1||u(this.fileComment)!==S.readInt(4)?null:l.utf8decode(S.readData(y.length-5))}return null}},n.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function s(S,w,P){this.name=S,this.dir=P.dir,this.date=P.date,this.comment=P.comment,this.unixPermissions=P.unixPermissions,this.dosPermissions=P.dosPermissions,this._data=w,this._dataBinary=P.binary,this.options={compression:P.compression,compressionOptions:P.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),g=t("./stream/GenericWorker");s.prototype={internalStream:function(S){var w=null,P="string";try{if(!S)throw new Error("No output type specified.");var E=(P=S.toLowerCase())==="string"||P==="text";P!=="binarystring"&&P!=="text"||(P="string"),w=this._decompressWorker();var T=!this._dataBinary;T&&!E&&(w=w.pipe(new u.Utf8EncodeWorker)),!T&&E&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(N){(w=new g("error")).error(N)}return new a(w,P,"")},async:function(S,w){return this.internalStream(S).accumulate(w)},nodeStream:function(S,w){return this.internalStream(S||"nodebuffer").toNodejsStream(w)},_compressWorker:function(S,w){if(this._data instanceof l&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var P=this._decompressWorker();return this._dataBinary||(P=P.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(P,S,w)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof g?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<d.length;y++)s.prototype[d[y]]=_;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(s){var a,o,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var l=0,g=new u(S),d=s.document.createTextNode("");g.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){S(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(S,0)};else{var _=new s.MessageChannel;_.port1.onmessage=S,a=function(){_.port2.postMessage(0)}}var y=[];function S(){var w,P;o=!0;for(var E=y.length;E;){for(P=y,y=[],w=-1;++w<E;)P[w]();E=y.length}o=!1}n.exports=function(w){y.push(w)!==1||o||a()}}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var s=t("immediate");function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],g=["PENDING"];function d(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,E!==a&&w(this,E)}function _(E,T,N){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function y(E,T,N){s(function(){var L;try{L=T(N)}catch(D){return o.reject(E,D)}L===E?o.reject(E,new TypeError("Cannot resolve promise with itself")):o.resolve(E,L)})}function S(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function w(E,T){var N=!1;function L(z){N||(N=!0,o.reject(E,z))}function D(z){N||(N=!0,o.resolve(E,z))}var H=P(function(){T(D,L)});H.status==="error"&&L(H.value)}function P(E,T){var N={};try{N.value=E(T),N.status="success"}catch(L){N.status="error",N.value=L}return N}(n.exports=d).prototype.finally=function(E){if(typeof E!="function")return this;var T=this.constructor;return this.then(function(N){return T.resolve(E()).then(function(){return N})},function(N){return T.resolve(E()).then(function(){throw N})})},d.prototype.catch=function(E){return this.then(null,E)},d.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var N=new this.constructor(a);return this.state!==g?y(N,this.state===l?E:T,this.outcome):this.queue.push(new _(N,E,T)),N},_.prototype.callFulfilled=function(E){o.resolve(this.promise,E)},_.prototype.otherCallFulfilled=function(E){y(this.promise,this.onFulfilled,E)},_.prototype.callRejected=function(E){o.reject(this.promise,E)},_.prototype.otherCallRejected=function(E){y(this.promise,this.onRejected,E)},o.resolve=function(E,T){var N=P(S,T);if(N.status==="error")return o.reject(E,N.value);var L=N.value;if(L)w(E,L);else{E.state=l,E.outcome=T;for(var D=-1,H=E.queue.length;++D<H;)E.queue[D].callFulfilled(T)}return E},o.reject=function(E,T){E.state=u,E.outcome=T;for(var N=-1,L=E.queue.length;++N<L;)E.queue[N].callRejected(T);return E},d.resolve=function(E){return E instanceof this?E:o.resolve(new this(a),E)},d.reject=function(E){var T=new this(a);return o.reject(T,E)},d.all=function(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=E.length,L=!1;if(!N)return this.resolve([]);for(var D=new Array(N),H=0,z=-1,V=new this(a);++z<N;)G(E[z],z);return V;function G(oe,ve){T.resolve(oe).then(function(A){D[ve]=A,++H!==N||L||(L=!0,o.resolve(V,D))},function(A){L||(L=!0,o.reject(V,A))})}},d.race=function(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=E.length,L=!1;if(!N)return this.resolve([]);for(var D=-1,H=new this(a);++D<N;)z=E[D],T.resolve(z).then(function(V){L||(L=!0,o.resolve(H,V))},function(V){L||(L=!0,o.reject(H,V))});var z;return H}},{immediate:36}],38:[function(t,n,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),g=Object.prototype.toString,d=0,_=-1,y=0,S=8;function w(E){if(!(this instanceof w))return new w(E);this.options=a.assign({level:_,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},E||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var N=s.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(N!==d)throw new Error(u[N]);if(T.header&&s.deflateSetHeader(this.strm,T.header),T.dictionary){var L;if(L=typeof T.dictionary=="string"?o.string2buf(T.dictionary):g.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(N=s.deflateSetDictionary(this.strm,L))!==d)throw new Error(u[N]);this._dict_set=!0}}function P(E,T){var N=new w(T);if(N.push(E,!0),N.err)throw N.msg||u[N.err];return N.result}w.prototype.push=function(E,T){var N,L,D=this.strm,H=this.options.chunkSize;if(this.ended)return!1;L=T===~~T?T:T===!0?4:0,typeof E=="string"?D.input=o.string2buf(E):g.call(E)==="[object ArrayBuffer]"?D.input=new Uint8Array(E):D.input=E,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(H),D.next_out=0,D.avail_out=H),(N=s.deflate(D,L))!==1&&N!==d)return this.onEnd(N),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(D.output,D.next_out))):this.onData(a.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&N!==1);return L===4?(N=s.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===d):L!==2||(this.onEnd(d),!(D.avail_out=0))},w.prototype.onData=function(E){this.chunks.push(E)},w.prototype.onEnd=function(E){E===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},i.Deflate=w,i.deflate=P,i.deflateRaw=function(E,T){return(T=T||{}).raw=!0,P(E,T)},i.gzip=function(E,T){return(T=T||{}).gzip=!0,P(E,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),g=t("./zlib/zstream"),d=t("./zlib/gzheader"),_=Object.prototype.toString;function y(w){if(!(this instanceof y))return new y(w);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},w||{});var P=this.options;P.raw&&0<=P.windowBits&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),!(0<=P.windowBits&&P.windowBits<16)||w&&w.windowBits||(P.windowBits+=32),15<P.windowBits&&P.windowBits<48&&!(15&P.windowBits)&&(P.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var E=s.inflateInit2(this.strm,P.windowBits);if(E!==u.Z_OK)throw new Error(l[E]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function S(w,P){var E=new y(P);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}y.prototype.push=function(w,P){var E,T,N,L,D,H,z=this.strm,V=this.options.chunkSize,G=this.options.dictionary,oe=!1;if(this.ended)return!1;T=P===~~P?P:P===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?z.input=o.binstring2buf(w):_.call(w)==="[object ArrayBuffer]"?z.input=new Uint8Array(w):z.input=w,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new a.Buf8(V),z.next_out=0,z.avail_out=V),(E=s.inflate(z,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&G&&(H=typeof G=="string"?o.string2buf(G):_.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,E=s.inflateSetDictionary(this.strm,H)),E===u.Z_BUF_ERROR&&oe===!0&&(E=u.Z_OK,oe=!1),E!==u.Z_STREAM_END&&E!==u.Z_OK)return this.onEnd(E),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&E!==u.Z_STREAM_END&&(z.avail_in!==0||T!==u.Z_FINISH&&T!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=o.utf8border(z.output,z.next_out),L=z.next_out-N,D=o.buf2string(z.output,N),z.next_out=L,z.avail_out=V-L,L&&a.arraySet(z.output,z.output,N,L,0),this.onData(D)):this.onData(a.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(oe=!0)}while((0<z.avail_in||z.avail_out===0)&&E!==u.Z_STREAM_END);return E===u.Z_STREAM_END&&(T=u.Z_FINISH),T===u.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===u.Z_OK):T!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(z.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=y,i.inflate=S,i.inflateRaw=function(w,P){return(P=P||{}).raw=!0,S(w,P)},i.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var g=l.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var d in g)g.hasOwnProperty(d)&&(u[d]=g[d])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var a={arraySet:function(u,l,g,d,_){if(l.subarray&&u.subarray)u.set(l.subarray(g,g+d),_);else for(var y=0;y<d;y++)u[_+y]=l[g+y]},flattenChunks:function(u){var l,g,d,_,y,S;for(l=d=0,g=u.length;l<g;l++)d+=u[l].length;for(S=new Uint8Array(d),l=_=0,g=u.length;l<g;l++)y=u[l],S.set(y,_),_+=y.length;return S}},o={arraySet:function(u,l,g,d,_){for(var y=0;y<d;y++)u[_+y]=l[g+y]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(t,n,i){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function g(d,_){if(_<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,_));for(var y="",S=0;S<_;S++)y+=String.fromCharCode(d[S]);return y}u[254]=u[254]=1,i.string2buf=function(d){var _,y,S,w,P,E=d.length,T=0;for(w=0;w<E;w++)(64512&(y=d.charCodeAt(w)))==55296&&w+1<E&&(64512&(S=d.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),w++),T+=y<128?1:y<2048?2:y<65536?3:4;for(_=new s.Buf8(T),w=P=0;P<T;w++)(64512&(y=d.charCodeAt(w)))==55296&&w+1<E&&(64512&(S=d.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),w++),y<128?_[P++]=y:(y<2048?_[P++]=192|y>>>6:(y<65536?_[P++]=224|y>>>12:(_[P++]=240|y>>>18,_[P++]=128|y>>>12&63),_[P++]=128|y>>>6&63),_[P++]=128|63&y);return _},i.buf2binstring=function(d){return g(d,d.length)},i.binstring2buf=function(d){for(var _=new s.Buf8(d.length),y=0,S=_.length;y<S;y++)_[y]=d.charCodeAt(y);return _},i.buf2string=function(d,_){var y,S,w,P,E=_||d.length,T=new Array(2*E);for(y=S=0;y<E;)if((w=d[y++])<128)T[S++]=w;else if(4<(P=u[w]))T[S++]=65533,y+=P-1;else{for(w&=P===2?31:P===3?15:7;1<P&&y<E;)w=w<<6|63&d[y++],P--;1<P?T[S++]=65533:w<65536?T[S++]=w:(w-=65536,T[S++]=55296|w>>10&1023,T[S++]=56320|1023&w)}return g(T,S)},i.utf8border=function(d,_){var y;for((_=_||d.length)>d.length&&(_=d.length),y=_-1;0<=y&&(192&d[y])==128;)y--;return y<0||y===0?_:y+u[d[y]]>_?y:_}},{"./common":41}],43:[function(t,n,i){n.exports=function(s,a,o,u){for(var l=65535&s|0,g=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;g=g+(l=l+a[u++]|0)|0,--d;);l%=65521,g%=65521}return l|g<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var s=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();n.exports=function(a,o,u,l){var g=s,d=l+u;a^=-1;for(var _=l;_<d;_++)a=a>>>8^g[255&(a^o[_])];return-1^a}},{}],46:[function(t,n,i){var s,a=t("../utils/common"),o=t("./trees"),u=t("./adler32"),l=t("./crc32"),g=t("./messages"),d=0,_=4,y=0,S=-2,w=-1,P=4,E=2,T=8,N=9,L=286,D=30,H=19,z=2*L+1,V=15,G=3,oe=258,ve=oe+G+1,A=42,W=113,p=1,Q=2,xe=3,ee=4;function Se(h,K){return h.msg=g[K],K}function ce(h){return(h<<1)-(4<h?9:0)}function ue(h){for(var K=h.length;0<=--K;)h[K]=0}function F(h){var K=h.state,Y=K.pending;Y>h.avail_out&&(Y=h.avail_out),Y!==0&&(a.arraySet(h.output,K.pending_buf,K.pending_out,Y,h.next_out),h.next_out+=Y,K.pending_out+=Y,h.total_out+=Y,h.avail_out-=Y,K.pending-=Y,K.pending===0&&(K.pending_out=0))}function q(h,K){o._tr_flush_block(h,0<=h.block_start?h.block_start:-1,h.strstart-h.block_start,K),h.block_start=h.strstart,F(h.strm)}function Ee(h,K){h.pending_buf[h.pending++]=K}function ge(h,K){h.pending_buf[h.pending++]=K>>>8&255,h.pending_buf[h.pending++]=255&K}function me(h,K){var Y,$,b=h.max_chain_length,I=h.strstart,ne=h.prev_length,re=h.nice_match,M=h.strstart>h.w_size-ve?h.strstart-(h.w_size-ve):0,fe=h.window,ye=h.w_mask,de=h.prev,_e=h.strstart+oe,Ce=fe[I+ne-1],$e=fe[I+ne];h.prev_length>=h.good_match&&(b>>=2),re>h.lookahead&&(re=h.lookahead);do if(fe[(Y=K)+ne]===$e&&fe[Y+ne-1]===Ce&&fe[Y]===fe[I]&&fe[++Y]===fe[I+1]){I+=2,Y++;do;while(fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&fe[++I]===fe[++Y]&&I<_e);if($=oe-(_e-I),I=_e-oe,ne<$){if(h.match_start=K,re<=(ne=$))break;Ce=fe[I+ne-1],$e=fe[I+ne]}}while((K=de[K&ye])>M&&--b!=0);return ne<=h.lookahead?ne:h.lookahead}function Me(h){var K,Y,$,b,I,ne,re,M,fe,ye,de=h.w_size;do{if(b=h.window_size-h.lookahead-h.strstart,h.strstart>=de+(de-ve)){for(a.arraySet(h.window,h.window,de,de,0),h.match_start-=de,h.strstart-=de,h.block_start-=de,K=Y=h.hash_size;$=h.head[--K],h.head[K]=de<=$?$-de:0,--Y;);for(K=Y=de;$=h.prev[--K],h.prev[K]=de<=$?$-de:0,--Y;);b+=de}if(h.strm.avail_in===0)break;if(ne=h.strm,re=h.window,M=h.strstart+h.lookahead,fe=b,ye=void 0,ye=ne.avail_in,fe<ye&&(ye=fe),Y=ye===0?0:(ne.avail_in-=ye,a.arraySet(re,ne.input,ne.next_in,ye,M),ne.state.wrap===1?ne.adler=u(ne.adler,re,ye,M):ne.state.wrap===2&&(ne.adler=l(ne.adler,re,ye,M)),ne.next_in+=ye,ne.total_in+=ye,ye),h.lookahead+=Y,h.lookahead+h.insert>=G)for(I=h.strstart-h.insert,h.ins_h=h.window[I],h.ins_h=(h.ins_h<<h.hash_shift^h.window[I+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[I+G-1])&h.hash_mask,h.prev[I&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=I,I++,h.insert--,!(h.lookahead+h.insert<G)););}while(h.lookahead<ve&&h.strm.avail_in!==0)}function Ge(h,K){for(var Y,$;;){if(h.lookahead<ve){if(Me(h),h.lookahead<ve&&K===d)return p;if(h.lookahead===0)break}if(Y=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,Y=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),Y!==0&&h.strstart-Y<=h.w_size-ve&&(h.match_length=me(h,Y)),h.match_length>=G)if($=o._tr_tally(h,h.strstart-h.match_start,h.match_length-G),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=G){for(h.match_length--;h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,Y=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart,--h.match_length!=0;);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else $=o._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if($&&(q(h,!1),h.strm.avail_out===0))return p}return h.insert=h.strstart<G-1?h.strstart:G-1,K===_?(q(h,!0),h.strm.avail_out===0?xe:ee):h.last_lit&&(q(h,!1),h.strm.avail_out===0)?p:Q}function Ae(h,K){for(var Y,$,b;;){if(h.lookahead<ve){if(Me(h),h.lookahead<ve&&K===d)return p;if(h.lookahead===0)break}if(Y=0,h.lookahead>=G&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,Y=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=G-1,Y!==0&&h.prev_length<h.max_lazy_match&&h.strstart-Y<=h.w_size-ve&&(h.match_length=me(h,Y),h.match_length<=5&&(h.strategy===1||h.match_length===G&&4096<h.strstart-h.match_start)&&(h.match_length=G-1)),h.prev_length>=G&&h.match_length<=h.prev_length){for(b=h.strstart+h.lookahead-G,$=o._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-G),h.lookahead-=h.prev_length-1,h.prev_length-=2;++h.strstart<=b&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+G-1])&h.hash_mask,Y=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),--h.prev_length!=0;);if(h.match_available=0,h.match_length=G-1,h.strstart++,$&&(q(h,!1),h.strm.avail_out===0))return p}else if(h.match_available){if(($=o._tr_tally(h,0,h.window[h.strstart-1]))&&q(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return p}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&($=o._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<G-1?h.strstart:G-1,K===_?(q(h,!0),h.strm.avail_out===0?xe:ee):h.last_lit&&(q(h,!1),h.strm.avail_out===0)?p:Q}function Re(h,K,Y,$,b){this.good_length=h,this.max_lazy=K,this.nice_length=Y,this.max_chain=$,this.func=b}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*z),this.dyn_dtree=new a.Buf16(2*(2*D+1)),this.bl_tree=new a.Buf16(2*(2*H+1)),ue(this.dyn_ltree),ue(this.dyn_dtree),ue(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(V+1),this.heap=new a.Buf16(2*L+1),ue(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*L+1),ue(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(h){var K;return h&&h.state?(h.total_in=h.total_out=0,h.data_type=E,(K=h.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?A:W,h.adler=K.wrap===2?0:1,K.last_flush=d,o._tr_init(K),y):Se(h,S)}function He(h){var K=ze(h);return K===y&&function(Y){Y.window_size=2*Y.w_size,ue(Y.head),Y.max_lazy_match=s[Y.level].max_lazy,Y.good_match=s[Y.level].good_length,Y.nice_match=s[Y.level].nice_length,Y.max_chain_length=s[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=G-1,Y.match_available=0,Y.ins_h=0}(h.state),K}function Je(h,K,Y,$,b,I){if(!h)return S;var ne=1;if(K===w&&(K=6),$<0?(ne=0,$=-$):15<$&&(ne=2,$-=16),b<1||N<b||Y!==T||$<8||15<$||K<0||9<K||I<0||P<I)return Se(h,S);$===8&&($=9);var re=new Ue;return(h.state=re).strm=h,re.wrap=ne,re.gzhead=null,re.w_bits=$,re.w_size=1<<re.w_bits,re.w_mask=re.w_size-1,re.hash_bits=b+7,re.hash_size=1<<re.hash_bits,re.hash_mask=re.hash_size-1,re.hash_shift=~~((re.hash_bits+G-1)/G),re.window=new a.Buf8(2*re.w_size),re.head=new a.Buf16(re.hash_size),re.prev=new a.Buf16(re.w_size),re.lit_bufsize=1<<b+6,re.pending_buf_size=4*re.lit_bufsize,re.pending_buf=new a.Buf8(re.pending_buf_size),re.d_buf=1*re.lit_bufsize,re.l_buf=3*re.lit_bufsize,re.level=K,re.strategy=I,re.method=Y,He(h)}s=[new Re(0,0,0,0,function(h,K){var Y=65535;for(Y>h.pending_buf_size-5&&(Y=h.pending_buf_size-5);;){if(h.lookahead<=1){if(Me(h),h.lookahead===0&&K===d)return p;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var $=h.block_start+Y;if((h.strstart===0||h.strstart>=$)&&(h.lookahead=h.strstart-$,h.strstart=$,q(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-ve&&(q(h,!1),h.strm.avail_out===0))return p}return h.insert=0,K===_?(q(h,!0),h.strm.avail_out===0?xe:ee):(h.strstart>h.block_start&&(q(h,!1),h.strm.avail_out),p)}),new Re(4,4,8,4,Ge),new Re(4,5,16,8,Ge),new Re(4,6,32,32,Ge),new Re(4,4,16,16,Ae),new Re(8,16,32,32,Ae),new Re(8,16,128,128,Ae),new Re(8,32,128,256,Ae),new Re(32,128,258,1024,Ae),new Re(32,258,258,4096,Ae)],i.deflateInit=function(h,K){return Je(h,K,T,15,8,0)},i.deflateInit2=Je,i.deflateReset=He,i.deflateResetKeep=ze,i.deflateSetHeader=function(h,K){return h&&h.state?h.state.wrap!==2?S:(h.state.gzhead=K,y):S},i.deflate=function(h,K){var Y,$,b,I;if(!h||!h.state||5<K||K<0)return h?Se(h,S):S;if($=h.state,!h.output||!h.input&&h.avail_in!==0||$.status===666&&K!==_)return Se(h,h.avail_out===0?-5:S);if($.strm=h,Y=$.last_flush,$.last_flush=K,$.status===A)if($.wrap===2)h.adler=0,Ee($,31),Ee($,139),Ee($,8),$.gzhead?(Ee($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),Ee($,255&$.gzhead.time),Ee($,$.gzhead.time>>8&255),Ee($,$.gzhead.time>>16&255),Ee($,$.gzhead.time>>24&255),Ee($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Ee($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(Ee($,255&$.gzhead.extra.length),Ee($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(h.adler=l(h.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(Ee($,0),Ee($,0),Ee($,0),Ee($,0),Ee($,0),Ee($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Ee($,3),$.status=W);else{var ne=T+($.w_bits-8<<4)<<8;ne|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(ne|=32),ne+=31-ne%31,$.status=W,ge($,ne),$.strstart!==0&&(ge($,h.adler>>>16),ge($,65535&h.adler)),h.adler=1}if($.status===69)if($.gzhead.extra){for(b=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),F(h),b=$.pending,$.pending!==$.pending_buf_size));)Ee($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){b=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),F(h),b=$.pending,$.pending===$.pending_buf_size)){I=1;break}I=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,Ee($,I)}while(I!==0);$.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),I===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){b=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),F(h),b=$.pending,$.pending===$.pending_buf_size)){I=1;break}I=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,Ee($,I)}while(I!==0);$.gzhead.hcrc&&$.pending>b&&(h.adler=l(h.adler,$.pending_buf,$.pending-b,b)),I===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&F(h),$.pending+2<=$.pending_buf_size&&(Ee($,255&h.adler),Ee($,h.adler>>8&255),h.adler=0,$.status=W)):$.status=W),$.pending!==0){if(F(h),h.avail_out===0)return $.last_flush=-1,y}else if(h.avail_in===0&&ce(K)<=ce(Y)&&K!==_)return Se(h,-5);if($.status===666&&h.avail_in!==0)return Se(h,-5);if(h.avail_in!==0||$.lookahead!==0||K!==d&&$.status!==666){var re=$.strategy===2?function(M,fe){for(var ye;;){if(M.lookahead===0&&(Me(M),M.lookahead===0)){if(fe===d)return p;break}if(M.match_length=0,ye=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,ye&&(q(M,!1),M.strm.avail_out===0))return p}return M.insert=0,fe===_?(q(M,!0),M.strm.avail_out===0?xe:ee):M.last_lit&&(q(M,!1),M.strm.avail_out===0)?p:Q}($,K):$.strategy===3?function(M,fe){for(var ye,de,_e,Ce,$e=M.window;;){if(M.lookahead<=oe){if(Me(M),M.lookahead<=oe&&fe===d)return p;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=G&&0<M.strstart&&(de=$e[_e=M.strstart-1])===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]){Ce=M.strstart+oe;do;while(de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&de===$e[++_e]&&_e<Ce);M.match_length=oe-(Ce-_e),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=G?(ye=o._tr_tally(M,1,M.match_length-G),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(ye=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),ye&&(q(M,!1),M.strm.avail_out===0))return p}return M.insert=0,fe===_?(q(M,!0),M.strm.avail_out===0?xe:ee):M.last_lit&&(q(M,!1),M.strm.avail_out===0)?p:Q}($,K):s[$.level].func($,K);if(re!==xe&&re!==ee||($.status=666),re===p||re===xe)return h.avail_out===0&&($.last_flush=-1),y;if(re===Q&&(K===1?o._tr_align($):K!==5&&(o._tr_stored_block($,0,0,!1),K===3&&(ue($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),F(h),h.avail_out===0))return $.last_flush=-1,y}return K!==_?y:$.wrap<=0?1:($.wrap===2?(Ee($,255&h.adler),Ee($,h.adler>>8&255),Ee($,h.adler>>16&255),Ee($,h.adler>>24&255),Ee($,255&h.total_in),Ee($,h.total_in>>8&255),Ee($,h.total_in>>16&255),Ee($,h.total_in>>24&255)):(ge($,h.adler>>>16),ge($,65535&h.adler)),F(h),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?y:1)},i.deflateEnd=function(h){var K;return h&&h.state?(K=h.state.status)!==A&&K!==69&&K!==73&&K!==91&&K!==103&&K!==W&&K!==666?Se(h,S):(h.state=null,K===W?Se(h,-3):y):S},i.deflateSetDictionary=function(h,K){var Y,$,b,I,ne,re,M,fe,ye=K.length;if(!h||!h.state||(I=(Y=h.state).wrap)===2||I===1&&Y.status!==A||Y.lookahead)return S;for(I===1&&(h.adler=u(h.adler,K,ye,0)),Y.wrap=0,ye>=Y.w_size&&(I===0&&(ue(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0),fe=new a.Buf8(Y.w_size),a.arraySet(fe,K,ye-Y.w_size,Y.w_size,0),K=fe,ye=Y.w_size),ne=h.avail_in,re=h.next_in,M=h.input,h.avail_in=ye,h.next_in=0,h.input=K,Me(Y);Y.lookahead>=G;){for($=Y.strstart,b=Y.lookahead-(G-1);Y.ins_h=(Y.ins_h<<Y.hash_shift^Y.window[$+G-1])&Y.hash_mask,Y.prev[$&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=$,$++,--b;);Y.strstart=$,Y.lookahead=G-1,Me(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=G-1,Y.match_available=0,h.next_in=re,h.input=M,h.avail_in=ne,Y.wrap=I,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(s,a){var o,u,l,g,d,_,y,S,w,P,E,T,N,L,D,H,z,V,G,oe,ve,A,W,p,Q;o=s.state,u=s.next_in,p=s.input,l=u+(s.avail_in-5),g=s.next_out,Q=s.output,d=g-(a-s.avail_out),_=g+(s.avail_out-257),y=o.dmax,S=o.wsize,w=o.whave,P=o.wnext,E=o.window,T=o.hold,N=o.bits,L=o.lencode,D=o.distcode,H=(1<<o.lenbits)-1,z=(1<<o.distbits)-1;e:do{N<15&&(T+=p[u++]<<N,N+=8,T+=p[u++]<<N,N+=8),V=L[T&H];t:for(;;){if(T>>>=G=V>>>24,N-=G,(G=V>>>16&255)===0)Q[g++]=65535&V;else{if(!(16&G)){if(!(64&G)){V=L[(65535&V)+(T&(1<<G)-1)];continue t}if(32&G){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}oe=65535&V,(G&=15)&&(N<G&&(T+=p[u++]<<N,N+=8),oe+=T&(1<<G)-1,T>>>=G,N-=G),N<15&&(T+=p[u++]<<N,N+=8,T+=p[u++]<<N,N+=8),V=D[T&z];r:for(;;){if(T>>>=G=V>>>24,N-=G,!(16&(G=V>>>16&255))){if(!(64&G)){V=D[(65535&V)+(T&(1<<G)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(ve=65535&V,N<(G&=15)&&(T+=p[u++]<<N,(N+=8)<G&&(T+=p[u++]<<N,N+=8)),y<(ve+=T&(1<<G)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(T>>>=G,N-=G,(G=g-d)<ve){if(w<(G=ve-G)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(W=E,(A=0)===P){if(A+=S-G,G<oe){for(oe-=G;Q[g++]=E[A++],--G;);A=g-ve,W=Q}}else if(P<G){if(A+=S+P-G,(G-=P)<oe){for(oe-=G;Q[g++]=E[A++],--G;);if(A=0,P<oe){for(oe-=G=P;Q[g++]=E[A++],--G;);A=g-ve,W=Q}}}else if(A+=P-G,G<oe){for(oe-=G;Q[g++]=E[A++],--G;);A=g-ve,W=Q}for(;2<oe;)Q[g++]=W[A++],Q[g++]=W[A++],Q[g++]=W[A++],oe-=3;oe&&(Q[g++]=W[A++],1<oe&&(Q[g++]=W[A++]))}else{for(A=g-ve;Q[g++]=Q[A++],Q[g++]=Q[A++],Q[g++]=Q[A++],2<(oe-=3););oe&&(Q[g++]=Q[A++],1<oe&&(Q[g++]=Q[A++]))}break}}break}}while(u<l&&g<_);u-=oe=N>>3,T&=(1<<(N-=oe<<3))-1,s.next_in=u,s.next_out=g,s.avail_in=u<l?l-u+5:5-(u-l),s.avail_out=g<_?_-g+257:257-(g-_),o.hold=T,o.bits=N}},{}],49:[function(t,n,i){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),g=1,d=2,_=0,y=-2,S=1,w=852,P=592;function E(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(A){var W;return A&&A.state?(W=A.state,A.total_in=A.total_out=W.total=0,A.msg="",W.wrap&&(A.adler=1&W.wrap),W.mode=S,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new s.Buf32(w),W.distcode=W.distdyn=new s.Buf32(P),W.sane=1,W.back=-1,_):y}function L(A){var W;return A&&A.state?((W=A.state).wsize=0,W.whave=0,W.wnext=0,N(A)):y}function D(A,W){var p,Q;return A&&A.state?(Q=A.state,W<0?(p=0,W=-W):(p=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?y:(Q.window!==null&&Q.wbits!==W&&(Q.window=null),Q.wrap=p,Q.wbits=W,L(A))):y}function H(A,W){var p,Q;return A?(Q=new T,(A.state=Q).window=null,(p=D(A,W))!==_&&(A.state=null),p):y}var z,V,G=!0;function oe(A){if(G){var W;for(z=new s.Buf32(512),V=new s.Buf32(32),W=0;W<144;)A.lens[W++]=8;for(;W<256;)A.lens[W++]=9;for(;W<280;)A.lens[W++]=7;for(;W<288;)A.lens[W++]=8;for(l(g,A.lens,0,288,z,0,A.work,{bits:9}),W=0;W<32;)A.lens[W++]=5;l(d,A.lens,0,32,V,0,A.work,{bits:5}),G=!1}A.lencode=z,A.lenbits=9,A.distcode=V,A.distbits=5}function ve(A,W,p,Q){var xe,ee=A.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new s.Buf8(ee.wsize)),Q>=ee.wsize?(s.arraySet(ee.window,W,p-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(Q<(xe=ee.wsize-ee.wnext)&&(xe=Q),s.arraySet(ee.window,W,p-Q,xe,ee.wnext),(Q-=xe)?(s.arraySet(ee.window,W,p-Q,Q,0),ee.wnext=Q,ee.whave=ee.wsize):(ee.wnext+=xe,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=xe))),0}i.inflateReset=L,i.inflateReset2=D,i.inflateResetKeep=N,i.inflateInit=function(A){return H(A,15)},i.inflateInit2=H,i.inflate=function(A,W){var p,Q,xe,ee,Se,ce,ue,F,q,Ee,ge,me,Me,Ge,Ae,Re,Ue,ze,He,Je,h,K,Y,$,b=0,I=new s.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return y;(p=A.state).mode===12&&(p.mode=13),Se=A.next_out,xe=A.output,ue=A.avail_out,ee=A.next_in,Q=A.input,ce=A.avail_in,F=p.hold,q=p.bits,Ee=ce,ge=ue,K=_;e:for(;;)switch(p.mode){case S:if(p.wrap===0){p.mode=13;break}for(;q<16;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(2&p.wrap&&F===35615){I[p.check=0]=255&F,I[1]=F>>>8&255,p.check=o(p.check,I,2,0),q=F=0,p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&F)<<8)+(F>>8))%31){A.msg="incorrect header check",p.mode=30;break}if((15&F)!=8){A.msg="unknown compression method",p.mode=30;break}if(q-=4,h=8+(15&(F>>>=4)),p.wbits===0)p.wbits=h;else if(h>p.wbits){A.msg="invalid window size",p.mode=30;break}p.dmax=1<<h,A.adler=p.check=1,p.mode=512&F?10:12,q=F=0;break;case 2:for(;q<16;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(p.flags=F,(255&p.flags)!=8){A.msg="unknown compression method",p.mode=30;break}if(57344&p.flags){A.msg="unknown header flags set",p.mode=30;break}p.head&&(p.head.text=F>>8&1),512&p.flags&&(I[0]=255&F,I[1]=F>>>8&255,p.check=o(p.check,I,2,0)),q=F=0,p.mode=3;case 3:for(;q<32;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.head&&(p.head.time=F),512&p.flags&&(I[0]=255&F,I[1]=F>>>8&255,I[2]=F>>>16&255,I[3]=F>>>24&255,p.check=o(p.check,I,4,0)),q=F=0,p.mode=4;case 4:for(;q<16;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.head&&(p.head.xflags=255&F,p.head.os=F>>8),512&p.flags&&(I[0]=255&F,I[1]=F>>>8&255,p.check=o(p.check,I,2,0)),q=F=0,p.mode=5;case 5:if(1024&p.flags){for(;q<16;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.length=F,p.head&&(p.head.extra_len=F),512&p.flags&&(I[0]=255&F,I[1]=F>>>8&255,p.check=o(p.check,I,2,0)),q=F=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(ce<(me=p.length)&&(me=ce),me&&(p.head&&(h=p.head.extra_len-p.length,p.head.extra||(p.head.extra=new Array(p.head.extra_len)),s.arraySet(p.head.extra,Q,ee,me,h)),512&p.flags&&(p.check=o(p.check,Q,me,ee)),ce-=me,ee+=me,p.length-=me),p.length))break e;p.length=0,p.mode=7;case 7:if(2048&p.flags){if(ce===0)break e;for(me=0;h=Q[ee+me++],p.head&&h&&p.length<65536&&(p.head.name+=String.fromCharCode(h)),h&&me<ce;);if(512&p.flags&&(p.check=o(p.check,Q,me,ee)),ce-=me,ee+=me,h)break e}else p.head&&(p.head.name=null);p.length=0,p.mode=8;case 8:if(4096&p.flags){if(ce===0)break e;for(me=0;h=Q[ee+me++],p.head&&h&&p.length<65536&&(p.head.comment+=String.fromCharCode(h)),h&&me<ce;);if(512&p.flags&&(p.check=o(p.check,Q,me,ee)),ce-=me,ee+=me,h)break e}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;q<16;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(F!==(65535&p.check)){A.msg="header crc mismatch",p.mode=30;break}q=F=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0),A.adler=p.check=0,p.mode=12;break;case 10:for(;q<32;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}A.adler=p.check=E(F),q=F=0,p.mode=11;case 11:if(p.havedict===0)return A.next_out=Se,A.avail_out=ue,A.next_in=ee,A.avail_in=ce,p.hold=F,p.bits=q,2;A.adler=p.check=1,p.mode=12;case 12:if(W===5||W===6)break e;case 13:if(p.last){F>>>=7&q,q-=7&q,p.mode=27;break}for(;q<3;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}switch(p.last=1&F,q-=1,3&(F>>>=1)){case 0:p.mode=14;break;case 1:if(oe(p),p.mode=20,W!==6)break;F>>>=2,q-=2;break e;case 2:p.mode=17;break;case 3:A.msg="invalid block type",p.mode=30}F>>>=2,q-=2;break;case 14:for(F>>>=7&q,q-=7&q;q<32;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if((65535&F)!=(F>>>16^65535)){A.msg="invalid stored block lengths",p.mode=30;break}if(p.length=65535&F,q=F=0,p.mode=15,W===6)break e;case 15:p.mode=16;case 16:if(me=p.length){if(ce<me&&(me=ce),ue<me&&(me=ue),me===0)break e;s.arraySet(xe,Q,ee,me,Se),ce-=me,ee+=me,ue-=me,Se+=me,p.length-=me;break}p.mode=12;break;case 17:for(;q<14;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(p.nlen=257+(31&F),F>>>=5,q-=5,p.ndist=1+(31&F),F>>>=5,q-=5,p.ncode=4+(15&F),F>>>=4,q-=4,286<p.nlen||30<p.ndist){A.msg="too many length or distance symbols",p.mode=30;break}p.have=0,p.mode=18;case 18:for(;p.have<p.ncode;){for(;q<3;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.lens[ne[p.have++]]=7&F,F>>>=3,q-=3}for(;p.have<19;)p.lens[ne[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,Y={bits:p.lenbits},K=l(0,p.lens,0,19,p.lencode,0,p.work,Y),p.lenbits=Y.bits,K){A.msg="invalid code lengths set",p.mode=30;break}p.have=0,p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;Re=(b=p.lencode[F&(1<<p.lenbits)-1])>>>16&255,Ue=65535&b,!((Ae=b>>>24)<=q);){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(Ue<16)F>>>=Ae,q-=Ae,p.lens[p.have++]=Ue;else{if(Ue===16){for($=Ae+2;q<$;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(F>>>=Ae,q-=Ae,p.have===0){A.msg="invalid bit length repeat",p.mode=30;break}h=p.lens[p.have-1],me=3+(3&F),F>>>=2,q-=2}else if(Ue===17){for($=Ae+3;q<$;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}q-=Ae,h=0,me=3+(7&(F>>>=Ae)),F>>>=3,q-=3}else{for($=Ae+7;q<$;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}q-=Ae,h=0,me=11+(127&(F>>>=Ae)),F>>>=7,q-=7}if(p.have+me>p.nlen+p.ndist){A.msg="invalid bit length repeat",p.mode=30;break}for(;me--;)p.lens[p.have++]=h}}if(p.mode===30)break;if(p.lens[256]===0){A.msg="invalid code -- missing end-of-block",p.mode=30;break}if(p.lenbits=9,Y={bits:p.lenbits},K=l(g,p.lens,0,p.nlen,p.lencode,0,p.work,Y),p.lenbits=Y.bits,K){A.msg="invalid literal/lengths set",p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,Y={bits:p.distbits},K=l(d,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,Y),p.distbits=Y.bits,K){A.msg="invalid distances set",p.mode=30;break}if(p.mode=20,W===6)break e;case 20:p.mode=21;case 21:if(6<=ce&&258<=ue){A.next_out=Se,A.avail_out=ue,A.next_in=ee,A.avail_in=ce,p.hold=F,p.bits=q,u(A,ge),Se=A.next_out,xe=A.output,ue=A.avail_out,ee=A.next_in,Q=A.input,ce=A.avail_in,F=p.hold,q=p.bits,p.mode===12&&(p.back=-1);break}for(p.back=0;Re=(b=p.lencode[F&(1<<p.lenbits)-1])>>>16&255,Ue=65535&b,!((Ae=b>>>24)<=q);){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(Re&&!(240&Re)){for(ze=Ae,He=Re,Je=Ue;Re=(b=p.lencode[Je+((F&(1<<ze+He)-1)>>ze)])>>>16&255,Ue=65535&b,!(ze+(Ae=b>>>24)<=q);){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}F>>>=ze,q-=ze,p.back+=ze}if(F>>>=Ae,q-=Ae,p.back+=Ae,p.length=Ue,Re===0){p.mode=26;break}if(32&Re){p.back=-1,p.mode=12;break}if(64&Re){A.msg="invalid literal/length code",p.mode=30;break}p.extra=15&Re,p.mode=22;case 22:if(p.extra){for($=p.extra;q<$;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.length+=F&(1<<p.extra)-1,F>>>=p.extra,q-=p.extra,p.back+=p.extra}p.was=p.length,p.mode=23;case 23:for(;Re=(b=p.distcode[F&(1<<p.distbits)-1])>>>16&255,Ue=65535&b,!((Ae=b>>>24)<=q);){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(!(240&Re)){for(ze=Ae,He=Re,Je=Ue;Re=(b=p.distcode[Je+((F&(1<<ze+He)-1)>>ze)])>>>16&255,Ue=65535&b,!(ze+(Ae=b>>>24)<=q);){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}F>>>=ze,q-=ze,p.back+=ze}if(F>>>=Ae,q-=Ae,p.back+=Ae,64&Re){A.msg="invalid distance code",p.mode=30;break}p.offset=Ue,p.extra=15&Re,p.mode=24;case 24:if(p.extra){for($=p.extra;q<$;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}p.offset+=F&(1<<p.extra)-1,F>>>=p.extra,q-=p.extra,p.back+=p.extra}if(p.offset>p.dmax){A.msg="invalid distance too far back",p.mode=30;break}p.mode=25;case 25:if(ue===0)break e;if(me=ge-ue,p.offset>me){if((me=p.offset-me)>p.whave&&p.sane){A.msg="invalid distance too far back",p.mode=30;break}Me=me>p.wnext?(me-=p.wnext,p.wsize-me):p.wnext-me,me>p.length&&(me=p.length),Ge=p.window}else Ge=xe,Me=Se-p.offset,me=p.length;for(ue<me&&(me=ue),ue-=me,p.length-=me;xe[Se++]=Ge[Me++],--me;);p.length===0&&(p.mode=21);break;case 26:if(ue===0)break e;xe[Se++]=p.length,ue--,p.mode=21;break;case 27:if(p.wrap){for(;q<32;){if(ce===0)break e;ce--,F|=Q[ee++]<<q,q+=8}if(ge-=ue,A.total_out+=ge,p.total+=ge,ge&&(A.adler=p.check=p.flags?o(p.check,xe,ge,Se-ge):a(p.check,xe,ge,Se-ge)),ge=ue,(p.flags?F:E(F))!==p.check){A.msg="incorrect data check",p.mode=30;break}q=F=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;q<32;){if(ce===0)break e;ce--,F+=Q[ee++]<<q,q+=8}if(F!==(4294967295&p.total)){A.msg="incorrect length check",p.mode=30;break}q=F=0}p.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return y}return A.next_out=Se,A.avail_out=ue,A.next_in=ee,A.avail_in=ce,p.hold=F,p.bits=q,(p.wsize||ge!==A.avail_out&&p.mode<30&&(p.mode<27||W!==4))&&ve(A,A.output,A.next_out,ge-A.avail_out)?(p.mode=31,-4):(Ee-=A.avail_in,ge-=A.avail_out,A.total_in+=Ee,A.total_out+=ge,p.total+=ge,p.wrap&&ge&&(A.adler=p.check=p.flags?o(p.check,xe,ge,A.next_out-ge):a(p.check,xe,ge,A.next_out-ge)),A.data_type=p.bits+(p.last?64:0)+(p.mode===12?128:0)+(p.mode===20||p.mode===15?256:0),(Ee==0&&ge===0||W===4)&&K===_&&(K=-5),K)},i.inflateEnd=function(A){if(!A||!A.state)return y;var W=A.state;return W.window&&(W.window=null),A.state=null,_},i.inflateGetHeader=function(A,W){var p;return A&&A.state&&2&(p=A.state).wrap?((p.head=W).done=!1,_):y},i.inflateSetDictionary=function(A,W){var p,Q=W.length;return A&&A.state?(p=A.state).wrap!==0&&p.mode!==11?y:p.mode===11&&a(1,W,Q,0)!==p.check?-3:ve(A,W,Q,Q)?(p.mode=31,-4):(p.havedict=1,_):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,d,_,y,S,w,P,E){var T,N,L,D,H,z,V,G,oe,ve=E.bits,A=0,W=0,p=0,Q=0,xe=0,ee=0,Se=0,ce=0,ue=0,F=0,q=null,Ee=0,ge=new s.Buf16(16),me=new s.Buf16(16),Me=null,Ge=0;for(A=0;A<=15;A++)ge[A]=0;for(W=0;W<y;W++)ge[d[_+W]]++;for(xe=ve,Q=15;1<=Q&&ge[Q]===0;Q--);if(Q<xe&&(xe=Q),Q===0)return S[w++]=20971520,S[w++]=20971520,E.bits=1,0;for(p=1;p<Q&&ge[p]===0;p++);for(xe<p&&(xe=p),A=ce=1;A<=15;A++)if(ce<<=1,(ce-=ge[A])<0)return-1;if(0<ce&&(g===0||Q!==1))return-1;for(me[1]=0,A=1;A<15;A++)me[A+1]=me[A]+ge[A];for(W=0;W<y;W++)d[_+W]!==0&&(P[me[d[_+W]]++]=W);if(z=g===0?(q=Me=P,19):g===1?(q=a,Ee-=257,Me=o,Ge-=257,256):(q=u,Me=l,-1),A=p,H=w,Se=W=F=0,L=-1,D=(ue=1<<(ee=xe))-1,g===1&&852<ue||g===2&&592<ue)return 1;for(;;){for(V=A-Se,oe=P[W]<z?(G=0,P[W]):P[W]>z?(G=Me[Ge+P[W]],q[Ee+P[W]]):(G=96,0),T=1<<A-Se,p=N=1<<ee;S[H+(F>>Se)+(N-=T)]=V<<24|G<<16|oe|0,N!==0;);for(T=1<<A-1;F&T;)T>>=1;if(T!==0?(F&=T-1,F+=T):F=0,W++,--ge[A]==0){if(A===Q)break;A=d[_+P[W]]}if(xe<A&&(F&D)!==L){for(Se===0&&(Se=xe),H+=p,ce=1<<(ee=A-Se);ee+Se<Q&&!((ce-=ge[ee+Se])<=0);)ee++,ce<<=1;if(ue+=1<<ee,g===1&&852<ue||g===2&&592<ue)return 1;S[L=F&D]=xe<<24|ee<<16|H-w|0}}return F!==0&&(S[H+F]=A-Se<<24|64<<16|0),E.bits=xe,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var s=t("../utils/common"),a=0,o=1;function u(b){for(var I=b.length;0<=--I;)b[I]=0}var l=0,g=29,d=256,_=d+1+g,y=30,S=19,w=2*_+1,P=15,E=16,T=7,N=256,L=16,D=17,H=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=new Array(2*(_+2));u(ve);var A=new Array(2*y);u(A);var W=new Array(512);u(W);var p=new Array(256);u(p);var Q=new Array(g);u(Q);var xe,ee,Se,ce=new Array(y);function ue(b,I,ne,re,M){this.static_tree=b,this.extra_bits=I,this.extra_base=ne,this.elems=re,this.max_length=M,this.has_stree=b&&b.length}function F(b,I){this.dyn_tree=b,this.max_code=0,this.stat_desc=I}function q(b){return b<256?W[b]:W[256+(b>>>7)]}function Ee(b,I){b.pending_buf[b.pending++]=255&I,b.pending_buf[b.pending++]=I>>>8&255}function ge(b,I,ne){b.bi_valid>E-ne?(b.bi_buf|=I<<b.bi_valid&65535,Ee(b,b.bi_buf),b.bi_buf=I>>E-b.bi_valid,b.bi_valid+=ne-E):(b.bi_buf|=I<<b.bi_valid&65535,b.bi_valid+=ne)}function me(b,I,ne){ge(b,ne[2*I],ne[2*I+1])}function Me(b,I){for(var ne=0;ne|=1&b,b>>>=1,ne<<=1,0<--I;);return ne>>>1}function Ge(b,I,ne){var re,M,fe=new Array(P+1),ye=0;for(re=1;re<=P;re++)fe[re]=ye=ye+ne[re-1]<<1;for(M=0;M<=I;M++){var de=b[2*M+1];de!==0&&(b[2*M]=Me(fe[de]++,de))}}function Ae(b){var I;for(I=0;I<_;I++)b.dyn_ltree[2*I]=0;for(I=0;I<y;I++)b.dyn_dtree[2*I]=0;for(I=0;I<S;I++)b.bl_tree[2*I]=0;b.dyn_ltree[2*N]=1,b.opt_len=b.static_len=0,b.last_lit=b.matches=0}function Re(b){8<b.bi_valid?Ee(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf),b.bi_buf=0,b.bi_valid=0}function Ue(b,I,ne,re){var M=2*I,fe=2*ne;return b[M]<b[fe]||b[M]===b[fe]&&re[I]<=re[ne]}function ze(b,I,ne){for(var re=b.heap[ne],M=ne<<1;M<=b.heap_len&&(M<b.heap_len&&Ue(I,b.heap[M+1],b.heap[M],b.depth)&&M++,!Ue(I,re,b.heap[M],b.depth));)b.heap[ne]=b.heap[M],ne=M,M<<=1;b.heap[ne]=re}function He(b,I,ne){var re,M,fe,ye,de=0;if(b.last_lit!==0)for(;re=b.pending_buf[b.d_buf+2*de]<<8|b.pending_buf[b.d_buf+2*de+1],M=b.pending_buf[b.l_buf+de],de++,re===0?me(b,M,I):(me(b,(fe=p[M])+d+1,I),(ye=z[fe])!==0&&ge(b,M-=Q[fe],ye),me(b,fe=q(--re),ne),(ye=V[fe])!==0&&ge(b,re-=ce[fe],ye)),de<b.last_lit;);me(b,N,I)}function Je(b,I){var ne,re,M,fe=I.dyn_tree,ye=I.stat_desc.static_tree,de=I.stat_desc.has_stree,_e=I.stat_desc.elems,Ce=-1;for(b.heap_len=0,b.heap_max=w,ne=0;ne<_e;ne++)fe[2*ne]!==0?(b.heap[++b.heap_len]=Ce=ne,b.depth[ne]=0):fe[2*ne+1]=0;for(;b.heap_len<2;)fe[2*(M=b.heap[++b.heap_len]=Ce<2?++Ce:0)]=1,b.depth[M]=0,b.opt_len--,de&&(b.static_len-=ye[2*M+1]);for(I.max_code=Ce,ne=b.heap_len>>1;1<=ne;ne--)ze(b,fe,ne);for(M=_e;ne=b.heap[1],b.heap[1]=b.heap[b.heap_len--],ze(b,fe,1),re=b.heap[1],b.heap[--b.heap_max]=ne,b.heap[--b.heap_max]=re,fe[2*M]=fe[2*ne]+fe[2*re],b.depth[M]=(b.depth[ne]>=b.depth[re]?b.depth[ne]:b.depth[re])+1,fe[2*ne+1]=fe[2*re+1]=M,b.heap[1]=M++,ze(b,fe,1),2<=b.heap_len;);b.heap[--b.heap_max]=b.heap[1],function($e,Ke){var mt,Qe,vt,qe,wt,ke,nt=Ke.dyn_tree,xt=Ke.max_code,st=Ke.stat_desc.static_tree,yr=Ke.stat_desc.has_stree,Ze=Ke.stat_desc.extra_bits,Mt=Ke.stat_desc.extra_base,X=Ke.stat_desc.max_length,pt=0;for(qe=0;qe<=P;qe++)$e.bl_count[qe]=0;for(nt[2*$e.heap[$e.heap_max]+1]=0,mt=$e.heap_max+1;mt<w;mt++)X<(qe=nt[2*nt[2*(Qe=$e.heap[mt])+1]+1]+1)&&(qe=X,pt++),nt[2*Qe+1]=qe,xt<Qe||($e.bl_count[qe]++,wt=0,Mt<=Qe&&(wt=Ze[Qe-Mt]),ke=nt[2*Qe],$e.opt_len+=ke*(qe+wt),yr&&($e.static_len+=ke*(st[2*Qe+1]+wt)));if(pt!==0){do{for(qe=X-1;$e.bl_count[qe]===0;)qe--;$e.bl_count[qe]--,$e.bl_count[qe+1]+=2,$e.bl_count[X]--,pt-=2}while(0<pt);for(qe=X;qe!==0;qe--)for(Qe=$e.bl_count[qe];Qe!==0;)xt<(vt=$e.heap[--mt])||(nt[2*vt+1]!==qe&&($e.opt_len+=(qe-nt[2*vt+1])*nt[2*vt],nt[2*vt+1]=qe),Qe--)}}(b,I),Ge(fe,Ce,b.bl_count)}function h(b,I,ne){var re,M,fe=-1,ye=I[1],de=0,_e=7,Ce=4;for(ye===0&&(_e=138,Ce=3),I[2*(ne+1)+1]=65535,re=0;re<=ne;re++)M=ye,ye=I[2*(re+1)+1],++de<_e&&M===ye||(de<Ce?b.bl_tree[2*M]+=de:M!==0?(M!==fe&&b.bl_tree[2*M]++,b.bl_tree[2*L]++):de<=10?b.bl_tree[2*D]++:b.bl_tree[2*H]++,fe=M,Ce=(de=0)===ye?(_e=138,3):M===ye?(_e=6,3):(_e=7,4))}function K(b,I,ne){var re,M,fe=-1,ye=I[1],de=0,_e=7,Ce=4;for(ye===0&&(_e=138,Ce=3),re=0;re<=ne;re++)if(M=ye,ye=I[2*(re+1)+1],!(++de<_e&&M===ye)){if(de<Ce)for(;me(b,M,b.bl_tree),--de!=0;);else M!==0?(M!==fe&&(me(b,M,b.bl_tree),de--),me(b,L,b.bl_tree),ge(b,de-3,2)):de<=10?(me(b,D,b.bl_tree),ge(b,de-3,3)):(me(b,H,b.bl_tree),ge(b,de-11,7));fe=M,Ce=(de=0)===ye?(_e=138,3):M===ye?(_e=6,3):(_e=7,4)}}u(ce);var Y=!1;function $(b,I,ne,re){ge(b,(l<<1)+(re?1:0),3),function(M,fe,ye,de){Re(M),de&&(Ee(M,ye),Ee(M,~ye)),s.arraySet(M.pending_buf,M.window,fe,ye,M.pending),M.pending+=ye}(b,I,ne,!0)}i._tr_init=function(b){Y||(function(){var I,ne,re,M,fe,ye=new Array(P+1);for(M=re=0;M<g-1;M++)for(Q[M]=re,I=0;I<1<<z[M];I++)p[re++]=M;for(p[re-1]=M,M=fe=0;M<16;M++)for(ce[M]=fe,I=0;I<1<<V[M];I++)W[fe++]=M;for(fe>>=7;M<y;M++)for(ce[M]=fe<<7,I=0;I<1<<V[M]-7;I++)W[256+fe++]=M;for(ne=0;ne<=P;ne++)ye[ne]=0;for(I=0;I<=143;)ve[2*I+1]=8,I++,ye[8]++;for(;I<=255;)ve[2*I+1]=9,I++,ye[9]++;for(;I<=279;)ve[2*I+1]=7,I++,ye[7]++;for(;I<=287;)ve[2*I+1]=8,I++,ye[8]++;for(Ge(ve,_+1,ye),I=0;I<y;I++)A[2*I+1]=5,A[2*I]=Me(I,5);xe=new ue(ve,z,d+1,_,P),ee=new ue(A,V,0,y,P),Se=new ue(new Array(0),G,0,S,T)}(),Y=!0),b.l_desc=new F(b.dyn_ltree,xe),b.d_desc=new F(b.dyn_dtree,ee),b.bl_desc=new F(b.bl_tree,Se),b.bi_buf=0,b.bi_valid=0,Ae(b)},i._tr_stored_block=$,i._tr_flush_block=function(b,I,ne,re){var M,fe,ye=0;0<b.level?(b.strm.data_type===2&&(b.strm.data_type=function(de){var _e,Ce=4093624447;for(_e=0;_e<=31;_e++,Ce>>>=1)if(1&Ce&&de.dyn_ltree[2*_e]!==0)return a;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return o;for(_e=32;_e<d;_e++)if(de.dyn_ltree[2*_e]!==0)return o;return a}(b)),Je(b,b.l_desc),Je(b,b.d_desc),ye=function(de){var _e;for(h(de,de.dyn_ltree,de.l_desc.max_code),h(de,de.dyn_dtree,de.d_desc.max_code),Je(de,de.bl_desc),_e=S-1;3<=_e&&de.bl_tree[2*oe[_e]+1]===0;_e--);return de.opt_len+=3*(_e+1)+5+5+4,_e}(b),M=b.opt_len+3+7>>>3,(fe=b.static_len+3+7>>>3)<=M&&(M=fe)):M=fe=ne+5,ne+4<=M&&I!==-1?$(b,I,ne,re):b.strategy===4||fe===M?(ge(b,2+(re?1:0),3),He(b,ve,A)):(ge(b,4+(re?1:0),3),function(de,_e,Ce,$e){var Ke;for(ge(de,_e-257,5),ge(de,Ce-1,5),ge(de,$e-4,4),Ke=0;Ke<$e;Ke++)ge(de,de.bl_tree[2*oe[Ke]+1],3);K(de,de.dyn_ltree,_e-1),K(de,de.dyn_dtree,Ce-1)}(b,b.l_desc.max_code+1,b.d_desc.max_code+1,ye+1),He(b,b.dyn_ltree,b.dyn_dtree)),Ae(b),re&&Re(b)},i._tr_tally=function(b,I,ne){return b.pending_buf[b.d_buf+2*b.last_lit]=I>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&I,b.pending_buf[b.l_buf+b.last_lit]=255&ne,b.last_lit++,I===0?b.dyn_ltree[2*ne]++:(b.matches++,I--,b.dyn_ltree[2*(p[ne]+d+1)]++,b.dyn_dtree[2*q(I)]++),b.last_lit===b.lit_bufsize-1},i._tr_align=function(b){ge(b,2,3),me(b,N,ve),function(I){I.bi_valid===16?(Ee(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(b)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(s){(function(a,o){if(!a.setImmediate){var u,l,g,d,_=1,y={},S=!1,w=a.document,P=Object.getPrototypeOf&&Object.getPrototypeOf(a);P=P&&P.setTimeout?P:a,u={}.toString.call(a.process)==="[object process]"?function(L){Ft.nextTick(function(){T(L)})}:function(){if(a.postMessage&&!a.importScripts){var L=!0,D=a.onmessage;return a.onmessage=function(){L=!1},a.postMessage("","*"),a.onmessage=D,L}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",N,!1):a.attachEvent("onmessage",N),function(L){a.postMessage(d+L,"*")}):a.MessageChannel?((g=new MessageChannel).port1.onmessage=function(L){T(L.data)},function(L){g.port2.postMessage(L)}):w&&"onreadystatechange"in w.createElement("script")?(l=w.documentElement,function(L){var D=w.createElement("script");D.onreadystatechange=function(){T(L),D.onreadystatechange=null,l.removeChild(D),D=null},l.appendChild(D)}):function(L){setTimeout(T,0,L)},P.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var D=new Array(arguments.length-1),H=0;H<D.length;H++)D[H]=arguments[H+1];var z={callback:L,args:D};return y[_]=z,u(_),_++},P.clearImmediate=E}function E(L){delete y[L]}function T(L){if(S)setTimeout(T,0,L);else{var D=y[L];if(D){S=!0;try{(function(H){var z=H.callback,V=H.args;switch(V.length){case 0:z();break;case 1:z(V[0]);break;case 2:z(V[0],V[1]);break;case 3:z(V[0],V[1],V[2]);break;default:z.apply(o,V)}})(D)}finally{E(L),S=!1}}}}function N(L){L.source===a&&typeof L.data=="string"&&L.data.indexOf(d)===0&&T(+L.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof zt<"u"?zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});const yn=(()=>typeof self>"u"?!1:"showOpenFilePicker"in self)(),Gc=yn?Promise.resolve().then(function(){return Jc}):Promise.resolve().then(function(){return nl});async function Hc(...r){return(await Gc).default(...r)}yn?Promise.resolve().then(function(){return Xc}):Promise.resolve().then(function(){return sl});const Yc=yn?Promise.resolve().then(function(){return tl}):Promise.resolve().then(function(){return ol});async function Zc(...r){return(await Yc).default(...r)}const Kc=async r=>{const e=await r.getFile();return e.handle=r,e};var Vc=async(r=[{}])=>{Array.isArray(r)||(r=[r]);const e=[];r.forEach((i,s)=>{e[s]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(a=>{e[s].accept[a]=i.extensions||[]}):e[s].accept["*/*"]=i.extensions||[]});const t=await window.showOpenFilePicker({id:r[0].id,startIn:r[0].startIn,types:e,multiple:r[0].multiple||!1,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1}),n=await Promise.all(t.map(Kc));return r[0].multiple?n:n[0]},Jc={__proto__:null,default:Vc};function Xr(r){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var n=t.done;return Promise.resolve(t.value).then(function(i){return{value:i,done:n}})}return Xr=function(t){this.s=t,this.n=t.next},Xr.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return n===void 0?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return n===void 0?Promise.reject(t):e(n.apply(this.s,arguments))}},new Xr(r)}const ks=async(r,e,t=r.name,n)=>{const i=[],s=[];var a,o=!1,u=!1;try{for(var l,g=function(d){var _,y,S,w=2;for(typeof Symbol<"u"&&(y=Symbol.asyncIterator,S=Symbol.iterator);w--;){if(y&&(_=d[y])!=null)return _.call(d);if(S&&(_=d[S])!=null)return new Xr(_.call(d));y="@@asyncIterator",S="@@iterator"}throw new TypeError("Object is not async iterable")}(r.values());o=!(l=await g.next()).done;o=!1){const d=l.value,_=`${t}/${d.name}`;d.kind==="file"?s.push(d.getFile().then(y=>(y.directoryHandle=r,y.handle=d,Object.defineProperty(y,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>_})))):d.kind!=="directory"||!e||n&&n(d)||i.push(ks(d,e,_,n))}}catch(d){u=!0,a=d}finally{try{o&&g.return!=null&&await g.return()}finally{if(u)throw a}}return[...(await Promise.all(i)).flat(),...await Promise.all(s)]};var Qc=async(r={})=>{r.recursive=r.recursive||!1,r.mode=r.mode||"read";const e=await window.showDirectoryPicker({id:r.id,startIn:r.startIn,mode:r.mode});return(await(await e.values()).next()).done?[e]:ks(e,r.recursive,void 0,r.skipDirectory)},Xc={__proto__:null,default:Qc},el=async(r,e=[{}],t=null,n=!1,i=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let a=null;if(r instanceof Blob&&r.type?a=r.type:r.headers&&r.headers.get("content-type")&&(a=r.headers.get("content-type")),e.forEach((l,g)=>{s[g]={description:l.description||"Files",accept:{}},l.mimeTypes?(g===0&&a&&l.mimeTypes.push(a),l.mimeTypes.map(d=>{s[g].accept[d]=l.extensions||[]})):a?s[g].accept[a]=l.extensions||[]:s[g].accept["*/*"]=l.extensions||[]}),t)try{await t.getFile()}catch(l){if(t=null,n)throw l}const o=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&i&&i(o);const u=await o.createWritable();return"stream"in r?(await r.stream().pipeTo(u),o):"body"in r?(await r.body.pipeTo(u),o):(await u.write(await r),await u.close(),o)},tl={__proto__:null,default:el},rl=async(r=[{}])=>(Array.isArray(r)||(r=[r]),new Promise((e,t)=>{const n=document.createElement("input");n.type="file";const i=[...r.map(u=>u.mimeTypes||[]),...r.map(u=>u.extensions||[])].join();n.multiple=r[0].multiple||!1,n.accept=i||"",n.style.display="none",document.body.append(n);const s=u=>{typeof a=="function"&&a(),e(u)},a=r[0].legacySetup&&r[0].legacySetup(s,()=>a(t),n),o=()=>{window.removeEventListener("focus",o),n.remove()};n.addEventListener("click",()=>{window.addEventListener("focus",o)}),n.addEventListener("change",()=>{window.removeEventListener("focus",o),n.remove(),s(n.multiple?Array.from(n.files):n.files[0])}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),nl={__proto__:null,default:rl},il=async(r=[{}])=>(Array.isArray(r)||(r=[r]),r[0].recursive=r[0].recursive||!1,new Promise((e,t)=>{const n=document.createElement("input");n.type="file",n.webkitdirectory=!0;const i=a=>{typeof s=="function"&&s(),e(a)},s=r[0].legacySetup&&r[0].legacySetup(i,()=>s(t),n);n.addEventListener("change",()=>{let a=Array.from(n.files);r[0].recursive?r[0].recursive&&r[0].skipDirectory&&(a=a.filter(o=>o.webkitRelativePath.split("/").every(u=>!r[0].skipDirectory({name:u,kind:"directory"})))):a=a.filter(o=>o.webkitRelativePath.split("/").length===2),i(a)}),"showPicker"in HTMLInputElement.prototype?n.showPicker():n.click()})),sl={__proto__:null,default:il},al=async(r,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let n=r;"body"in r&&(n=await async function(a,o){const u=a.getReader(),l=new ReadableStream({start:_=>async function y(){return u.read().then(({done:S,value:w})=>{if(!S)return _.enqueue(w),y();_.close()})}()}),g=new Response(l),d=await g.blob();return u.releaseLock(),new Blob([d],{type:o})}(r.body,r.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await n);const i=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(i,()=>s(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),i()}),t.click(),null},ol={__proto__:null,default:al};const cl=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",Ps=Ia(class extends Fa{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=Dr(this,"jeepSqliteImportProgress",7),this.exportProgress=Dr(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=Dr(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=Dr(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=Dr(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const n of t)switch(n){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[n]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[n]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[n]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[n]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[n]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[n]);break}}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return await this._createConnection(n,i,s),Promise.resolve()}catch(a){return Promise.reject(a)}}async isConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1,s=await this._isConnection(n,i);return Promise.resolve(s)}async closeConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._closeConnection(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}async open(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._open(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}async close(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._close(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}async getVersion(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._getVersion(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async execute(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");const n=e.database,i=e.statements;let s=!0;const a=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{const o=await this._execute(n,i,s,a);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async executeSet(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");const n=e.database,i=e.set;let s=!0;t.includes("transaction")&&(s=e.transaction);const a=e.readonly?e.readonly:!1,o=e.returnMode?e.returnMode:"no";try{const u=await this._executeSet(n,i,s,a,o);return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async run(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");const n=e.database,i=e.statement;let s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let a=!0;t.includes("transaction")&&(a=e.transaction);const o=e.readonly?e.readonly:!1,u=e.returnMode?e.returnMode:"no";try{const l=await this._run(n,i,s,a,o,u);return Promise.resolve(l)}catch(l){return Promise.reject(l)}}async query(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let n=[];t.includes("values")&&(n=e.values.length>0?e.values:[]);const i=e.database,s=e.statement,a=e.readonly?e.readonly:!1;try{const o=await this._query(i,s,n,a);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getTableList(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._getTableList(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._isDBExists(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._isDBOpen(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._deleteDatabase(n,i)}catch(s){return Promise.reject(s)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return await this._copyFromAssets(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async isTableExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const n=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const i=e.table,s=e.readonly?e.readonly:!1;try{const a=await this._isTableExists(n,i,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._createSyncTable(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{const s=await this._getSyncDate(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const n=e.database,i=e.syncdate,s=e.readonly?e.readonly:!1;try{return await this._setSyncDate(n,i,s),Promise.resolve()}catch(a){return Promise.reject(a)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=e.jsonstring;try{const i=await this._isJsonValid(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async importFromJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const n=e.jsonstring;try{const i=await this._importFromJson(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async exportToJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const n=e.database,i=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{const a=await this._exportToJson(n,i,s);return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._deleteExportedRows(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const n=e.database,i=e.upgrade;for(const s of i){const a=Object.keys(s);if(!a.includes("toVersion")||!a.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[n])this._versionUpgrades[n][s.toVersion]=s;else{const o={};o[s.toVersion]=s,this._versionUpgrades[n]=o}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;try{const i=await this._isDatabase(n);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const n=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const i=e.openModes;try{const s=await this._checkConnectionsConsistency(n,i);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async saveToStore(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database,i=e.readonly?e.readonly:!1;try{return await this._saveToStore(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const n=e.database;try{return await this._saveToLocalDisk(n),Promise.resolve()}catch(i){return Promise.reject(i)}}async getFromLocalDiskToStore(e){const t=e.overwrite?e.overwrite:!0;console.log(yn?"Using the File System Access API.":"Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const n=e.url,i=e.overwrite?e.overwrite:!0;try{return await this._getFromHTTPRequest(n,i),Promise.resolve()}catch(s){return Promise.reject(s)}}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,n){let i={};const s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(i=this._versionUpgrades[e]);const a=Object.keys(this._dbDict);let o;try{a.length>0&&(a.includes("RW_"+e)||a.includes("RO_"+e))?o=a.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:o=new gi(e+"SQLite.db",t,i,this.store,this.innerAutoSave,this.innerWasmPath);const u=n?"RO_"+e:"RW_"+e;return this._dbDict[u]=o,Promise.resolve()}catch(u){return Promise.reject(u.message)}}async _isConnection(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;return n.includes(i)?{result:!0}:{result:!1}}async _closeConnection(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`CloseConnection: No available connection for ${e}`);const s=this._dbDict[i];try{if(s.isDBOpen())try{await s.close()}catch(a){return Promise.reject(`CloseConnection: close ${e} failed ${a}`)}return delete this._dbDict[i],Promise.resolve()}catch(a){return Promise.reject(`CloseConnection: ${a.message}`)}}async _open(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[i];try{return await s.open(),Promise.resolve()}catch(a){return Promise.reject(`Open: ${a.message}`)}}async _close(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`Close: No available connection for ${e}`);const s=this._dbDict[i];try{return await s.close(),Promise.resolve()}catch(a){return Promise.reject(`Close: ${a.message}`)}}async _saveToStore(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`SaveToStore: No available connection for ${e}`);const s=this._dbDict[i];try{return await s.saveToStore(),Promise.resolve()}catch(a){return Promise.reject(`SaveToStore: ${a.message}`)}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),n="RW_"+e;if(!t.includes(n))return Promise.reject(`_saveToLocalDisk: No available connection for ${e}`);const s=await this._dbDict[n].exportDB();this._blob=await this.uint2blob(s);const a=`${e}SQLite.db`;return this._opts={fileName:a,extensions:[".db"]},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${a}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){return Promise.reject(`_saveToLocalDisk: ${t.message}`)}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await Hc({extensions:[".db"]});let t=await this.blob2uint(e);const n=this.removePathSuffix(e.name),i=this.setPathSuffix(e.name);await Et(i,this.store)?this._overwrite?(await Jt(i,this.store),await At(i,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${i}`}):await At(i,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:n})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await Zc(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[i];try{const a=await s.getVersion(),o={};return o.version=a,Promise.resolve(o)}catch(a){return Promise.reject(`Open: ${a.message}`)}}async _execute(e,t,n,i){const s=Object.keys(this._dbDict),a="RW_"+e;if(!s.includes(a))return Promise.reject(`Execute: No available connection for ${e}`);const o=this._dbDict[a];if(i)return Promise.reject("Execute: not allowed in read-only mode");let u={};const l=t[0].substring(0,6);if(this.innerAutoSave&&l==="COMMIT")return u.changes.changes=0,Promise.resolve(u);try{return u={changes:{changes:await o.executeSQL(t,n)}},Promise.resolve(u)}catch(g){return Promise.reject(`Execute: ${g.message}`)}}async _executeSet(e,t,n,i,s){const a=Object.keys(this._dbDict),o="RW_"+e;if(!a.includes(o))return Promise.reject(`ExecuteSet: No available connection for ${e}`);const u=this._dbDict[o];if(i)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const l of t)if(!("statement"in l)||!("values"in l))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const l=await u.execSet(t,n,s),g={changes:{changes:l.changes,lastId:l.lastId,values:l.values}};return Promise.resolve(g)}catch(l){return Promise.reject(`ExecuteSet: ${l.message}`)}}async _run(e,t,n,i,s,a){const o=Object.keys(this._dbDict),u="RW_"+e;if(!o.includes(u))return Promise.reject(`Run: No available connection for ${e}`);const l=this._dbDict[u];if(s)return Promise.reject("Run: not allowed in read-only mode");let g={};const d=t.substring(0,6);if(this.innerAutoSave&&d==="COMMIT")return g={changes:{changes:0}},Promise.resolve(g);try{const _=await l.runSQL(t,n,i,a);return g={changes:{changes:_.changes,lastId:_.lastId,values:_.values}},Promise.resolve(g)}catch(_){return Promise.reject(`Run: ${_.message}`)}}async _query(e,t,n,i){const s=Object.keys(this._dbDict),a=i?"RO_"+e:"RW_"+e;if(!s.includes(a))return Promise.reject(`Query: No available connection for ${e}`);const o=this._dbDict[a];let u=[];const l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT")return Promise.resolve({values:u});try{return u=await o.selectSQL(t,n),Promise.resolve({values:u})}catch(g){return Promise.reject(`Query failed: ${g.message}`)}}async _getTableList(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`GetTableList: No available connection for ${e}`);const s=this._dbDict[i];let a=[];try{return a=await s.getTableNames(),Promise.resolve({values:a})}catch(o){return Promise.reject(`GetTableList failed: ${o.message}`)}}async _isDBExists(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`IsDBExists: No available connection for ${e}`);const s=this._dbDict[i];try{const o={result:await s.isDBExists(e+"SQLite.db")};return Promise.resolve(o)}catch(a){return Promise.reject(`IsDBExists: ${a.message}`)}}async _isDBOpen(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`IsDBOpen: No available connection for ${e}`);const s=this._dbDict[i];try{const o={result:await s.isDBOpen(e+"SQLite.db")};return Promise.resolve(o)}catch(a){return Promise.reject(`IsDBOpen: ${a.message}`)}}async _deleteDatabase(e,t){const n=Object.keys(this._dbDict),i="RW_"+e;if(!n.includes(i))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);const s=this._dbDict[i];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(a){return Promise.reject(`DeleteDatabase: ${a.message}`)}}async _isTableExists(e,t,n){const i=Object.keys(this._dbDict),s=n?"RO_"+e:"RW_"+e;if(!i.includes(s))return Promise.reject(`IsTableExists: No available connection for ${e}`);const a=this._dbDict[s];try{const u={result:await a.isTable(t)};return Promise.resolve(u)}catch(o){return Promise.reject(`IsTableExists: ${o.message}`)}}async _createSyncTable(e,t){const n=Object.keys(this._dbDict),i="RW_"+e;if(!n.includes(i))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);const s=this._dbDict[i];if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const a=await s.createSyncTable();return Promise.resolve({changes:{changes:a}})}catch(a){return Promise.reject(`CreateSyncTable: ${a.message}`)}}async _getSyncDate(e,t){const n=Object.keys(this._dbDict),i=t?"RO_"+e:"RW_"+e;if(!n.includes(i))return Promise.reject(`GetSyncDate: No available connection for ${e}`);const s=this._dbDict[i];try{const a=await s.getSyncDate();return Promise.resolve({syncDate:a})}catch(a){return Promise.reject(`GetSyncDate: ${a.message}`)}}async _setSyncDate(e,t,n){const i=Object.keys(this._dbDict),s="RW_"+e;if(!i.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${e}`);const a=this._dbDict[s];if(n)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const o=await a.setSyncDate(t);return o.result?Promise.resolve():Promise.reject(`SetSyncDate: ${o.message}`)}catch(o){return Promise.reject(`SetSyncDate: ${o.message}`)}}async _isJsonValid(e){const t=JSON.parse(e);return await Pn(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,n;const i=JSON.parse(e);if(!await Pn(i))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const a=i,o=`${a.database}SQLite.db`,u=(t=a.version)!==null&&t!==void 0?t:1,l=a.mode,g=(n=a.overwrite)!==null&&n!==void 0?n:!1,d=new gi(o,u,{},this.store,this.innerAutoSave,this.innerWasmPath);try{g&&l==="full"&&Et(o,this.store)&&await Jt(o,this.store),await d.open();const _=await d.getTableNames();if(l==="full"&&_.length>0){const S=await d.getVersion();if(u<S)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${S}`);if(S===u)return Promise.resolve({changes:{changes:0}})}const y=await d.importJson(a,this.importProgress);return await d.close(),Promise.resolve({changes:{changes:y}})}catch(_){return Promise.reject(`ImportFromJson: ${_.message}`)}}async _exportToJson(e,t,n){const i=Object.keys(this._dbDict),s=n?"RO_"+e:"RW_"+e;if(!i.includes(s))return Promise.reject(`ExportToJson: No available connection for ${e}`);const a=this._dbDict[s];try{const o=await a.exportJson(t,this.exportProgress);return Object.keys(o).includes("message")?Promise.reject(`ExportToJson: ${o.message}`):Promise.resolve({export:o})}catch(o){return Promise.reject(`ExportToJson: ${o.message}`)}}async _deleteExportedRows(e,t){const n=Object.keys(this._dbDict),i="RW_"+e;if(!n.includes(i))return Promise.reject(`ExportToJson: No available connection for ${e}`);const s=this._dbDict[i];if(t)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{await s.deleteExportedRows()}catch(a){return Promise.reject(`DeleteExportedRows: ${a.message}`)}}async _copyFromAssets(e){const t=await this.loadJSON("assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(const i of this.databaseList.databaseList)i.substring(i.length-3)===".db"&&await this.copyDatabase(`assets/databases/${i}`,e),i.substring(i.length-4)===".zip"&&await this.unzipDatabase(`assets/databases/${i}`,e);return Promise.resolve()}catch(i){return Promise.reject(`CopyFromAssets: ${i.message}`)}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in assets/databases folder")}async _getFromHTTPRequest(e,t){try{let n;return e.substring(e.length-3)===".db"&&(await this.copyDatabase(e,t),n="db"),e.substring(e.length-4)===".zip"&&(await this.unzipDatabase(e,t),n="zip"),this.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(n){return Promise.reject(`GetFromHTTPRequest: ${n.message}`)}}async _isDatabase(e){try{const n={result:await Et(e+"SQLite.db",this.store)};return Promise.resolve(n)}catch(t){return Promise.reject(`IsDatabase: ${t.message}`)}}async _getDatabaseList(){try{const t={values:await cc(this.store)};return Promise.resolve(t)}catch(e){return Promise.reject(`GetDatabaseList: ${e.message}`)}}async _checkConnectionsConsistency(e,t){const n={};n.result=!1;const i=[];e.forEach((s,a)=>{i.push(`${t[a]}_${s}`)});try{let s=new Set(Object.keys(this._dbDict));const a=new Set(i);if(a.size===0)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(s.size<a.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n);if(s.size>a.size){const o={};for(const u of s)if(!Array.from(a.keys()).includes(u)){let l=!1;u.substring(0,3)==="RO_"&&(l=!0),o.database=u.substring(3),o.readonly=l,await this._closeConnection(o.database,o.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===a.size?(await this.symmetricDifference(s,a)).size===0?(n.result=!0,Promise.resolve(n)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(n))}catch(s){return Promise.reject(`CheckConnectionsConsistency: ${s.message}`)}}async _resetDbDict(e){try{for(const t of e){const n={};let i=!1;t.substring(0,3)==="RO_"&&(i=!0),n.database=t.substring(3),n.readonly=i,await this._closeConnection(n.database,n.readonly)}}catch(t){return Promise.reject(`ResetDbDict: ${t.message}`)}}async symmetricDifference(e,t){let n=new Set;e.forEach(s=>{n.add(s.substring(3))});let i=new Set;t.forEach(s=>{i.add(s.substring(3))});for(const s of i)n.has(s)?n.delete(s):n.add(s);return n}async unzipDatabase(e,t){return new Promise((n,i)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("unzipDatabase: failed"))},s.onload=()=>{Wc.loadAsync(s.response).then(async a=>{const o=Object.keys(a.files);try{for(const u of o)await this.retrieveDBFromZip(a.files,u,t);n()}catch(u){i(new Error(`unzipDatabase Error: ${u.message}`))}})},s.send()})}async retrieveDBFromZip(e,t,n){return new Promise((i,s)=>{e[t].async("nodebuffer").then(async a=>{try{const o=new Uint8Array(a),u=this.setPathSuffix(t);await Et(u,this.store)?n?(await Jt(u,this.store),await At(u,o,this.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):await At(u,o,this.store),i()}catch(o){s(new Error(`retrieveDBFromZip:: ${o.message}`))}})})}async copyDatabase(e,t){return new Promise((n,i)=>{var s=new XMLHttpRequest,a;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{i(new Error("CopyDatabase: failed"))},s.onload=()=>{a=new Uint8Array(s.response)},s.onloadend=async()=>{const o=this.setPathSuffix(e);await Et(o,this.store)?t?(await Jt(o,this.store),await At(o,a,this.store)):i(new Error(`CopyDatabase Error: cannot overwrite ${o}`)):await At(o,a,this.store),n()},s.send()})}async loadJSON(e){return new Promise((t,n)=>{var i=new XMLHttpRequest;i.overrideMimeType("application/json"),i.open("GET",e,!0),i.onerror=()=>{n(new Error("LoadJSON: failed"))},i.onreadystatechange=function(){i.status==404&&t(null),i.readyState==4&&i.status==200&&t(i.responseText)},i.send(null)})}async openStore(e,t){let n=!1;const i=this.setConfig(e,t);return this.store=vi.createInstance(i),this.store!=null&&(this.storeName=e,n=!0),n}setConfig(e,t){return{name:e,storeName:t,driver:[vi.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);const n=".db";return e.substring(e.length-3)===n&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return cl}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]}]);function ll(){if(typeof customElements>"u")return;["jeep-sqlite"].forEach(e=>{switch(e){case"jeep-sqlite":customElements.get(e)||customElements.define(e,Ps);break}})}const fl=Ps,hl=ll;export{fl as JeepSqlite,hl as defineCustomElement};
