const Qt={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1};let gr,bn,Rr,kn=!1,rn=!1,Sn=!1,vt=!1,Yn=null,wn=!1;const cr=(c,e="")=>()=>{},ji="slot-fb{display:contents}slot-fb[hidden]{display:none}",Vn="http://www.w3.org/1999/xlink",Zn={},Oi="http://www.w3.org/2000/svg",Ni="http://www.w3.org/1999/xhtml",Ci=c=>c!=null,xn=c=>(c=typeof c,c==="object"||c==="function");function Bi(c){var e,t,r;return(r=(t=(e=c.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||t===void 0?void 0:t.getAttribute("content"))!==null&&r!==void 0?r:void 0}const hs=(c,e,...t)=>{let r=null,n=null,s=null,i=!1,o=!1;const l=[],u=h=>{for(let v=0;v<h.length;v++)r=h[v],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((i=typeof c!="function"&&!xn(r))&&(r=String(r)),i&&o?l[l.length-1].$text$+=r:l.push(i?nn(null,r):r),o=i)};if(u(t),e){e.key&&(n=e.key),e.name&&(s=e.name);{const h=e.className||e.class;h&&(e.class=typeof h!="object"?h:Object.keys(h).filter(v=>h[v]).join(" "))}}if(typeof c=="function")return c(e===null?{}:e,l,Mi);const g=nn(c,null);return g.$attrs$=e,l.length>0&&(g.$children$=l),g.$key$=n,g.$name$=s,g},nn=(c,e)=>{const t={$flags$:0,$tag$:c,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},Fi={},Li=c=>c&&c.$tag$===Fi,Mi={forEach:(c,e)=>c.map(Qn).forEach(e),map:(c,e)=>c.map(Qn).map(e).map(zi)},Qn=c=>({vattrs:c.$attrs$,vchildren:c.$children$,vkey:c.$key$,vname:c.$name$,vtag:c.$tag$,vtext:c.$text$}),zi=c=>{if(typeof c.vtag=="function"){const t=Object.assign({},c.vattrs);return c.vkey&&(t.key=c.vkey),c.vname&&(t.name=c.vname),hs(c.vtag,t,...c.vchildren||[])}const e=nn(c.vtag,c.vtext);return e.$attrs$=c.vattrs,e.$children$=c.vchildren,e.$key$=c.vkey,e.$name$=c.vname,e},qi=c=>ya.map(e=>e(c)).find(e=>!!e),Ui=(c,e)=>c!=null&&!xn(c)?e&4?c==="false"?!1:c===""||!!c:e&2?parseFloat(c):e&1?String(c):c:c,Wi=c=>c,Ir=(c,e,t)=>{const r=Wi(c);return{emit:n=>Gi(r,e,{bubbles:!!(t&4),composed:!!(t&2),cancelable:!!(t&1),detail:n})}},Gi=(c,e,t)=>{const r=ct.ce(e,t);return c.dispatchEvent(r),r},Xn=new WeakMap,Hi=(c,e,t)=>{let r=an.get(c);_a&&t?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,an.set(c,r)},Ki=(c,e,t)=>{var r;const n=ds(e,t),s=an.get(n);if(c=c.nodeType===11?c:Pt,s)if(typeof s=="string"){c=c.head||c;let i=Xn.get(c),o;if(i||Xn.set(c,i=new Set),!i.has(n)){{o=Pt.createElement("style"),o.innerHTML=s;const l=(r=ct.$nonce$)!==null&&r!==void 0?r:Bi(Pt);l!=null&&o.setAttribute("nonce",l),c.insertBefore(o,c.querySelector("link"))}e.$flags$&4&&(o.innerHTML+=ji),i&&i.add(n)}}else c.adoptedStyleSheets.includes(s)||(c.adoptedStyleSheets=[...c.adoptedStyleSheets,s]);return n},Yi=c=>{const e=c.$cmpMeta$,t=c.$hostElement$,r=e.$flags$,n=cr("attachStyles",e.$tagName$),s=Ki(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,c.$modeName$);r&10&&(t["s-sc"]=s,t.classList.add(s+"-h"),r&2&&t.classList.add(s+"-s")),n()},ds=(c,e)=>"sc-"+(e&&c.$flags$&32?c.$tagName$+"-"+e:c.$tagName$),Jn=(c,e,t,r,n,s)=>{if(t!==r){let i=ss(c,e),o=e.toLowerCase();if(e==="class"){const l=c.classList,u=es(t),g=es(r);l.remove(...u.filter(h=>h&&!g.includes(h))),l.add(...g.filter(h=>h&&!u.includes(h)))}else if(e==="style"){for(const l in t)(!r||r[l]==null)&&(l.includes("-")?c.style.removeProperty(l):c.style[l]="");for(const l in r)(!t||r[l]!==t[l])&&(l.includes("-")?c.style.setProperty(l,r[l]):c.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(c);else if(!c.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):ss(ln,o)?e=o.slice(2):e=o[2]+e.slice(3),t||r){const l=e.endsWith(ms);e=e.replace(Zi,""),t&&ct.rel(c,e,t,l),r&&ct.ael(c,e,r,l)}}else{const l=xn(r);if((i||l&&r!==null)&&!n)try{if(c.tagName.includes("-"))c[e]=r;else{const g=r??"";e==="list"?i=!1:(t==null||c[e]!=g)&&(c[e]=g)}}catch{}let u=!1;o!==(o=o.replace(/^xlink\:?/,""))&&(e=o,u=!0),r==null||r===!1?(r!==!1||c.getAttribute(e)==="")&&(u?c.removeAttributeNS(Vn,e):c.removeAttribute(e)):(!i||s&4||n)&&!l&&(r=r===!0?"":r,u?c.setAttributeNS(Vn,e,r):c.setAttribute(e,r))}}},Vi=/\s/,es=c=>c?c.split(Vi):[],ms="Capture",Zi=new RegExp(ms+"$"),ps=(c,e,t,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=c&&c.$attrs$||Zn,i=e.$attrs$||Zn;for(r in s)r in i||Jn(n,r,s[r],void 0,t,e.$flags$);for(r in i)Jn(n,r,s[r],i[r],t,e.$flags$)},sn=(c,e,t,r)=>{const n=e.$children$[t];let s=0,i,o,l;if(kn||(Sn=!0,n.$tag$==="slot"&&(gr&&r.classList.add(gr+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)i=n.$elm$=Pt.createTextNode(n.$text$);else if(n.$flags$&1)i=n.$elm$=Pt.createTextNode("");else{if(vt||(vt=n.$tag$==="svg"),i=n.$elm$=Pt.createElementNS(vt?Oi:Ni,n.$flags$&2?"slot-fb":n.$tag$),vt&&n.$tag$==="foreignObject"&&(vt=!1),ps(null,n,vt),Ci(gr)&&i["s-si"]!==gr&&i.classList.add(i["s-si"]=gr),n.$children$)for(s=0;s<n.$children$.length;++s)o=sn(c,n,s,i),o&&i.appendChild(o);n.$tag$==="svg"?vt=!1:i.tagName==="foreignObject"&&(vt=!0)}return i["s-hn"]=Rr,n.$flags$&3&&(i["s-sr"]=!0,i["s-cr"]=bn,i["s-sn"]=n.$name$||"",l=c&&c.$children$&&c.$children$[t],l&&l.$tag$===n.$tag$&&c.$elm$&&jr(c.$elm$,!1)),i},jr=(c,e)=>{ct.$flags$|=1;const t=c.childNodes;for(let r=t.length-1;r>=0;r--){const n=t[r];n["s-hn"]!==Rr&&n["s-ol"]&&(vs(n).insertBefore(n,Pn(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,Sn=!0),e&&jr(n,e)}ct.$flags$&=-2},gs=(c,e,t,r,n,s)=>{let i=c["s-cr"]&&c["s-cr"].parentNode||c,o;for(i.shadowRoot&&i.tagName===Rr&&(i=i.shadowRoot);n<=s;++n)r[n]&&(o=sn(null,t,n,c),o&&(r[n].$elm$=o,i.insertBefore(o,Pn(e))))},ys=(c,e,t)=>{for(let r=e;r<=t;++r){const n=c[r];if(n){const s=n.$elm$;_s(n),s&&(rn=!0,s["s-ol"]?s["s-ol"].remove():jr(s,!0),s.remove())}}},Qi=(c,e,t,r,n=!1)=>{let s=0,i=0,o=0,l=0,u=e.length-1,g=e[0],h=e[u],v=r.length-1,p=r[0],_=r[v],b,k;for(;s<=u&&i<=v;)if(g==null)g=e[++s];else if(h==null)h=e[--u];else if(p==null)p=r[++i];else if(_==null)_=r[--v];else if(Jr(g,p,n))yr(g,p,n),g=e[++s],p=r[++i];else if(Jr(h,_,n))yr(h,_,n),h=e[--u],_=r[--v];else if(Jr(g,_,n))(g.$tag$==="slot"||_.$tag$==="slot")&&jr(g.$elm$.parentNode,!1),yr(g,_,n),c.insertBefore(g.$elm$,h.$elm$.nextSibling),g=e[++s],_=r[--v];else if(Jr(h,p,n))(g.$tag$==="slot"||_.$tag$==="slot")&&jr(h.$elm$.parentNode,!1),yr(h,p,n),c.insertBefore(h.$elm$,g.$elm$),h=e[--u],p=r[++i];else{for(o=-1,l=s;l<=u;++l)if(e[l]&&e[l].$key$!==null&&e[l].$key$===p.$key$){o=l;break}o>=0?(k=e[o],k.$tag$!==p.$tag$?b=sn(e&&e[i],t,o,c):(yr(k,p,n),e[o]=void 0,b=k.$elm$),p=r[++i]):(b=sn(e&&e[i],t,i,c),p=r[++i]),b&&vs(g.$elm$).insertBefore(b,Pn(g.$elm$))}s>u?gs(c,r[v+1]==null?null:r[v+1].$elm$,t,r,i,v):i>v&&ys(e,s,u)},Jr=(c,e,t=!1)=>c.$tag$===e.$tag$?c.$tag$==="slot"?c.$name$===e.$name$:t?!0:c.$key$===e.$key$:!1,Pn=c=>c&&c["s-ol"]||c,vs=c=>(c["s-ol"]?c["s-ol"]:c).parentNode,yr=(c,e,t=!1)=>{const r=e.$elm$=c.$elm$,n=c.$children$,s=e.$children$,i=e.$tag$,o=e.$text$;let l;o===null?(vt=i==="svg"?!0:i==="foreignObject"?!1:vt,i==="slot"&&!kn||ps(c,e,vt),n!==null&&s!==null?Qi(r,n,e,s,t):s!==null?(c.$text$!==null&&(r.textContent=""),gs(r,null,e,s,0,s.length-1)):n!==null&&ys(n,0,n.length-1),vt&&i==="svg"&&(vt=!1)):(l=r["s-cr"])?l.parentNode.textContent=o:c.$text$!==o&&(r.data=o)},bs=c=>{const e=c.childNodes;for(const t of e)if(t.nodeType===1){if(t["s-sr"]){const r=t["s-sn"];t.hidden=!1;for(const n of e)if(n!==t){if(n["s-hn"]!==t["s-hn"]||r!==""){if(n.nodeType===1&&(r===n.getAttribute("slot")||r===n["s-sn"])){t.hidden=!0;break}}else if(n.nodeType===1||n.nodeType===3&&n.textContent.trim()!==""){t.hidden=!0;break}}}bs(t)}},Mt=[],ws=c=>{let e,t,r;for(const n of c.childNodes){if(n["s-sr"]&&(e=n["s-cr"])&&e.parentNode){t=e.parentNode.childNodes;const s=n["s-sn"];for(r=t.length-1;r>=0;r--)if(e=t[r],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==n["s-hn"]&&!Qt.experimentalSlotFixes)if(ts(e,s)){let i=Mt.find(o=>o.$nodeToRelocate$===e);rn=!0,e["s-sn"]=e["s-sn"]||s,i?(i.$nodeToRelocate$["s-sh"]=n["s-hn"],i.$slotRefNode$=n):(e["s-sh"]=n["s-hn"],Mt.push({$slotRefNode$:n,$nodeToRelocate$:e})),e["s-sr"]&&Mt.map(o=>{ts(o.$nodeToRelocate$,e["s-sn"])&&(i=Mt.find(l=>l.$nodeToRelocate$===e),i&&!o.$slotRefNode$&&(o.$slotRefNode$=i.$slotRefNode$))})}else Mt.some(i=>i.$nodeToRelocate$===e)||Mt.push({$nodeToRelocate$:e})}n.nodeType===1&&ws(n)}},ts=(c,e)=>c.nodeType===1?c.getAttribute("slot")===null&&e===""||c.getAttribute("slot")===e:c["s-sn"]===e?!0:e==="",_s=c=>{c.$attrs$&&c.$attrs$.ref&&c.$attrs$.ref(null),c.$children$&&c.$children$.map(_s)},Xi=(c,e,t=!1)=>{var r,n,s,i,o;const l=c.$hostElement$,u=c.$cmpMeta$,g=c.$vnode$||nn(null,null),h=Li(e)?e:hs(null,null,e);if(Rr=l.tagName,u.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},u.$attrsToReflect$.map(([v,p])=>h.$attrs$[p]=l[v])),t&&h.$attrs$)for(const v of Object.keys(h.$attrs$))l.hasAttribute(v)&&!["key","ref","style","class"].includes(v)&&(h.$attrs$[v]=l[v]);h.$tag$=null,h.$flags$|=4,c.$vnode$=h,h.$elm$=g.$elm$=l.shadowRoot||l,gr=l["s-sc"],kn=(u.$flags$&1)!==0,bn=l["s-cr"],rn=!1,yr(g,h,t);{if(ct.$flags$|=1,Sn){ws(h.$elm$);for(const v of Mt){const p=v.$nodeToRelocate$;if(!p["s-ol"]){const _=Pt.createTextNode("");_["s-nr"]=p,p.parentNode.insertBefore(p["s-ol"]=_,p)}}for(const v of Mt){const p=v.$nodeToRelocate$,_=v.$slotRefNode$;if(_){const b=_.parentNode;let k=_.nextSibling;{let T=(r=p["s-ol"])===null||r===void 0?void 0:r.previousSibling;for(;T;){let P=(n=T["s-nr"])!==null&&n!==void 0?n:null;if(P&&P["s-sn"]===p["s-sn"]&&b===P.parentNode&&(P=P.nextSibling,!P||!P["s-nr"])){k=P;break}T=T.previousSibling}}(!k&&b!==p.parentNode||p.nextSibling!==k)&&p!==k&&(!p["s-hn"]&&p["s-ol"]&&(p["s-hn"]=p["s-ol"].parentNode.nodeName),b.insertBefore(p,k),p.nodeType===1&&(p.hidden=(s=p["s-ih"])!==null&&s!==void 0?s:!1))}else p.nodeType===1&&(t&&(p["s-ih"]=(i=p.hidden)!==null&&i!==void 0?i:!1),p.hidden=!0)}}rn&&bs(h.$elm$),ct.$flags$&=-2,Mt.length=0}if(Qt.experimentalScopedSlotChanges&&u.$flags$&2)for(const v of h.$elm$.childNodes)v["s-hn"]!==Rr&&!v["s-sh"]&&(t&&v["s-ih"]==null&&(v["s-ih"]=(o=v.hidden)!==null&&o!==void 0?o:!1),v.hidden=!0);bn=void 0},Ji=(c,e)=>{},Es=(c,e)=>(c.$flags$|=16,Ji(c,c.$ancestorComponent$),ka(()=>ea(c,e))),ea=(c,e)=>{const t=c.$hostElement$,r=cr("scheduleUpdate",c.$cmpMeta$.$tagName$),n=t;let s;return e?s=br(n,"componentWillLoad"):s=br(n,"componentWillUpdate"),s=rs(s,()=>br(n,"componentWillRender")),r(),rs(s,()=>ra(c,n,e))},rs=(c,e)=>ta(c)?c.then(e):e(),ta=c=>c instanceof Promise||c&&c.then&&typeof c.then=="function",ra=async(c,e,t)=>{const r=c.$hostElement$,n=cr("update",c.$cmpMeta$.$tagName$);r["s-rc"],t&&Yi(c);const s=cr("render",c.$cmpMeta$.$tagName$);na(c,e,r,t),s(),n(),sa(c)},na=(c,e,t,r)=>{try{Yn=e,e=e.render&&e.render(),c.$flags$&=-17,c.$flags$|=2,(Qt.hasRenderFn||Qt.reflect)&&(Qt.vdomRender||Qt.reflect)&&(Qt.hydrateServerSide||Xi(c,e,r))}catch(l){Cr(l,c.$hostElement$)}return Yn=null,null},sa=c=>{const e=c.$cmpMeta$.$tagName$,t=c.$hostElement$,r=cr("postUpdate",e),n=t;c.$ancestorComponent$,br(n,"componentDidRender"),c.$flags$&64?(br(n,"componentDidUpdate"),r()):(c.$flags$|=64,br(n,"componentDidLoad"),r())},br=(c,e,t)=>{if(c&&c[e])try{return c[e](t)}catch(r){Cr(r)}},ia=(c,e)=>Nr(c).$instanceValues$.get(e),aa=(c,e,t,r)=>{const n=Nr(c),s=c,i=n.$instanceValues$.get(e),o=n.$flags$,l=s;t=Ui(t,r.$members$[e][0]);const u=Number.isNaN(i)&&Number.isNaN(t);if(t!==i&&!u){n.$instanceValues$.set(e,t);{if(r.$watchers$&&o&128){const h=r.$watchers$[e];h&&h.map(v=>{try{l[v](t,i,e)}catch(p){Cr(p,s)}})}if((o&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(t,i,e)===!1)return;Es(n,!1)}}}},oa=(c,e,t)=>{var r;const n=c.prototype;if(e.$members$){c.watchers&&(e.$watchers$=c.watchers);const s=Object.entries(e.$members$);s.map(([i,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,i,{get(){return ia(this,i)},set(l){aa(this,i,l,e)},configurable:!0,enumerable:!0})});{const i=new Map;n.attributeChangedCallback=function(o,l,u){ct.jmp(()=>{var g;const h=i.get(o);if(this.hasOwnProperty(h))u=this[h],delete this[h];else{if(n.hasOwnProperty(h)&&typeof this[h]=="number"&&this[h]==u)return;if(h==null){const v=Nr(this),p=v==null?void 0:v.$flags$;if(p&&!(p&8)&&p&128&&u!==l){const b=this,k=(g=e.$watchers$)===null||g===void 0?void 0:g[o];k==null||k.forEach(T=>{b[T]!=null&&b[T].call(b,u,l,o)})}return}}this[h]=u===null&&typeof this[h]=="boolean"?!1:u})},c.observedAttributes=Array.from(new Set([...Object.keys((r=e.$watchers$)!==null&&r!==void 0?r:{}),...s.filter(([o,l])=>l[0]&15).map(([o,l])=>{var u;const g=l[1]||o;return i.set(g,o),l[0]&512&&((u=e.$attrsToReflect$)===null||u===void 0||u.push([o,g])),g})]))}}return c},ca=async(c,e,t,r)=>{let n;if(!(e.$flags$&32)&&(e.$flags$|=32,t.$lazyBundleId$,n=c.constructor,customElements.whenDefined(t.$tagName$).then(()=>e.$flags$|=128),n.style)){let i=n.style;typeof i!="string"&&(i=i[e.$modeName$=qi(c)]);const o=ds(t,e.$modeName$);if(!an.has(o)){const l=cr("registerStyles",t.$tagName$);Hi(o,i,!!(t.$flags$&1)),l()}}e.$ancestorComponent$,(()=>Es(e,!0))()},ns=c=>{},la=c=>{if(!(ct.$flags$&1)){const e=Nr(c),t=e.$cmpMeta$,r=cr("connectedCallback",t.$tagName$);e.$flags$&1?(Ts(c,e,t.$listeners$),e!=null&&e.$lazyInstance$?ns(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>ns(e.$lazyInstance$))):(e.$flags$|=1,t.$flags$&12&&ua(c),t.$members$&&Object.entries(t.$members$).map(([n,[s]])=>{if(s&31&&c.hasOwnProperty(n)){const i=c[n];delete c[n],c[n]=i}}),ca(c,e,t)),r()}},ua=c=>{const e=c["s-cr"]=Pt.createComment("");e["s-cn"]=!0,c.insertBefore(e,c.firstChild)},fa=async c=>{if(!(ct.$flags$&1)){const e=Nr(c);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}},ha=(c,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=c.$watchers$,t.$attrsToReflect$=[];const r=c.prototype.connectedCallback,n=c.prototype.disconnectedCallback;return Object.assign(c.prototype,{__registerHost(){ga(this,t)},connectedCallback(){la(this),r&&r.call(this)},disconnectedCallback(){fa(this),n&&n.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)})}}),c.is=t.$tagName$,oa(c,t)},Ts=(c,e,t,r)=>{t&&t.map(([n,s,i])=>{const o=ma(c,n),l=da(e,i),u=pa(n);ct.ael(o,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>ct.rel(o,s,l,u))})},da=(c,e)=>t=>{try{Qt.lazyLoad||c.$hostElement$[e](t)}catch(r){Cr(r)}},ma=(c,e)=>e&4?Pt:e&8?ln:e&16?Pt.body:c,pa=c=>ba?{passive:(c&1)!==0,capture:(c&2)!==0}:(c&2)!==0,ks=new WeakMap,Nr=c=>ks.get(c),ga=(c,e)=>{const t={$flags$:0,$hostElement$:c,$cmpMeta$:e,$instanceValues$:new Map};return Ts(c,t,e.$listeners$),ks.set(c,t)},ss=(c,e)=>e in c,Cr=(c,e)=>(0,console.error)(c,e),an=new Map,ya=[],ln=typeof window<"u"?window:{},Pt=ln.document||{head:{}},va=ln.HTMLElement||class{},ct={$flags$:0,$resourcesUrl$:"",jmp:c=>c(),raf:c=>requestAnimationFrame(c),ael:(c,e,t,r)=>c.addEventListener(e,t,r),rel:(c,e,t,r)=>c.removeEventListener(e,t,r),ce:(c,e)=>new CustomEvent(c,e)},ba=(()=>{let c=!1;try{Pt.addEventListener("e",null,Object.defineProperty({},"passive",{get(){c=!0}}))}catch{}return c})(),wa=c=>Promise.resolve(c),_a=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),is=[],Ss=[],Ea=(c,e)=>t=>{c.push(t),wn||(wn=!0,e&&ct.$flags$&4?Ta(_n):ct.raf(_n))},as=c=>{for(let e=0;e<c.length;e++)try{c[e](performance.now())}catch(t){Cr(t)}c.length=0},_n=()=>{as(is),as(Ss),(wn=is.length>0)&&ct.raf(_n)},Ta=c=>wa().then(c),ka=Ea(Ss,!0),Or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function xs(){throw new Error("setTimeout has not been defined")}function Ps(){throw new Error("clearTimeout has not been defined")}var Vt=xs,Zt=Ps;typeof Or.setTimeout=="function"&&(Vt=setTimeout);typeof Or.clearTimeout=="function"&&(Zt=clearTimeout);function $s(c){if(Vt===setTimeout)return setTimeout(c,0);if((Vt===xs||!Vt)&&setTimeout)return Vt=setTimeout,setTimeout(c,0);try{return Vt(c,0)}catch{try{return Vt.call(null,c,0)}catch{return Vt.call(this,c,0)}}}function Sa(c){if(Zt===clearTimeout)return clearTimeout(c);if((Zt===Ps||!Zt)&&clearTimeout)return Zt=clearTimeout,clearTimeout(c);try{return Zt(c)}catch{try{return Zt.call(null,c)}catch{return Zt.call(this,c)}}}var zt=[],wr=!1,ar,en=-1;function xa(){!wr||!ar||(wr=!1,ar.length?zt=ar.concat(zt):en=-1,zt.length&&Ds())}function Ds(){if(!wr){var c=$s(xa);wr=!0;for(var e=zt.length;e;){for(ar=zt,zt=[];++en<e;)ar&&ar[en].run();en=-1,e=zt.length}ar=null,wr=!1,Sa(c)}}function Pa(c){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];zt.push(new As(c,e)),zt.length===1&&!wr&&$s(Ds)}function As(c,e){this.fun=c,this.array=e}As.prototype.run=function(){this.fun.apply(null,this.array)};var $a="browser",Da="browser",Aa=!0,Ia={},Ra=[],ja="",Oa={},Na={},Ca={};function lr(){}var Ba=lr,Fa=lr,La=lr,Ma=lr,za=lr,qa=lr,Ua=lr;function Wa(c){throw new Error("process.binding is not supported")}function Ga(){return"/"}function Ha(c){throw new Error("process.chdir is not supported")}function Ka(){return 0}var vr=Or.performance||{},Ya=vr.now||vr.mozNow||vr.msNow||vr.oNow||vr.webkitNow||function(){return new Date().getTime()};function Va(c){var e=Ya.call(vr)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return c&&(t=t-c[0],r=r-c[1],r<0&&(t--,r+=1e9)),[t,r]}var Za=new Date;function Qa(){var c=new Date,e=c-Za;return e/1e3}var Xa={nextTick:Pa,title:$a,browser:Aa,env:Ia,argv:Ra,version:ja,versions:Oa,on:Ba,addListener:Fa,once:La,off:Ma,removeListener:za,removeAllListeners:qa,emit:Ua,binding:Wa,cwd:Ga,chdir:Ha,umask:Ka,hrtime:Va,platform:Da,release:Na,config:Ca,uptime:Qa};const ir=Xa,Ja="/Volumes/Development_Lacie/Development/new/jeep-sqlite/node_modules/sql.js/dist";var Rt=[],_t=[],eo=typeof Uint8Array<"u"?Uint8Array:Array,$n=!1;function Is(){$n=!0;for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=c.length;e<t;++e)Rt[e]=c[e],_t[c.charCodeAt(e)]=e;_t["-".charCodeAt(0)]=62,_t["_".charCodeAt(0)]=63}function to(c){$n||Is();var e,t,r,n,s,i,o=c.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=c[o-2]==="="?2:c[o-1]==="="?1:0,i=new eo(o*3/4-s),r=s>0?o-4:o;var l=0;for(e=0,t=0;e<r;e+=4,t+=3)n=_t[c.charCodeAt(e)]<<18|_t[c.charCodeAt(e+1)]<<12|_t[c.charCodeAt(e+2)]<<6|_t[c.charCodeAt(e+3)],i[l++]=n>>16&255,i[l++]=n>>8&255,i[l++]=n&255;return s===2?(n=_t[c.charCodeAt(e)]<<2|_t[c.charCodeAt(e+1)]>>4,i[l++]=n&255):s===1&&(n=_t[c.charCodeAt(e)]<<10|_t[c.charCodeAt(e+1)]<<4|_t[c.charCodeAt(e+2)]>>2,i[l++]=n>>8&255,i[l++]=n&255),i}function ro(c){return Rt[c>>18&63]+Rt[c>>12&63]+Rt[c>>6&63]+Rt[c&63]}function no(c,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(c[s]<<16)+(c[s+1]<<8)+c[s+2],n.push(ro(r));return n.join("")}function os(c){$n||Is();for(var e,t=c.length,r=t%3,n="",s=[],i=16383,o=0,l=t-r;o<l;o+=i)s.push(no(c,o,o+i>l?l:o+i));return r===1?(e=c[t-1],n+=Rt[e>>2],n+=Rt[e<<4&63],n+="=="):r===2&&(e=(c[t-2]<<8)+c[t-1],n+=Rt[e>>10],n+=Rt[e>>4&63],n+=Rt[e<<2&63],n+="="),s.push(n),s.join("")}function un(c,e,t,r,n){var s,i,o=n*8-r-1,l=(1<<o)-1,u=l>>1,g=-7,h=t?n-1:0,v=t?-1:1,p=c[e+h];for(h+=v,s=p&(1<<-g)-1,p>>=-g,g+=o;g>0;s=s*256+c[e+h],h+=v,g-=8);for(i=s&(1<<-g)-1,s>>=-g,g+=r;g>0;i=i*256+c[e+h],h+=v,g-=8);if(s===0)s=1-u;else{if(s===l)return i?NaN:(p?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-u}return(p?-1:1)*i*Math.pow(2,s-r)}function Rs(c,e,t,r,n,s){var i,o,l,u=s*8-n-1,g=(1<<u)-1,h=g>>1,v=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,_=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=g):(i=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+h>=1?e+=v/l:e+=v*Math.pow(2,1-h),e*l>=2&&(i++,l/=2),i+h>=g?(o=0,i=g):i+h>=1?(o=(e*l-1)*Math.pow(2,n),i=i+h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),i=0));n>=8;c[t+p]=o&255,p+=_,o/=256,n-=8);for(i=i<<n|o,u+=n;u>0;c[t+p]=i&255,p+=_,i/=256,u-=8);c[t+p-_]|=b*128}var so={}.toString,js=Array.isArray||function(c){return so.call(c)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var io=50;re.TYPED_ARRAY_SUPPORT=Or.TYPED_ARRAY_SUPPORT!==void 0?Or.TYPED_ARRAY_SUPPORT:!0;function En(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function qt(c,e){if(En()<e)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(c=new Uint8Array(e),c.__proto__=re.prototype):(c===null&&(c=new re(e)),c.length=e),c}function re(c,e,t){if(!re.TYPED_ARRAY_SUPPORT&&!(this instanceof re))return new re(c,e,t);if(typeof c=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return Dn(this,c)}return Os(this,c,e,t)}re.poolSize=8192;re._augment=function(c){return c.__proto__=re.prototype,c};function Os(c,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?co(c,e,t,r):typeof e=="string"?oo(c,e,t):lo(c,e)}re.from=function(c,e,t){return Os(null,c,e,t)};re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array);function Ns(c){if(typeof c!="number")throw new TypeError('"size" argument must be a number');if(c<0)throw new RangeError('"size" argument must not be negative')}function ao(c,e,t,r){return Ns(e),e<=0?qt(c,e):t!==void 0?typeof r=="string"?qt(c,e).fill(t,r):qt(c,e).fill(t):qt(c,e)}re.alloc=function(c,e,t){return ao(null,c,e,t)};function Dn(c,e){if(Ns(e),c=qt(c,e<0?0:An(e)|0),!re.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)c[t]=0;return c}re.allocUnsafe=function(c){return Dn(null,c)};re.allocUnsafeSlow=function(c){return Dn(null,c)};function oo(c,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=Cs(e,t)|0;c=qt(c,r);var n=c.write(e,t);return n!==r&&(c=c.slice(0,n)),c}function Tn(c,e){var t=e.length<0?0:An(e.length)|0;c=qt(c,t);for(var r=0;r<t;r+=1)c[r]=e[r]&255;return c}function co(c,e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),re.TYPED_ARRAY_SUPPORT?(c=e,c.__proto__=re.prototype):c=Tn(c,e),c}function lo(c,e){if(jt(e)){var t=An(e.length)|0;return c=qt(c,t),c.length===0||e.copy(c,0,0,t),c}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Do(e.length)?qt(c,0):Tn(c,e);if(e.type==="Buffer"&&js(e.data))return Tn(c,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function An(c){if(c>=En())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+En().toString(16)+" bytes");return c|0}re.isBuffer=Ao;function jt(c){return!!(c!=null&&c._isBuffer)}re.compare=function(e,t){if(!jt(e)||!jt(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0};re.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(e,t){if(!js(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return re.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=re.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(!jt(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s),s+=i.length}return n};function Cs(c,e){if(jt(c))return c.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(c)||c instanceof ArrayBuffer))return c.byteLength;typeof c!="string"&&(c=""+c);var t=c.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return on(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Us(c).length;default:if(r)return on(c).length;e=(""+e).toLowerCase(),r=!0}}re.byteLength=Cs;function uo(c,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(c||(c="utf8");;)switch(c){case"hex":return _o(this,e,t);case"utf8":case"utf-8":return Ls(this,e,t);case"ascii":return bo(this,e,t);case"latin1":case"binary":return wo(this,e,t);case"base64":return yo(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Eo(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),r=!0}}re.prototype._isBuffer=!0;function or(c,e,t){var r=c[e];c[e]=c[t],c[t]=r}re.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)or(this,t,t+1);return this};re.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)or(this,t,t+3),or(this,t+1,t+2);return this};re.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)or(this,t,t+7),or(this,t+1,t+6),or(this,t+2,t+5),or(this,t+3,t+4);return this};re.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Ls(this,0,e):uo.apply(this,arguments)};re.prototype.equals=function(e){if(!jt(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:re.compare(this,e)===0};re.prototype.inspect=function(){var e="",t=io;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};re.prototype.compare=function(e,t,r,n,s){if(!jt(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var i=s-n,o=r-t,l=Math.min(i,o),u=this.slice(n,s),g=e.slice(t,r),h=0;h<l;++h)if(u[h]!==g[h]){i=u[h],o=g[h];break}return i<o?-1:o<i?1:0};function Bs(c,e,t,r,n){if(c.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:c.length-1),t<0&&(t=c.length+t),t>=c.length){if(n)return-1;t=c.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=re.from(e,r)),jt(e))return e.length===0?-1:cs(c,e,t,r,n);if(typeof e=="number")return e=e&255,re.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(c,e,t):Uint8Array.prototype.lastIndexOf.call(c,e,t):cs(c,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function cs(c,e,t,r,n){var s=1,i=c.length,o=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(c.length<2||e.length<2)return-1;s=2,i/=2,o/=2,t/=2}function l(p,_){return s===1?p[_]:p.readUInt16BE(_*s)}var u;if(n){var g=-1;for(u=t;u<i;u++)if(l(c,u)===l(e,g===-1?0:u-g)){if(g===-1&&(g=u),u-g+1===o)return g*s}else g!==-1&&(u-=u-g),g=-1}else for(t+o>i&&(t=i-o),u=t;u>=0;u--){for(var h=!0,v=0;v<o;v++)if(l(c,u+v)!==l(e,v)){h=!1;break}if(h)return u}return-1}re.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};re.prototype.indexOf=function(e,t,r){return Bs(this,e,t,r,!0)};re.prototype.lastIndexOf=function(e,t,r){return Bs(this,e,t,r,!1)};function fo(c,e,t,r){t=Number(t)||0;var n=c.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var o=parseInt(e.substr(i*2,2),16);if(isNaN(o))return i;c[t+i]=o}return i}function ho(c,e,t,r){return dn(on(e,c.length-t),c,t,r)}function Fs(c,e,t,r){return dn(Po(e),c,t,r)}function mo(c,e,t,r){return Fs(c,e,t,r)}function po(c,e,t,r){return dn(Us(e),c,t,r)}function go(c,e,t,r){return dn($o(e,c.length-t),c,t,r)}re.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return fo(this,e,t,r);case"utf8":case"utf-8":return ho(this,e,t,r);case"ascii":return Fs(this,e,t,r);case"latin1":case"binary":return mo(this,e,t,r);case"base64":return po(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return go(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function yo(c,e,t){return e===0&&t===c.length?os(c):os(c.slice(e,t))}function Ls(c,e,t){t=Math.min(c.length,t);for(var r=[],n=e;n<t;){var s=c[n],i=null,o=s>239?4:s>223?3:s>191?2:1;if(n+o<=t){var l,u,g,h;switch(o){case 1:s<128&&(i=s);break;case 2:l=c[n+1],(l&192)===128&&(h=(s&31)<<6|l&63,h>127&&(i=h));break;case 3:l=c[n+1],u=c[n+2],(l&192)===128&&(u&192)===128&&(h=(s&15)<<12|(l&63)<<6|u&63,h>2047&&(h<55296||h>57343)&&(i=h));break;case 4:l=c[n+1],u=c[n+2],g=c[n+3],(l&192)===128&&(u&192)===128&&(g&192)===128&&(h=(s&15)<<18|(l&63)<<12|(u&63)<<6|g&63,h>65535&&h<1114112&&(i=h))}}i===null?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),n+=o}return vo(r)}var ls=4096;function vo(c){var e=c.length;if(e<=ls)return String.fromCharCode.apply(String,c);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,c.slice(r,r+=ls));return t}function bo(c,e,t){var r="";t=Math.min(c.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(c[n]&127);return r}function wo(c,e,t){var r="";t=Math.min(c.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(c[n]);return r}function _o(c,e,t){var r=c.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",s=e;s<t;++s)n+=xo(c[s]);return n}function Eo(c,e,t){for(var r=c.slice(e,t),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}re.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(re.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=re.prototype;else{var s=t-e;n=new re(s,void 0);for(var i=0;i<s;++i)n[i]=this[i+e]}return n};function nt(c,e,t){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+e>t)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||nt(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n};re.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||nt(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};re.prototype.readUInt8=function(e,t){return t||nt(e,1,this.length),this[e]};re.prototype.readUInt16LE=function(e,t){return t||nt(e,2,this.length),this[e]|this[e+1]<<8};re.prototype.readUInt16BE=function(e,t){return t||nt(e,2,this.length),this[e]<<8|this[e+1]};re.prototype.readUInt32LE=function(e,t){return t||nt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};re.prototype.readUInt32BE=function(e,t){return t||nt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};re.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||nt(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};re.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||nt(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};re.prototype.readInt8=function(e,t){return t||nt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};re.prototype.readInt16LE=function(e,t){t||nt(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};re.prototype.readInt16BE=function(e,t){t||nt(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};re.prototype.readInt32LE=function(e,t){return t||nt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};re.prototype.readInt32BE=function(e,t){return t||nt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};re.prototype.readFloatLE=function(e,t){return t||nt(e,4,this.length),un(this,e,!0,23,4)};re.prototype.readFloatBE=function(e,t){return t||nt(e,4,this.length),un(this,e,!1,23,4)};re.prototype.readDoubleLE=function(e,t){return t||nt(e,8,this.length),un(this,e,!0,52,8)};re.prototype.readDoubleBE=function(e,t){return t||nt(e,8,this.length),un(this,e,!1,52,8)};function mt(c,e,t,r,n,s){if(!jt(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>c.length)throw new RangeError("Index out of range")}re.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;mt(this,e,t,r,s,0)}var i=1,o=0;for(this[t]=e&255;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r};re.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;mt(this,e,t,r,s,0)}var i=r-1,o=1;for(this[t+i]=e&255;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r};re.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,1,255,0),re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function fn(c,e,t,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(c.length-t,2);n<s;++n)c[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}re.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):fn(this,e,t,!0),t+2};re.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):fn(this,e,t,!1),t+2};function hn(c,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(c.length-t,4);n<s;++n)c[t+n]=e>>>(r?n:3-n)*8&255}re.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):hn(this,e,t,!0),t+4};re.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hn(this,e,t,!1),t+4};re.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);mt(this,e,t,r,s-1,-s)}var i=0,o=1,l=0;for(this[t]=e&255;++i<r&&(o*=256);)e<0&&l===0&&this[t+i-1]!==0&&(l=1),this[t+i]=(e/o>>0)-l&255;return t+r};re.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);mt(this,e,t,r,s-1,-s)}var i=r-1,o=1,l=0;for(this[t+i]=e&255;--i>=0&&(o*=256);)e<0&&l===0&&this[t+i+1]!==0&&(l=1),this[t+i]=(e/o>>0)-l&255;return t+r};re.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,1,127,-128),re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};re.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):fn(this,e,t,!0),t+2};re.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):fn(this,e,t,!1),t+2};re.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):hn(this,e,t,!0),t+4};re.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||mt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):hn(this,e,t,!1),t+4};function Ms(c,e,t,r,n,s){if(t+r>c.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function zs(c,e,t,r,n){return n||Ms(c,e,t,4),Rs(c,e,t,r,23,4),t+4}re.prototype.writeFloatLE=function(e,t,r){return zs(this,e,t,!0,r)};re.prototype.writeFloatBE=function(e,t,r){return zs(this,e,t,!1,r)};function qs(c,e,t,r,n){return n||Ms(c,e,t,8),Rs(c,e,t,r,52,8),t+8}re.prototype.writeDoubleLE=function(e,t,r){return qs(this,e,t,!0,r)};re.prototype.writeDoubleBE=function(e,t,r){return qs(this,e,t,!1,r)};re.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r,i;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!re.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};re.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!re.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var i;if(typeof e=="number")for(i=t;i<r;++i)this[i]=e;else{var o=jt(e)?e:on(new re(e,n).toString()),l=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var To=/[^+\/0-9A-Za-z-_]/g;function ko(c){if(c=So(c).replace(To,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function So(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function xo(c){return c<16?"0"+c.toString(16):c.toString(16)}function on(c,e){e=e||1/0;for(var t,r=c.length,n=null,s=[],i=0;i<r;++i){if(t=c.charCodeAt(i),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Po(c){for(var e=[],t=0;t<c.length;++t)e.push(c.charCodeAt(t)&255);return e}function $o(c,e){for(var t,r,n,s=[],i=0;i<c.length&&!((e-=2)<0);++i)t=c.charCodeAt(i),r=t>>8,n=t%256,s.push(n),s.push(r);return s}function Us(c){return to(ko(c))}function dn(c,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=c.length);++n)e[n+t]=c[n];return n}function Do(c){return c!==c}function Ao(c){return c!=null&&(!!c._isBuffer||Ws(c)||Io(c))}function Ws(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function Io(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&Ws(c.slice(0,0))}var Xt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gs(c){if(c.__esModule)return c;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(c).forEach(function(t){var r=Object.getOwnPropertyDescriptor(c,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return c[t]}})}),e}function Jt(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hs={exports:{}};const Ro={},jo=Object.freeze({__proto__:null,default:Ro}),Oo=Gs(jo);function Ks(c,e){for(var t=0,r=c.length-1;r>=0;r--){var n=c[r];n==="."?c.splice(r,1):n===".."?(c.splice(r,1),t++):t&&(c.splice(r,1),t--)}if(e)for(;t--;t)c.unshift("..");return c}var No=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,In=function(c){return No.exec(c).slice(1)};function cn(){for(var c="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;c=r+"/"+c,e=r.charAt(0)==="/"}return c=Ks(On(c.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+c||"."}function Rn(c){var e=jn(c),t=Bo(c,-1)==="/";return c=Ks(On(c.split("/"),function(r){return!!r}),!e).join("/"),!c&&!e&&(c="."),c&&t&&(c+="/"),(e?"/":"")+c}function jn(c){return c.charAt(0)==="/"}function Ys(){var c=Array.prototype.slice.call(arguments,0);return Rn(On(c,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Vs(c,e){c=cn(c).substr(1),e=cn(e).substr(1);function t(u){for(var g=0;g<u.length&&u[g]==="";g++);for(var h=u.length-1;h>=0&&u[h]==="";h--);return g>h?[]:u.slice(g,h-g+1)}for(var r=t(c.split("/")),n=t(e.split("/")),s=Math.min(r.length,n.length),i=s,o=0;o<s;o++)if(r[o]!==n[o]){i=o;break}for(var l=[],o=i;o<r.length;o++)l.push("..");return l=l.concat(n.slice(i)),l.join("/")}var Zs="/",Qs=":";function Xs(c){var e=In(c),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function Js(c,e){var t=In(c)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function ei(c){return In(c)[3]}const Co={extname:ei,basename:Js,dirname:Xs,sep:Zs,delimiter:Qs,relative:Vs,join:Ys,isAbsolute:jn,normalize:Rn,resolve:cn};function On(c,e){if(c.filter)return c.filter(e);for(var t=[],r=0;r<c.length;r++)e(c[r],r,c)&&t.push(c[r]);return t}var Bo="ab".substr(-1)==="b"?function(c,e,t){return c.substr(e,t)}:function(c,e,t){return e<0&&(e=c.length+e),c.substr(e,t)};const Fo=Object.freeze({__proto__:null,resolve:cn,normalize:Rn,isAbsolute:jn,join:Ys,relative:Vs,sep:Zs,delimiter:Qs,dirname:Xs,basename:Js,extname:ei,default:Co}),Lo=Gs(Fo);(function(c,e){var t=void 0,r=function(n){return t||(t=new Promise(function(s,i){var o=typeof n<"u"?n:{},l=o.onAbort;o.onAbort=function(a){i(new Error(a)),l&&l(a)},o.postRun=o.postRun||[],o.postRun.push(function(){s(o)}),c=void 0;var u;u||(u=typeof o<"u"?o:{}),u.onRuntimeInitialized=function(){function a(q,oe){switch(typeof oe){case"boolean":Ii(q,oe?1:0);break;case"number":$i(q,oe);break;case"string":Di(q,oe,-1,-1);break;case"object":if(oe===null)Gn(q);else if(oe.length!=null){var Te=Ht(oe,pr);Ai(q,Te,oe.length,-1),Zr(Te)}else Xr(q,"Wrong API use : tried to return a value of an unknown type ("+oe+").",-1);break;default:Gn(q)}}function f(q,oe){for(var Te=[],$e=0;$e<q;$e+=1){var Ne=H(oe+4*$e,"i32"),Ge=Ti(Ne);if(Ge===1||Ge===2)Ne=Pi(Ne);else if(Ge===3)Ne=Si(Ne);else if(Ge===4){Ge=Ne,Ne=ki(Ge),Ge=xi(Ge);for(var kt=new Uint8Array(Ne),wt=0;wt<Ne;wt+=1)kt[wt]=J[Ge+wt];Ne=kt}else Ne=null;Te.push(Ne)}return Te}function d(q,oe){this.La=q,this.db=oe,this.Ja=1,this.fb=[]}function E(q,oe){if(this.db=oe,oe=Xe(q)+1,this.Ya=Vr(oe),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");lt(q,he,this.Ya,oe),this.eb=this.Ya,this.Ua=this.ib=null}function I(q){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),q!=null){var oe=this.filename,Te="/",$e=oe;if(Te&&(Te=typeof Te=="string"?Te:rr(Te),$e=oe?M(Te+"/"+oe):Te),oe=ur(!0,!0),$e=fr($e,(oe!==void 0?oe:438)&4095|32768,0),q){if(typeof q=="string"){Te=Array(q.length);for(var Ne=0,Ge=q.length;Ne<Ge;++Ne)Te[Ne]=q.charCodeAt(Ne);q=Te}dr($e,oe|146),Te=At($e,577),Kr(Te,q,0,q.length,0),xr(Te),dr($e,oe)}}this.handleError(Pe(this.filename,Y)),this.db=H(Y,"i32"),Kn(this.db),this.Za={},this.Na={}}var Y=Yt(4),ee=u.cwrap,Pe=ee("sqlite3_open","number",["string","number"]),Le=ee("sqlite3_close_v2","number",["number"]),je=ee("sqlite3_exec","number",["number","string","number","number","number"]),et=ee("sqlite3_changes","number",["number"]),rt=ee("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Mn=ee("sqlite3_sql","string",["number"]),ai=ee("sqlite3_normalized_sql","string",["number"]),zn=ee("sqlite3_prepare_v2","number",["number","number","number","number","number"]),oi=ee("sqlite3_bind_text","number",["number","number","number","number","number"]),qn=ee("sqlite3_bind_blob","number",["number","number","number","number","number"]),ci=ee("sqlite3_bind_double","number",["number","number","number"]),li=ee("sqlite3_bind_int","number",["number","number","number"]),ui=ee("sqlite3_bind_parameter_index","number",["number","string"]),fi=ee("sqlite3_step","number",["number"]),hi=ee("sqlite3_errmsg","string",["number"]),di=ee("sqlite3_column_count","number",["number"]),mi=ee("sqlite3_data_count","number",["number"]),pi=ee("sqlite3_column_double","number",["number","number"]),Un=ee("sqlite3_column_text","string",["number","number"]),gi=ee("sqlite3_column_blob","number",["number","number"]),yi=ee("sqlite3_column_bytes","number",["number","number"]),vi=ee("sqlite3_column_type","number",["number","number"]),bi=ee("sqlite3_column_name","string",["number","number"]),wi=ee("sqlite3_reset","number",["number"]),_i=ee("sqlite3_clear_bindings","number",["number"]),Ei=ee("sqlite3_finalize","number",["number"]),Wn=ee("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Ti=ee("sqlite3_value_type","number",["number"]),ki=ee("sqlite3_value_bytes","number",["number"]),Si=ee("sqlite3_value_text","string",["number"]),xi=ee("sqlite3_value_blob","number",["number"]),Pi=ee("sqlite3_value_double","number",["number"]),$i=ee("sqlite3_result_double","",["number","number"]),Gn=ee("sqlite3_result_null","",["number"]),Di=ee("sqlite3_result_text","",["number","string","number","number"]),Ai=ee("sqlite3_result_blob","",["number","number","number","number"]),Ii=ee("sqlite3_result_int","",["number","number"]),Xr=ee("sqlite3_result_error","",["number","string","number"]),Hn=ee("sqlite3_aggregate_context","number",["number","number"]),Kn=ee("RegisterExtensionFunctions","number",["number"]);d.prototype.bind=function(q){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(q)?this.wb(q):q!=null&&typeof q=="object"?this.xb(q):!0},d.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var q=fi(this.La);switch(q){case 100:return!0;case 101:return!1;default:throw this.db.handleError(q)}},d.prototype.rb=function(q){return q==null&&(q=this.Ja,this.Ja+=1),pi(this.La,q)},d.prototype.Ab=function(q){if(q==null&&(q=this.Ja,this.Ja+=1),q=Un(this.La,q),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(q)},d.prototype.Bb=function(q){return q==null&&(q=this.Ja,this.Ja+=1),Un(this.La,q)},d.prototype.getBlob=function(q){q==null&&(q=this.Ja,this.Ja+=1);var oe=yi(this.La,q);q=gi(this.La,q);for(var Te=new Uint8Array(oe),$e=0;$e<oe;$e+=1)Te[$e]=J[q+$e];return Te},d.prototype.get=function(q,oe){oe=oe||{},q!=null&&this.bind(q)&&this.step(),q=[];for(var Te=mi(this.La),$e=0;$e<Te;$e+=1)switch(vi(this.La,$e)){case 1:var Ne=oe.useBigInt?this.Ab($e):this.rb($e);q.push(Ne);break;case 2:q.push(this.rb($e));break;case 3:q.push(this.Bb($e));break;case 4:q.push(this.getBlob($e));break;default:q.push(null)}return q},d.prototype.getColumnNames=function(){for(var q=[],oe=di(this.La),Te=0;Te<oe;Te+=1)q.push(bi(this.La,Te));return q},d.prototype.getAsObject=function(q,oe){q=this.get(q,oe),oe=this.getColumnNames();for(var Te={},$e=0;$e<oe.length;$e+=1)Te[oe[$e]]=q[$e];return Te},d.prototype.getSQL=function(){return Mn(this.La)},d.prototype.getNormalizedSQL=function(){return ai(this.La)},d.prototype.run=function(q){return q!=null&&this.bind(q),this.step(),this.reset()},d.prototype.nb=function(q,oe){oe==null&&(oe=this.Ja,this.Ja+=1),q=it(q);var Te=Ht(q,pr);this.fb.push(Te),this.db.handleError(oi(this.La,oe,Te,q.length-1,0))},d.prototype.vb=function(q,oe){oe==null&&(oe=this.Ja,this.Ja+=1);var Te=Ht(q,pr);this.fb.push(Te),this.db.handleError(qn(this.La,oe,Te,q.length,0))},d.prototype.mb=function(q,oe){oe==null&&(oe=this.Ja,this.Ja+=1),this.db.handleError((q===(q|0)?li:ci)(this.La,oe,q))},d.prototype.yb=function(q){q==null&&(q=this.Ja,this.Ja+=1),qn(this.La,q,0,0,0)},d.prototype.ob=function(q,oe){switch(oe==null&&(oe=this.Ja,this.Ja+=1),typeof q){case"string":this.nb(q,oe);return;case"number":this.mb(q,oe);return;case"bigint":this.nb(q.toString(),oe);return;case"boolean":this.mb(q+0,oe);return;case"object":if(q===null){this.yb(oe);return}if(q.length!=null){this.vb(q,oe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+q+")."},d.prototype.xb=function(q){var oe=this;return Object.keys(q).forEach(function(Te){var $e=ui(oe.La,Te);$e!==0&&oe.ob(q[Te],$e)}),!0},d.prototype.wb=function(q){for(var oe=0;oe<q.length;oe+=1)this.ob(q[oe],oe+1);return!0},d.prototype.reset=function(){return this.freemem(),_i(this.La)===0&&wi(this.La)===0},d.prototype.freemem=function(){for(var q;(q=this.fb.pop())!==void 0;)Zr(q)},d.prototype.free=function(){this.freemem();var q=Ei(this.La)===0;return delete this.db.Za[this.La],this.La=0,q},E.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var q=Dr(),oe=Yt(4);$(Y),$(oe);try{this.db.handleError(zn(this.db.db,this.eb,-1,Y,oe)),this.eb=H(oe,"i32");var Te=H(Y,"i32");return Te===0?(this.gb(),{done:!0}):(this.Ua=new d(Te,this.db),this.db.Za[Te]=this.Ua,{value:this.Ua,done:!1})}catch($e){throw this.ib=te(this.eb),this.gb(),$e}finally{Ar(q)}},E.prototype.gb=function(){Zr(this.Ya),this.Ya=null},E.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:te(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(E.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(q,oe){if(!this.db)throw"Database closed";if(oe){q=this.prepare(q,oe);try{q.step()}finally{q.free()}}else this.handleError(je(this.db,q,0,0,Y));return this},I.prototype.exec=function(q,oe,Te){if(!this.db)throw"Database closed";var $e=Dr(),Ne=null;try{var Ge=Ft(q),kt=Yt(4);for(q=[];H(Ge,"i8")!==0;){$(Y),$(kt),this.handleError(zn(this.db,Ge,-1,Y,kt));var wt=H(Y,"i32");if(Ge=H(kt,"i32"),wt!==0){var yt=null;for(Ne=new d(wt,this),oe!=null&&Ne.bind(oe);Ne.step();)yt===null&&(yt={columns:Ne.getColumnNames(),values:[]},q.push(yt)),yt.values.push(Ne.get(null,Te));Ne.free()}}return q}catch(St){throw Ne&&Ne.free(),St}finally{Ar($e)}},I.prototype.each=function(q,oe,Te,$e,Ne){typeof oe=="function"&&($e=Te,Te=oe,oe=void 0),q=this.prepare(q,oe);try{for(;q.step();)Te(q.getAsObject(null,Ne))}finally{q.free()}if(typeof $e=="function")return $e()},I.prototype.prepare=function(q,oe){if($(Y),this.handleError(rt(this.db,q,-1,Y,0)),q=H(Y,"i32"),q===0)throw"Nothing to prepare";var Te=new d(q,this);return oe!=null&&Te.bind(oe),this.Za[q]=Te},I.prototype.iterateStatements=function(q){return new E(q,this)},I.prototype.export=function(){Object.values(this.Za).forEach(function(oe){oe.free()}),Object.values(this.Na).forEach(Lt),this.Na={},this.handleError(Le(this.db));var q=yn(this.filename);return this.handleError(Pe(this.filename,Y)),this.db=H(Y,"i32"),Kn(this.db),q},I.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(q){q.free()}),Object.values(this.Na).forEach(Lt),this.Na={},this.handleError(Le(this.db)),Sr("/"+this.filename),this.db=null)},I.prototype.handleError=function(q){if(q===0)return null;throw q=hi(this.db),Error(q)},I.prototype.getRowsModified=function(){return et(this.db)},I.prototype.create_function=function(q,oe){Object.prototype.hasOwnProperty.call(this.Na,q)&&(Lt(this.Na[q]),delete this.Na[q]);var Te=Yr(function($e,Ne,Ge){Ne=f(Ne,Ge);try{var kt=oe.apply(null,Ne)}catch(wt){Xr($e,wt,-1);return}a($e,kt)},"viii");return this.Na[q]=Te,this.handleError(Wn(this.db,q,oe.length,1,0,Te,0,0,0)),this},I.prototype.create_aggregate=function(q,oe){var Te=oe.init||function(){return null},$e=oe.finalize||function(yt){return yt},Ne=oe.step;if(!Ne)throw"An aggregate function must have a step function in "+q;var Ge={};Object.hasOwnProperty.call(this.Na,q)&&(Lt(this.Na[q]),delete this.Na[q]),oe=q+"__finalize",Object.hasOwnProperty.call(this.Na,oe)&&(Lt(this.Na[oe]),delete this.Na[oe]);var kt=Yr(function(yt,St,vn){var sr=Hn(yt,1);Object.hasOwnProperty.call(Ge,sr)||(Ge[sr]=Te()),St=f(St,vn),St=[Ge[sr]].concat(St);try{Ge[sr]=Ne.apply(null,St)}catch(Ri){delete Ge[sr],Xr(yt,Ri,-1)}},"viii"),wt=Yr(function(yt){var St=Hn(yt,1);try{var vn=$e(Ge[St])}catch(sr){delete Ge[St],Xr(yt,sr,-1);return}a(yt,vn),delete Ge[St]},"vi");return this.Na[q]=kt,this.Na[oe]=wt,this.handleError(Wn(this.db,q,Ne.length-1,1,0,0,kt,wt,0)),this},u.Database=I};var g=Object.assign({},u),h="./this.program",v=typeof window=="object",p=typeof importScripts=="function",_=typeof ir=="object"&&typeof ir.versions=="object"&&typeof ir.versions.node=="string",b="",k,T,P;if(_){var j=Oo,L=Lo;b=p?L.dirname(b)+"/":Ja+"/",k=(a,f)=>(a=qe(a)?new URL(a):L.normalize(a),j.readFileSync(a,f?void 0:"utf8")),P=a=>(a=k(a,!0),a.buffer||(a=new Uint8Array(a)),a),T=(a,f,d,E=!0)=>{a=qe(a)?new URL(a):L.normalize(a),j.readFile(a,E?void 0:"utf8",(I,Y)=>{I?d(I):f(E?Y.buffer:Y)})},!u.thisProgram&&1<ir.argv.length&&(h=ir.argv[1].replace(/\\/g,"/")),c.exports=u,u.inspect=()=>"[Emscripten Module object]"}else(v||p)&&(p?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",k=a=>{var f=new XMLHttpRequest;return f.open("GET",a,!1),f.send(null),f.responseText},p&&(P=a=>{var f=new XMLHttpRequest;return f.open("GET",a,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),T=(a,f,d)=>{var E=new XMLHttpRequest;E.open("GET",a,!0),E.responseType="arraybuffer",E.onload=()=>{E.status==200||E.status==0&&E.response?f(E.response):d()},E.onerror=d,E.send(null)});var D=u.print||console.log.bind(console),G=u.printErr||console.error.bind(console);Object.assign(u,g),g=null,u.thisProgram&&(h=u.thisProgram);var z;u.wasmBinary&&(z=u.wasmBinary),typeof WebAssembly!="object"&&ye("no native wasm support detected");var Z,K=!1,J,he,A,F,y,X,Se;function ae(){var a=Z.buffer;u.HEAP8=J=new Int8Array(a),u.HEAP16=A=new Int16Array(a),u.HEAPU8=he=new Uint8Array(a),u.HEAPU16=new Uint16Array(a),u.HEAP32=F=new Int32Array(a),u.HEAPU32=y=new Uint32Array(a),u.HEAPF32=X=new Float32Array(a),u.HEAPF64=Se=new Float64Array(a)}var De=[],ue=[],xe=[];function W(){var a=u.preRun.shift();De.unshift(a)}var U=0,_e=null;function ye(a){var f;throw(f=u.onAbort)==null||f.call(u,a),a="Aborted("+a+")",G(a),K=!0,new WebAssembly.RuntimeError(a+". Build with -sASSERTIONS for more info.")}var ge=a=>a.startsWith("data:application/octet-stream;base64,"),qe=a=>a.startsWith("file://"),Ke;if(Ke="sql-wasm.wasm",!ge(Ke)){var Oe=Ke;Ke=u.locateFile?u.locateFile(Oe,b):b+Oe}function Be(a){if(a==Ke&&z)return new Uint8Array(z);if(P)return P(a);throw"both async and sync fetching of the wasm failed"}function Qe(a){if(!z&&(v||p)){if(typeof fetch=="function"&&!qe(a))return fetch(a,{credentials:"same-origin"}).then(f=>{if(!f.ok)throw"failed to load wasm binary file at '"+a+"'";return f.arrayBuffer()}).catch(()=>Be(a));if(T)return new Promise((f,d)=>{T(a,E=>f(new Uint8Array(E)),d)})}return Promise.resolve().then(()=>Be(a))}function We(a,f,d){return Qe(a).then(E=>WebAssembly.instantiate(E,f)).then(E=>E).then(d,E=>{G(`failed to asynchronously prepare wasm: ${E}`),ye(E)})}function ft(a,f){var d=Ke;z||typeof WebAssembly.instantiateStreaming!="function"||ge(d)||qe(d)||_||typeof fetch!="function"?We(d,a,f):fetch(d,{credentials:"same-origin"}).then(E=>WebAssembly.instantiateStreaming(E,a).then(f,function(I){return G(`wasm streaming compile failed: ${I}`),G("falling back to ArrayBuffer instantiation"),We(d,a,f)}))}var we,m,V=a=>{for(;0<a.length;)a.shift()(u)};function H(a,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":return J[a>>0];case"i8":return J[a>>0];case"i16":return A[a>>1];case"i32":return F[a>>2];case"i64":ye("to do getValue(i64) use WASM_BIGINT");case"float":return X[a>>2];case"double":return Se[a>>3];case"*":return y[a>>2];default:ye(`invalid type for getValue: ${f}`)}}function $(a){var f="i32";switch(f.endsWith("*")&&(f="*"),f){case"i1":J[a>>0]=0;break;case"i8":J[a>>0]=0;break;case"i16":A[a>>1]=0;break;case"i32":F[a>>2]=0;break;case"i64":ye("to do setValue(i64) use WASM_BIGINT");case"float":X[a>>2]=0;break;case"double":Se[a>>3]=0;break;case"*":y[a>>2]=0;break;default:ye(`invalid type for setValue: ${f}`)}}var x=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,O=(a,f,d)=>{var E=f+d;for(d=f;a[d]&&!(d>=E);)++d;if(16<d-f&&a.buffer&&x)return x.decode(a.subarray(f,d));for(E="";f<d;){var I=a[f++];if(I&128){var Y=a[f++]&63;if((I&224)==192)E+=String.fromCharCode((I&31)<<6|Y);else{var ee=a[f++]&63;I=(I&240)==224?(I&15)<<12|Y<<6|ee:(I&7)<<18|Y<<12|ee<<6|a[f++]&63,65536>I?E+=String.fromCharCode(I):(I-=65536,E+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else E+=String.fromCharCode(I)}return E},te=(a,f)=>a?O(he,a,f):"",se=(a,f)=>{for(var d=0,E=a.length-1;0<=E;E--){var I=a[E];I==="."?a.splice(E,1):I===".."?(a.splice(E,1),d++):d&&(a.splice(E,1),d--)}if(f)for(;d;d--)a.unshift("..");return a},M=a=>{var f=a.charAt(0)==="/",d=a.substr(-1)==="/";return(a=se(a.split("/").filter(E=>!!E),!f).join("/"))||f||(a="."),a&&d&&(a+="/"),(f?"/":"")+a},fe=a=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(a).slice(1);return a=f[0],f=f[1],!a&&!f?".":(f&&(f=f.substr(0,f.length-1)),a+f)},ve=a=>{if(a==="/")return"/";a=M(a),a=a.replace(/\/$/,"");var f=a.lastIndexOf("/");return f===-1?a:a.substr(f+1)},de=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return d=>crypto.getRandomValues(d);if(_)try{var a=require("crypto");if(a.randomFillSync)return d=>a.randomFillSync(d);var f=a.randomBytes;return d=>(d.set(f(d.byteLength)),d)}catch{}ye("initRandomDevice")},Ee=a=>(Ee=de())(a);function Fe(){for(var a="",f=!1,d=arguments.length-1;-1<=d&&!f;d--){if(f=0<=d?arguments[d]:"/",typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";a=f+"/"+a,f=f.charAt(0)==="/"}return a=se(a.split("/").filter(E=>!!E),!f).join("/"),(f?"/":"")+a||"."}var Ie=[],Xe=a=>{for(var f=0,d=0;d<a.length;++d){var E=a.charCodeAt(d);127>=E?f++:2047>=E?f+=2:55296<=E&&57343>=E?(f+=4,++d):f+=3}return f},lt=(a,f,d,E)=>{if(!(0<E))return 0;var I=d;E=d+E-1;for(var Y=0;Y<a.length;++Y){var ee=a.charCodeAt(Y);if(55296<=ee&&57343>=ee){var Pe=a.charCodeAt(++Y);ee=65536+((ee&1023)<<10)|Pe&1023}if(127>=ee){if(d>=E)break;f[d++]=ee}else{if(2047>=ee){if(d+1>=E)break;f[d++]=192|ee>>6}else{if(65535>=ee){if(d+2>=E)break;f[d++]=224|ee>>12}else{if(d+3>=E)break;f[d++]=240|ee>>18,f[d++]=128|ee>>12&63}f[d++]=128|ee>>6&63}f[d++]=128|ee&63}}return f[d]=0,d-I};function it(a,f){var d=Array(Xe(a)+1);return a=lt(a,d,0,d.length),f&&(d.length=a),d}var Et=[];function Ue(a,f){Et[a]={input:[],output:[],Xa:f},Tr(a,$t)}var $t={open(a){var f=Et[a.node.rdev];if(!f)throw new pe(43);a.tty=f,a.seekable=!1},close(a){a.tty.Xa.fsync(a.tty)},fsync(a){a.tty.Xa.fsync(a.tty)},read(a,f,d,E){if(!a.tty||!a.tty.Xa.sb)throw new pe(60);for(var I=0,Y=0;Y<E;Y++){try{var ee=a.tty.Xa.sb(a.tty)}catch{throw new pe(29)}if(ee===void 0&&I===0)throw new pe(6);if(ee==null)break;I++,f[d+Y]=ee}return I&&(a.node.timestamp=Date.now()),I},write(a,f,d,E){if(!a.tty||!a.tty.Xa.jb)throw new pe(60);try{for(var I=0;I<E;I++)a.tty.Xa.jb(a.tty,f[d+I])}catch{throw new pe(29)}return E&&(a.node.timestamp=Date.now()),I}},er={sb(){e:{if(!Ie.length){var a=null;if(_){var f=re.alloc(256),d=0,E=ir.stdin.fd;try{d=j.readSync(E,f)}catch(I){if(I.toString().includes("EOF"))d=0;else throw I}0<d?a=f.slice(0,d).toString("utf-8"):a=null}else typeof window<"u"&&typeof window.prompt=="function"?(a=window.prompt("Input: "),a!==null&&(a+=`
`)):typeof readline=="function"&&(a=readline(),a!==null&&(a+=`
`));if(!a){a=null;break e}Ie=it(a,!0)}a=Ie.shift()}return a},jb(a,f){f===null||f===10?(D(O(a.output,0)),a.output=[]):f!=0&&a.output.push(f)},fsync(a){a.output&&0<a.output.length&&(D(O(a.output,0)),a.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},pt={jb(a,f){f===null||f===10?(G(O(a.output,0)),a.output=[]):f!=0&&a.output.push(f)},fsync(a){a.output&&0<a.output.length&&(G(O(a.output,0)),a.output=[])}};function Ot(a,f){var d=a.Ia?a.Ia.length:0;d>=f||(f=Math.max(f,d*(1048576>d?2:1.125)>>>0),d!=0&&(f=Math.max(f,256)),d=a.Ia,a.Ia=new Uint8Array(f),0<a.Ma&&a.Ia.set(d.subarray(0,a.Ma),0))}var Ae={Qa:null,Ra(){return Ae.createNode(null,"/",16895,0)},createNode(a,f,d,E){if((d&61440)===24576||(d&61440)===4096)throw new pe(63);return Ae.Qa||(Ae.Qa={dir:{node:{Pa:Ae.Ga.Pa,Oa:Ae.Ga.Oa,lookup:Ae.Ga.lookup,ab:Ae.Ga.ab,rename:Ae.Ga.rename,unlink:Ae.Ga.unlink,rmdir:Ae.Ga.rmdir,readdir:Ae.Ga.readdir,symlink:Ae.Ga.symlink},stream:{Ta:Ae.Ha.Ta}},file:{node:{Pa:Ae.Ga.Pa,Oa:Ae.Ga.Oa},stream:{Ta:Ae.Ha.Ta,read:Ae.Ha.read,write:Ae.Ha.write,lb:Ae.Ha.lb,bb:Ae.Ha.bb,cb:Ae.Ha.cb}},link:{node:{Pa:Ae.Ga.Pa,Oa:Ae.Ga.Oa,readlink:Ae.Ga.readlink},stream:{}},pb:{node:{Pa:Ae.Ga.Pa,Oa:Ae.Ga.Oa},stream:gn}}),d=Lr(a,f,d,E),ut(d.mode)?(d.Ga=Ae.Qa.dir.node,d.Ha=Ae.Qa.dir.stream,d.Ia={}):(d.mode&61440)===32768?(d.Ga=Ae.Qa.file.node,d.Ha=Ae.Qa.file.stream,d.Ma=0,d.Ia=null):(d.mode&61440)===40960?(d.Ga=Ae.Qa.link.node,d.Ha=Ae.Qa.link.stream):(d.mode&61440)===8192&&(d.Ga=Ae.Qa.pb.node,d.Ha=Ae.Qa.pb.stream),d.timestamp=Date.now(),a&&(a.Ia[f]=d,a.timestamp=d.timestamp),d},Lb(a){return a.Ia?a.Ia.subarray?a.Ia.subarray(0,a.Ma):new Uint8Array(a.Ia):new Uint8Array(0)},Ga:{Pa(a){var f={};return f.dev=(a.mode&61440)===8192?a.id:1,f.ino=a.id,f.mode=a.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=a.rdev,ut(a.mode)?f.size=4096:(a.mode&61440)===32768?f.size=a.Ma:(a.mode&61440)===40960?f.size=a.link.length:f.size=0,f.atime=new Date(a.timestamp),f.mtime=new Date(a.timestamp),f.ctime=new Date(a.timestamp),f.zb=4096,f.blocks=Math.ceil(f.size/f.zb),f},Oa(a,f){if(f.mode!==void 0&&(a.mode=f.mode),f.timestamp!==void 0&&(a.timestamp=f.timestamp),f.size!==void 0&&(f=f.size,a.Ma!=f))if(f==0)a.Ia=null,a.Ma=0;else{var d=a.Ia;a.Ia=new Uint8Array(f),d&&a.Ia.set(d.subarray(0,Math.min(f,a.Ma))),a.Ma=f}},lookup(){throw _r[44]},ab(a,f,d,E){return Ae.createNode(a,f,d,E)},rename(a,f,d){if(ut(a.mode)){try{var E=Ct(f,d)}catch{}if(E)for(var I in E.Ia)throw new pe(55)}delete a.parent.Ia[a.name],a.parent.timestamp=Date.now(),a.name=d,f.Ia[d]=a,f.timestamp=a.parent.timestamp,a.parent=f},unlink(a,f){delete a.Ia[f],a.timestamp=Date.now()},rmdir(a,f){var d=Ct(a,f),E;for(E in d.Ia)throw new pe(55);delete a.Ia[f],a.timestamp=Date.now()},readdir(a){var f=[".",".."],d;for(d of Object.keys(a.Ia))f.push(d);return f},symlink(a,f,d){return a=Ae.createNode(a,f,41471,0),a.link=d,a},readlink(a){if((a.mode&61440)!==40960)throw new pe(28);return a.link}},Ha:{read(a,f,d,E,I){var Y=a.node.Ia;if(I>=a.node.Ma)return 0;if(a=Math.min(a.node.Ma-I,E),8<a&&Y.subarray)f.set(Y.subarray(I,I+a),d);else for(E=0;E<a;E++)f[d+E]=Y[I+E];return a},write(a,f,d,E,I,Y){if(f.buffer===J.buffer&&(Y=!1),!E)return 0;if(a=a.node,a.timestamp=Date.now(),f.subarray&&(!a.Ia||a.Ia.subarray)){if(Y)return a.Ia=f.subarray(d,d+E),a.Ma=E;if(a.Ma===0&&I===0)return a.Ia=f.slice(d,d+E),a.Ma=E;if(I+E<=a.Ma)return a.Ia.set(f.subarray(d,d+E),I),E}if(Ot(a,I+E),a.Ia.subarray&&f.subarray)a.Ia.set(f.subarray(d,d+E),I);else for(Y=0;Y<E;Y++)a.Ia[I+Y]=f[d+Y];return a.Ma=Math.max(a.Ma,I+E),E},Ta(a,f,d){if(d===1?f+=a.position:d===2&&(a.node.mode&61440)===32768&&(f+=a.node.Ma),0>f)throw new pe(28);return f},lb(a,f,d){Ot(a.node,f+d),a.node.Ma=Math.max(a.node.Ma,f+d)},bb(a,f,d,E,I){if((a.node.mode&61440)!==32768)throw new pe(43);if(a=a.node.Ia,I&2||a.buffer!==J.buffer){if((0<d||d+f<a.length)&&(a.subarray?a=a.subarray(d,d+f):a=Array.prototype.slice.call(a,d,d+f)),d=!0,f=65536*Math.ceil(f/65536),(I=Fn(65536,f))?(he.fill(0,I,I+f),f=I):f=0,!f)throw new pe(48);J.set(a,f)}else d=!1,f=a.byteOffset;return{Db:f,ub:d}},cb(a,f,d,E){return Ae.Ha.write(a,f,0,E,d,!1),0}}},ur=(a,f)=>{var d=0;return a&&(d|=365),f&&(d|=146),d},ht=null,tr={},gt=[],Nt=1,Dt=null,Br=!0,pe=null,_r={};function at(a,f={}){if(a=Fe(a),!a)return{path:"",node:null};if(f=Object.assign({qb:!0,kb:0},f),8<f.kb)throw new pe(32);a=a.split("/").filter(ee=>!!ee);for(var d=ht,E="/",I=0;I<a.length;I++){var Y=I===a.length-1;if(Y&&f.parent)break;if(d=Ct(d,a[I]),E=M(E+"/"+a[I]),d.Va&&(!Y||Y&&f.qb)&&(d=d.Va.root),!Y||f.Sa){for(Y=0;(d.mode&61440)===40960;)if(d=Wt(E),E=Fe(fe(E),d),d=at(E,{kb:f.kb+1}).node,40<Y++)throw new pe(32)}}return{path:E,node:d}}function rr(a){for(var f;;){if(a===a.parent)return a=a.Ra.tb,f?a[a.length-1]!=="/"?`${a}/${f}`:a+f:a;f=f?`${a.name}/${f}`:a.name,a=a.parent}}function Er(a,f){for(var d=0,E=0;E<f.length;E++)d=(d<<5)-d+f.charCodeAt(E)|0;return(a+d>>>0)%Dt.length}function Fr(a){var f=Er(a.parent.id,a.name);if(Dt[f]===a)Dt[f]=a.Wa;else for(f=Dt[f];f;){if(f.Wa===a){f.Wa=a.Wa;break}f=f.Wa}}function Ct(a,f){var d;if(d=(d=Ut(a,"x"))?d:a.Ga.lookup?0:2)throw new pe(d,a);for(d=Dt[Er(a.id,f)];d;d=d.Wa){var E=d.name;if(d.parent.id===a.id&&E===f)return d}return a.Ga.lookup(a,f)}function Lr(a,f,d,E){return a=new Cn(a,f,d,E),f=Er(a.parent.id,a.name),a.Wa=Dt[f],Dt[f]=a}function ut(a){return(a&61440)===16384}function Mr(a){var f=["r","w","rw"][a&3];return a&512&&(f+="w"),f}function Ut(a,f){if(Br)return 0;if(!f.includes("r")||a.mode&292){if(f.includes("w")&&!(a.mode&146)||f.includes("x")&&!(a.mode&73))return 2}else return 2;return 0}function zr(a,f){try{return Ct(a,f),20}catch{}return Ut(a,"wx")}function qr(a,f,d){try{var E=Ct(a,f)}catch(I){return I.Ka}if(a=Ut(a,"wx"))return a;if(d){if(!ut(E.mode))return 54;if(E===E.parent||rr(E)==="/")return 10}else if(ut(E.mode))return 31;return 0}function pn(){for(var a=0;4096>=a;a++)if(!gt[a])return a;throw new pe(33)}function st(a){if(a=gt[a],!a)throw new pe(8);return a}function Ur(a,f=-1){return C||(C=function(){this.$a={}},C.prototype={},Object.defineProperties(C.prototype,{object:{get(){return this.node},set(d){this.node=d}},flags:{get(){return this.$a.flags},set(d){this.$a.flags=d}},position:{get(){return this.$a.position},set(d){this.$a.position=d}}})),a=Object.assign(new C,a),f==-1&&(f=pn()),a.fd=f,gt[f]=a}var gn={open(a){var f,d;a.Ha=tr[a.node.rdev].Ha,(d=(f=a.Ha).open)==null||d.call(f,a)},Ta(){throw new pe(70)}};function Tr(a,f){tr[a]={Ha:f}}function Wr(a,f){var d=f==="/",E=!f;if(d&&ht)throw new pe(10);if(!d&&!E){var I=at(f,{qb:!1});if(f=I.path,I=I.node,I.Va)throw new pe(10);if(!ut(I.mode))throw new pe(54)}f={type:a,Pb:{},tb:f,Cb:[]},a=a.Ra(f),a.Ra=f,f.root=a,d?ht=a:I&&(I.Va=f,I.Ra&&I.Ra.Cb.push(f))}function fr(a,f,d){var E=at(a,{parent:!0}).node;if(a=ve(a),!a||a==="."||a==="..")throw new pe(28);var I=zr(E,a);if(I)throw new pe(I);if(!E.Ga.ab)throw new pe(63);return E.Ga.ab(E,a,f,d)}function bt(a,f){return fr(a,(f!==void 0?f:511)&1023|16384,0)}function hr(a,f,d){typeof d>"u"&&(d=f,f=438),fr(a,f|8192,d)}function kr(a,f){if(!Fe(a))throw new pe(44);var d=at(f,{parent:!0}).node;if(!d)throw new pe(44);f=ve(f);var E=zr(d,f);if(E)throw new pe(E);if(!d.Ga.symlink)throw new pe(63);d.Ga.symlink(d,f,a)}function Gr(a){var f=at(a,{parent:!0}).node;a=ve(a);var d=Ct(f,a),E=qr(f,a,!0);if(E)throw new pe(E);if(!f.Ga.rmdir)throw new pe(63);if(d.Va)throw new pe(10);f.Ga.rmdir(f,a),Fr(d)}function Sr(a){var f=at(a,{parent:!0}).node;if(!f)throw new pe(44);a=ve(a);var d=Ct(f,a),E=qr(f,a,!1);if(E)throw new pe(E);if(!f.Ga.unlink)throw new pe(63);if(d.Va)throw new pe(10);f.Ga.unlink(f,a),Fr(d)}function Wt(a){if(a=at(a).node,!a)throw new pe(44);if(!a.Ga.readlink)throw new pe(28);return Fe(rr(a.parent),a.Ga.readlink(a))}function Gt(a,f){if(a=at(a,{Sa:!f}).node,!a)throw new pe(44);if(!a.Ga.Pa)throw new pe(63);return a.Ga.Pa(a)}function Bt(a){return Gt(a,!0)}function dr(a,f){if(a=typeof a=="string"?at(a,{Sa:!0}).node:a,!a.Ga.Oa)throw new pe(63);a.Ga.Oa(a,{mode:f&4095|a.mode&-4096,timestamp:Date.now()})}function nr(a,f){if(0>f)throw new pe(28);if(a=typeof a=="string"?at(a,{Sa:!0}).node:a,!a.Ga.Oa)throw new pe(63);if(ut(a.mode))throw new pe(31);if((a.mode&61440)!==32768)throw new pe(28);var d=Ut(a,"w");if(d)throw new pe(d);a.Ga.Oa(a,{size:f,timestamp:Date.now()})}function At(a,f,d){if(a==="")throw new pe(44);if(typeof f=="string"){var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[f];if(typeof E>"u")throw Error(`Unknown file open mode: ${f}`);f=E}if(d=f&64?(typeof d>"u"?438:d)&4095|32768:0,typeof a=="object")var I=a;else{a=M(a);try{I=at(a,{Sa:!(f&131072)}).node}catch{}}if(E=!1,f&64)if(I){if(f&128)throw new pe(20)}else I=fr(a,d,0),E=!0;if(!I)throw new pe(44);if((I.mode&61440)===8192&&(f&=-513),f&65536&&!ut(I.mode))throw new pe(54);if(!E&&(d=I?(I.mode&61440)===40960?32:ut(I.mode)&&(Mr(f)!=="r"||f&512)?31:Ut(I,Mr(f)):44))throw new pe(d);return f&512&&!E&&nr(I,0),f&=-131713,I=Ur({node:I,path:rr(I),flags:f,seekable:!0,position:0,Ha:I.Ha,Fb:[],error:!1}),I.Ha.open&&I.Ha.open(I),!u.logReadFiles||f&1||(Q||(Q={}),a in Q||(Q[a]=1)),I}function xr(a){if(a.fd===null)throw new pe(8);a.hb&&(a.hb=null);try{a.Ha.close&&a.Ha.close(a)}catch(f){throw f}finally{gt[a.fd]=null}a.fd=null}function Hr(a,f,d){if(a.fd===null)throw new pe(8);if(!a.seekable||!a.Ha.Ta)throw new pe(70);if(d!=0&&d!=1&&d!=2)throw new pe(28);a.position=a.Ha.Ta(a,f,d),a.Fb=[]}function mr(a,f,d,E,I){if(0>E||0>I)throw new pe(28);if(a.fd===null)throw new pe(8);if((a.flags&2097155)===1)throw new pe(8);if(ut(a.node.mode))throw new pe(31);if(!a.Ha.read)throw new pe(28);var Y=typeof I<"u";if(!Y)I=a.position;else if(!a.seekable)throw new pe(70);return f=a.Ha.read(a,f,d,E,I),Y||(a.position+=f),f}function Kr(a,f,d,E,I){if(0>E||0>I)throw new pe(28);if(a.fd===null)throw new pe(8);if(!(a.flags&2097155))throw new pe(8);if(ut(a.node.mode))throw new pe(31);if(!a.Ha.write)throw new pe(28);a.seekable&&a.flags&1024&&Hr(a,0,2);var Y=typeof I<"u";if(!Y)I=a.position;else if(!a.seekable)throw new pe(70);return f=a.Ha.write(a,f,d,E,I,void 0),Y||(a.position+=f),f}function yn(a){var f,d=At(a,d||0);a=Gt(a).size;var E=new Uint8Array(a);return mr(d,E,0,a,0),f=E,xr(d),f}function w(){pe||(pe=function(a,f){this.name="ErrnoError",this.node=f,this.Eb=function(d){this.Ka=d},this.Eb(a),this.message="FS error"},pe.prototype=Error(),pe.prototype.constructor=pe,[44].forEach(a=>{_r[a]=new pe(a),_r[a].stack="<generic error, no stack>"}))}var R;function S(a,f,d){a=M("/dev/"+a);var E=ur(!!f,!!d);B||(B=64);var I=B++<<8|0;Tr(I,{open(Y){Y.seekable=!1},close(){var Y;(Y=d==null?void 0:d.buffer)!=null&&Y.length&&d(10)},read(Y,ee,Pe,Le){for(var je=0,et=0;et<Le;et++){try{var rt=f()}catch{throw new pe(29)}if(rt===void 0&&je===0)throw new pe(6);if(rt==null)break;je++,ee[Pe+et]=rt}return je&&(Y.node.timestamp=Date.now()),je},write(Y,ee,Pe,Le){for(var je=0;je<Le;je++)try{d(ee[Pe+je])}catch{throw new pe(29)}return Le&&(Y.node.timestamp=Date.now()),je}}),hr(a,E,I)}var B,N={},C,Q;function ie(a,f,d){if(f.charAt(0)==="/")return f;if(a=a===-100?"/":st(a).path,f.length==0){if(!d)throw new pe(44);return a}return M(a+"/"+f)}function ce(a,f,d){try{var E=a(f)}catch(Y){if(Y&&Y.node&&M(f)!==M(rr(Y.node)))return-54;throw Y}F[d>>2]=E.dev,F[d+4>>2]=E.mode,y[d+8>>2]=E.nlink,F[d+12>>2]=E.uid,F[d+16>>2]=E.gid,F[d+20>>2]=E.rdev,m=[E.size>>>0,(we=E.size,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[d+24>>2]=m[0],F[d+28>>2]=m[1],F[d+32>>2]=4096,F[d+36>>2]=E.blocks,a=E.atime.getTime(),f=E.mtime.getTime();var I=E.ctime.getTime();return m=[Math.floor(a/1e3)>>>0,(we=Math.floor(a/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[d+40>>2]=m[0],F[d+44>>2]=m[1],y[d+48>>2]=a%1e3*1e3,m=[Math.floor(f/1e3)>>>0,(we=Math.floor(f/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[d+56>>2]=m[0],F[d+60>>2]=m[1],y[d+64>>2]=f%1e3*1e3,m=[Math.floor(I/1e3)>>>0,(we=Math.floor(I/1e3),1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[d+72>>2]=m[0],F[d+76>>2]=m[1],y[d+80>>2]=I%1e3*1e3,m=[E.ino>>>0,(we=E.ino,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[d+88>>2]=m[0],F[d+92>>2]=m[1],0}var le=void 0;function me(){var a=F[+le>>2];return le+=4,a}var be=(a,f)=>f+2097152>>>0<4194305-!!a?(a>>>0)+4294967296*f:NaN,Re=[0,31,60,91,121,152,182,213,244,274,305,335],Me=[0,31,59,90,120,151,181,212,243,273,304,334],ze=a=>{var f=Xe(a)+1,d=Vr(f);return d&&lt(a,he,d,f),d},Ye={},Ve=()=>{if(!ot){var a={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"},f;for(f in Ye)Ye[f]===void 0?delete a[f]:a[f]=Ye[f];var d=[];for(f in a)d.push(`${f}=${a[f]}`);ot=d}return ot},ot,Ft=a=>{var f=Xe(a)+1,d=Yt(f);return lt(a,he,d,f),d},Pr=(a,f,d,E)=>{var I={string:je=>{var et=0;return je!=null&&je!==0&&(et=Ft(je)),et},array:je=>{var et=Yt(je.length);return J.set(je,et),et}};a=u["_"+a];var Y=[],ee=0;if(E)for(var Pe=0;Pe<E.length;Pe++){var Le=I[d[Pe]];Le?(ee===0&&(ee=Dr()),Y[Pe]=Le(E[Pe])):Y[Pe]=E[Pe]}return d=a.apply(null,Y),d=function(je){return ee!==0&&Ar(ee),f==="string"?je?O(he,je):"":f==="boolean"?!!je:je}(d)},pr=0,Ht=(a,f)=>(f=f==1?Yt(a.length):Vr(a.length),a.subarray||a.slice||(a=new Uint8Array(a)),he.set(a,f),f),Kt,$r=[],Tt,Lt=a=>{Kt.delete(Tt.get(a)),Tt.set(a,null),$r.push(a)},Yr=(a,f)=>{if(!Kt){Kt=new WeakMap;var d=Tt.length;if(Kt)for(var E=0;E<0+d;E++){var I=Tt.get(E);I&&Kt.set(I,E)}}if(d=Kt.get(a)||0)return d;if($r.length)d=$r.pop();else{try{Tt.grow(1)}catch(Pe){throw Pe instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Pe}d=Tt.length-1}try{Tt.set(d,a)}catch(Pe){if(!(Pe instanceof TypeError))throw Pe;if(typeof WebAssembly.Function=="function"){E=WebAssembly.Function,I={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var Y={parameters:[],results:f[0]=="v"?[]:[I[f[0]]]},ee=1;ee<f.length;++ee)Y.parameters.push(I[f[ee]]);f=new E(Y,a)}else{for(E=[1],I=f.slice(0,1),f=f.slice(1),Y={i:127,p:127,j:126,f:125,d:124,e:111},E.push(96),ee=f.length,128>ee?E.push(ee):E.push(ee%128|128,ee>>7),ee=0;ee<f.length;++ee)E.push(Y[f[ee]]);I=="v"?E.push(0):E.push(1,Y[I]),f=[0,97,115,109,1,0,0,0,1],I=E.length,128>I?f.push(I):f.push(I%128|128,I>>7),f.push.apply(f,E),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),f=new WebAssembly.Module(new Uint8Array(f)),f=new WebAssembly.Instance(f,{e:{f:a}}).exports.f}Tt.set(d,f)}return Kt.set(a,d),d};function Cn(a,f,d,E){a||(a=this),this.parent=a,this.Ra=a.Ra,this.Va=null,this.id=Nt++,this.name=f,this.mode=d,this.Ga={},this.Ha={},this.rdev=E}Object.defineProperties(Cn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(a){a?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(a){a?this.mode|=146:this.mode&=-147}}}),w(),Dt=Array(4096),Wr(Ae,"/"),bt("/tmp"),bt("/home"),bt("/home/web_user"),function(){bt("/dev"),Tr(259,{read:()=>0,write:(E,I,Y,ee)=>ee}),hr("/dev/null",259),Ue(1280,er),Ue(1536,pt),hr("/dev/tty",1280),hr("/dev/tty1",1536);var a=new Uint8Array(1024),f=0,d=()=>(f===0&&(f=Ee(a).byteLength),a[--f]);S("random",d),S("urandom",d),bt("/dev/shm"),bt("/dev/shm/tmp")}(),function(){bt("/proc");var a=bt("/proc/self");bt("/proc/self/fd"),Wr({Ra(){var f=Lr(a,"fd",16895,73);return f.Ga={lookup(d,E){var I=st(+E);return d={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>I.path}},d.parent=d}},f}},"/proc/self/fd")}();var ii={a:(a,f,d,E)=>{ye(`Assertion failed: ${a?O(he,a):""}, at: `+[f?f?O(he,f):"":"unknown filename",d,E?E?O(he,E):"":"unknown function"])},h:function(a,f){try{return a=a?O(he,a):"",dr(a,f),0}catch(d){if(typeof N>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},H:function(a,f,d){try{if(f=f?O(he,f):"",f=ie(a,f),d&-8)return-28;var E=at(f,{Sa:!0}).node;return E?(a="",d&4&&(a+="r"),d&2&&(a+="w"),d&1&&(a+="x"),a&&Ut(E,a)?-2:0):-44}catch(I){if(typeof N>"u"||I.name!=="ErrnoError")throw I;return-I.Ka}},i:function(a,f){try{var d=st(a);return dr(d.node,f),0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},g:function(a){try{var f=st(a).node,d=typeof f=="string"?at(f,{Sa:!0}).node:f;if(!d.Ga.Oa)throw new pe(63);return d.Ga.Oa(d,{timestamp:Date.now()}),0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},b:function(a,f,d){le=d;try{var E=st(a);switch(f){case 0:var I=me();if(0>I)return-28;for(;gt[I];)I++;return Ur(E,I).fd;case 1:case 2:return 0;case 3:return E.flags;case 4:return I=me(),E.flags|=I,0;case 5:return I=me(),A[I+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return F[Bn()>>2]=28,-1;default:return-28}}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},f:function(a,f){try{var d=st(a);return ce(Gt,d.path,f)}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},n:function(a,f,d){f=be(f,d);try{if(isNaN(f))return 61;var E=st(a);if(!(E.flags&2097155))throw new pe(28);return nr(E.node,f),0}catch(I){if(typeof N>"u"||I.name!=="ErrnoError")throw I;return-I.Ka}},C:function(a,f){try{if(f===0)return-28;var d=Xe("/")+1;return f<d?-68:(lt("/",he,a,f),d)}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},F:function(a,f){try{return a=a?O(he,a):"",ce(Bt,a,f)}catch(d){if(typeof N>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},z:function(a,f,d){try{return f=f?O(he,f):"",f=ie(a,f),f=M(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),bt(f,d),0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},E:function(a,f,d,E){try{f=f?O(he,f):"";var I=E&256;return f=ie(a,f,E&4096),ce(I?Bt:Gt,f,d)}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},y:function(a,f,d,E){le=E;try{f=f?O(he,f):"",f=ie(a,f);var I=E?me():0;return At(f,d,I).fd}catch(Y){if(typeof N>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},w:function(a,f,d,E){try{if(f=f?O(he,f):"",f=ie(a,f),0>=E)return-28;var I=Wt(f),Y=Math.min(E,Xe(I)),ee=J[d+Y];return lt(I,he,d,E+1),J[d+Y]=ee,Y}catch(Pe){if(typeof N>"u"||Pe.name!=="ErrnoError")throw Pe;return-Pe.Ka}},v:function(a){try{return a=a?O(he,a):"",Gr(a),0}catch(f){if(typeof N>"u"||f.name!=="ErrnoError")throw f;return-f.Ka}},G:function(a,f){try{return a=a?O(he,a):"",ce(Gt,a,f)}catch(d){if(typeof N>"u"||d.name!=="ErrnoError")throw d;return-d.Ka}},r:function(a,f,d){try{return f=f?O(he,f):"",f=ie(a,f),d===0?Sr(f):d===512?Gr(f):ye("Invalid flags passed to unlinkat"),0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return-E.Ka}},q:function(a,f,d){try{if(f=f?O(he,f):"",f=ie(a,f,!0),d){var E=y[d>>2]+4294967296*F[d+4>>2],I=F[d+8>>2];Y=1e3*E+I/1e6,d+=16,E=y[d>>2]+4294967296*F[d+4>>2],I=F[d+8>>2],ee=1e3*E+I/1e6}else var Y=Date.now(),ee=Y;a=Y;var Pe=at(f,{Sa:!0}).node;return Pe.Ga.Oa(Pe,{timestamp:Math.max(a,ee)}),0}catch(Le){if(typeof N>"u"||Le.name!=="ErrnoError")throw Le;return-Le.Ka}},l:function(a,f,d){a=new Date(1e3*be(a,f)),F[d>>2]=a.getSeconds(),F[d+4>>2]=a.getMinutes(),F[d+8>>2]=a.getHours(),F[d+12>>2]=a.getDate(),F[d+16>>2]=a.getMonth(),F[d+20>>2]=a.getFullYear()-1900,F[d+24>>2]=a.getDay(),f=a.getFullYear(),F[d+28>>2]=(f%4!==0||f%100===0&&f%400!==0?Me:Re)[a.getMonth()]+a.getDate()-1|0,F[d+36>>2]=-(60*a.getTimezoneOffset()),f=new Date(a.getFullYear(),6,1).getTimezoneOffset();var E=new Date(a.getFullYear(),0,1).getTimezoneOffset();F[d+32>>2]=(f!=E&&a.getTimezoneOffset()==Math.min(E,f))|0},j:function(a,f,d,E,I,Y,ee,Pe){I=be(I,Y);try{if(isNaN(I))return 61;var Le=st(E);if(f&2&&!(d&2)&&(Le.flags&2097155)!==2)throw new pe(2);if((Le.flags&2097155)===1)throw new pe(2);if(!Le.Ha.bb)throw new pe(43);var je=Le.Ha.bb(Le,a,I,f,d),et=je.Db;return F[ee>>2]=je.ub,y[Pe>>2]=et,0}catch(rt){if(typeof N>"u"||rt.name!=="ErrnoError")throw rt;return-rt.Ka}},k:function(a,f,d,E,I,Y,ee){Y=be(Y,ee);try{if(isNaN(Y))return 61;var Pe=st(I);if(d&2){if((Pe.node.mode&61440)!==32768)throw new pe(43);if(!(E&2)){var Le=he.slice(a,a+f);Pe.Ha.cb&&Pe.Ha.cb(Pe,Le,Y,f,E)}}}catch(je){if(typeof N>"u"||je.name!=="ErrnoError")throw je;return-je.Ka}},s:(a,f,d)=>{function E(Le){return(Le=Le.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Le[1]:"GMT"}var I=new Date().getFullYear(),Y=new Date(I,0,1),ee=new Date(I,6,1);I=Y.getTimezoneOffset();var Pe=ee.getTimezoneOffset();y[a>>2]=60*Math.max(I,Pe),F[f>>2]=+(I!=Pe),a=E(Y),f=E(ee),a=ze(a),f=ze(f),Pe<I?(y[d>>2]=a,y[d+4>>2]=f):(y[d>>2]=f,y[d+4>>2]=a)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:a=>{var f=he.length;if(a>>>=0,2147483648<a)return!1;for(var d=1;4>=d;d*=2){var E=f*(1+.2/d);E=Math.min(E,a+100663296);var I=Math;E=Math.max(a,E);e:{I=(I.min.call(I,2147483648,E+(65536-E%65536)%65536)-Z.buffer.byteLength+65535)/65536;try{Z.grow(I),ae();var Y=1;break e}catch{}Y=void 0}if(Y)return!0}return!1},A:(a,f)=>{var d=0;return Ve().forEach((E,I)=>{var Y=f+d;for(I=y[a+4*I>>2]=Y,Y=0;Y<E.length;++Y)J[I++>>0]=E.charCodeAt(Y);J[I>>0]=0,d+=E.length+1}),0},B:(a,f)=>{var d=Ve();y[a>>2]=d.length;var E=0;return d.forEach(I=>E+=I.length+1),y[f>>2]=E,0},e:function(a){try{var f=st(a);return xr(f),0}catch(d){if(typeof N>"u"||d.name!=="ErrnoError")throw d;return d.Ka}},p:function(a,f){try{var d=st(a);return J[f>>0]=d.tty?2:ut(d.mode)?3:(d.mode&61440)===40960?7:4,A[f+2>>1]=0,m=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[f+8>>2]=m[0],F[f+12>>2]=m[1],m=[0,(we=0,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[f+16>>2]=m[0],F[f+20>>2]=m[1],0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return E.Ka}},x:function(a,f,d,E){try{e:{var I=st(a);a=f;for(var Y,ee=f=0;ee<d;ee++){var Pe=y[a>>2],Le=y[a+4>>2];a+=8;var je=mr(I,J,Pe,Le,Y);if(0>je){var et=-1;break e}if(f+=je,je<Le)break;typeof Y<"u"&&(Y+=je)}et=f}return y[E>>2]=et,0}catch(rt){if(typeof N>"u"||rt.name!=="ErrnoError")throw rt;return rt.Ka}},m:function(a,f,d,E,I){f=be(f,d);try{if(isNaN(f))return 61;var Y=st(a);return Hr(Y,f,E),m=[Y.position>>>0,(we=Y.position,1<=+Math.abs(we)?0<we?+Math.floor(we/4294967296)>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],F[I>>2]=m[0],F[I+4>>2]=m[1],Y.hb&&f===0&&E===0&&(Y.hb=null),0}catch(ee){if(typeof N>"u"||ee.name!=="ErrnoError")throw ee;return ee.Ka}},D:function(a){var d;try{var f=st(a);return(d=f.Ha)!=null&&d.fsync?f.Ha.fsync(f):0}catch(E){if(typeof N>"u"||E.name!=="ErrnoError")throw E;return E.Ka}},u:function(a,f,d,E){try{e:{var I=st(a);a=f;for(var Y,ee=f=0;ee<d;ee++){var Pe=y[a>>2],Le=y[a+4>>2];a+=8;var je=Kr(I,J,Pe,Le,Y);if(0>je){var et=-1;break e}f+=je,typeof Y<"u"&&(Y+=je)}et=f}return y[E>>2]=et,0}catch(rt){if(typeof N>"u"||rt.name!=="ErrnoError")throw rt;return rt.Ka}}},ke=function(){var d;function a(E){var I;return ke=E.exports,Z=ke.I,ae(),Tt=ke.Aa,ue.unshift(ke.J),U--,(I=u.monitorRunDependencies)==null||I.call(u,U),U==0&&_e&&(E=_e,_e=null,E()),ke}var f={a:ii};if(U++,(d=u.monitorRunDependencies)==null||d.call(u,U),u.instantiateWasm)try{return u.instantiateWasm(f,a)}catch(E){return G(`Module.instantiateWasm callback failed with error: ${E}`),!1}return ft(f,function(E){a(E.instance)}),{}}();u._sqlite3_free=a=>(u._sqlite3_free=ke.K)(a),u._sqlite3_value_text=a=>(u._sqlite3_value_text=ke.L)(a);var Bn=()=>(Bn=ke.M)();u._sqlite3_prepare_v2=(a,f,d,E,I)=>(u._sqlite3_prepare_v2=ke.N)(a,f,d,E,I),u._sqlite3_step=a=>(u._sqlite3_step=ke.O)(a),u._sqlite3_finalize=a=>(u._sqlite3_finalize=ke.P)(a),u._sqlite3_reset=a=>(u._sqlite3_reset=ke.Q)(a),u._sqlite3_clear_bindings=a=>(u._sqlite3_clear_bindings=ke.R)(a),u._sqlite3_value_blob=a=>(u._sqlite3_value_blob=ke.S)(a),u._sqlite3_value_bytes=a=>(u._sqlite3_value_bytes=ke.T)(a),u._sqlite3_value_double=a=>(u._sqlite3_value_double=ke.U)(a),u._sqlite3_value_int=a=>(u._sqlite3_value_int=ke.V)(a),u._sqlite3_value_type=a=>(u._sqlite3_value_type=ke.W)(a),u._sqlite3_result_blob=(a,f,d,E)=>(u._sqlite3_result_blob=ke.X)(a,f,d,E),u._sqlite3_result_double=(a,f)=>(u._sqlite3_result_double=ke.Y)(a,f),u._sqlite3_result_error=(a,f,d)=>(u._sqlite3_result_error=ke.Z)(a,f,d),u._sqlite3_result_int=(a,f)=>(u._sqlite3_result_int=ke._)(a,f),u._sqlite3_result_int64=(a,f,d)=>(u._sqlite3_result_int64=ke.$)(a,f,d),u._sqlite3_result_null=a=>(u._sqlite3_result_null=ke.aa)(a),u._sqlite3_result_text=(a,f,d,E)=>(u._sqlite3_result_text=ke.ba)(a,f,d,E),u._sqlite3_aggregate_context=(a,f)=>(u._sqlite3_aggregate_context=ke.ca)(a,f),u._sqlite3_column_count=a=>(u._sqlite3_column_count=ke.da)(a),u._sqlite3_data_count=a=>(u._sqlite3_data_count=ke.ea)(a),u._sqlite3_column_blob=(a,f)=>(u._sqlite3_column_blob=ke.fa)(a,f),u._sqlite3_column_bytes=(a,f)=>(u._sqlite3_column_bytes=ke.ga)(a,f),u._sqlite3_column_double=(a,f)=>(u._sqlite3_column_double=ke.ha)(a,f),u._sqlite3_column_text=(a,f)=>(u._sqlite3_column_text=ke.ia)(a,f),u._sqlite3_column_type=(a,f)=>(u._sqlite3_column_type=ke.ja)(a,f),u._sqlite3_column_name=(a,f)=>(u._sqlite3_column_name=ke.ka)(a,f),u._sqlite3_bind_blob=(a,f,d,E,I)=>(u._sqlite3_bind_blob=ke.la)(a,f,d,E,I),u._sqlite3_bind_double=(a,f,d)=>(u._sqlite3_bind_double=ke.ma)(a,f,d),u._sqlite3_bind_int=(a,f,d)=>(u._sqlite3_bind_int=ke.na)(a,f,d),u._sqlite3_bind_text=(a,f,d,E,I)=>(u._sqlite3_bind_text=ke.oa)(a,f,d,E,I),u._sqlite3_bind_parameter_index=(a,f)=>(u._sqlite3_bind_parameter_index=ke.pa)(a,f),u._sqlite3_sql=a=>(u._sqlite3_sql=ke.qa)(a),u._sqlite3_normalized_sql=a=>(u._sqlite3_normalized_sql=ke.ra)(a),u._sqlite3_errmsg=a=>(u._sqlite3_errmsg=ke.sa)(a),u._sqlite3_exec=(a,f,d,E,I)=>(u._sqlite3_exec=ke.ta)(a,f,d,E,I),u._sqlite3_changes=a=>(u._sqlite3_changes=ke.ua)(a),u._sqlite3_close_v2=a=>(u._sqlite3_close_v2=ke.va)(a),u._sqlite3_create_function_v2=(a,f,d,E,I,Y,ee,Pe,Le)=>(u._sqlite3_create_function_v2=ke.wa)(a,f,d,E,I,Y,ee,Pe,Le),u._sqlite3_open=(a,f)=>(u._sqlite3_open=ke.xa)(a,f);var Vr=u._malloc=a=>(Vr=u._malloc=ke.ya)(a),Zr=u._free=a=>(Zr=u._free=ke.za)(a);u._RegisterExtensionFunctions=a=>(u._RegisterExtensionFunctions=ke.Ba)(a);var Fn=(a,f)=>(Fn=ke.Ca)(a,f),Dr=()=>(Dr=ke.Da)(),Ar=a=>(Ar=ke.Ea)(a),Yt=a=>(Yt=ke.Fa)(a);u.stackAlloc=Yt,u.stackSave=Dr,u.stackRestore=Ar,u.cwrap=(a,f,d,E)=>{var I=!d||d.every(Y=>Y==="number"||Y==="boolean");return f!=="string"&&I&&!E?u["_"+a]:function(){return Pr(a,f,d,arguments)}},u.addFunction=Yr,u.removeFunction=Lt,u.UTF8ToString=te,u.ALLOC_NORMAL=pr,u.allocate=Ht,u.allocateUTF8OnStack=Ft;var Qr;_e=function a(){Qr||Ln(),Qr||(_e=a)};function Ln(){function a(){if(!Qr&&(Qr=!0,u.calledRun=!0,!K)){if(u.noFSInit||R||(R=!0,w(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?S("stdin",u.stdin):kr("/dev/tty","/dev/stdin"),u.stdout?S("stdout",null,u.stdout):kr("/dev/tty","/dev/stdout"),u.stderr?S("stderr",null,u.stderr):kr("/dev/tty1","/dev/stderr"),At("/dev/stdin",0),At("/dev/stdout",1),At("/dev/stderr",1)),Br=!1,V(ue),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var f=u.postRun.shift();xe.unshift(f)}V(xe)}}if(!(0<U)){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)W();V(De),0<U||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),a()},1)):a())}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Ln(),o}),t)};c.exports=r,c.exports.default=r})(Hs);const Mo=Hs.exports;class Ce{static async getDBFromStore(e,t){try{const r=await t.getItem(e);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}}static async setInitialDBToStore(e,t){try{return await t.setItem(e,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}}static async setDBToStore(e,t,r){try{const n=e.export();return await Ce.saveDBToStore(t,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}}static async saveDBToStore(e,t,r){try{return await r.setItem(e,t),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}}static async removeDBFromStore(e,t){try{return await t.removeItem(e),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}}static async isDBInStore(e,t){try{const r=await t.getItem(e);return r!=null&&r.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}}static async restoreDBFromStore(e,t,r){const n=`${t}-${e}`;try{if(await Ce.isDBInStore(n,r))if(await Ce.isDBInStore(e,r)){const o=await Ce.getDBFromStore(n,r);return await Ce.saveDBToStore(e,o,r),await Ce.removeDBFromStore(n,r),Promise.resolve()}else return Promise.reject(new Error(`RestoreDBFromStore: ${e} does not exist`));else return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(s){return Promise.reject(`RestoreDBFromStore: ${s.message}`)}}static async copyDBToStore(e,t,r){try{if(await Ce.isDBInStore(e,r)){const s=await Ce.getDBFromStore(e,r);return await Ce.saveDBToStore(t,s,r),Promise.resolve()}else return Promise.reject(new Error(`CopyDBToStore: ${e} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}}static async getDBListFromStore(e){try{const t=await e.keys();return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}}}class xt{static async getTablesNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await ne.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}}static async getViewsNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await ne.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}}static async dropElements(e,t){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${t} not found`))}let s="SELECT name FROM sqlite_master WHERE ";s+=`type = '${t}' ${n};`;try{const i=await ne.queryAll(e,s,[]);if(i.length>0){const o=t.toUpperCase(),l=[];for(const u of i){let g=`DROP ${o} IF EXISTS `;g+=`${u.name};`,l.push(g)}for(const u of l)if(await ne.run(e,u,[],!1,"no")<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(i){return Promise.reject(new Error(`DropElements: ${r}: ${i.message}`))}}static async dropAll(e){try{return await xt.dropElements(e,"table"),await xt.dropElements(e,"index"),await xt.dropElements(e,"trigger"),await xt.dropElements(e,"view"),await ne.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}}static async dropTempTables(e,t){const r=Object.keys(t),n=[];for(const s of r){let i="DROP TABLE IF EXISTS ";i+=`_temp_${s};`,n.push(i)}try{return await ne.execute(e,n.join(`
`),!1)<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(s){return Promise.reject(new Error(`DropTempTables: ${s.message}`))}}}class He{static async isJsonSQLite(e){const t=["database","version","overwrite","encrypted","mode","tables","views"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e)){if(t.indexOf(r)===-1||r==="database"&&typeof e[r]!="string"||r==="version"&&typeof e[r]!="number"||r==="overwrite"&&typeof e[r]!="boolean"||r==="encrypted"&&typeof e[r]!="boolean"||r==="mode"&&typeof e[r]!="string"||r==="tables"&&typeof e[r]!="object")return!1;if(r==="tables"){for(const n of e[r])if(!await He.isTable(n))return!1}if(r==="views"&&typeof e[r]!="object")return!1;if(r==="views"){for(const n of e[r])if(!await He.isView(n))return!1}}return!0}static async isTable(e){const t=["name","schema","indexes","triggers","values"];let r=0;if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="schema"&&typeof e[n]!="object"||n==="indexes"&&typeof e[n]!="object"||n==="triggers"&&typeof e[n]!="object"||n==="values"&&typeof e[n]!="object")return!1;if(n==="schema"){e.schema.forEach(s=>{s.column&&r++});for(let s=0;s<r;s++)if(!await He.isSchema(e[n][s]))return!1}if(n==="indexes"){for(const s of e[n])if(!await He.isIndexes(s))return!1}if(n==="triggers"){for(const s of e[n])if(!await He.isTriggers(s))return!1}if(n==="values"&&r>0){for(const s of e[n])if(typeof s!="object"||s.length!=r)return!1}}return!0}static async isSchema(e){const t=["column","value","foreignkey","primarykey","constraint"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="column"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="foreignkey"&&typeof e[r]!="string"||r==="primarykey"&&typeof e[r]!="string"||r==="constraint"&&typeof e[r]!="string")return!1;return!0}static async isIndexes(e){const t=["name","value","mode"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="mode"&&(typeof e[r]!="string"||e[r].toUpperCase()!="UNIQUE"))return!1;return!0}static async isTriggers(e){const t=["name","timeevent","condition","logic"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="timeevent"&&typeof e[r]!="string"||r==="condition"&&typeof e[r]!="string"||r==="logic"&&typeof e[r]!="string")return!1;return!0}static async isView(e){const t=["name","value"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string")return!1;return!0}static async checkSchemaValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("column")&&(r.column=e[t].column),n.includes("value")&&(r.value=e[t].value),n.includes("foreignkey")&&(r.foreignkey=e[t].foreignkey),n.includes("constraint")&&(r.constraint=e[t].constraint),!await He.isSchema(r))return Promise.reject(new Error(`CheckSchemaValidity: schema[${t}] not valid`))}return Promise.resolve()}static async checkIndexesValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),n.includes("mode")&&(r.mode=e[t].mode),!await He.isIndexes(r))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${t}] not valid`))}return Promise.resolve()}static async checkTriggersValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("logic")&&(r.logic=e[t].logic),n.includes("name")&&(r.name=e[t].name),n.includes("timeevent")&&(r.timeevent=e[t].timeevent),n.includes("condition")&&(r.condition=e[t].condition),!await He.isTriggers(r))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${t}] not valid`))}return Promise.resolve()}static async checkViewsValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),!await He.isView(r))return Promise.reject(new Error(`CheckViewsValidity: views[${t}] not valid`))}return Promise.resolve()}static async getTableColumnNamesTypes(e,t){let r=[];const n=[],s=[],i=`PRAGMA table_info('${t}');`;try{if(r=await ne.queryAll(e,i,[]),r.length>0)for(const o of r)n.push(o.name),s.push(o.type);return Promise.resolve({names:n,types:s})}catch(o){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${o.message}`))}}static async getValues(e,t,r){const n=[];try{const s=await He.getTableColumnNamesTypes(e,r);let i=[];if(Object.keys(s).includes("names"))i=s.names;else return Promise.reject(new Error(`GetValues: Table ${r} no names`));const o=await ne.queryAll(e,t,[]);for(const l of o){const u=[];for(const g of i)Object.keys(l).includes(g)?u.push(l[g]):u.push(null);n.push(u)}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetValues: ${s.message}`))}}}class tt{static extractTableName(e){const t=/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i,r=e.match(t);return r&&r[1]?r[1]:null}static extractWhereClause(e){const t=/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i,r=e.match(t);return r&&r[1]?r[1].trim():null}static addPrefixToWhereClause(e,t,r,n){let s;return e.includes("AND")?s=e.split("AND").map(l=>l.trim()):s=[e],s.map(o=>{const l=o.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!l)return o;const u=l[1].trim(),g=l[2].trim();let h=l[3].trim(),v=u;const p=tt.findIndexOfStringInArray(u,r);return p!==-1&&(v=tt.getStringAtIndex(t,p)),`${`${n}${v}`} ${g} ${h}`}).join(" AND ")}static findIndexOfStringInArray(e,t){return t.indexOf(e)}static getStringAtIndex(e,t){if(t>=0&&t<e.length)return e[t]}static extractForeignKeyInfo(e){const t=/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/,r=e.match(t);if(r)return{forKeys:r[1].split(",").map(s=>s.trim()),tableName:r[2],refKeys:r[3].split(",").map(s=>s.trim()),action:r[5]?r[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const t=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),r=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let n;const s=[];for(;(n=r.exec(e))!==null;){const i=n[1];if(i){const o=i.split(",");for(const l of o)s.push(l.trim())}else{const o=n[0];t.has(o.trim().toUpperCase())||s.push(o.trim())}}return s}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,t){const r="RETURNING",n={stmt:e,names:""},s=e.toUpperCase().indexOf(r);if(s!==-1){const i=e.substring(0,s);if(n.stmt=`${i};`,t.substring(0,2)==="wA"){const l=e.substring(s+r.length).trim();l.endsWith(";")?n.names=l.substring(0,l.length-1):n.names=l}}return n}static extractCombinedPrimaryKey(e){const t=/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g,r=new RegExp(t),n=e.matchAll(r),s=[];for(const i of n){const l=i[1].trim().split(",").map(u=>u.trim());s.push(l)}return s.length===0?null:s}static getWhereStmtForCombinedPK(e,t,r,n){let s=e;for(const i of n){const o=i.join(",")===t.join(",")?r:t;for(const[l,u]of i.entries())s=tt.replaceAllString(s,u,o[l])}return s}static replaceAllString(e,t,r){return e.split(t).join(r)}static indicesOf(e,t,r=0){const n=[];let s=e.indexOf(t,r);for(;s!==-1;)n.push(s),s=e.indexOf(t,s+1);return n}static getWhereStmtForNonCombinedPK(e,t,r){let n="",s=e.substring(6);for(let i=0;i<t.length;i++){let o="withRefsNames",l=tt.indicesOf(s,t[i]);if(l.length===0&&(l=tt.indicesOf(s,r[i]),o="colNames"),l.length>0){let u="";const g=tt.indicesOf(s,"=",l[0]);if(g.length>0){const h=tt.indicesOf(s,"AND",g[0]);h.length>0?(u=s.substring(g[0]+1,h[0]-1),s=s.substring(h[0]+3)):u=s.substring(g[0]+1),i>0&&(n+=" AND "),o==="withRefsNames"?n+=r[i]+" = "+u:n+=t[i]+" = "+u}}}return n="WHERE "+n,n}static updateWhere(e,t,r){let n="";if(e.length<=0||e.toUpperCase().substring(0,5)!=="WHERE")return n;if(t.length===r.length){const s=tt.extractCombinedPrimaryKey(e);s?n=tt.getWhereStmtForCombinedPK(e,t,r,s):n=tt.getWhereStmtForNonCombinedPK(e,t,r)}return n}}tt.replaceString=(c,e,t)=>{const r=c.indexOf(e);return r!==-1?c.substring(0,r)+t+c.substring(r+e.length):c};class Je{static findReferencesAndUpdate(e){return new Je(e)}static getRefs(e){return new Je(e)}static getReferences(e){return new Je(e)}static searchForRelatedItems(e){return new Je(e)}static upDateWhereForDefault(e){return new Je(e)}static upDateWhereForRestrict(e){return new Je(e)}static upDateWhereForCascade(e){return new Je(e)}static executeUpdateForDelete(e){return new Je(e)}constructor(e){this.message=e}}class It{static async findReferencesAndUpdate(e,t,r,n,s){try{let i=!0;const o=await It.getReferences(e,t),l=o.retRefs,u=o.tableWithRefs;if(l.length<=0||t===u)return i;for(const g of l){const h=tt.extractForeignKeyInfo(g),v=h.tableName;if(v===""||v!==t)continue;const p=h.forKeys,_=h.refKeys;if(_.length!==p.length){const j="findReferencesAndUpdate: mismatch length";throw Je.findReferencesAndUpdate(j)}const b=h.action;if(b==="NO_ACTION")continue;let k=u,T=p,P={uWhereStmt:"",setStmt:""};if(It.checkValuesMatch(p,n))throw Je.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const j=await It.searchForRelatedItems(e,k,t,r,p,_,s);if(j.relatedItems.length===0&&j.key.length<=0)continue;if(k!==t)switch(b){case"RESTRICT":P=await It.upDateWhereForRestrict(j);break;case"CASCADE":P=await It.upDateWhereForCascade(j);break;default:P=await It.upDateWhereForDefault(p,j);break}}P.setStmt.length>0&&P.uWhereStmt.length>0&&It.executeUpdateForDelete(e,k,P.uWhereStmt,P.setStmt,T,s)}return i}catch(i){const o=i.message?i.message:i;throw i instanceof Je?Je.findReferencesAndUpdate(o):i}}static async getReferences(e,t){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{const n=await ne.queryAll(e,r,[]);let s=[],i="";if(n.length>0){let o=It.getRefs(n[0].sql);s=o.foreignKeys,i=o.tableName}return Promise.resolve({tableWithRefs:i,retRefs:s})}catch(n){const i=`getReferences: ${n.message?n.message:n}`;throw Je.getReferences(i)}}static getRefs(e){let t="";const r=[],n=tt.flattenMultilineString(e);try{const s=/CREATE\s+TABLE\s+(\w+)\s+\(/,i=n.match(s);i&&(t=i[1]);const o=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,l=n.matchAll(o);for(const u of l){const g=u[0];r.push(g)}}catch(s){const i=`getRefs: Error creating regular expression: ${s}`;throw Je.getRefs(i)}return{tableName:t,foreignKeys:r}}static async getReferencedTableName(e){var t="";if(e.length>0){const r=e.split(new RegExp("REFERENCES","i"));if(r.length===2){const n=r[1].indexOf("(");t=r[1].substring(0,n).trim()}}return t}static async searchForRelatedItems(e,t,r,n,s,i,o){const l=[];let u="";const g=s.map(v=>`t1.${v}`),h=i.map(v=>`t2.${v}`);try{let v=tt.addPrefixToWhereClause(n,i,s,"t2.");v.endsWith(";")&&(v=v.slice(0,-1));const p=g.map((k,T)=>`${k} = ${h[T]}`).join(" AND "),_=`SELECT t1.rowid FROM ${t} t1 JOIN ${r} t2 ON ${p} WHERE ${v} AND t1.sql_deleted = 0;`,b=await ne.queryAll(e,_,o);return b.length>0&&(u=Object.keys(b[0])[0],l.push(...b)),{key:u,relatedItems:l}}catch(v){const p=v.message?v.message:v;throw Je.searchForRelatedItems(p)}}static async upDateWhereForDefault(e,t){let r="",n="";try{const s=t.key,i=[];for(const o of t.relatedItems){const l=o[s];l!==void 0&&i.push(l)}for(const o of e)r+=`${o} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${s} IN (`;for(const o of i)n+=`${o},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(s){const i=s.message?s.message:s;throw Je.upDateWhereForDefault(i)}return{setStmt:r,uWhereStmt:n}}static async upDateWhereForRestrict(e){try{const t="",r="";if(e.relatedItems.length>0){const n="Restrict mode related items exist, please delete them first";throw Je.upDateWhereForRestrict(n)}return{setStmt:t,uWhereStmt:r}}catch(t){const r=t.message?t.message:t;throw Je.upDateWhereForRestrict(r)}}static async upDateWhereForCascade(e){let t="",r="";try{const n=e.key,s=[];for(const i of e.relatedItems){const o=i[n];o!==void 0&&s.push(o)}t+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const i of s)r+=`${i},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){const s=n.message?n.message:n;throw Je.upDateWhereForCascade(s)}return{setStmt:t,uWhereStmt:r}}static executeUpdateForDelete(e,t,r,n,s,i){try{let o=-1;const l=`UPDATE ${t} SET ${n} ${r}`,u=[];if(i.length>0){const h=r.split("?");h[h.length-1]===";"&&h.pop();for(let v=0;v<h.length;v++)for(const p of s)tt.indicesOf(h[v],p).length>0&&u.push(i[v])}if(o=ne.run(e,l,u,!1,"no").lastId,o===-1){const h=`UPDATE sql_deleted failed for table: ${t}`;throw Je.executeUpdateForDelete(h)}}catch(o){const l=o.message?o.message:o;throw Je.executeUpdateForDelete(l)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(const r of e)if(!t.includes(r))return!1;return!0}}class ne{static async beginTransaction(e,t){const r="BeginTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("BEGIN TRANSACTION"),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}}static async rollbackTransaction(e,t){const r="RollbackTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("ROLLBACK TRANSACTION"),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}}static commitTransaction(e,t){const r="CommitTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));const n="COMMIT TRANSACTION";try{return e.exec(n),Promise.resolve()}catch(s){const i=s.message?s.message:s;return Promise.reject(new Error(`${r}${i}`))}}static async dbChanges(e){const t="SELECT total_changes()";let r=0;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`DbChanges failed: ${s}`))}}static async getLastId(e){const t="SELECT last_insert_rowid()";let r=-1;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`GetLastId failed: ${s}`))}}static async setForeignKeyConstraintsEnabled(e,t){let r="PRAGMA foreign_keys=OFF";t&&(r="PRAGMA foreign_keys=ON");try{return e.run(r),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`SetForeignKey: ${s}`))}}static async getVersion(e){let t=0;try{return t=e.exec("PRAGMA user_version;")[0].values[0][0],Promise.resolve(t)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`GetVersion: ${n}`))}}static async setVersion(e,t){try{return e.exec(`PRAGMA user_version = ${t}`),Promise.resolve()}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`SetVersion: ${n}`))}}static async execute(e,t,r){try{var n=t;if(!r&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){n=t.replace(/\n/g,"");let o=n.split(";");var s=[];for(const l of o)if(l.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&l.toLowerCase().includes("WHERE".toLowerCase())){const g=l.trim(),h=await ne.deleteSQL(e,g,[]);s.push(h)}else s.push(l);n=s.join(";")}e.exec(n);const i=await ne.dbChanges(e);return Promise.resolve(i)}catch(i){const o=i.message?i.message:i;return Promise.reject(new Error(`Execute: ${o}`))}}static async executeSet(e,t,r,n){const s=[];let i=-1,o={};for(let l=0;l<t.length;l++){const u="statement"in t[l]?t[l].statement:null,g="values"in t[l]&&t[l].values.length>0?t[l].values:[];if(u==null){let h="ExecuteSet: Error No statement";return h+=` for index ${l}`,Promise.reject(new Error(h))}try{if(Array.isArray(g[0]))for(const h of g){const v=await ne.replaceUndefinedByNull(h);o=await ne.run(e,u,v,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}else{const h=await ne.replaceUndefinedByNull(g);o=await ne.run(e,u,h,r,n),i=o.lastId,Object.keys(o).includes("values")&&o.values.length>0&&s.push(o.values)}}catch(h){const v=h.message?h.message:h;return Promise.reject(new Error(`ExecuteSet: ${v}`))}}return o.lastId=i,o.values=n==="all"?s:n==="one"?s[0]:[],Promise.resolve(o)}static async queryAll(e,t,r){try{let n=[];if(r!=null&&r.length>0?n=e.exec(t,r):n=e.exec(t),n.length==0)return Promise.resolve([]);const s=n[0].values.map(i=>{const o={};return n[0].columns.forEach((l,u)=>{o[l]=i[u]}),o});return Promise.resolve(s)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`queryAll: ${s}`))}}static async run(e,t,r,n,s){let i=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),o=t,l=[],u={};try{!n&&i==="DELETE"&&(o=await ne.deleteSQL(e,t,r));const g=r||[];let h;if(g.length>0){const p=await ne.replaceUndefinedByNull(g);h=e.exec(o,p)}else h=e.exec(o);(s==="all"||s==="one")&&h&&h.length>0&&(l=ne.getReturnedValues(h[0],s));let v=await ne.getLastId(e);return u.lastId=v,l!=null&&l.length>0&&(u.values=l),Promise.resolve(u)}catch(g){const h=g.message?g.message:g;return Promise.reject(new Error(`run: ${h}`))}}static getReturnedValues(e,t){const r=[];for(let n=0;n<e.values.length;n++){let s={};for(let i=0;i<e.columns.length;i++)s[e.columns[i]]=e.values[n][i];if(r.push(s),t==="one")break}return r}static async deleteSQL(e,t,r){let n=t;try{const s=await ne.isLastModified(e,!0),i=await ne.isSqlDeleted(e,!0);if(!s||!i)return n;const o=tt.extractWhereClause(n);if(!o){const v="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${v}`))}const l=tt.extractTableName(n);if(!l){const v="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${v}`))}const u=tt.extractColumnNames(o);if(u.length===0){const v="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error(`${v}`))}const g="sql_deleted = 1";if(await It.findReferencesAndUpdate(e,l,o,u,r)){const v=o.endsWith(";")?o.slice(0,-1):o;n=`UPDATE ${l} SET ${g} WHERE ${v} AND sql_deleted = 0;`}else n="";return Promise.resolve(n)}catch(s){let i=s.message?s.message:s;return Promise.reject(new Error(`deleteSQL: ${i}`))}}static async getTableList(e){try{const t=await xt.getTablesNames(e);return Promise.resolve(t)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`getTableList: ${r}`))}}static async isTableExists(e,t){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${t}';`;const s=(await ne.queryAll(e,r,[])).length>0;return Promise.resolve(s)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isTableExists: ${n}`))}}static async isLastModified(e,t){if(!t)return Promise.reject("isLastModified: database not opened");try{const r=await xt.getTablesNames(e);for(const n of r)if((await He.getTableColumnNamesTypes(e,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isLastModified: ${n}`))}}static async isSqlDeleted(e,t){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{const r=await xt.getTablesNames(e);for(const n of r)if((await He.getTableColumnNamesTypes(e,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isSqlDeleted: ${n}`))}}static async replaceUndefinedByNull(e){const t=[];for(const r of e){let n=r;typeof r>"u"&&(n=null),t.push(n)}return Promise.resolve(t)}static async backupTables(e){const t="BackupTables: ";let r={};try{const n=await xt.getTablesNames(e);for(const s of n)try{const i=await ne.backupTable(e,s);r[`${s}`]=i}catch(i){const o=i.message?i.message:i;return Promise.reject(new Error(`${t}table ${s}: ${o}`))}return Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`BackupTables: ${s}`))}}static async backupTable(e,t){try{await ne.beginTransaction(e,!0);const r=await ne.getTableColumnNames(e,t),n=`_temp_${t}`,s=`DROP TABLE IF EXISTS ${n};`;await ne.run(e,s,[],!1,"no");let i=`ALTER TABLE ${t} RENAME `;if(i+=`TO ${n};`,await ne.run(e,i,[],!1,"no")<0){let l="BackupTable: lastId < 0";try{await ne.rollbackTransaction(e,!0)}catch(u){l+=`: ${u.message?u.message:u}`}return Promise.reject(new Error(`${l}`))}else try{return await ne.commitTransaction(e,!0),Promise.resolve(r)}catch(l){const u=l.message?l.message:l;return Promise.reject(new Error(`BackupTable: ${u}`))}}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`BackupTable: ${n}`))}}static async getTableColumnNames(e,t){let r=[];const n=[],s=`PRAGMA table_info('${t}');`;try{if(r=await ne.queryAll(e,s,[]),r.length>0)for(const i of r)n.push(i.name);return Promise.resolve(n)}catch(i){const o=i.message?i.message:i;return Promise.reject(new Error(`GetTableColumnNames: ${o}`))}}static async findCommonColumns(e,t){let r={};try{const n=await xt.getTablesNames(e);if(n.length===0)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const s of n){const i=await ne.getTableColumnNames(e,s);Object.keys(t).includes(s)&&(r[s]=ne.arraysIntersection(t[s],i))}return Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`FindCommonColumns: ${s}`))}}static arraysIntersection(e,t){if(e!=null&&t!=null){const r=new Set(e),n=new Set(t);return[...r].filter(s=>n.has(s))}else return[]}static async updateNewTablesData(e,t){try{await ne.beginTransaction(e,!0);const r=[];if(Object.keys(t).forEach(i=>{const o=t[i].join(",");let l=`INSERT INTO ${i} `;l+=`(${o}) `,l+=`SELECT ${o} FROM _temp_${i};`,r.push(l)}),await ne.execute(e,r.join(`
`),!1)<0){let i="updateNewTablesData: changes < 0";try{await ne.rollbackTransaction(e,!0)}catch(o){i+=`: ${o.message?o.message:o}`}return Promise.reject(new Error(`${i}`))}else try{return await ne.commitTransaction(e,!0),Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(new Error(`updateNewTablesData: ${o}`))}}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`updateNewTablesData: ${n}`))}}}class dt{static async createDatabaseSchema(e,t){let r=-1;const n=t.version;try{return await ne.setVersion(e.mDb,n),t.mode==="full"&&await xt.dropAll(e.mDb),r=await dt.createSchema(e,t),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateDatabaseSchema: ${s.message}`))}}static async createSchema(e,t){let r=0;const n=e.mDb;try{await ne.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(i){return Promise.reject(new Error(`CreateSchema: ${i.message}`))}const s=await dt.createSchemaStatement(t);if(s.length>0){const i=s.join(`
`);try{if(r=await ne.execute(n,i,!0),r<0)try{await ne.rollbackTransaction(n,!0),e.setIsTransActive(!1)}catch(o){return Promise.reject(new Error(`CreateSchema: changes < 0 ${o.message}`))}}catch(o){const l=o.message;try{return await ne.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${l}`))}catch(u){return Promise.reject(new Error(`CreateSchema: changes < 0 ${u.message}: ${l}`))}}}try{return await ne.commitTransaction(n,!0),e.setIsTransActive(!1),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateSchema: commit ${i.message}`))}}static async createSchemaStatement(e){const t=[];let r=!1,n=!1;try{for(const s of e.tables){if(s.schema!=null&&s.schema.length>=1){t.push(`CREATE TABLE IF NOT EXISTS ${s.name} (`);for(let i=0;i<s.schema.length;i++)i===s.schema.length-1?s.schema[i].column?(t.push(`${s.schema[i].column} ${s.schema[i].value}`),s.schema[i].column==="last_modified"&&(r=!0),s.schema[i].column==="sql_deleted"&&(n=!0)):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value}`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value}`):s.schema[i].column?t.push(`${s.schema[i].column} ${s.schema[i].value},`):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value},`):s.schema[i].primarykey?t.push(`FOREIGN KEY ${s.schema[i].value},`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value},`);if(t.push(");"),r&&n){let i="CREATE TRIGGER IF NOT EXISTS ";i+=`${s.name}`,i+="_trigger_last_modified ",i+=`AFTER UPDATE ON ${s.name} `,i+="FOR EACH ROW WHEN NEW.last_modified < ",i+="OLD.last_modified BEGIN UPDATE ",i+=`${s.name} `,i+="SET last_modified = ",i+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(i)}}if(s.indexes!=null&&s.indexes.length>=1)for(const i of s.indexes){const o=s.name;let l=`CREATE ${Object.keys(i).includes("mode")?i.mode+" ":""} INDEX IF NOT EXISTS `;l+=`${i.name} ON ${o} (${i.value});`,t.push(l)}if(s.triggers!=null&&s.triggers.length>=1)for(const i of s.triggers){const o=s.name;i.timeevent.toUpperCase().endsWith(" ON")&&(i.timeevent=i.timeevent.substring(0,i.timeevent.length-3));let l="CREATE TRIGGER IF NOT EXISTS ";l+=`${i.name} ${i.timeevent} ON ${o} `,i.condition&&(l+=`${i.condition} `),l+=`${i.logic};`,t.push(l)}}return Promise.resolve(t)}catch(s){return Promise.reject(s)}}static async createTablesData(e,t,r){let n=0,s=!1,i=-1,o="",l=-1;const u=e.mDb;try{l=await ne.dbChanges(u),await ne.beginTransaction(u,!0),e.setIsTransActive(!0)}catch(g){return Promise.reject(new Error(`createTablesData: ${g.message}`))}for(const g of t.tables)if(g.values!=null&&g.values.length>=1)try{i=await dt.createTableData(u,g,t.mode);const h=`create table data ${g.name}`;if(r.emit({progress:h}),i<0)break;s=!0}catch(h){o=h.message,s=!1;break}if(s)try{return await ne.commitTransaction(u,!0),e.setIsTransActive(!1),n=await ne.dbChanges(u)-l,Promise.resolve(n)}catch(g){return Promise.reject(new Error(`CreateTablesData: ${g.message}`))}else if(o.length>0)try{return await ne.rollbackTransaction(u,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${o}`))}catch(g){return Promise.reject(new Error(`CreateTablesData: ${g.message}: ${o}`))}else return Promise.resolve(0)}static async createTableData(e,t,r){let n=-1;try{if(!await ne.isTableExists(e,t.name))return Promise.reject(new Error(`CreateTableData: Table ${t.name} does not exist`));const i=await He.getTableColumnNamesTypes(e,t.name),o=i.types,l=i.names;if(o.length===0)return Promise.reject(new Error(`CreateTableData: Table ${t.name} info does not exist`));for(let u=0;u<t.values.length;u++){let g=t.values[u],h=!0;const v=await dt.createRowStatement(e,l,g,u,t.name,r);if(h=await dt.checkUpdate(e,v,g,t.name,l),h){if(v.substring(0,6).toUpperCase()==="DELETE"&&(g=[]),n=await ne.run(e,v,g,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`CreateTableData: ${s.message}`))}}static async createRowStatement(e,t,r,n,s,i){if(r.length!=t.length||r.length===0||t.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not correct length`));try{const o=await dt.isIdExists(e,s,t[0],r[0]);let l;if(i==="full"||i==="partial"&&!o){const u=t.join(),g=await dt.createQuestionMarkString(t.length);l=`INSERT INTO ${s} (${u}) VALUES (`,l+=`${g});`}else{let u=!0;const g=v=>v==="sql_deleted",h=t.findIndex(g);if(h>=0&&r[h]===1&&(u=!1,l=`DELETE FROM ${s} WHERE `,typeof r[0]=="string"?l+=`${t[0]} = '${r[0]}';`:l+=`${t[0]} = ${r[0]};`),u){const v=await dt.setNameForUpdate(t);if(v.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not set to String`));l=`UPDATE ${s} SET ${v} WHERE `,typeof r[0]=="string"?l+=`${t[0]} = '${r[0]}';`:l+=`${t[0]} = ${r[0]};`}}return Promise.resolve(l)}catch(o){return Promise.reject(new Error(`CreateRowStatement: ${o.message}`))}}static async checkUpdate(e,t,r,n,s){let i=!0;if(t.substring(0,6)==="UPDATE")try{let o=`SELECT * FROM ${n} WHERE `;typeof r[0]=="string"?o+=`${s[0]} = '${r[0]}';`:o+=`${s[0]} = ${r[0]};`;const l=await He.getValues(e,o,n);let u=[];if(l.length>0&&(u=l[0]),r.length>0&&u.length>0&&r.length===u.length){for(let g=0;g<r.length;g++)if(r[g]!==u[g])return Promise.resolve(!0);return Promise.resolve(!1)}else{const g="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${g}`))}}catch(o){return Promise.reject(new Error(`CheckUpdate: ${o.message}`))}else return Promise.resolve(i)}static async isIdExists(e,t,r,n){let s=!1,i=`SELECT ${r} FROM ${t} WHERE ${r} = `;typeof n=="number"&&(i+=`${n};`),typeof n=="string"&&(i+=`'${n}';`);try{return(await ne.queryAll(e,i,[])).length===1&&(s=!0),Promise.resolve(s)}catch(o){return Promise.reject(new Error(`IsIdExists: ${o.message}`))}}static async isType(e,t){let r=!1;return e==="NULL"&&typeof t=="object"&&(r=!0),e==="TEXT"&&typeof t=="string"&&(r=!0),e==="INTEGER"&&typeof t=="number"&&(r=!0),e==="REAL"&&typeof t=="number"&&(r=!0),e==="BLOB"&&typeof t=="string"&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))}static async checkColumnTypes(e,t){for(let r=0;r<t.length;r++)if(t[r]!=null)try{await dt.isType(e[r],t[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()}static async createQuestionMarkString(e){let t="";for(let r=0;r<e;r++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}static async setNameForUpdate(e){let t="";for(const r of e)t+=`${r} = ? ,`;return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))}static async createView(e,t){const r=`CREATE VIEW IF NOT EXISTS ${t.name} AS ${t.value};`;try{return await ne.execute(e,r,!0)<0?Promise.reject(new Error(`CreateView: ${t.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}}static async createViews(e,t){const r=e.mDb;let n=!1,s="",i=-1,o=-1;try{i=await ne.dbChanges(r),await ne.beginTransaction(r,!0),e.setIsTransActive(!0)}catch(l){return Promise.reject(new Error(`createViews: ${l.message}`))}for(const l of t.views)if(l.value!=null)try{await dt.createView(r,l),n=!0}catch(u){s=u.message,n=!1;break}if(n)try{return await ne.commitTransaction(r,!0),e.setIsTransActive(!1),o=await ne.dbChanges(r)-i,Promise.resolve(o)}catch(l){return Promise.reject(new Error(`createViews: ${l.message}`))}else if(s.length>0)try{return await ne.rollbackTransaction(r,!0),e.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${s}`))}catch(l){return Promise.reject(new Error(`createViews: ${l.message}: ${s}`))}else return Promise.resolve(0)}}class Ze{static async createExportObject(e,t,r){const n={};let s=[],i=[],o="";try{i=await Ze.getViewsName(e);const l=await Ze.getTablesNameSQL(e);if(l.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!await ne.isTableExists(e,"sync_table")&&t.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":{s=await Ze.getTablesPartial(e,l,r);break}case"full":{s=await Ze.getTablesFull(e,l,r);break}default:{o="createExportObject: expMode "+t.mode+" not defined";break}}return o.length>0?Promise.reject(new Error(o)):(s.length>0&&(n.database=t.database,n.version=t.version,n.encrypted=t.encrypted,n.mode=t.mode,n.tables=s,i.length>0&&(n.views=i)),Promise.resolve(n))}catch(l){return Promise.reject(new Error("createExportObject: "+l.message))}}static async getViewsName(e){const t=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await ne.queryAll(e,r,[]);for(const s of n){const i={};i.name=s.name,i.value=s.sql.substring(s.sql.indexOf("AS ")+3),t.push(i)}return Promise.resolve(t)}catch(s){return Promise.reject(new Error(`getViewsName: ${s.message}`))}}static async getTablesFull(e,t,r){const n=[];let s="";try{for(const i of t){let o,l;if(i.name)o=i.name;else{s="GetTablesFull: no name";break}if(i.sql)l=i.sql;else{s="GetTablesFull: no sql";break}const u={},g=await Ze.getSchema(l);if(g.length===0){s="GetTablesFull: no Schema returned";break}await He.checkSchemaValidity(g);const h=await Ze.getIndexes(e,o);h.length>0&&await He.checkIndexesValidity(h);const v=await Ze.getTriggers(e,o);v.length>0&&await He.checkTriggersValidity(v);let p=`Full: Table ${o} schema export completed ...`;r.emit({progress:p});const _=`SELECT * FROM ${o};`,b=await He.getValues(e,_,o);if(u.name=o,g.length>0)u.schema=g;else{s="GetTablesFull: must contain schema";break}if(h.length>0&&(u.indexes=h),v.length>0&&(u.triggers=v),b.length>0&&(u.values=b),Object.keys(u).length<=1){s=`GetTablesFull: table ${o} is not a jsonTable`;break}p=`Full: Table ${o} table data export completed ...`,r.emit({progress:p}),n.push(u)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTablesFull: ${i.message}`))}}static async getSchema(e){const t=[],r=e.indexOf("("),n=e.lastIndexOf(")");let s=e.substring(r+1,n);try{s=await Ze.modEmbeddedParentheses(s);const i=s.split(",");for(let o=0;o<i.length;o++){let l=[];const u=i[o].replace(/\n/g,"").trim();l[0]=u.substring(0,u.indexOf(" ")),l[1]=u.substring(u.indexOf(" ")+1);const g={};if(l[0].toUpperCase()==="FOREIGN"){const h=u.indexOf("("),v=u.indexOf(")"),_=u.substring(h+1,v).split("§");l[0]=_.join(","),l[0]=l[0].replace(/, /g,","),l[1]=u.substring(v+2),g.foreignkey=l[0]}else if(l[0].toUpperCase()==="PRIMARY"){const h=u.indexOf("("),v=u.indexOf(")"),_=u.substring(h+1,v).split("§");l[0]="CPK_"+_.join("_"),l[0]=l[0].replace(/_ /g,"_"),l[1]=u,g.constraint=l[0]}else if(l[0].toUpperCase()==="CONSTRAINT"){let h=[];const v=l[1].trim();h[0]=v.substring(0,v.indexOf(" ")),h[1]=v.substring(v.indexOf(" ")+1),l[0]=h[0],g.constraint=l[0],l[1]=h[1]}else g.column=l[0];g.value=l[1].replace(/§/g,","),t.push(g)}return Promise.resolve(t)}catch(i){return Promise.reject(new Error(i.message))}}static async getIndexes(e,t){const r=[];let n="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+=`type = 'index' AND tbl_name = '${t}' `,s+="AND sql NOTNULL;";const i=await ne.queryAll(e,s,[]);if(i.length>0){for(const o of i)if(Object.keys(o).length===3)if(o.tbl_name===t){const u=o.sql,g=u.includes("UNIQUE")?"UNIQUE":"",h=u.lastIndexOf("("),v=u.lastIndexOf(")"),p={};p.name=o.name,p.value=u.slice(h+1,v),g.length>0&&(p.mode=g),r.push(p)}else{n=`GetIndexes: Table ${t} doesn't match`;break}else{n=`GetIndexes: Table ${t} creating indexes`;break}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(s){return Promise.reject(new Error(`GetIndexes: ${s.message}`))}}static async getTriggers(e,t){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${t}' `,n+="AND sql NOT NULL;";const s=await ne.queryAll(e,n,[]);if(s.length>0)for(const i of s)if(Object.keys(i).length===3)if(i.tbl_name===t){const l=i.sql,u=i.name;let g=l.split(u);if(g.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!g[1].includes(t))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${t}`));const h=g[1].split(t,1)[0].trim();if(g=g[1].split(h+" "+t),g.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let v="",p="";if(g[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(g=g[1].trim().split("BEGIN"),g.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));v=g[0].trim(),p="BEGIN"+g[1]}else p=g[1].trim();const _={};_.name=u,_.logic=p,v.length>0&&(_.condition=v),_.timeevent=h,r.push(_)}else return Promise.reject(new Error(`GetTriggers: Table ${t} doesn't match`));else return Promise.reject(new Error(`GetTriggers: Table ${t} creating indexes`));return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}}static async getTablesPartial(e,t,r){const n=[];let s={},i=0,o=[],l="";try{const u=await Ze.getPartialModeData(e,t);Object.keys(u).includes("syncDate")&&(i=u.syncDate),Object.keys(u).includes("modTables")&&(s=u.modTables,o=Object.keys(s));for(const g of t){let h="",v="";if(g.name)h=g.name;else{l="GetTablesFull: no name";break}if(g.sql)v=g.sql;else{l="GetTablesFull: no sql";break}if(o.length==0||o.indexOf(h)===-1||s[h]=="No")continue;const p={};let _=[],b=[],k=[];p.name=g,s[p.name]==="Create"&&(_=await Ze.getSchema(v),_.length>0&&await He.checkSchemaValidity(_),b=await Ze.getIndexes(e,h),b.length>0&&await He.checkIndexesValidity(b),k=await Ze.getTriggers(e,h),k.length>0&&await He.checkTriggersValidity(k));let T=`Partial: Table ${h} schema export completed ...`;r.emit({progress:T});let P="";s[h]==="Create"?P=`SELECT * FROM ${h};`:P=`SELECT * FROM ${h} WHERE last_modified > ${i};`;const j=await He.getValues(e,P,h);if(p.name=h,_.length>0&&(p.schema=_),b.length>0&&(p.indexes=b),k.length>0&&(p.triggers=k),j.length>0&&(p.values=j),Object.keys(p).length<=1){l=`GetTablesPartial: table ${h} is not a jsonTable`;break}T=`Partial: Table ${h} table data export completed ...`,r.emit({progress:T}),n.push(p)}return l.length>0?Promise.reject(new Error(l)):Promise.resolve(n)}catch(u){return Promise.reject(new Error(`GetTablesPartial: ${u.message}`))}}static async getPartialModeData(e,t){const r={};try{const n=await Ze.getSynchroDate(e);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const s=await Ze.getTablesModified(e,t,n);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=s,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}}static async getTablesNameSQL(e){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{const r=await ne.queryAll(e,t,[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}}static async getTablesModified(e,t,r){let n="";try{const s={};for(const i of t){let o,l="SELECT count(*) AS tcount  ";l+=`FROM ${i.name};`;let u=await ne.queryAll(e,l,[]);if(u.length!=1){n="GetTableModified: total count not returned";break}const g=u[0].tcount;if(l="SELECT count(*) AS mcount FROM ",l+=`${i.name} WHERE last_modified > `,l+=`${r};`,u=await ne.queryAll(e,l,[]),u.length!=1)break;const h=u[0].mcount;h===0?o="No":g===h?o="Create":o="Modified";const v=i.name;s[v]=o}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(s)}catch(s){return Promise.reject(new Error(`GetTableModified: ${s.message}`))}}static async getSynchroDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 1;",r=await ne.queryAll(e,t,[]);return Promise.resolve(r[0].sync_date)}catch(t){const r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}}static async getLastExportDate(e){try{const t="SELECT sync_date FROM sync_table WHERE id = 2;",r=await ne.queryAll(e,t,[]);return r.length===0?Promise.resolve(-1):Promise.resolve(r[0].sync_date)}catch(t){const r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}}static async setLastExportDate(e,t){try{if(!await ne.isTableExists(e,"sync_table"))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let s="";return await Ze.getLastExportDate(e)>0?s=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:s=`INSERT INTO sync_table (sync_date) VALUES (${n});`,await ne.execute(e,s,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}}static async delExportedRows(e){let t;try{if(!await ne.isTableExists(e,"sync_table"))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=await Ze.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=await ne.getTableList(e);if(n.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const s of n){let i=-1;const o=`DELETE FROM ${s}
              WHERE sql_deleted = 1 AND last_modified < ${t};`;if(i=await ne.run(e,o,[],!0,"no"),i<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}}static async modEmbeddedParentheses(e){const t=Ze.indexOfChar(e,"("),r=Ze.indexOfChar(e,")");if(t.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(t.length===0)return Promise.resolve(e);let n=e.substring(0,t[0]-1);for(let s=0;s<t.length;s++){let i;s<t.length-1&&t[s+1]<r[s]?(i=e.substring(t[s]-1,r[s+1]),s++):i=e.substring(t[s]-1,r[s]);const o=i.replace(/,/g,"§");n+=o,s<t.length-1&&(n+=e.substring(r[s],t[s+1]-1))}return n+=e.substring(r[r.length-1],e.length),Promise.resolve(n)}static indexOfChar(e,t){let r=[...e];return t=t.toLowerCase(),r.reduce((n,s,i)=>s.toLowerCase()===t?[...n,i]:n,[])}}class Nn{static async onUpgrade(e,t,r,n){let s=-1;const i=new Int32Array(Object.keys(t).map(o=>parseInt(o))).sort();for(const o of i)if(o>r&&o<=n){const l=t[o].statements;if(l.length===0)return Promise.reject("onUpgrade: statements not given");try{await ne.setForeignKeyConstraintsEnabled(e.mDb,!1);const u=await ne.dbChanges(e.mDb);await Nn.executeStatementsProcess(e,l),await ne.setVersion(e.mDb,o),await ne.setForeignKeyConstraintsEnabled(e.mDb,!0),s=await ne.dbChanges(e.mDb)-u}catch(u){return Promise.reject(new Error(`onUpgrade: ${u.message}`))}}return Promise.resolve(s)}static async executeStatementsProcess(e,t){try{await ne.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(const r of t)await ne.execute(e.mDb,r,!1);return await ne.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(r){return await ne.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}}}class us{constructor(e,t,r,n,s,i){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=n,this.version=t,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=i}async open(){const e={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise((t,r)=>{try{Mo(e).then(async n=>{const s=await Ce.getDBFromStore(this.dbName,this.store);s!=null?this.mDb=new n.Database(s):(this.mDb=new n.Database,await Ce.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let i=await ne.getVersion(this.mDb);if(this.version>i&&Object.keys(this.vUpgDict).length>0)try{if(await Ce.isDBInStore(this.dbName,this.store)&&(await Ce.copyDBToStore(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0),await Nn.onUpgrade(this,this.vUpgDict,i,this.version)===-1)try{this.isBackup&&await Ce.restoreDBFromStore(this.dbName,"backup",this.store)}catch(u){const g=u.message?u.message:u;return r(new Error(`Open: ${g}`))}this.isBackup&&await Ce.removeDBFromStore(`backup-${this.dbName}`,this.store)}catch{try{this.isBackup&&await Ce.restoreDBFromStore(this.dbName,"backup",this.store)}catch(l){const u=l.message?l.message:l;return r(new Error(`Open: ${u}`))}}if(this.autoSave)try{await this.saveToStore()}catch(o){this._isDBOpen=!1;const l=o.message?o.message:o;return r(new Error(`Open: ${l}`))}return await ne.setForeignKeyConstraintsEnabled(this.mDb,!0),t()})}catch(n){this._isDBOpen=!1;const s=n.message?n.message:n;return r(new Error(`Open: ${s}`))}})}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){this._isDBOpen=!1;const t=e.message?e.message:e;return Promise.reject(new Error(`in close ${t}`))}return Promise.resolve()}async saveToStore(e=!0){if(this.mDb!=null&&this._isDBOpen)try{await Ce.setDBToStore(this.mDb,this.dbName,this.store),e&&await ne.setForeignKeyConstraintsEnabled(this.mDb,!0)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`in saveToStore ${r}`))}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`exportDB: ${t}`))}}async getVersion(){if(this.mDb!=null&&this._isDBOpen)try{const e=await ne.getVersion(this.mDb);return Promise.resolve(e)}catch(e){this._isDBOpen=!1;const t=e.message?e.message:e;return Promise.reject(new Error(`in getVersion ${t}`))}}async isDBExists(e){try{const t=await Ce.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`in isDBExists ${r}`))}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await Ce.removeDBFromStore(e,this.store),Promise.resolve()}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`DeleteDB: ${r}`))}}async beginTransaction(){if(!this._isDBOpen){let e=`BeginTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t=`BeginTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}async commitTransaction(){if(!this._isDBOpen){let e=`CommitTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`CommitTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}async rollbackTransaction(){if(!this._isDBOpen){let e=`RollbackTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`RollbackTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}async executeSQL(e,t=!0){if(!this._isDBOpen){let n=`ExecuteSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}let r=-1;try{r=await ne.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(n){let s=`executeSQL: ${n.message?n.message:n}`;return Promise.reject(new Error(`${s}`))}try{if(await ne.execute(this.mDb,e,!1)<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const s=await ne.dbChanges(this.mDb)-r;return Promise.resolve(s)}catch(n){let s=`ExecuteSQL: ${n.message?n.message:n}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(i){s+=` : ${i.message?i.message:i}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(n){this._isDBOpen=!1;const s=n.message?n.message:n;return Promise.reject(`ExecuteSQL: ${s}`)}}}async execSet(e,t=!0,r="no"){if(!this._isDBOpen){let i=`ExecSet: Database ${this.dbName} `;return i+="not opened",Promise.reject(new Error(i))}const n={changes:-1,lastId:-1};let s=-1;try{s=await ne.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(i){let l=`ExecSet: ${i.message?i.message:i}`;return Promise.reject(new Error(`${l}`))}try{const i=await ne.executeSet(this.mDb,e,!1,r);let o=i.lastId;if(o<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const l=await ne.dbChanges(this.mDb)-s;return n.changes=l,n.lastId=o,n.values=i.values?i.values:[],Promise.resolve(n)}catch(i){let l=`ExecSet: ${i.message?i.message:i}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(u){l+=` : ${u.message?u.message:u}`}return Promise.reject(new Error(`ExecSet: ${l}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave)try{await this.saveToStore()}catch(i){const o=i.message?i.message:i;return this._isDBOpen=!1,Promise.reject(`ExecSet: ${o}`)}}}async selectSQL(e,t){if(!this._isDBOpen){let r=`SelectSQL: Database ${this.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{let r=await ne.queryAll(this.mDb,e,t);return Promise.resolve(r)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`SelectSQL: ${n}`))}}async runSQL(e,t,r=!0,n){let s=-1;if(!this._isDBOpen){let l=`RunSQL: Database ${this.dbName} `;return l+="not opened",Promise.reject(new Error(l))}const i={changes:-1,lastId:-1};let o=-1;try{o=await ne.dbChanges(this.mDb),r&&!this.isTransactionActive&&await this.beginTransaction()}catch(l){let g=`RunSQL: ${l.message?l.message:l}`;return Promise.reject(new Error(`${g}`))}try{const l=await ne.run(this.mDb,e,t,!1,n);if(s=l.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&this.isTransactionActive&&await this.commitTransaction();const u=await ne.dbChanges(this.mDb)-o;return i.changes=u,i.lastId=s,i.values=l.values?l.values:[],Promise.resolve(i)}catch(l){let g=`RunSQL: ${l.message?l.message:l}`;try{r&&this.isTransactionActive&&await this.rollbackTransaction()}catch(h){g+=` : ${h.message?h.message:h}`}return Promise.reject(new Error(`${g}`))}finally{if(r&&this.setIsTransActive(!1),this.autoSave)try{await this.saveToStore()}catch(l){this._isDBOpen=!1;const u=l.message?l.message:l;return Promise.reject(`ExecSet: ${u}`)}}}async getTableNames(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=await ne.getTableList(this.mDb);return Promise.resolve(e)}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`GetTableNames: ${t}`))}}async isTable(e){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}try{const t=await ne.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){const r=`IsTable: ${t.message?t.message:t}`;return Promise.reject(new Error(r))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(await ne.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{const r=await ne.isLastModified(this.mDb,this._isDBOpen),n=await ne.isSqlDeleted(this.mDb,this._isDBOpen);if(r&&n){const s=Math.round(new Date().getTime()/1e3);let i=`
                          CREATE TABLE IF NOT EXISTS sync_table (
                              id INTEGER PRIMARY KEY NOT NULL,
                              sync_date INTEGER
                              );`;return i+=`INSERT INTO sync_table (sync_date) VALUES (
                              "${s}");`,e=await ne.execute(this.mDb,i,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const n=`CreateSyncTable: ${t.message?t.message:t}`;return Promise.reject(new Error(n))}}async getSyncDate(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!await ne.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const t=await Ze.getSynchroDate(this.mDb);return Promise.resolve(t)}catch(e){const r=`getSyncDate: ${e.message?e.message:e}`;return Promise.reject(new Error(r))}}async setSyncDate(e){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;return t+="not opened",{result:!1,message:t}}try{if(!await ne.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const r=Math.round(new Date(e).getTime()/1e3);let n="UPDATE sync_table SET sync_date = ";return n+=`${r} WHERE id = 1;`,await ne.execute(this.mDb,n,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message?t.message:t}`}}}async importJson(e,t){let r=0;if(this._isDBOpen)try{if(await ne.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){r=await dt.createDatabaseSchema(this,e);let n=`Schema creation completed changes: ${r}`;if(t.emit({progress:n}),r!=-1){r+=await dt.createTablesData(this,e,t);let s=`Tables data creation completed changes: ${r}`;t.emit({progress:s})}}return e.views&&e.views.length>0&&(r+=await dt.createViews(this,e)),await ne.setForeignKeyConstraintsEnabled(this.mDb,!0),await this.saveToStore(),Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`ImportJson: ${s}`))}else return Promise.reject(new Error("ImportJson: database is closed"))}async exportJson(e,t){const r={};if(r.database=this.dbName.slice(0,-9),r.version=this.version,r.encrypted=!1,r.mode=e,this._isDBOpen)try{if(await ne.isTableExists(this.mDb,"sync_table"))await Ze.setLastExportDate(this.mDb,new Date().toISOString());else if(r.mode!=="full"){const l="No sync_table available for partial mode";return Promise.reject(new Error(l))}const s=await Ze.createExportObject(this.mDb,r,t);if(Object.keys(s).length===0){const l="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(l))}return He.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`ExportJson: ${s}`))}else return Promise.reject(new Error("ExportJson: database is closed"))}async deleteExportedRows(){if(this._isDBOpen)try{return await Ze.delExportedRows(this.mDb),Promise.resolve()}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`deleteExportedRows: ${t}`))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))}}var ti={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(c,e){(function(t){c.exports=t()})(function(){return function t(r,n,s){function i(u,g){if(!n[u]){if(!r[u]){var h=typeof Jt=="function"&&Jt;if(!g&&h)return h(u,!0);if(o)return o(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var p=n[u]={exports:{}};r[u][0].call(p.exports,function(_){var b=r[u][1][_];return i(b||_)},p,p.exports,t,r,n,s)}return n[u].exports}for(var o=typeof Jt=="function"&&Jt,l=0;l<s.length;l++)i(s[l]);return i}({1:[function(t,r,n){(function(s){var i=s.MutationObserver||s.WebKitMutationObserver,o;if(i){var l=0,u=new i(_),g=s.document.createTextNode("");u.observe(g,{characterData:!0}),o=function(){g.data=l=++l%2}}else if(!s.setImmediate&&typeof globalThis.MessageChannel<"u"){var h=new globalThis.MessageChannel;h.port1.onmessage=_,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in globalThis.document.createElement("script")?o=function(){var k=s.document.createElement("script");k.onreadystatechange=function(){_(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},s.document.documentElement.appendChild(k)}:o=function(){setTimeout(_,0)};var v,p=[];function _(){v=!0;for(var k,T,P=p.length;P;){for(T=p,p=[],k=-1;++k<P;)T[k]();P=p.length}v=!1}r.exports=b;function b(k){p.push(k)===1&&!v&&o()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var s=t(1);function i(){}var o={},l=["REJECTED"],u=["FULFILLED"],g=["PENDING"];r.exports=h;function h(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,D!==i&&b(this,D)}h.prototype.catch=function(D){return this.then(null,D)},h.prototype.then=function(D,G){if(typeof D!="function"&&this.state===u||typeof G!="function"&&this.state===l)return this;var z=new this.constructor(i);if(this.state!==g){var Z=this.state===u?D:G;p(z,Z,this.outcome)}else this.queue.push(new v(z,D,G));return z};function v(D,G,z){this.promise=D,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(D){o.resolve(this.promise,D)},v.prototype.otherCallFulfilled=function(D){p(this.promise,this.onFulfilled,D)},v.prototype.callRejected=function(D){o.reject(this.promise,D)},v.prototype.otherCallRejected=function(D){p(this.promise,this.onRejected,D)};function p(D,G,z){s(function(){var Z;try{Z=G(z)}catch(K){return o.reject(D,K)}Z===D?o.reject(D,new TypeError("Cannot resolve promise with itself")):o.resolve(D,Z)})}o.resolve=function(D,G){var z=k(_,G);if(z.status==="error")return o.reject(D,z.value);var Z=z.value;if(Z)b(D,Z);else{D.state=u,D.outcome=G;for(var K=-1,J=D.queue.length;++K<J;)D.queue[K].callFulfilled(G)}return D},o.reject=function(D,G){D.state=l,D.outcome=G;for(var z=-1,Z=D.queue.length;++z<Z;)D.queue[z].callRejected(G);return D};function _(D){var G=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof G=="function")return function(){G.apply(D,arguments)}}function b(D,G){var z=!1;function Z(A){z||(z=!0,o.reject(D,A))}function K(A){z||(z=!0,o.resolve(D,A))}function J(){G(K,Z)}var he=k(J);he.status==="error"&&Z(he.value)}function k(D,G){var z={};try{z.value=D(G),z.status="success"}catch(Z){z.status="error",z.value=Z}return z}h.resolve=T;function T(D){return D instanceof this?D:o.resolve(new this(i),D)}h.reject=P;function P(D){var G=new this(i);return o.reject(G,D)}h.all=j;function j(D){var G=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,Z=!1;if(!z)return this.resolve([]);for(var K=new Array(z),J=0,he=-1,A=new this(i);++he<z;)F(D[he],he);return A;function F(y,X){G.resolve(y).then(Se,function(ae){Z||(Z=!0,o.reject(A,ae))});function Se(ae){K[X]=ae,++J===z&&!Z&&(Z=!0,o.resolve(A,K))}}}h.race=L;function L(D){var G=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=D.length,Z=!1;if(!z)return this.resolve([]);for(var K=-1,J=new this(i);++K<z;)he(D[K]);return J;function he(A){G.resolve(A).then(function(F){Z||(Z=!0,o.resolve(J,F))},function(F){Z||(Z=!0,o.reject(J,F))})}}},{1:1}],3:[function(t,r,n){(function(s){typeof globalThis.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function i(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=o();function u(){try{if(!l||!l.open)return!1;var w=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(w,R){w=w||[],R=R||{};try{return new Blob(w,R)}catch(C){if(C.name!=="TypeError")throw C;for(var S=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,B=new S,N=0;N<w.length;N+=1)B.append(w[N]);return B.getBlob(R.type)}}typeof Promise>"u"&&t(3);var h=Promise;function v(w,R){R&&w.then(function(S){R(null,S)},function(S){R(S)})}function p(w,R,S){typeof R=="function"&&w.then(R),typeof S=="function"&&w.catch(S)}function _(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",T=void 0,P={},j=Object.prototype.toString,L="readonly",D="readwrite";function G(w){for(var R=w.length,S=new ArrayBuffer(R),B=new Uint8Array(S),N=0;N<R;N++)B[N]=w.charCodeAt(N);return S}function z(w){return new h(function(R){var S=w.transaction(k,D),B=g([""]);S.objectStore(k).put(B,"key"),S.onabort=function(N){N.preventDefault(),N.stopPropagation(),R(!1)},S.oncomplete=function(){var N=navigator.userAgent.match(/Chrome\/(\d+)/),C=navigator.userAgent.match(/Edge\//);R(C||!N||parseInt(N[1],10)>=43)}}).catch(function(){return!1})}function Z(w){return typeof T=="boolean"?h.resolve(T):z(w).then(function(R){return T=R,T})}function K(w){var R=P[w.name],S={};S.promise=new h(function(B,N){S.resolve=B,S.reject=N}),R.deferredOperations.push(S),R.dbReady?R.dbReady=R.dbReady.then(function(){return S.promise}):R.dbReady=S.promise}function J(w){var R=P[w.name],S=R.deferredOperations.pop();if(S)return S.resolve(),S.promise}function he(w,R){var S=P[w.name],B=S.deferredOperations.pop();if(B)return B.reject(R),B.promise}function A(w,R){return new h(function(S,B){if(P[w.name]=P[w.name]||U(),w.db)if(R)K(w),w.db.close();else return S(w.db);var N=[w.name];R&&N.push(w.version);var C=l.open.apply(l,N);R&&(C.onupgradeneeded=function(Q){var ie=C.result;try{ie.createObjectStore(w.storeName),Q.oldVersion<=1&&ie.createObjectStore(k)}catch(ce){if(ce.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+Q.oldVersion+" to version "+Q.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw ce}}),C.onerror=function(Q){Q.preventDefault(),B(C.error)},C.onsuccess=function(){var Q=C.result;Q.onversionchange=function(ie){ie.target.close()},S(Q),J(w)}})}function F(w){return A(w,!1)}function y(w){return A(w,!0)}function X(w,R){if(!w.db)return!0;var S=!w.db.objectStoreNames.contains(w.storeName),B=w.version<w.db.version,N=w.version>w.db.version;if(B&&(w.version!==R&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),N||S){if(S){var C=w.db.version+1;C>w.version&&(w.version=C)}return!0}return!1}function Se(w){return new h(function(R,S){var B=new FileReader;B.onerror=S,B.onloadend=function(N){var C=btoa(N.target.result||"");R({__local_forage_encoded_blob:!0,data:C,type:w.type})},B.readAsBinaryString(w)})}function ae(w){var R=G(atob(w.data));return g([R],{type:w.type})}function De(w){return w&&w.__local_forage_encoded_blob}function ue(w){var R=this,S=R._initReady().then(function(){var B=P[R._dbInfo.name];if(B&&B.dbReady)return B.dbReady});return p(S,w,w),S}function xe(w){K(w);for(var R=P[w.name],S=R.forages,B=0;B<S.length;B++){var N=S[B];N._dbInfo.db&&(N._dbInfo.db.close(),N._dbInfo.db=null)}return w.db=null,F(w).then(function(C){return w.db=C,X(w)?y(w):C}).then(function(C){w.db=R.db=C;for(var Q=0;Q<S.length;Q++)S[Q]._dbInfo.db=C}).catch(function(C){throw he(w,C),C})}function W(w,R,S,B){B===void 0&&(B=1);try{var N=w.db.transaction(w.storeName,R);S(null,N)}catch(C){if(B>0&&(!w.db||C.name==="InvalidStateError"||C.name==="NotFoundError"))return h.resolve().then(function(){if(!w.db||C.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),y(w)}).then(function(){return xe(w).then(function(){W(w,R,S,B-1)})}).catch(S);S(C)}}function U(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _e(w){var R=this,S={db:null};if(w)for(var B in w)S[B]=w[B];var N=P[S.name];N||(N=U(),P[S.name]=N),N.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=ue);var C=[];function Q(){return h.resolve()}for(var ie=0;ie<N.forages.length;ie++){var ce=N.forages[ie];ce!==R&&C.push(ce._initReady().catch(Q))}var le=N.forages.slice(0);return h.all(C).then(function(){return S.db=N.db,F(S)}).then(function(me){return S.db=me,X(S,R._defaultConfig.version)?y(S):me}).then(function(me){S.db=N.db=me,R._dbInfo=S;for(var be=0;be<le.length;be++){var Re=le[be];Re!==R&&(Re._dbInfo.db=S.db,Re._dbInfo.version=S.version)}})}function ye(w,R){var S=this;w=_(w);var B=new h(function(N,C){S.ready().then(function(){W(S._dbInfo,L,function(Q,ie){if(Q)return C(Q);try{var ce=ie.objectStore(S._dbInfo.storeName),le=ce.get(w);le.onsuccess=function(){var me=le.result;me===void 0&&(me=null),De(me)&&(me=ae(me)),N(me)},le.onerror=function(){C(le.error)}}catch(me){C(me)}})}).catch(C)});return v(B,R),B}function ge(w,R){var S=this,B=new h(function(N,C){S.ready().then(function(){W(S._dbInfo,L,function(Q,ie){if(Q)return C(Q);try{var ce=ie.objectStore(S._dbInfo.storeName),le=ce.openCursor(),me=1;le.onsuccess=function(){var be=le.result;if(be){var Re=be.value;De(Re)&&(Re=ae(Re));var Me=w(Re,be.key,me++);Me!==void 0?N(Me):be.continue()}else N()},le.onerror=function(){C(le.error)}}catch(be){C(be)}})}).catch(C)});return v(B,R),B}function qe(w,R,S){var B=this;w=_(w);var N=new h(function(C,Q){var ie;B.ready().then(function(){return ie=B._dbInfo,j.call(R)==="[object Blob]"?Z(ie.db).then(function(ce){return ce?R:Se(R)}):R}).then(function(ce){W(B._dbInfo,D,function(le,me){if(le)return Q(le);try{var be=me.objectStore(B._dbInfo.storeName);ce===null&&(ce=void 0);var Re=be.put(ce,w);me.oncomplete=function(){ce===void 0&&(ce=null),C(ce)},me.onabort=me.onerror=function(){var Me=Re.error?Re.error:Re.transaction.error;Q(Me)}}catch(Me){Q(Me)}})}).catch(Q)});return v(N,S),N}function Ke(w,R){var S=this;w=_(w);var B=new h(function(N,C){S.ready().then(function(){W(S._dbInfo,D,function(Q,ie){if(Q)return C(Q);try{var ce=ie.objectStore(S._dbInfo.storeName),le=ce.delete(w);ie.oncomplete=function(){N()},ie.onerror=function(){C(le.error)},ie.onabort=function(){var me=le.error?le.error:le.transaction.error;C(me)}}catch(me){C(me)}})}).catch(C)});return v(B,R),B}function Oe(w){var R=this,S=new h(function(B,N){R.ready().then(function(){W(R._dbInfo,D,function(C,Q){if(C)return N(C);try{var ie=Q.objectStore(R._dbInfo.storeName),ce=ie.clear();Q.oncomplete=function(){B()},Q.onabort=Q.onerror=function(){var le=ce.error?ce.error:ce.transaction.error;N(le)}}catch(le){N(le)}})}).catch(N)});return v(S,w),S}function Be(w){var R=this,S=new h(function(B,N){R.ready().then(function(){W(R._dbInfo,L,function(C,Q){if(C)return N(C);try{var ie=Q.objectStore(R._dbInfo.storeName),ce=ie.count();ce.onsuccess=function(){B(ce.result)},ce.onerror=function(){N(ce.error)}}catch(le){N(le)}})}).catch(N)});return v(S,w),S}function Qe(w,R){var S=this,B=new h(function(N,C){if(w<0){N(null);return}S.ready().then(function(){W(S._dbInfo,L,function(Q,ie){if(Q)return C(Q);try{var ce=ie.objectStore(S._dbInfo.storeName),le=!1,me=ce.openKeyCursor();me.onsuccess=function(){var be=me.result;if(!be){N(null);return}w===0||le?N(be.key):(le=!0,be.advance(w))},me.onerror=function(){C(me.error)}}catch(be){C(be)}})}).catch(C)});return v(B,R),B}function We(w){var R=this,S=new h(function(B,N){R.ready().then(function(){W(R._dbInfo,L,function(C,Q){if(C)return N(C);try{var ie=Q.objectStore(R._dbInfo.storeName),ce=ie.openKeyCursor(),le=[];ce.onsuccess=function(){var me=ce.result;if(!me){B(le);return}le.push(me.key),me.continue()},ce.onerror=function(){N(ce.error)}}catch(me){N(me)}})}).catch(N)});return v(S,w),S}function ft(w,R){R=b.apply(this,arguments);var S=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||S.name,w.storeName=w.storeName||S.storeName);var B=this,N;if(!w.name)N=h.reject("Invalid arguments");else{var C=w.name===S.name&&B._dbInfo.db,Q=C?h.resolve(B._dbInfo.db):F(w).then(function(ie){var ce=P[w.name],le=ce.forages;ce.db=ie;for(var me=0;me<le.length;me++)le[me]._dbInfo.db=ie;return ie});w.storeName?N=Q.then(function(ie){if(ie.objectStoreNames.contains(w.storeName)){var ce=ie.version+1;K(w);var le=P[w.name],me=le.forages;ie.close();for(var be=0;be<me.length;be++){var Re=me[be];Re._dbInfo.db=null,Re._dbInfo.version=ce}var Me=new h(function(ze,Ye){var Ve=l.open(w.name,ce);Ve.onerror=function(ot){var Ft=Ve.result;Ft.close(),Ye(ot)},Ve.onupgradeneeded=function(){var ot=Ve.result;ot.deleteObjectStore(w.storeName)},Ve.onsuccess=function(){var ot=Ve.result;ot.close(),ze(ot)}});return Me.then(function(ze){le.db=ze;for(var Ye=0;Ye<me.length;Ye++){var Ve=me[Ye];Ve._dbInfo.db=ze,J(Ve._dbInfo)}}).catch(function(ze){throw(he(w,ze)||h.resolve()).catch(function(){}),ze})}}):N=Q.then(function(ie){K(w);var ce=P[w.name],le=ce.forages;ie.close();for(var me=0;me<le.length;me++){var be=le[me];be._dbInfo.db=null}var Re=new h(function(Me,ze){var Ye=l.deleteDatabase(w.name);Ye.onerror=function(){var Ve=Ye.result;Ve&&Ve.close(),ze(Ye.error)},Ye.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},Ye.onsuccess=function(){var Ve=Ye.result;Ve&&Ve.close(),Me(Ve)}});return Re.then(function(Me){ce.db=Me;for(var ze=0;ze<le.length;ze++){var Ye=le[ze];J(Ye._dbInfo)}}).catch(function(Me){throw(he(w,Me)||h.resolve()).catch(function(){}),Me})})}return v(N,R),N}var we={_driver:"asyncStorage",_initStorage:_e,_support:u(),iterate:ge,getItem:ye,setItem:qe,removeItem:Ke,clear:Oe,length:Be,key:Qe,keys:We,dropInstance:ft};function m(){return typeof openDatabase=="function"}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H="~~local_forage_type~",$=/^~~local_forage_type~([^~]+)~/,x="__lfsc__:",O=x.length,te="arbf",se="blob",M="si08",fe="ui08",ve="uic8",de="si16",Ee="si32",Fe="ur16",Ie="ui32",Xe="fl32",lt="fl64",it=O+te.length,Et=Object.prototype.toString;function Ue(w){var R=w.length*.75,S=w.length,B,N=0,C,Q,ie,ce;w[w.length-1]==="="&&(R--,w[w.length-2]==="="&&R--);var le=new ArrayBuffer(R),me=new Uint8Array(le);for(B=0;B<S;B+=4)C=V.indexOf(w[B]),Q=V.indexOf(w[B+1]),ie=V.indexOf(w[B+2]),ce=V.indexOf(w[B+3]),me[N++]=C<<2|Q>>4,me[N++]=(Q&15)<<4|ie>>2,me[N++]=(ie&3)<<6|ce&63;return le}function $t(w){var R=new Uint8Array(w),S="",B;for(B=0;B<R.length;B+=3)S+=V[R[B]>>2],S+=V[(R[B]&3)<<4|R[B+1]>>4],S+=V[(R[B+1]&15)<<2|R[B+2]>>6],S+=V[R[B+2]&63];return R.length%3===2?S=S.substring(0,S.length-1)+"=":R.length%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function er(w,R){var S="";if(w&&(S=Et.call(w)),w&&(S==="[object ArrayBuffer]"||w.buffer&&Et.call(w.buffer)==="[object ArrayBuffer]")){var B,N=x;w instanceof ArrayBuffer?(B=w,N+=te):(B=w.buffer,S==="[object Int8Array]"?N+=M:S==="[object Uint8Array]"?N+=fe:S==="[object Uint8ClampedArray]"?N+=ve:S==="[object Int16Array]"?N+=de:S==="[object Uint16Array]"?N+=Fe:S==="[object Int32Array]"?N+=Ee:S==="[object Uint32Array]"?N+=Ie:S==="[object Float32Array]"?N+=Xe:S==="[object Float64Array]"?N+=lt:R(new Error("Failed to get type for BinaryArray"))),R(N+$t(B))}else if(S==="[object Blob]"){var C=new FileReader;C.onload=function(){var Q=H+w.type+"~"+$t(this.result);R(x+se+Q)},C.readAsArrayBuffer(w)}else try{R(JSON.stringify(w))}catch(Q){console.error("Couldn't convert value into a JSON string: ",w),R(null,Q)}}function pt(w){if(w.substring(0,O)!==x)return JSON.parse(w);var R=w.substring(it),S=w.substring(O,it),B;if(S===se&&$.test(R)){var N=R.match($);B=N[1],R=R.substring(N[0].length)}var C=Ue(R);switch(S){case te:return C;case se:return g([C],{type:B});case M:return new Int8Array(C);case fe:return new Uint8Array(C);case ve:return new Uint8ClampedArray(C);case de:return new Int16Array(C);case Fe:return new Uint16Array(C);case Ee:return new Int32Array(C);case Ie:return new Uint32Array(C);case Xe:return new Float32Array(C);case lt:return new Float64Array(C);default:throw new Error("Unkown type: "+S)}}var Ot={serialize:er,deserialize:pt,stringToBuffer:Ue,bufferToString:$t};function Ae(w,R,S,B){w.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],S,B)}function ur(w){var R=this,S={db:null};if(w)for(var B in w)S[B]=typeof w[B]!="string"?w[B].toString():w[B];var N=new h(function(C,Q){try{S.db=openDatabase(S.name,String(S.version),S.description,S.size)}catch(ie){return Q(ie)}S.db.transaction(function(ie){Ae(ie,S,function(){R._dbInfo=S,C()},function(ce,le){Q(le)})},Q)});return S.serializer=Ot,N}function ht(w,R,S,B,N,C){w.executeSql(S,B,N,function(Q,ie){ie.code===ie.SYNTAX_ERR?Q.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ce,le){le.rows.length?C(ce,ie):Ae(ce,R,function(){ce.executeSql(S,B,N,C)},C)},C):C(Q,ie)},C)}function tr(w,R){var S=this;w=_(w);var B=new h(function(N,C){S.ready().then(function(){var Q=S._dbInfo;Q.db.transaction(function(ie){ht(ie,Q,"SELECT * FROM "+Q.storeName+" WHERE key = ? LIMIT 1",[w],function(ce,le){var me=le.rows.length?le.rows.item(0).value:null;me&&(me=Q.serializer.deserialize(me)),N(me)},function(ce,le){C(le)})})}).catch(C)});return v(B,R),B}function gt(w,R){var S=this,B=new h(function(N,C){S.ready().then(function(){var Q=S._dbInfo;Q.db.transaction(function(ie){ht(ie,Q,"SELECT * FROM "+Q.storeName,[],function(ce,le){for(var me=le.rows,be=me.length,Re=0;Re<be;Re++){var Me=me.item(Re),ze=Me.value;if(ze&&(ze=Q.serializer.deserialize(ze)),ze=w(ze,Me.key,Re+1),ze!==void 0){N(ze);return}}N()},function(ce,le){C(le)})})}).catch(C)});return v(B,R),B}function Nt(w,R,S,B){var N=this;w=_(w);var C=new h(function(Q,ie){N.ready().then(function(){R===void 0&&(R=null);var ce=R,le=N._dbInfo;le.serializer.serialize(R,function(me,be){be?ie(be):le.db.transaction(function(Re){ht(Re,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[w,me],function(){Q(ce)},function(Me,ze){ie(ze)})},function(Re){if(Re.code===Re.QUOTA_ERR){if(B>0){Q(Nt.apply(N,[w,ce,S,B-1]));return}ie(Re)}})})}).catch(ie)});return v(C,S),C}function Dt(w,R,S){return Nt.apply(this,[w,R,S,1])}function Br(w,R){var S=this;w=_(w);var B=new h(function(N,C){S.ready().then(function(){var Q=S._dbInfo;Q.db.transaction(function(ie){ht(ie,Q,"DELETE FROM "+Q.storeName+" WHERE key = ?",[w],function(){N()},function(ce,le){C(le)})})}).catch(C)});return v(B,R),B}function pe(w){var R=this,S=new h(function(B,N){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(Q){ht(Q,C,"DELETE FROM "+C.storeName,[],function(){B()},function(ie,ce){N(ce)})})}).catch(N)});return v(S,w),S}function _r(w){var R=this,S=new h(function(B,N){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(Q){ht(Q,C,"SELECT COUNT(key) as c FROM "+C.storeName,[],function(ie,ce){var le=ce.rows.item(0).c;B(le)},function(ie,ce){N(ce)})})}).catch(N)});return v(S,w),S}function at(w,R){var S=this,B=new h(function(N,C){S.ready().then(function(){var Q=S._dbInfo;Q.db.transaction(function(ie){ht(ie,Q,"SELECT key FROM "+Q.storeName+" WHERE id = ? LIMIT 1",[w+1],function(ce,le){var me=le.rows.length?le.rows.item(0).key:null;N(me)},function(ce,le){C(le)})})}).catch(C)});return v(B,R),B}function rr(w){var R=this,S=new h(function(B,N){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(Q){ht(Q,C,"SELECT key FROM "+C.storeName,[],function(ie,ce){for(var le=[],me=0;me<ce.rows.length;me++)le.push(ce.rows.item(me).key);B(le)},function(ie,ce){N(ce)})})}).catch(N)});return v(S,w),S}function Er(w){return new h(function(R,S){w.transaction(function(B){B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(N,C){for(var Q=[],ie=0;ie<C.rows.length;ie++)Q.push(C.rows.item(ie).name);R({db:w,storeNames:Q})},function(N,C){S(C)})},function(B){S(B)})})}function Fr(w,R){R=b.apply(this,arguments);var S=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||S.name,w.storeName=w.storeName||S.storeName);var B=this,N;return w.name?N=new h(function(C){var Q;w.name===S.name?Q=B._dbInfo.db:Q=openDatabase(w.name,"","",0),w.storeName?C({db:Q,storeNames:[w.storeName]}):C(Er(Q))}).then(function(C){return new h(function(Q,ie){C.db.transaction(function(ce){function le(Me){return new h(function(ze,Ye){ce.executeSql("DROP TABLE IF EXISTS "+Me,[],function(){ze()},function(Ve,ot){Ye(ot)})})}for(var me=[],be=0,Re=C.storeNames.length;be<Re;be++)me.push(le(C.storeNames[be]));h.all(me).then(function(){Q()}).catch(function(Me){ie(Me)})},function(ce){ie(ce)})})}):N=h.reject("Invalid arguments"),v(N,R),N}var Ct={_driver:"webSQLStorage",_initStorage:ur,_support:m(),iterate:gt,getItem:tr,setItem:Dt,removeItem:Br,clear:pe,length:_r,key:at,keys:rr,dropInstance:Fr};function Lr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ut(w,R){var S=w.name+"/";return w.storeName!==R.storeName&&(S+=w.storeName+"/"),S}function Mr(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Ut(){return!Mr()||localStorage.length>0}function zr(w){var R=this,S={};if(w)for(var B in w)S[B]=w[B];return S.keyPrefix=ut(w,R._defaultConfig),Ut()?(R._dbInfo=S,S.serializer=Ot,h.resolve()):h.reject()}function qr(w){var R=this,S=R.ready().then(function(){for(var B=R._dbInfo.keyPrefix,N=localStorage.length-1;N>=0;N--){var C=localStorage.key(N);C.indexOf(B)===0&&localStorage.removeItem(C)}});return v(S,w),S}function pn(w,R){var S=this;w=_(w);var B=S.ready().then(function(){var N=S._dbInfo,C=localStorage.getItem(N.keyPrefix+w);return C&&(C=N.serializer.deserialize(C)),C});return v(B,R),B}function st(w,R){var S=this,B=S.ready().then(function(){for(var N=S._dbInfo,C=N.keyPrefix,Q=C.length,ie=localStorage.length,ce=1,le=0;le<ie;le++){var me=localStorage.key(le);if(me.indexOf(C)===0){var be=localStorage.getItem(me);if(be&&(be=N.serializer.deserialize(be)),be=w(be,me.substring(Q),ce++),be!==void 0)return be}}});return v(B,R),B}function Ur(w,R){var S=this,B=S.ready().then(function(){var N=S._dbInfo,C;try{C=localStorage.key(w)}catch{C=null}return C&&(C=C.substring(N.keyPrefix.length)),C});return v(B,R),B}function gn(w){var R=this,S=R.ready().then(function(){for(var B=R._dbInfo,N=localStorage.length,C=[],Q=0;Q<N;Q++){var ie=localStorage.key(Q);ie.indexOf(B.keyPrefix)===0&&C.push(ie.substring(B.keyPrefix.length))}return C});return v(S,w),S}function Tr(w){var R=this,S=R.keys().then(function(B){return B.length});return v(S,w),S}function Wr(w,R){var S=this;w=_(w);var B=S.ready().then(function(){var N=S._dbInfo;localStorage.removeItem(N.keyPrefix+w)});return v(B,R),B}function fr(w,R,S){var B=this;w=_(w);var N=B.ready().then(function(){R===void 0&&(R=null);var C=R;return new h(function(Q,ie){var ce=B._dbInfo;ce.serializer.serialize(R,function(le,me){if(me)ie(me);else try{localStorage.setItem(ce.keyPrefix+w,le),Q(C)}catch(be){(be.name==="QuotaExceededError"||be.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(be),ie(be)}})})});return v(N,S),N}function bt(w,R){if(R=b.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var S=this.config();w.name=w.name||S.name,w.storeName=w.storeName||S.storeName}var B=this,N;return w.name?N=new h(function(C){w.storeName?C(ut(w,B._defaultConfig)):C(w.name+"/")}).then(function(C){for(var Q=localStorage.length-1;Q>=0;Q--){var ie=localStorage.key(Q);ie.indexOf(C)===0&&localStorage.removeItem(ie)}}):N=h.reject("Invalid arguments"),v(N,R),N}var hr={_driver:"localStorageWrapper",_initStorage:zr,_support:Lr(),iterate:st,getItem:pn,setItem:fr,removeItem:Wr,clear:qr,length:Tr,key:Ur,keys:gn,dropInstance:bt},kr=function(R,S){return R===S||typeof R=="number"&&typeof S=="number"&&isNaN(R)&&isNaN(S)},Gr=function(R,S){for(var B=R.length,N=0;N<B;){if(kr(R[N],S))return!0;N++}return!1},Sr=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},Wt={},Gt={},Bt={INDEXEDDB:we,WEBSQL:Ct,LOCALSTORAGE:hr},dr=[Bt.INDEXEDDB._driver,Bt.WEBSQL._driver,Bt.LOCALSTORAGE._driver],nr=["dropInstance"],At=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nr),xr={description:"",driver:dr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Hr(w,R){w[R]=function(){var S=arguments;return w.ready().then(function(){return w[R].apply(w,S)})}}function mr(){for(var w=1;w<arguments.length;w++){var R=arguments[w];if(R)for(var S in R)R.hasOwnProperty(S)&&(Sr(R[S])?arguments[0][S]=R[S].slice():arguments[0][S]=R[S])}return arguments[0]}var Kr=function(){function w(R){i(this,w);for(var S in Bt)if(Bt.hasOwnProperty(S)){var B=Bt[S],N=B._driver;this[S]=N,Wt[N]||this.defineDriver(B)}this._defaultConfig=mr({},xr),this._config=mr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(S){if((typeof S>"u"?"undefined":s(S))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var B in S){if(B==="storeName"&&(S[B]=S[B].replace(/\W/g,"_")),B==="version"&&typeof S[B]!="number")return new Error("Database version must be a number.");this._config[B]=S[B]}return"driver"in S&&S.driver?this.setDriver(this._config.driver):!0}else return typeof S=="string"?this._config[S]:this._config},w.prototype.defineDriver=function(S,B,N){var C=new h(function(Q,ie){try{var ce=S._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!S._driver){ie(le);return}for(var me=At.concat("_initStorage"),be=0,Re=me.length;be<Re;be++){var Me=me[be],ze=!Gr(nr,Me);if((ze||S[Me])&&typeof S[Me]!="function"){ie(le);return}}var Ye=function(){for(var Ft=function($r){return function(){var Tt=new Error("Method "+$r+" is not implemented by the current driver"),Lt=h.reject(Tt);return v(Lt,arguments[arguments.length-1]),Lt}},Pr=0,pr=nr.length;Pr<pr;Pr++){var Ht=nr[Pr];S[Ht]||(S[Ht]=Ft(Ht))}};Ye();var Ve=function(Ft){Wt[ce]&&console.info("Redefining LocalForage driver: "+ce),Wt[ce]=S,Gt[ce]=Ft,Q()};"_support"in S?S._support&&typeof S._support=="function"?S._support().then(Ve,ie):Ve(!!S._support):Ve(!0)}catch(ot){ie(ot)}});return p(C,B,N),C},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(S,B,N){var C=Wt[S]?h.resolve(Wt[S]):h.reject(new Error("Driver not found."));return p(C,B,N),C},w.prototype.getSerializer=function(S){var B=h.resolve(Ot);return p(B,S),B},w.prototype.ready=function(S){var B=this,N=B._driverSet.then(function(){return B._ready===null&&(B._ready=B._initDriver()),B._ready});return p(N,S,S),N},w.prototype.setDriver=function(S,B,N){var C=this;Sr(S)||(S=[S]);var Q=this._getSupportedDrivers(S);function ie(){C._config.driver=C.driver()}function ce(be){return C._extend(be),ie(),C._ready=C._initStorage(C._config),C._ready}function le(be){return function(){var Re=0;function Me(){for(;Re<be.length;){var ze=be[Re];return Re++,C._dbInfo=null,C._ready=null,C.getDriver(ze).then(ce).catch(Me)}ie();var Ye=new Error("No available storage method found.");return C._driverSet=h.reject(Ye),C._driverSet}return Me()}}var me=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=me.then(function(){var be=Q[0];return C._dbInfo=null,C._ready=null,C.getDriver(be).then(function(Re){C._driver=Re._driver,ie(),C._wrapLibraryMethodsWithReady(),C._initDriver=le(Q)})}).catch(function(){ie();var be=new Error("No available storage method found.");return C._driverSet=h.reject(be),C._driverSet}),p(this._driverSet,B,N),this._driverSet},w.prototype.supports=function(S){return!!Gt[S]},w.prototype._extend=function(S){mr(this,S)},w.prototype._getSupportedDrivers=function(S){for(var B=[],N=0,C=S.length;N<C;N++){var Q=S[N];this.supports(Q)&&B.push(Q)}return B},w.prototype._wrapLibraryMethodsWithReady=function(){for(var S=0,B=At.length;S<B;S++)Hr(this,At[S])},w.prototype.createInstance=function(S){return new w(S)},w}(),yn=new Kr;r.exports=yn},{3:3}]},{},[4])(4)})})(ti);const fs=ti.exports;var ri={exports:{}};(function(c,e){(function(t){c.exports=t()})(function(){return function t(r,n,s){function i(u,g){if(!n[u]){if(!r[u]){var h=typeof Jt=="function"&&Jt;if(!g&&h)return h(u,!0);if(o)return o(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var p=n[u]={exports:{}};r[u][0].call(p.exports,function(_){var b=r[u][1][_];return i(b||_)},p,p.exports,t,r,n,s)}return n[u].exports}for(var o=typeof Jt=="function"&&Jt,l=0;l<s.length;l++)i(s[l]);return i}({1:[function(t,r,n){var s=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var u,g,h,v,p,_,b,k=[],T=0,P=l.length,j=P,L=s.getTypeOf(l)!=="string";T<l.length;)j=P-T,h=L?(u=l[T++],g=T<P?l[T++]:0,T<P?l[T++]:0):(u=l.charCodeAt(T++),g=T<P?l.charCodeAt(T++):0,T<P?l.charCodeAt(T++):0),v=u>>2,p=(3&u)<<4|g>>4,_=1<j?(15&g)<<2|h>>6:64,b=2<j?63&h:64,k.push(o.charAt(v)+o.charAt(p)+o.charAt(_)+o.charAt(b));return k.join("")},n.decode=function(l){var u,g,h,v,p,_,b=0,k=0,T="data:";if(l.substr(0,T.length)===T)throw new Error("Invalid base64 input, it looks like a data url.");var P,j=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&j--,l.charAt(l.length-2)===o.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=i.uint8array?new Uint8Array(0|j):new Array(0|j);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(v=o.indexOf(l.charAt(b++)))>>4,g=(15&v)<<4|(p=o.indexOf(l.charAt(b++)))>>2,h=(3&p)<<6|(_=o.indexOf(l.charAt(b++))),P[k++]=u,p!==64&&(P[k++]=g),_!==64&&(P[k++]=h);return P}},{"./support":30,"./utils":32}],2:[function(t,r,n){var s=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(g,h,v,p,_){this.compressedSize=g,this.uncompressedSize=h,this.crc32=v,this.compression=p,this.compressedContent=_}u.prototype={getContentWorker:function(){var g=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return g.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(g,h,v){return g.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var s=t("./utils"),i=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var g=0;g<8;g++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(u,g,h,v){var p=i,_=v+h;u^=-1;for(var b=v;b<_;b++)u=u>>>8^p[255&(u^g[b])];return-1^u}(0|l,o,o.length,0):function(u,g,h,v){var p=i,_=v+h;u^=-1;for(var b=v;b<_;b++)u=u>>>8^p[255&(u^g.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),u=s?"uint8array":"array";function g(h,v){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=v,this.meta={}}n.magic="\b\0",o.inherits(g,l),g.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},g.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(v){h.push({data:v,meta:h.meta})}},n.compressWorker=function(h){return new g("Deflate",h)},n.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function s(p,_){var b,k="";for(b=0;b<_;b++)k+=String.fromCharCode(255&p),p>>>=8;return k}function i(p,_,b,k,T,P){var j,L,D=p.file,G=p.compression,z=P!==u.utf8encode,Z=o.transformTo("string",P(D.name)),K=o.transformTo("string",u.utf8encode(D.name)),J=D.comment,he=o.transformTo("string",P(J)),A=o.transformTo("string",u.utf8encode(J)),F=K.length!==D.name.length,y=A.length!==J.length,X="",Se="",ae="",De=D.dir,ue=D.date,xe={crc32:0,compressedSize:0,uncompressedSize:0};_&&!b||(xe.crc32=p.crc32,xe.compressedSize=p.compressedSize,xe.uncompressedSize=p.uncompressedSize);var W=0;_&&(W|=8),z||!F&&!y||(W|=2048);var U=0,_e=0;De&&(U|=16),T==="UNIX"?(_e=798,U|=function(ge,qe){var Ke=ge;return ge||(Ke=qe?16893:33204),(65535&Ke)<<16}(D.unixPermissions,De)):(_e=20,U|=function(ge){return 63&(ge||0)}(D.dosPermissions)),j=ue.getUTCHours(),j<<=6,j|=ue.getUTCMinutes(),j<<=5,j|=ue.getUTCSeconds()/2,L=ue.getUTCFullYear()-1980,L<<=4,L|=ue.getUTCMonth()+1,L<<=5,L|=ue.getUTCDate(),F&&(Se=s(1,1)+s(g(Z),4)+K,X+="up"+s(Se.length,2)+Se),y&&(ae=s(1,1)+s(g(he),4)+A,X+="uc"+s(ae.length,2)+ae);var ye="";return ye+=`
\0`,ye+=s(W,2),ye+=G.magic,ye+=s(j,2),ye+=s(L,2),ye+=s(xe.crc32,4),ye+=s(xe.compressedSize,4),ye+=s(xe.uncompressedSize,4),ye+=s(Z.length,2),ye+=s(X.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ye+Z+X,dirRecord:h.CENTRAL_FILE_HEADER+s(_e,2)+ye+s(he.length,2)+"\0\0\0\0"+s(U,4)+s(k,4)+Z+X+he}}var o=t("../utils"),l=t("../stream/GenericWorker"),u=t("../utf8"),g=t("../crc32"),h=t("../signature");function v(p,_,b,k){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=b,this.encodeFileName=k,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(v,l),v.prototype.push=function(p){var _=p.meta.percent||0,b=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:b?(_+100*(b-k-1))/b:100}}))},v.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var _=this.streamFiles&&!p.file.dir;if(_){var b=i(p,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(p){this.accumulate=!1;var _=this.streamFiles&&!p.file.dir,b=i(p,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),_)this.push({data:function(k){return h.DATA_DESCRIPTOR+s(k.crc32,4)+s(k.compressedSize,4)+s(k.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var p=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var b=this.bytesWritten-p,k=function(T,P,j,L,D){var G=o.transformTo("string",D(L));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(T,2)+s(T,2)+s(P,4)+s(j,4)+s(G.length,2)+G}(this.dirRecords.length,b,p,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(p){this._sources.push(p);var _=this;return p.on("data",function(b){_.processChunk(b)}),p.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),p.on("error",function(b){_.error(b)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(p){var _=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var b=0;b<_.length;b++)try{_[b].error(p)}catch{}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,_=0;_<p.length;_++)p[_].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var s=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(o,l,u){var g=new i(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(v,p){h++;var _=function(P,j){var L=P||j,D=s[L];if(!D)throw new Error(L+" is not a valid compression method !");return D}(p.options.compression,l.compression),b=p.options.compressionOptions||l.compressionOptions||{},k=p.dir,T=p.date;p._compressWorker(_,b).withStreamInfo("file",{name:v,dir:k,date:T,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(g)}),g.entriesCount=h}catch(v){g.error(v)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(i,o){return new s().loadAsync(i,o)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var s=t("./utils"),i=t("./external"),o=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),g=t("./nodejsUtils");function h(v){return new i.Promise(function(p,_){var b=v.decompressed.getContentWorker().pipe(new u);b.on("error",function(k){_(k)}).on("end",function(){b.streamInfo.crc32!==v.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(v,p){var _=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),g.isNode&&g.isStream(v)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,p.optimizedBinaryString,p.base64).then(function(b){var k=new l(p);return k.load(b),k}).then(function(b){var k=[i.Promise.resolve(b)],T=b.files;if(p.checkCRC32)for(var P=0;P<T.length;P++)k.push(h(T[P]));return i.Promise.all(k)}).then(function(b){for(var k=b.shift(),T=k.files,P=0;P<T.length;P++){var j=T[P],L=j.fileNameStr,D=s.resolve(j.fileNameStr);_.file(D,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:p.createFolders}),j.dir||(_.file(D).unsafeOriginalName=L)}return k.zipComment.length&&(_.comment=k.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var s=t("../utils"),i=t("../stream/GenericWorker");function o(l,u){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,i),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(g){u.push({data:g,meta:{percent:0}})}).on("error",function(g){u.isPaused?this.generatedError=g:u.error(g)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var s=t("readable-stream").Readable;function i(o,l,u){s.call(this,l),this._helper=o;var g=this;o.on("data",function(h,v){g.push(h)||g._helper.pause(),u&&u(v)}).on("error",function(h){g.emit("error",h)}).on("end",function(){g.push(null)})}t("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof re<"u",newBufferFrom:function(s,i){if(re.from&&re.from!==Uint8Array.from)return re.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new re(s,i)},allocBuffer:function(s){if(re.alloc)return re.alloc(s);var i=new re(s);return i.fill(0),i},isBuffer:function(s){return re.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,n){function s(D,G,z){var Z,K=o.getTypeOf(G),J=o.extend(z||{},g);J.date=J.date||new Date,J.compression!==null&&(J.compression=J.compression.toUpperCase()),typeof J.unixPermissions=="string"&&(J.unixPermissions=parseInt(J.unixPermissions,8)),J.unixPermissions&&16384&J.unixPermissions&&(J.dir=!0),J.dosPermissions&&16&J.dosPermissions&&(J.dir=!0),J.dir&&(D=T(D)),J.createFolders&&(Z=k(D))&&P.call(this,Z,!0);var he=K==="string"&&J.binary===!1&&J.base64===!1;z&&z.binary!==void 0||(J.binary=!he),(G instanceof h&&G.uncompressedSize===0||J.dir||!G||G.length===0)&&(J.base64=!1,J.binary=!0,G="",J.compression="STORE",K="string");var A=null;A=G instanceof h||G instanceof l?G:_.isNode&&_.isStream(G)?new b(D,G):o.prepareContent(D,G,J.binary,J.optimizedBinaryString,J.base64);var F=new v(D,A,J);this.files[D]=F}var i=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),g=t("./defaults"),h=t("./compressedObject"),v=t("./zipObject"),p=t("./generate"),_=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),k=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var G=D.lastIndexOf("/");return 0<G?D.substring(0,G):""},T=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},P=function(D,G){return G=G!==void 0?G:g.createFolders,D=T(D),this.files[D]||s.call(this,D,null,{dir:!0,createFolders:G}),this.files[D]};function j(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var L={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var G,z,Z;for(G in this.files)Z=this.files[G],(z=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&D(z,Z)},filter:function(D){var G=[];return this.forEach(function(z,Z){D(z,Z)&&G.push(Z)}),G},file:function(D,G,z){if(arguments.length!==1)return D=this.root+D,s.call(this,D,G,z),this;if(j(D)){var Z=D;return this.filter(function(J,he){return!he.dir&&Z.test(J)})}var K=this.files[this.root+D];return K&&!K.dir?K:null},folder:function(D){if(!D)return this;if(j(D))return this.filter(function(K,J){return J.dir&&D.test(K)});var G=this.root+D,z=P.call(this,G),Z=this.clone();return Z.root=z.name,Z},remove:function(D){D=this.root+D;var G=this.files[D];if(G||(D.slice(-1)!=="/"&&(D+="/"),G=this.files[D]),G&&!G.dir)delete this.files[D];else for(var z=this.filter(function(K,J){return J.name.slice(0,D.length)===D}),Z=0;Z<z.length;Z++)delete this.files[z[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var G,z={};try{if((z=o.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");o.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var Z=z.comment||this.comment||"";G=p.generateWorker(this,z,Z)}catch(K){(G=new l("error")).error(K)}return new u(G,z.type||"string",z.mimeType)},generateAsync:function(D,G){return this.generateInternalStream(D).accumulate(G)},generateNodeStream:function(D,G){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(G)}};r.exports=L},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),g=o.charCodeAt(2),h=o.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===u&&this.data[v+2]===g&&this.data[v+3]===h)return v-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),g=o.charCodeAt(2),h=o.charCodeAt(3),v=this.readData(4);return l===v[0]&&u===v[1]&&g===v[2]&&h===v[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var s=t("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,n){var s=t("./Uint8ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var s=t("./DataReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var s=t("./ArrayReader");function i(o){s.call(this,o)}t("../utils").inherits(i,s),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var s=t("../utils"),i=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),g=t("./Uint8ArrayReader");r.exports=function(h){var v=s.getTypeOf(h);return s.checkSupport(v),v!=="string"||i.uint8array?v==="nodebuffer"?new u(h):i.uint8array?new g(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var s=t("./GenericWorker"),i=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var s=t("./GenericWorker"),i=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,i),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}i.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function o(l){i.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(g){u.dataIsReady=!0,u.data=g,u.max=g&&g.length||0,u.type=s.getTypeOf(g),u.isPaused||u._tickAndRepeat()},function(g){u.error(g)})}s.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(l){o.processChunk(l)}),i.on("end",function(){o.end()}),i.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=s},{}],29:[function(t,r,n){var s=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),u=t("../support"),g=t("../external"),h=null;if(u.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(_,b){return new g.Promise(function(k,T){var P=[],j=_._internalType,L=_._outputType,D=_._mimeType;_.on("data",function(G,z){P.push(G),b&&b(z)}).on("error",function(G){P=[],T(G)}).on("end",function(){try{var G=function(z,Z,K){switch(z){case"blob":return s.newBlob(s.transformTo("arraybuffer",Z),K);case"base64":return l.encode(Z);default:return s.transformTo(z,Z)}}(L,function(z,Z){var K,J=0,he=null,A=0;for(K=0;K<Z.length;K++)A+=Z[K].length;switch(z){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(he=new Uint8Array(A),K=0;K<Z.length;K++)he.set(Z[K],J),J+=Z[K].length;return he;case"nodebuffer":return re.concat(Z);default:throw new Error("concat : unsupported type '"+z+"'")}}(j,P),D);k(G)}catch(z){T(z)}P=[]}).resume()})}function p(_,b,k){var T=b;switch(b){case"blob":case"arraybuffer":T="uint8array";break;case"base64":T="string"}try{this._internalType=T,this._outputType=b,this._mimeType=k,s.checkSupport(T),this._worker=_.pipe(new i(T)),_.lock()}catch(P){this._worker=new o("error"),this._worker.error(P)}}p.prototype={accumulate:function(_){return v(this,_)},on:function(_,b){var k=this;return _==="data"?this._worker.on(_,function(T){b.call(k,T.data,T.meta)}):this._worker.on(_,function(){s.delay(b,arguments,k)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof re<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var s=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),g=0;g<256;g++)u[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}n.utf8encode=function(p){return i.nodebuffer?o.newBufferFrom(p,"utf-8"):function(_){var b,k,T,P,j,L=_.length,D=0;for(P=0;P<L;P++)(64512&(k=_.charCodeAt(P)))==55296&&P+1<L&&(64512&(T=_.charCodeAt(P+1)))==56320&&(k=65536+(k-55296<<10)+(T-56320),P++),D+=k<128?1:k<2048?2:k<65536?3:4;for(b=i.uint8array?new Uint8Array(D):new Array(D),P=j=0;j<D;P++)(64512&(k=_.charCodeAt(P)))==55296&&P+1<L&&(64512&(T=_.charCodeAt(P+1)))==56320&&(k=65536+(k-55296<<10)+(T-56320),P++),k<128?b[j++]=k:(k<2048?b[j++]=192|k>>>6:(k<65536?b[j++]=224|k>>>12:(b[j++]=240|k>>>18,b[j++]=128|k>>>12&63),b[j++]=128|k>>>6&63),b[j++]=128|63&k);return b}(p)},n.utf8decode=function(p){return i.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(_){var b,k,T,P,j=_.length,L=new Array(2*j);for(b=k=0;b<j;)if((T=_[b++])<128)L[k++]=T;else if(4<(P=u[T]))L[k++]=65533,b+=P-1;else{for(T&=P===2?31:P===3?15:7;1<P&&b<j;)T=T<<6|63&_[b++],P--;1<P?L[k++]=65533:T<65536?L[k++]=T:(T-=65536,L[k++]=55296|T>>10&1023,L[k++]=56320|1023&T)}return L.length!==k&&(L.subarray?L=L.subarray(0,k):L.length=k),s.applyFromCharCode(L)}(p=s.transformTo(i.uint8array?"uint8array":"array",p))},s.inherits(h,l),h.prototype.processChunk=function(p){var _=s.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=_;(_=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),_.set(b,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var k=function(P,j){var L;for((j=j||P.length)>P.length&&(j=P.length),L=j-1;0<=L&&(192&P[L])==128;)L--;return L<0||L===0?j:L+u[P[L]]>j?L:j}(_),T=_;k!==_.length&&(i.uint8array?(T=_.subarray(0,k),this.leftOver=_.subarray(k,_.length)):(T=_.slice(0,k),this.leftOver=_.slice(k,_.length))),this.push({data:n.utf8decode(T),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,s.inherits(v,l),v.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var s=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function u(b){return b}function g(b,k){for(var T=0;T<b.length;++T)k[T]=255&b.charCodeAt(T);return k}t("setimmediate"),n.newBlob=function(b,k){n.checkSupport("blob");try{return new Blob([b],{type:k})}catch{try{var T=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return T.append(b),T.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,k,T){var P=[],j=0,L=b.length;if(L<=T)return String.fromCharCode.apply(null,b);for(;j<L;)k==="array"||k==="nodebuffer"?P.push(String.fromCharCode.apply(null,b.slice(j,Math.min(j+T,L)))):P.push(String.fromCharCode.apply(null,b.subarray(j,Math.min(j+T,L)))),j+=T;return P.join("")},stringifyByChar:function(b){for(var k="",T=0;T<b.length;T++)k+=String.fromCharCode(b[T]);return k},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function v(b){var k=65536,T=n.getTypeOf(b),P=!0;if(T==="uint8array"?P=h.applyCanBeUsed.uint8array:T==="nodebuffer"&&(P=h.applyCanBeUsed.nodebuffer),P)for(;1<k;)try{return h.stringifyByChunk(b,T,k)}catch{k=Math.floor(k/2)}return h.stringifyByChar(b)}function p(b,k){for(var T=0;T<b.length;T++)k[T]=b[T];return k}n.applyFromCharCode=v;var _={};_.string={string:u,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return _.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,o.allocBuffer(b.length))}},_.array={string:v,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},_.arraybuffer={string:function(b){return v(new Uint8Array(b))},array:function(b){return p(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},_.uint8array={string:v,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},_.nodebuffer={string:v,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return _.nodebuffer.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:u},n.transformTo=function(b,k){if(k=k||"",!b)return k;n.checkSupport(b);var T=n.getTypeOf(k);return _[T][b](k)},n.resolve=function(b){for(var k=b.split("/"),T=[],P=0;P<k.length;P++){var j=k[P];j==="."||j===""&&P!==0&&P!==k.length-1||(j===".."?T.pop():T.push(j))}return T.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var k,T,P="";for(T=0;T<(b||"").length;T++)P+="\\x"+((k=b.charCodeAt(T))<16?"0":"")+k.toString(16).toUpperCase();return P},n.delay=function(b,k,T){setImmediate(function(){b.apply(T||null,k||[])})},n.inherits=function(b,k){function T(){}T.prototype=k.prototype,b.prototype=new T},n.extend=function(){var b,k,T={};for(b=0;b<arguments.length;b++)for(k in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],k)&&T[k]===void 0&&(T[k]=arguments[b][k]);return T},n.prepareContent=function(b,k,T,P,j){return l.Promise.resolve(k).then(function(L){return s.blob&&(L instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(L))!==-1)&&typeof FileReader<"u"?new l.Promise(function(D,G){var z=new FileReader;z.onload=function(Z){D(Z.target.result)},z.onerror=function(Z){G(Z.target.error)},z.readAsArrayBuffer(L)}):L}).then(function(L){var D=n.getTypeOf(L);return D?(D==="arraybuffer"?L=n.transformTo("uint8array",L):D==="string"&&(j?L=i.decode(L):T&&P!==!0&&(L=function(G){return g(G,s.uint8array?new Uint8Array(G.length):new Array(G.length))}(L))),L):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),l=t("./zipEntry"),u=t("./support");function g(h){this.files=[],this.loadOptions=h}g.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(v)+", expected "+i.pretty(h)+")")}},isSignature:function(h,v){var p=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===v;return this.reader.setIndex(p),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),v=u.uint8array?"uint8array":"array",p=i.transformTo(v,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,v,p,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),v=this.reader.readInt(4),p=this.reader.readData(v),this.zip64ExtensibleData[h]={id:h,length:v,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,v;for(h=0;h<this.files.length;h++)v=this.files[h],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var v=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var _=v-p;if(0<_)this.isSignature(v,o.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),g=t("./compressions"),h=t("./support");function v(p,_){this.options=p,this.loadOptions=_}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var _,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(k){for(var T in g)if(Object.prototype.hasOwnProperty.call(g,T)&&g[T].magic===k)return g[T];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,_,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var _=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(_),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var _,b,k,T=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<T;)_=p.readInt(2),b=p.readInt(2),k=p.readData(b),this.extraFields[_]={id:_,length:b,value:k};p.setIndex(T)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var b=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var T=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(T)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var _=s(p.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:u.utf8decode(_.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var _=s(p.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:u.utf8decode(_.readData(p.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function s(_,b,k){this.name=_,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=b,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),u=t("./compressedObject"),g=t("./stream/GenericWorker");s.prototype={internalStream:function(_){var b=null,k="string";try{if(!_)throw new Error("No output type specified.");var T=(k=_.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),b=this._decompressWorker();var P=!this._dataBinary;P&&!T&&(b=b.pipe(new l.Utf8EncodeWorker)),!P&&T&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(j){(b=new g("error")).error(j)}return new i(b,k,"")},async:function(_,b){return this.internalStream(_).accumulate(b)},nodeStream:function(_,b){return this.internalStream(_||"nodebuffer").toNodejsStream(b)},_compressWorker:function(_,b){if(this._data instanceof u&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(k,_,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof g?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)s.prototype[h[p]]=v;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(s){var i,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,g=new l(_),h=s.document.createTextNode("");g.observe(h,{characterData:!0}),i=function(){h.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){_(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(_,0)};else{var v=new s.MessageChannel;v.port1.onmessage=_,i=function(){v.port2.postMessage(0)}}var p=[];function _(){var b,k;o=!0;for(var T=p.length;T;){for(k=p,p=[],b=-1;++b<T;)k[b]();T=p.length}o=!1}r.exports=function(b){p.push(b)!==1||o||i()}}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var s=t("immediate");function i(){}var o={},l=["REJECTED"],u=["FULFILLED"],g=["PENDING"];function h(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,T!==i&&b(this,T)}function v(T,P,j){this.promise=T,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function p(T,P,j){s(function(){var L;try{L=P(j)}catch(D){return o.reject(T,D)}L===T?o.reject(T,new TypeError("Cannot resolve promise with itself")):o.resolve(T,L)})}function _(T){var P=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof P=="function")return function(){P.apply(T,arguments)}}function b(T,P){var j=!1;function L(z){j||(j=!0,o.reject(T,z))}function D(z){j||(j=!0,o.resolve(T,z))}var G=k(function(){P(D,L)});G.status==="error"&&L(G.value)}function k(T,P){var j={};try{j.value=T(P),j.status="success"}catch(L){j.status="error",j.value=L}return j}(r.exports=h).prototype.finally=function(T){if(typeof T!="function")return this;var P=this.constructor;return this.then(function(j){return P.resolve(T()).then(function(){return j})},function(j){return P.resolve(T()).then(function(){throw j})})},h.prototype.catch=function(T){return this.then(null,T)},h.prototype.then=function(T,P){if(typeof T!="function"&&this.state===u||typeof P!="function"&&this.state===l)return this;var j=new this.constructor(i);return this.state!==g?p(j,this.state===u?T:P,this.outcome):this.queue.push(new v(j,T,P)),j},v.prototype.callFulfilled=function(T){o.resolve(this.promise,T)},v.prototype.otherCallFulfilled=function(T){p(this.promise,this.onFulfilled,T)},v.prototype.callRejected=function(T){o.reject(this.promise,T)},v.prototype.otherCallRejected=function(T){p(this.promise,this.onRejected,T)},o.resolve=function(T,P){var j=k(_,P);if(j.status==="error")return o.reject(T,j.value);var L=j.value;if(L)b(T,L);else{T.state=u,T.outcome=P;for(var D=-1,G=T.queue.length;++D<G;)T.queue[D].callFulfilled(P)}return T},o.reject=function(T,P){T.state=l,T.outcome=P;for(var j=-1,L=T.queue.length;++j<L;)T.queue[j].callRejected(P);return T},h.resolve=function(T){return T instanceof this?T:o.resolve(new this(i),T)},h.reject=function(T){var P=new this(i);return o.reject(P,T)},h.all=function(T){var P=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=T.length,L=!1;if(!j)return this.resolve([]);for(var D=new Array(j),G=0,z=-1,Z=new this(i);++z<j;)K(T[z],z);return Z;function K(J,he){P.resolve(J).then(function(A){D[he]=A,++G!==j||L||(L=!0,o.resolve(Z,D))},function(A){L||(L=!0,o.reject(Z,A))})}},h.race=function(T){var P=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=T.length,L=!1;if(!j)return this.resolve([]);for(var D=-1,G=new this(i);++D<j;)z=T[D],P.resolve(z).then(function(Z){L||(L=!0,o.resolve(G,Z))},function(Z){L||(L=!0,o.reject(G,Z))});var z;return G}},{immediate:36}],38:[function(t,r,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var s=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),g=Object.prototype.toString,h=0,v=-1,p=0,_=8;function b(T){if(!(this instanceof b))return new b(T);this.options=i.assign({level:v,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},T||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var j=s.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(j!==h)throw new Error(l[j]);if(P.header&&s.deflateSetHeader(this.strm,P.header),P.dictionary){var L;if(L=typeof P.dictionary=="string"?o.string2buf(P.dictionary):g.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(j=s.deflateSetDictionary(this.strm,L))!==h)throw new Error(l[j]);this._dict_set=!0}}function k(T,P){var j=new b(P);if(j.push(T,!0),j.err)throw j.msg||l[j.err];return j.result}b.prototype.push=function(T,P){var j,L,D=this.strm,G=this.options.chunkSize;if(this.ended)return!1;L=P===~~P?P:P===!0?4:0,typeof T=="string"?D.input=o.string2buf(T):g.call(T)==="[object ArrayBuffer]"?D.input=new Uint8Array(T):D.input=T,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new i.Buf8(G),D.next_out=0,D.avail_out=G),(j=s.deflate(D,L))!==1&&j!==h)return this.onEnd(j),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||L!==4&&L!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(D.output,D.next_out))):this.onData(i.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&j!==1);return L===4?(j=s.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===h):L!==2||(this.onEnd(h),!(D.avail_out=0))},b.prototype.onData=function(T){this.chunks.push(T)},b.prototype.onEnd=function(T){T===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},n.Deflate=b,n.deflate=k,n.deflateRaw=function(T,P){return(P=P||{}).raw=!0,k(T,P)},n.gzip=function(T,P){return(P=P||{}).gzip=!0,k(T,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var s=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),g=t("./zlib/zstream"),h=t("./zlib/gzheader"),v=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||b&&b.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var T=s.inflateInit2(this.strm,k.windowBits);if(T!==l.Z_OK)throw new Error(u[T]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function _(b,k){var T=new p(k);if(T.push(b,!0),T.err)throw T.msg||u[T.err];return T.result}p.prototype.push=function(b,k){var T,P,j,L,D,G,z=this.strm,Z=this.options.chunkSize,K=this.options.dictionary,J=!1;if(this.ended)return!1;P=k===~~k?k:k===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?z.input=o.binstring2buf(b):v.call(b)==="[object ArrayBuffer]"?z.input=new Uint8Array(b):z.input=b,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new i.Buf8(Z),z.next_out=0,z.avail_out=Z),(T=s.inflate(z,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&K&&(G=typeof K=="string"?o.string2buf(K):v.call(K)==="[object ArrayBuffer]"?new Uint8Array(K):K,T=s.inflateSetDictionary(this.strm,G)),T===l.Z_BUF_ERROR&&J===!0&&(T=l.Z_OK,J=!1),T!==l.Z_STREAM_END&&T!==l.Z_OK)return this.onEnd(T),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&T!==l.Z_STREAM_END&&(z.avail_in!==0||P!==l.Z_FINISH&&P!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=o.utf8border(z.output,z.next_out),L=z.next_out-j,D=o.buf2string(z.output,j),z.next_out=L,z.avail_out=Z-L,L&&i.arraySet(z.output,z.output,j,L,0),this.onData(D)):this.onData(i.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(J=!0)}while((0<z.avail_in||z.avail_out===0)&&T!==l.Z_STREAM_END);return T===l.Z_STREAM_END&&(P=l.Z_FINISH),P===l.Z_FINISH?(T=s.inflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===l.Z_OK):P!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(z.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=p,n.inflate=_,n.inflateRaw=function(b,k){return(k=k||{}).raw=!0,_(b,k)},n.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var g=u.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var h in g)g.hasOwnProperty(h)&&(l[h]=g[h])}}return l},n.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var i={arraySet:function(l,u,g,h,v){if(u.subarray&&l.subarray)l.set(u.subarray(g,g+h),v);else for(var p=0;p<h;p++)l[v+p]=u[g+p]},flattenChunks:function(l){var u,g,h,v,p,_;for(u=h=0,g=l.length;u<g;u++)h+=l[u].length;for(_=new Uint8Array(h),u=v=0,g=l.length;u<g;u++)p=l[u],_.set(p,v),v+=p.length;return _}},o={arraySet:function(l,u,g,h,v){for(var p=0;p<h;p++)l[v+p]=u[g+p]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(t,r,n){var s=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function g(h,v){if(v<65537&&(h.subarray&&o||!h.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(h,v));for(var p="",_=0;_<v;_++)p+=String.fromCharCode(h[_]);return p}l[254]=l[254]=1,n.string2buf=function(h){var v,p,_,b,k,T=h.length,P=0;for(b=0;b<T;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<T&&(64512&(_=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(_-56320),b++),P+=p<128?1:p<2048?2:p<65536?3:4;for(v=new s.Buf8(P),b=k=0;k<P;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<T&&(64512&(_=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(_-56320),b++),p<128?v[k++]=p:(p<2048?v[k++]=192|p>>>6:(p<65536?v[k++]=224|p>>>12:(v[k++]=240|p>>>18,v[k++]=128|p>>>12&63),v[k++]=128|p>>>6&63),v[k++]=128|63&p);return v},n.buf2binstring=function(h){return g(h,h.length)},n.binstring2buf=function(h){for(var v=new s.Buf8(h.length),p=0,_=v.length;p<_;p++)v[p]=h.charCodeAt(p);return v},n.buf2string=function(h,v){var p,_,b,k,T=v||h.length,P=new Array(2*T);for(p=_=0;p<T;)if((b=h[p++])<128)P[_++]=b;else if(4<(k=l[b]))P[_++]=65533,p+=k-1;else{for(b&=k===2?31:k===3?15:7;1<k&&p<T;)b=b<<6|63&h[p++],k--;1<k?P[_++]=65533:b<65536?P[_++]=b:(b-=65536,P[_++]=55296|b>>10&1023,P[_++]=56320|1023&b)}return g(P,_)},n.utf8border=function(h,v){var p;for((v=v||h.length)>h.length&&(v=h.length),p=v-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?v:p+l[h[p]]>v?p:v}},{"./common":41}],43:[function(t,r,n){r.exports=function(s,i,o,l){for(var u=65535&s|0,g=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;g=g+(u=u+i[l++]|0)|0,--h;);u%=65521,g%=65521}return u|g<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var s=function(){for(var i,o=[],l=0;l<256;l++){i=l;for(var u=0;u<8;u++)i=1&i?3988292384^i>>>1:i>>>1;o[l]=i}return o}();r.exports=function(i,o,l,u){var g=s,h=u+l;i^=-1;for(var v=u;v<h;v++)i=i>>>8^g[255&(i^o[v])];return-1^i}},{}],46:[function(t,r,n){var s,i=t("../utils/common"),o=t("./trees"),l=t("./adler32"),u=t("./crc32"),g=t("./messages"),h=0,v=4,p=0,_=-2,b=-1,k=4,T=2,P=8,j=9,L=286,D=30,G=19,z=2*L+1,Z=15,K=3,J=258,he=J+K+1,A=42,F=113,y=1,X=2,Se=3,ae=4;function De(m,V){return m.msg=g[V],V}function ue(m){return(m<<1)-(4<m?9:0)}function xe(m){for(var V=m.length;0<=--V;)m[V]=0}function W(m){var V=m.state,H=V.pending;H>m.avail_out&&(H=m.avail_out),H!==0&&(i.arraySet(m.output,V.pending_buf,V.pending_out,H,m.next_out),m.next_out+=H,V.pending_out+=H,m.total_out+=H,m.avail_out-=H,V.pending-=H,V.pending===0&&(V.pending_out=0))}function U(m,V){o._tr_flush_block(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,V),m.block_start=m.strstart,W(m.strm)}function _e(m,V){m.pending_buf[m.pending++]=V}function ye(m,V){m.pending_buf[m.pending++]=V>>>8&255,m.pending_buf[m.pending++]=255&V}function ge(m,V){var H,$,x=m.max_chain_length,O=m.strstart,te=m.prev_length,se=m.nice_match,M=m.strstart>m.w_size-he?m.strstart-(m.w_size-he):0,fe=m.window,ve=m.w_mask,de=m.prev,Ee=m.strstart+J,Fe=fe[O+te-1],Ie=fe[O+te];m.prev_length>=m.good_match&&(x>>=2),se>m.lookahead&&(se=m.lookahead);do if(fe[(H=V)+te]===Ie&&fe[H+te-1]===Fe&&fe[H]===fe[O]&&fe[++H]===fe[O+1]){O+=2,H++;do;while(fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&fe[++O]===fe[++H]&&O<Ee);if($=J-(Ee-O),O=Ee-J,te<$){if(m.match_start=V,se<=(te=$))break;Fe=fe[O+te-1],Ie=fe[O+te]}}while((V=de[V&ve])>M&&--x!=0);return te<=m.lookahead?te:m.lookahead}function qe(m){var V,H,$,x,O,te,se,M,fe,ve,de=m.w_size;do{if(x=m.window_size-m.lookahead-m.strstart,m.strstart>=de+(de-he)){for(i.arraySet(m.window,m.window,de,de,0),m.match_start-=de,m.strstart-=de,m.block_start-=de,V=H=m.hash_size;$=m.head[--V],m.head[V]=de<=$?$-de:0,--H;);for(V=H=de;$=m.prev[--V],m.prev[V]=de<=$?$-de:0,--H;);x+=de}if(m.strm.avail_in===0)break;if(te=m.strm,se=m.window,M=m.strstart+m.lookahead,fe=x,ve=void 0,ve=te.avail_in,fe<ve&&(ve=fe),H=ve===0?0:(te.avail_in-=ve,i.arraySet(se,te.input,te.next_in,ve,M),te.state.wrap===1?te.adler=l(te.adler,se,ve,M):te.state.wrap===2&&(te.adler=u(te.adler,se,ve,M)),te.next_in+=ve,te.total_in+=ve,ve),m.lookahead+=H,m.lookahead+m.insert>=K)for(O=m.strstart-m.insert,m.ins_h=m.window[O],m.ins_h=(m.ins_h<<m.hash_shift^m.window[O+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[O+K-1])&m.hash_mask,m.prev[O&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=O,O++,m.insert--,!(m.lookahead+m.insert<K)););}while(m.lookahead<he&&m.strm.avail_in!==0)}function Ke(m,V){for(var H,$;;){if(m.lookahead<he){if(qe(m),m.lookahead<he&&V===h)return y;if(m.lookahead===0)break}if(H=0,m.lookahead>=K&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+K-1])&m.hash_mask,H=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),H!==0&&m.strstart-H<=m.w_size-he&&(m.match_length=ge(m,H)),m.match_length>=K)if($=o._tr_tally(m,m.strstart-m.match_start,m.match_length-K),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=K){for(m.match_length--;m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+K-1])&m.hash_mask,H=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,--m.match_length!=0;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else $=o._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if($&&(U(m,!1),m.strm.avail_out===0))return y}return m.insert=m.strstart<K-1?m.strstart:K-1,V===v?(U(m,!0),m.strm.avail_out===0?Se:ae):m.last_lit&&(U(m,!1),m.strm.avail_out===0)?y:X}function Oe(m,V){for(var H,$,x;;){if(m.lookahead<he){if(qe(m),m.lookahead<he&&V===h)return y;if(m.lookahead===0)break}if(H=0,m.lookahead>=K&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+K-1])&m.hash_mask,H=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=K-1,H!==0&&m.prev_length<m.max_lazy_match&&m.strstart-H<=m.w_size-he&&(m.match_length=ge(m,H),m.match_length<=5&&(m.strategy===1||m.match_length===K&&4096<m.strstart-m.match_start)&&(m.match_length=K-1)),m.prev_length>=K&&m.match_length<=m.prev_length){for(x=m.strstart+m.lookahead-K,$=o._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-K),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=x&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+K-1])&m.hash_mask,H=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),--m.prev_length!=0;);if(m.match_available=0,m.match_length=K-1,m.strstart++,$&&(U(m,!1),m.strm.avail_out===0))return y}else if(m.match_available){if(($=o._tr_tally(m,0,m.window[m.strstart-1]))&&U(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return y}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&($=o._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<K-1?m.strstart:K-1,V===v?(U(m,!0),m.strm.avail_out===0?Se:ae):m.last_lit&&(U(m,!1),m.strm.avail_out===0)?y:X}function Be(m,V,H,$,x){this.good_length=m,this.max_lazy=V,this.nice_length=H,this.max_chain=$,this.func=x}function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*z),this.dyn_dtree=new i.Buf16(2*(2*D+1)),this.bl_tree=new i.Buf16(2*(2*G+1)),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Z+1),this.heap=new i.Buf16(2*L+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*L+1),xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function We(m){var V;return m&&m.state?(m.total_in=m.total_out=0,m.data_type=T,(V=m.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?A:F,m.adler=V.wrap===2?0:1,V.last_flush=h,o._tr_init(V),p):De(m,_)}function ft(m){var V=We(m);return V===p&&function(H){H.window_size=2*H.w_size,xe(H.head),H.max_lazy_match=s[H.level].max_lazy,H.good_match=s[H.level].good_length,H.nice_match=s[H.level].nice_length,H.max_chain_length=s[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=K-1,H.match_available=0,H.ins_h=0}(m.state),V}function we(m,V,H,$,x,O){if(!m)return _;var te=1;if(V===b&&(V=6),$<0?(te=0,$=-$):15<$&&(te=2,$-=16),x<1||j<x||H!==P||$<8||15<$||V<0||9<V||O<0||k<O)return De(m,_);$===8&&($=9);var se=new Qe;return(m.state=se).strm=m,se.wrap=te,se.gzhead=null,se.w_bits=$,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=x+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+K-1)/K),se.window=new i.Buf8(2*se.w_size),se.head=new i.Buf16(se.hash_size),se.prev=new i.Buf16(se.w_size),se.lit_bufsize=1<<x+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new i.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=V,se.strategy=O,se.method=H,ft(m)}s=[new Be(0,0,0,0,function(m,V){var H=65535;for(H>m.pending_buf_size-5&&(H=m.pending_buf_size-5);;){if(m.lookahead<=1){if(qe(m),m.lookahead===0&&V===h)return y;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var $=m.block_start+H;if((m.strstart===0||m.strstart>=$)&&(m.lookahead=m.strstart-$,m.strstart=$,U(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-he&&(U(m,!1),m.strm.avail_out===0))return y}return m.insert=0,V===v?(U(m,!0),m.strm.avail_out===0?Se:ae):(m.strstart>m.block_start&&(U(m,!1),m.strm.avail_out),y)}),new Be(4,4,8,4,Ke),new Be(4,5,16,8,Ke),new Be(4,6,32,32,Ke),new Be(4,4,16,16,Oe),new Be(8,16,32,32,Oe),new Be(8,16,128,128,Oe),new Be(8,32,128,256,Oe),new Be(32,128,258,1024,Oe),new Be(32,258,258,4096,Oe)],n.deflateInit=function(m,V){return we(m,V,P,15,8,0)},n.deflateInit2=we,n.deflateReset=ft,n.deflateResetKeep=We,n.deflateSetHeader=function(m,V){return m&&m.state?m.state.wrap!==2?_:(m.state.gzhead=V,p):_},n.deflate=function(m,V){var H,$,x,O;if(!m||!m.state||5<V||V<0)return m?De(m,_):_;if($=m.state,!m.output||!m.input&&m.avail_in!==0||$.status===666&&V!==v)return De(m,m.avail_out===0?-5:_);if($.strm=m,H=$.last_flush,$.last_flush=V,$.status===A)if($.wrap===2)m.adler=0,_e($,31),_e($,139),_e($,8),$.gzhead?(_e($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),_e($,255&$.gzhead.time),_e($,$.gzhead.time>>8&255),_e($,$.gzhead.time>>16&255),_e($,$.gzhead.time>>24&255),_e($,$.level===9?2:2<=$.strategy||$.level<2?4:0),_e($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(_e($,255&$.gzhead.extra.length),_e($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(m.adler=u(m.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(_e($,0),_e($,0),_e($,0),_e($,0),_e($,0),_e($,$.level===9?2:2<=$.strategy||$.level<2?4:0),_e($,3),$.status=F);else{var te=P+($.w_bits-8<<4)<<8;te|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(te|=32),te+=31-te%31,$.status=F,ye($,te),$.strstart!==0&&(ye($,m.adler>>>16),ye($,65535&m.adler)),m.adler=1}if($.status===69)if($.gzhead.extra){for(x=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),W(m),x=$.pending,$.pending!==$.pending_buf_size));)_e($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){x=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),W(m),x=$.pending,$.pending===$.pending_buf_size)){O=1;break}O=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,_e($,O)}while(O!==0);$.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),O===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){x=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),W(m),x=$.pending,$.pending===$.pending_buf_size)){O=1;break}O=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,_e($,O)}while(O!==0);$.gzhead.hcrc&&$.pending>x&&(m.adler=u(m.adler,$.pending_buf,$.pending-x,x)),O===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&W(m),$.pending+2<=$.pending_buf_size&&(_e($,255&m.adler),_e($,m.adler>>8&255),m.adler=0,$.status=F)):$.status=F),$.pending!==0){if(W(m),m.avail_out===0)return $.last_flush=-1,p}else if(m.avail_in===0&&ue(V)<=ue(H)&&V!==v)return De(m,-5);if($.status===666&&m.avail_in!==0)return De(m,-5);if(m.avail_in!==0||$.lookahead!==0||V!==h&&$.status!==666){var se=$.strategy===2?function(M,fe){for(var ve;;){if(M.lookahead===0&&(qe(M),M.lookahead===0)){if(fe===h)return y;break}if(M.match_length=0,ve=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,ve&&(U(M,!1),M.strm.avail_out===0))return y}return M.insert=0,fe===v?(U(M,!0),M.strm.avail_out===0?Se:ae):M.last_lit&&(U(M,!1),M.strm.avail_out===0)?y:X}($,V):$.strategy===3?function(M,fe){for(var ve,de,Ee,Fe,Ie=M.window;;){if(M.lookahead<=J){if(qe(M),M.lookahead<=J&&fe===h)return y;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=K&&0<M.strstart&&(de=Ie[Ee=M.strstart-1])===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]){Fe=M.strstart+J;do;while(de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&de===Ie[++Ee]&&Ee<Fe);M.match_length=J-(Fe-Ee),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=K?(ve=o._tr_tally(M,1,M.match_length-K),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(ve=o._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),ve&&(U(M,!1),M.strm.avail_out===0))return y}return M.insert=0,fe===v?(U(M,!0),M.strm.avail_out===0?Se:ae):M.last_lit&&(U(M,!1),M.strm.avail_out===0)?y:X}($,V):s[$.level].func($,V);if(se!==Se&&se!==ae||($.status=666),se===y||se===Se)return m.avail_out===0&&($.last_flush=-1),p;if(se===X&&(V===1?o._tr_align($):V!==5&&(o._tr_stored_block($,0,0,!1),V===3&&(xe($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),W(m),m.avail_out===0))return $.last_flush=-1,p}return V!==v?p:$.wrap<=0?1:($.wrap===2?(_e($,255&m.adler),_e($,m.adler>>8&255),_e($,m.adler>>16&255),_e($,m.adler>>24&255),_e($,255&m.total_in),_e($,m.total_in>>8&255),_e($,m.total_in>>16&255),_e($,m.total_in>>24&255)):(ye($,m.adler>>>16),ye($,65535&m.adler)),W(m),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?p:1)},n.deflateEnd=function(m){var V;return m&&m.state?(V=m.state.status)!==A&&V!==69&&V!==73&&V!==91&&V!==103&&V!==F&&V!==666?De(m,_):(m.state=null,V===F?De(m,-3):p):_},n.deflateSetDictionary=function(m,V){var H,$,x,O,te,se,M,fe,ve=V.length;if(!m||!m.state||(O=(H=m.state).wrap)===2||O===1&&H.status!==A||H.lookahead)return _;for(O===1&&(m.adler=l(m.adler,V,ve,0)),H.wrap=0,ve>=H.w_size&&(O===0&&(xe(H.head),H.strstart=0,H.block_start=0,H.insert=0),fe=new i.Buf8(H.w_size),i.arraySet(fe,V,ve-H.w_size,H.w_size,0),V=fe,ve=H.w_size),te=m.avail_in,se=m.next_in,M=m.input,m.avail_in=ve,m.next_in=0,m.input=V,qe(H);H.lookahead>=K;){for($=H.strstart,x=H.lookahead-(K-1);H.ins_h=(H.ins_h<<H.hash_shift^H.window[$+K-1])&H.hash_mask,H.prev[$&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=$,$++,--x;);H.strstart=$,H.lookahead=K-1,qe(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=K-1,H.match_available=0,m.next_in=se,m.input=M,m.avail_in=te,H.wrap=O,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(s,i){var o,l,u,g,h,v,p,_,b,k,T,P,j,L,D,G,z,Z,K,J,he,A,F,y,X;o=s.state,l=s.next_in,y=s.input,u=l+(s.avail_in-5),g=s.next_out,X=s.output,h=g-(i-s.avail_out),v=g+(s.avail_out-257),p=o.dmax,_=o.wsize,b=o.whave,k=o.wnext,T=o.window,P=o.hold,j=o.bits,L=o.lencode,D=o.distcode,G=(1<<o.lenbits)-1,z=(1<<o.distbits)-1;e:do{j<15&&(P+=y[l++]<<j,j+=8,P+=y[l++]<<j,j+=8),Z=L[P&G];t:for(;;){if(P>>>=K=Z>>>24,j-=K,(K=Z>>>16&255)===0)X[g++]=65535&Z;else{if(!(16&K)){if(!(64&K)){Z=L[(65535&Z)+(P&(1<<K)-1)];continue t}if(32&K){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}J=65535&Z,(K&=15)&&(j<K&&(P+=y[l++]<<j,j+=8),J+=P&(1<<K)-1,P>>>=K,j-=K),j<15&&(P+=y[l++]<<j,j+=8,P+=y[l++]<<j,j+=8),Z=D[P&z];r:for(;;){if(P>>>=K=Z>>>24,j-=K,!(16&(K=Z>>>16&255))){if(!(64&K)){Z=D[(65535&Z)+(P&(1<<K)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(he=65535&Z,j<(K&=15)&&(P+=y[l++]<<j,(j+=8)<K&&(P+=y[l++]<<j,j+=8)),p<(he+=P&(1<<K)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(P>>>=K,j-=K,(K=g-h)<he){if(b<(K=he-K)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(F=T,(A=0)===k){if(A+=_-K,K<J){for(J-=K;X[g++]=T[A++],--K;);A=g-he,F=X}}else if(k<K){if(A+=_+k-K,(K-=k)<J){for(J-=K;X[g++]=T[A++],--K;);if(A=0,k<J){for(J-=K=k;X[g++]=T[A++],--K;);A=g-he,F=X}}}else if(A+=k-K,K<J){for(J-=K;X[g++]=T[A++],--K;);A=g-he,F=X}for(;2<J;)X[g++]=F[A++],X[g++]=F[A++],X[g++]=F[A++],J-=3;J&&(X[g++]=F[A++],1<J&&(X[g++]=F[A++]))}else{for(A=g-he;X[g++]=X[A++],X[g++]=X[A++],X[g++]=X[A++],2<(J-=3););J&&(X[g++]=X[A++],1<J&&(X[g++]=X[A++]))}break}}break}}while(l<u&&g<v);l-=J=j>>3,P&=(1<<(j-=J<<3))-1,s.next_in=l,s.next_out=g,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=g<v?v-g+257:257-(g-v),o.hold=P,o.bits=j}},{}],49:[function(t,r,n){var s=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),g=1,h=2,v=0,p=-2,_=1,b=852,k=592;function T(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j(A){var F;return A&&A.state?(F=A.state,A.total_in=A.total_out=F.total=0,A.msg="",F.wrap&&(A.adler=1&F.wrap),F.mode=_,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(b),F.distcode=F.distdyn=new s.Buf32(k),F.sane=1,F.back=-1,v):p}function L(A){var F;return A&&A.state?((F=A.state).wsize=0,F.whave=0,F.wnext=0,j(A)):p}function D(A,F){var y,X;return A&&A.state?(X=A.state,F<0?(y=0,F=-F):(y=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?p:(X.window!==null&&X.wbits!==F&&(X.window=null),X.wrap=y,X.wbits=F,L(A))):p}function G(A,F){var y,X;return A?(X=new P,(A.state=X).window=null,(y=D(A,F))!==v&&(A.state=null),y):p}var z,Z,K=!0;function J(A){if(K){var F;for(z=new s.Buf32(512),Z=new s.Buf32(32),F=0;F<144;)A.lens[F++]=8;for(;F<256;)A.lens[F++]=9;for(;F<280;)A.lens[F++]=7;for(;F<288;)A.lens[F++]=8;for(u(g,A.lens,0,288,z,0,A.work,{bits:9}),F=0;F<32;)A.lens[F++]=5;u(h,A.lens,0,32,Z,0,A.work,{bits:5}),K=!1}A.lencode=z,A.lenbits=9,A.distcode=Z,A.distbits=5}function he(A,F,y,X){var Se,ae=A.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new s.Buf8(ae.wsize)),X>=ae.wsize?(s.arraySet(ae.window,F,y-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(X<(Se=ae.wsize-ae.wnext)&&(Se=X),s.arraySet(ae.window,F,y-X,Se,ae.wnext),(X-=Se)?(s.arraySet(ae.window,F,y-X,X,0),ae.wnext=X,ae.whave=ae.wsize):(ae.wnext+=Se,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=Se))),0}n.inflateReset=L,n.inflateReset2=D,n.inflateResetKeep=j,n.inflateInit=function(A){return G(A,15)},n.inflateInit2=G,n.inflate=function(A,F){var y,X,Se,ae,De,ue,xe,W,U,_e,ye,ge,qe,Ke,Oe,Be,Qe,We,ft,we,m,V,H,$,x=0,O=new s.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return p;(y=A.state).mode===12&&(y.mode=13),De=A.next_out,Se=A.output,xe=A.avail_out,ae=A.next_in,X=A.input,ue=A.avail_in,W=y.hold,U=y.bits,_e=ue,ye=xe,V=v;e:for(;;)switch(y.mode){case _:if(y.wrap===0){y.mode=13;break}for(;U<16;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(2&y.wrap&&W===35615){O[y.check=0]=255&W,O[1]=W>>>8&255,y.check=o(y.check,O,2,0),U=W=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&W)<<8)+(W>>8))%31){A.msg="incorrect header check",y.mode=30;break}if((15&W)!=8){A.msg="unknown compression method",y.mode=30;break}if(U-=4,m=8+(15&(W>>>=4)),y.wbits===0)y.wbits=m;else if(m>y.wbits){A.msg="invalid window size",y.mode=30;break}y.dmax=1<<m,A.adler=y.check=1,y.mode=512&W?10:12,U=W=0;break;case 2:for(;U<16;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(y.flags=W,(255&y.flags)!=8){A.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){A.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=W>>8&1),512&y.flags&&(O[0]=255&W,O[1]=W>>>8&255,y.check=o(y.check,O,2,0)),U=W=0,y.mode=3;case 3:for(;U<32;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.head&&(y.head.time=W),512&y.flags&&(O[0]=255&W,O[1]=W>>>8&255,O[2]=W>>>16&255,O[3]=W>>>24&255,y.check=o(y.check,O,4,0)),U=W=0,y.mode=4;case 4:for(;U<16;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.head&&(y.head.xflags=255&W,y.head.os=W>>8),512&y.flags&&(O[0]=255&W,O[1]=W>>>8&255,y.check=o(y.check,O,2,0)),U=W=0,y.mode=5;case 5:if(1024&y.flags){for(;U<16;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.length=W,y.head&&(y.head.extra_len=W),512&y.flags&&(O[0]=255&W,O[1]=W>>>8&255,y.check=o(y.check,O,2,0)),U=W=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(ue<(ge=y.length)&&(ge=ue),ge&&(y.head&&(m=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),s.arraySet(y.head.extra,X,ae,ge,m)),512&y.flags&&(y.check=o(y.check,X,ge,ae)),ue-=ge,ae+=ge,y.length-=ge),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(ue===0)break e;for(ge=0;m=X[ae+ge++],y.head&&m&&y.length<65536&&(y.head.name+=String.fromCharCode(m)),m&&ge<ue;);if(512&y.flags&&(y.check=o(y.check,X,ge,ae)),ue-=ge,ae+=ge,m)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(ue===0)break e;for(ge=0;m=X[ae+ge++],y.head&&m&&y.length<65536&&(y.head.comment+=String.fromCharCode(m)),m&&ge<ue;);if(512&y.flags&&(y.check=o(y.check,X,ge,ae)),ue-=ge,ae+=ge,m)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;U<16;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(W!==(65535&y.check)){A.msg="header crc mismatch",y.mode=30;break}U=W=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),A.adler=y.check=0,y.mode=12;break;case 10:for(;U<32;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}A.adler=y.check=T(W),U=W=0,y.mode=11;case 11:if(y.havedict===0)return A.next_out=De,A.avail_out=xe,A.next_in=ae,A.avail_in=ue,y.hold=W,y.bits=U,2;A.adler=y.check=1,y.mode=12;case 12:if(F===5||F===6)break e;case 13:if(y.last){W>>>=7&U,U-=7&U,y.mode=27;break}for(;U<3;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}switch(y.last=1&W,U-=1,3&(W>>>=1)){case 0:y.mode=14;break;case 1:if(J(y),y.mode=20,F!==6)break;W>>>=2,U-=2;break e;case 2:y.mode=17;break;case 3:A.msg="invalid block type",y.mode=30}W>>>=2,U-=2;break;case 14:for(W>>>=7&U,U-=7&U;U<32;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if((65535&W)!=(W>>>16^65535)){A.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&W,U=W=0,y.mode=15,F===6)break e;case 15:y.mode=16;case 16:if(ge=y.length){if(ue<ge&&(ge=ue),xe<ge&&(ge=xe),ge===0)break e;s.arraySet(Se,X,ae,ge,De),ue-=ge,ae+=ge,xe-=ge,De+=ge,y.length-=ge;break}y.mode=12;break;case 17:for(;U<14;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(y.nlen=257+(31&W),W>>>=5,U-=5,y.ndist=1+(31&W),W>>>=5,U-=5,y.ncode=4+(15&W),W>>>=4,U-=4,286<y.nlen||30<y.ndist){A.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;U<3;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.lens[te[y.have++]]=7&W,W>>>=3,U-=3}for(;y.have<19;)y.lens[te[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,H={bits:y.lenbits},V=u(0,y.lens,0,19,y.lencode,0,y.work,H),y.lenbits=H.bits,V){A.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;Be=(x=y.lencode[W&(1<<y.lenbits)-1])>>>16&255,Qe=65535&x,!((Oe=x>>>24)<=U);){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(Qe<16)W>>>=Oe,U-=Oe,y.lens[y.have++]=Qe;else{if(Qe===16){for($=Oe+2;U<$;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(W>>>=Oe,U-=Oe,y.have===0){A.msg="invalid bit length repeat",y.mode=30;break}m=y.lens[y.have-1],ge=3+(3&W),W>>>=2,U-=2}else if(Qe===17){for($=Oe+3;U<$;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}U-=Oe,m=0,ge=3+(7&(W>>>=Oe)),W>>>=3,U-=3}else{for($=Oe+7;U<$;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}U-=Oe,m=0,ge=11+(127&(W>>>=Oe)),W>>>=7,U-=7}if(y.have+ge>y.nlen+y.ndist){A.msg="invalid bit length repeat",y.mode=30;break}for(;ge--;)y.lens[y.have++]=m}}if(y.mode===30)break;if(y.lens[256]===0){A.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,H={bits:y.lenbits},V=u(g,y.lens,0,y.nlen,y.lencode,0,y.work,H),y.lenbits=H.bits,V){A.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,H={bits:y.distbits},V=u(h,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,H),y.distbits=H.bits,V){A.msg="invalid distances set",y.mode=30;break}if(y.mode=20,F===6)break e;case 20:y.mode=21;case 21:if(6<=ue&&258<=xe){A.next_out=De,A.avail_out=xe,A.next_in=ae,A.avail_in=ue,y.hold=W,y.bits=U,l(A,ye),De=A.next_out,Se=A.output,xe=A.avail_out,ae=A.next_in,X=A.input,ue=A.avail_in,W=y.hold,U=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;Be=(x=y.lencode[W&(1<<y.lenbits)-1])>>>16&255,Qe=65535&x,!((Oe=x>>>24)<=U);){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(Be&&!(240&Be)){for(We=Oe,ft=Be,we=Qe;Be=(x=y.lencode[we+((W&(1<<We+ft)-1)>>We)])>>>16&255,Qe=65535&x,!(We+(Oe=x>>>24)<=U);){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}W>>>=We,U-=We,y.back+=We}if(W>>>=Oe,U-=Oe,y.back+=Oe,y.length=Qe,Be===0){y.mode=26;break}if(32&Be){y.back=-1,y.mode=12;break}if(64&Be){A.msg="invalid literal/length code",y.mode=30;break}y.extra=15&Be,y.mode=22;case 22:if(y.extra){for($=y.extra;U<$;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.length+=W&(1<<y.extra)-1,W>>>=y.extra,U-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;Be=(x=y.distcode[W&(1<<y.distbits)-1])>>>16&255,Qe=65535&x,!((Oe=x>>>24)<=U);){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(!(240&Be)){for(We=Oe,ft=Be,we=Qe;Be=(x=y.distcode[we+((W&(1<<We+ft)-1)>>We)])>>>16&255,Qe=65535&x,!(We+(Oe=x>>>24)<=U);){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}W>>>=We,U-=We,y.back+=We}if(W>>>=Oe,U-=Oe,y.back+=Oe,64&Be){A.msg="invalid distance code",y.mode=30;break}y.offset=Qe,y.extra=15&Be,y.mode=24;case 24:if(y.extra){for($=y.extra;U<$;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}y.offset+=W&(1<<y.extra)-1,W>>>=y.extra,U-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){A.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(xe===0)break e;if(ge=ye-xe,y.offset>ge){if((ge=y.offset-ge)>y.whave&&y.sane){A.msg="invalid distance too far back",y.mode=30;break}qe=ge>y.wnext?(ge-=y.wnext,y.wsize-ge):y.wnext-ge,ge>y.length&&(ge=y.length),Ke=y.window}else Ke=Se,qe=De-y.offset,ge=y.length;for(xe<ge&&(ge=xe),xe-=ge,y.length-=ge;Se[De++]=Ke[qe++],--ge;);y.length===0&&(y.mode=21);break;case 26:if(xe===0)break e;Se[De++]=y.length,xe--,y.mode=21;break;case 27:if(y.wrap){for(;U<32;){if(ue===0)break e;ue--,W|=X[ae++]<<U,U+=8}if(ye-=xe,A.total_out+=ye,y.total+=ye,ye&&(A.adler=y.check=y.flags?o(y.check,Se,ye,De-ye):i(y.check,Se,ye,De-ye)),ye=xe,(y.flags?W:T(W))!==y.check){A.msg="incorrect data check",y.mode=30;break}U=W=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;U<32;){if(ue===0)break e;ue--,W+=X[ae++]<<U,U+=8}if(W!==(4294967295&y.total)){A.msg="incorrect length check",y.mode=30;break}U=W=0}y.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return p}return A.next_out=De,A.avail_out=xe,A.next_in=ae,A.avail_in=ue,y.hold=W,y.bits=U,(y.wsize||ye!==A.avail_out&&y.mode<30&&(y.mode<27||F!==4))&&he(A,A.output,A.next_out,ye-A.avail_out)?(y.mode=31,-4):(_e-=A.avail_in,ye-=A.avail_out,A.total_in+=_e,A.total_out+=ye,y.total+=ye,y.wrap&&ye&&(A.adler=y.check=y.flags?o(y.check,Se,ye,A.next_out-ye):i(y.check,Se,ye,A.next_out-ye)),A.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(_e==0&&ye===0||F===4)&&V===v&&(V=-5),V)},n.inflateEnd=function(A){if(!A||!A.state)return p;var F=A.state;return F.window&&(F.window=null),A.state=null,v},n.inflateGetHeader=function(A,F){var y;return A&&A.state&&2&(y=A.state).wrap?((y.head=F).done=!1,v):p},n.inflateSetDictionary=function(A,F){var y,X=F.length;return A&&A.state?(y=A.state).wrap!==0&&y.mode!==11?p:y.mode===11&&i(1,F,X,0)!==y.check?-3:he(A,F,X,X)?(y.mode=31,-4):(y.havedict=1,v):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var s=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(g,h,v,p,_,b,k,T){var P,j,L,D,G,z,Z,K,J,he=T.bits,A=0,F=0,y=0,X=0,Se=0,ae=0,De=0,ue=0,xe=0,W=0,U=null,_e=0,ye=new s.Buf16(16),ge=new s.Buf16(16),qe=null,Ke=0;for(A=0;A<=15;A++)ye[A]=0;for(F=0;F<p;F++)ye[h[v+F]]++;for(Se=he,X=15;1<=X&&ye[X]===0;X--);if(X<Se&&(Se=X),X===0)return _[b++]=20971520,_[b++]=20971520,T.bits=1,0;for(y=1;y<X&&ye[y]===0;y++);for(Se<y&&(Se=y),A=ue=1;A<=15;A++)if(ue<<=1,(ue-=ye[A])<0)return-1;if(0<ue&&(g===0||X!==1))return-1;for(ge[1]=0,A=1;A<15;A++)ge[A+1]=ge[A]+ye[A];for(F=0;F<p;F++)h[v+F]!==0&&(k[ge[h[v+F]]++]=F);if(z=g===0?(U=qe=k,19):g===1?(U=i,_e-=257,qe=o,Ke-=257,256):(U=l,qe=u,-1),A=y,G=b,De=F=W=0,L=-1,D=(xe=1<<(ae=Se))-1,g===1&&852<xe||g===2&&592<xe)return 1;for(;;){for(Z=A-De,J=k[F]<z?(K=0,k[F]):k[F]>z?(K=qe[Ke+k[F]],U[_e+k[F]]):(K=96,0),P=1<<A-De,y=j=1<<ae;_[G+(W>>De)+(j-=P)]=Z<<24|K<<16|J|0,j!==0;);for(P=1<<A-1;W&P;)P>>=1;if(P!==0?(W&=P-1,W+=P):W=0,F++,--ye[A]==0){if(A===X)break;A=h[v+k[F]]}if(Se<A&&(W&D)!==L){for(De===0&&(De=Se),G+=y,ue=1<<(ae=A-De);ae+De<X&&!((ue-=ye[ae+De])<=0);)ae++,ue<<=1;if(xe+=1<<ae,g===1&&852<xe||g===2&&592<xe)return 1;_[L=W&D]=Se<<24|ae<<16|G-b|0}}return W!==0&&(_[G+W]=A-De<<24|64<<16|0),T.bits=Se,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var s=t("../utils/common"),i=0,o=1;function l(x){for(var O=x.length;0<=--O;)x[O]=0}var u=0,g=29,h=256,v=h+1+g,p=30,_=19,b=2*v+1,k=15,T=16,P=7,j=256,L=16,D=17,G=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=new Array(2*(v+2));l(he);var A=new Array(2*p);l(A);var F=new Array(512);l(F);var y=new Array(256);l(y);var X=new Array(g);l(X);var Se,ae,De,ue=new Array(p);function xe(x,O,te,se,M){this.static_tree=x,this.extra_bits=O,this.extra_base=te,this.elems=se,this.max_length=M,this.has_stree=x&&x.length}function W(x,O){this.dyn_tree=x,this.max_code=0,this.stat_desc=O}function U(x){return x<256?F[x]:F[256+(x>>>7)]}function _e(x,O){x.pending_buf[x.pending++]=255&O,x.pending_buf[x.pending++]=O>>>8&255}function ye(x,O,te){x.bi_valid>T-te?(x.bi_buf|=O<<x.bi_valid&65535,_e(x,x.bi_buf),x.bi_buf=O>>T-x.bi_valid,x.bi_valid+=te-T):(x.bi_buf|=O<<x.bi_valid&65535,x.bi_valid+=te)}function ge(x,O,te){ye(x,te[2*O],te[2*O+1])}function qe(x,O){for(var te=0;te|=1&x,x>>>=1,te<<=1,0<--O;);return te>>>1}function Ke(x,O,te){var se,M,fe=new Array(k+1),ve=0;for(se=1;se<=k;se++)fe[se]=ve=ve+te[se-1]<<1;for(M=0;M<=O;M++){var de=x[2*M+1];de!==0&&(x[2*M]=qe(fe[de]++,de))}}function Oe(x){var O;for(O=0;O<v;O++)x.dyn_ltree[2*O]=0;for(O=0;O<p;O++)x.dyn_dtree[2*O]=0;for(O=0;O<_;O++)x.bl_tree[2*O]=0;x.dyn_ltree[2*j]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Be(x){8<x.bi_valid?_e(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Qe(x,O,te,se){var M=2*O,fe=2*te;return x[M]<x[fe]||x[M]===x[fe]&&se[O]<=se[te]}function We(x,O,te){for(var se=x.heap[te],M=te<<1;M<=x.heap_len&&(M<x.heap_len&&Qe(O,x.heap[M+1],x.heap[M],x.depth)&&M++,!Qe(O,se,x.heap[M],x.depth));)x.heap[te]=x.heap[M],te=M,M<<=1;x.heap[te]=se}function ft(x,O,te){var se,M,fe,ve,de=0;if(x.last_lit!==0)for(;se=x.pending_buf[x.d_buf+2*de]<<8|x.pending_buf[x.d_buf+2*de+1],M=x.pending_buf[x.l_buf+de],de++,se===0?ge(x,M,O):(ge(x,(fe=y[M])+h+1,O),(ve=z[fe])!==0&&ye(x,M-=X[fe],ve),ge(x,fe=U(--se),te),(ve=Z[fe])!==0&&ye(x,se-=ue[fe],ve)),de<x.last_lit;);ge(x,j,O)}function we(x,O){var te,se,M,fe=O.dyn_tree,ve=O.stat_desc.static_tree,de=O.stat_desc.has_stree,Ee=O.stat_desc.elems,Fe=-1;for(x.heap_len=0,x.heap_max=b,te=0;te<Ee;te++)fe[2*te]!==0?(x.heap[++x.heap_len]=Fe=te,x.depth[te]=0):fe[2*te+1]=0;for(;x.heap_len<2;)fe[2*(M=x.heap[++x.heap_len]=Fe<2?++Fe:0)]=1,x.depth[M]=0,x.opt_len--,de&&(x.static_len-=ve[2*M+1]);for(O.max_code=Fe,te=x.heap_len>>1;1<=te;te--)We(x,fe,te);for(M=Ee;te=x.heap[1],x.heap[1]=x.heap[x.heap_len--],We(x,fe,1),se=x.heap[1],x.heap[--x.heap_max]=te,x.heap[--x.heap_max]=se,fe[2*M]=fe[2*te]+fe[2*se],x.depth[M]=(x.depth[te]>=x.depth[se]?x.depth[te]:x.depth[se])+1,fe[2*te+1]=fe[2*se+1]=M,x.heap[1]=M++,We(x,fe,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Ie,Xe){var lt,it,Et,Ue,$t,er,pt=Xe.dyn_tree,Ot=Xe.max_code,Ae=Xe.stat_desc.static_tree,ur=Xe.stat_desc.has_stree,ht=Xe.stat_desc.extra_bits,tr=Xe.stat_desc.extra_base,gt=Xe.stat_desc.max_length,Nt=0;for(Ue=0;Ue<=k;Ue++)Ie.bl_count[Ue]=0;for(pt[2*Ie.heap[Ie.heap_max]+1]=0,lt=Ie.heap_max+1;lt<b;lt++)gt<(Ue=pt[2*pt[2*(it=Ie.heap[lt])+1]+1]+1)&&(Ue=gt,Nt++),pt[2*it+1]=Ue,Ot<it||(Ie.bl_count[Ue]++,$t=0,tr<=it&&($t=ht[it-tr]),er=pt[2*it],Ie.opt_len+=er*(Ue+$t),ur&&(Ie.static_len+=er*(Ae[2*it+1]+$t)));if(Nt!==0){do{for(Ue=gt-1;Ie.bl_count[Ue]===0;)Ue--;Ie.bl_count[Ue]--,Ie.bl_count[Ue+1]+=2,Ie.bl_count[gt]--,Nt-=2}while(0<Nt);for(Ue=gt;Ue!==0;Ue--)for(it=Ie.bl_count[Ue];it!==0;)Ot<(Et=Ie.heap[--lt])||(pt[2*Et+1]!==Ue&&(Ie.opt_len+=(Ue-pt[2*Et+1])*pt[2*Et],pt[2*Et+1]=Ue),it--)}}(x,O),Ke(fe,Fe,x.bl_count)}function m(x,O,te){var se,M,fe=-1,ve=O[1],de=0,Ee=7,Fe=4;for(ve===0&&(Ee=138,Fe=3),O[2*(te+1)+1]=65535,se=0;se<=te;se++)M=ve,ve=O[2*(se+1)+1],++de<Ee&&M===ve||(de<Fe?x.bl_tree[2*M]+=de:M!==0?(M!==fe&&x.bl_tree[2*M]++,x.bl_tree[2*L]++):de<=10?x.bl_tree[2*D]++:x.bl_tree[2*G]++,fe=M,Fe=(de=0)===ve?(Ee=138,3):M===ve?(Ee=6,3):(Ee=7,4))}function V(x,O,te){var se,M,fe=-1,ve=O[1],de=0,Ee=7,Fe=4;for(ve===0&&(Ee=138,Fe=3),se=0;se<=te;se++)if(M=ve,ve=O[2*(se+1)+1],!(++de<Ee&&M===ve)){if(de<Fe)for(;ge(x,M,x.bl_tree),--de!=0;);else M!==0?(M!==fe&&(ge(x,M,x.bl_tree),de--),ge(x,L,x.bl_tree),ye(x,de-3,2)):de<=10?(ge(x,D,x.bl_tree),ye(x,de-3,3)):(ge(x,G,x.bl_tree),ye(x,de-11,7));fe=M,Fe=(de=0)===ve?(Ee=138,3):M===ve?(Ee=6,3):(Ee=7,4)}}l(ue);var H=!1;function $(x,O,te,se){ye(x,(u<<1)+(se?1:0),3),function(M,fe,ve,de){Be(M),de&&(_e(M,ve),_e(M,~ve)),s.arraySet(M.pending_buf,M.window,fe,ve,M.pending),M.pending+=ve}(x,O,te,!0)}n._tr_init=function(x){H||(function(){var O,te,se,M,fe,ve=new Array(k+1);for(M=se=0;M<g-1;M++)for(X[M]=se,O=0;O<1<<z[M];O++)y[se++]=M;for(y[se-1]=M,M=fe=0;M<16;M++)for(ue[M]=fe,O=0;O<1<<Z[M];O++)F[fe++]=M;for(fe>>=7;M<p;M++)for(ue[M]=fe<<7,O=0;O<1<<Z[M]-7;O++)F[256+fe++]=M;for(te=0;te<=k;te++)ve[te]=0;for(O=0;O<=143;)he[2*O+1]=8,O++,ve[8]++;for(;O<=255;)he[2*O+1]=9,O++,ve[9]++;for(;O<=279;)he[2*O+1]=7,O++,ve[7]++;for(;O<=287;)he[2*O+1]=8,O++,ve[8]++;for(Ke(he,v+1,ve),O=0;O<p;O++)A[2*O+1]=5,A[2*O]=qe(O,5);Se=new xe(he,z,h+1,v,k),ae=new xe(A,Z,0,p,k),De=new xe(new Array(0),K,0,_,P)}(),H=!0),x.l_desc=new W(x.dyn_ltree,Se),x.d_desc=new W(x.dyn_dtree,ae),x.bl_desc=new W(x.bl_tree,De),x.bi_buf=0,x.bi_valid=0,Oe(x)},n._tr_stored_block=$,n._tr_flush_block=function(x,O,te,se){var M,fe,ve=0;0<x.level?(x.strm.data_type===2&&(x.strm.data_type=function(de){var Ee,Fe=4093624447;for(Ee=0;Ee<=31;Ee++,Fe>>>=1)if(1&Fe&&de.dyn_ltree[2*Ee]!==0)return i;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return o;for(Ee=32;Ee<h;Ee++)if(de.dyn_ltree[2*Ee]!==0)return o;return i}(x)),we(x,x.l_desc),we(x,x.d_desc),ve=function(de){var Ee;for(m(de,de.dyn_ltree,de.l_desc.max_code),m(de,de.dyn_dtree,de.d_desc.max_code),we(de,de.bl_desc),Ee=_-1;3<=Ee&&de.bl_tree[2*J[Ee]+1]===0;Ee--);return de.opt_len+=3*(Ee+1)+5+5+4,Ee}(x),M=x.opt_len+3+7>>>3,(fe=x.static_len+3+7>>>3)<=M&&(M=fe)):M=fe=te+5,te+4<=M&&O!==-1?$(x,O,te,se):x.strategy===4||fe===M?(ye(x,2+(se?1:0),3),ft(x,he,A)):(ye(x,4+(se?1:0),3),function(de,Ee,Fe,Ie){var Xe;for(ye(de,Ee-257,5),ye(de,Fe-1,5),ye(de,Ie-4,4),Xe=0;Xe<Ie;Xe++)ye(de,de.bl_tree[2*J[Xe]+1],3);V(de,de.dyn_ltree,Ee-1),V(de,de.dyn_dtree,Fe-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,ve+1),ft(x,x.dyn_ltree,x.dyn_dtree)),Oe(x),se&&Be(x)},n._tr_tally=function(x,O,te){return x.pending_buf[x.d_buf+2*x.last_lit]=O>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&O,x.pending_buf[x.l_buf+x.last_lit]=255&te,x.last_lit++,O===0?x.dyn_ltree[2*te]++:(x.matches++,O--,x.dyn_ltree[2*(y[te]+h+1)]++,x.dyn_dtree[2*U(O)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){ye(x,2,3),ge(x,j,he),function(O){O.bi_valid===16?(_e(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)}(x)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(s){(function(i,o){if(!i.setImmediate){var l,u,g,h,v=1,p={},_=!1,b=i.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(i);k=k&&k.setTimeout?k:i,l={}.toString.call(i.process)==="[object process]"?function(L){ir.nextTick(function(){P(L)})}:function(){if(i.postMessage&&!i.importScripts){var L=!0,D=i.onmessage;return i.onmessage=function(){L=!1},i.postMessage("","*"),i.onmessage=D,L}}()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",j,!1):i.attachEvent("onmessage",j),function(L){i.postMessage(h+L,"*")}):i.MessageChannel?((g=new MessageChannel).port1.onmessage=function(L){P(L.data)},function(L){g.port2.postMessage(L)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(L){var D=b.createElement("script");D.onreadystatechange=function(){P(L),D.onreadystatechange=null,u.removeChild(D),D=null},u.appendChild(D)}):function(L){setTimeout(P,0,L)},k.setImmediate=function(L){typeof L!="function"&&(L=new Function(""+L));for(var D=new Array(arguments.length-1),G=0;G<D.length;G++)D[G]=arguments[G+1];var z={callback:L,args:D};return p[v]=z,l(v),v++},k.clearImmediate=T}function T(L){delete p[L]}function P(L){if(_)setTimeout(P,0,L);else{var D=p[L];if(D){_=!0;try{(function(G){var z=G.callback,Z=G.args;switch(Z.length){case 0:z();break;case 1:z(Z[0]);break;case 2:z(Z[0],Z[1]);break;case 3:z(Z[0],Z[1],Z[2]);break;default:z.apply(o,Z)}})(D)}finally{T(L),_=!1}}}}function j(L){L.source===i&&typeof L.data=="string"&&L.data.indexOf(h)===0&&P(+L.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Xt<"u"?Xt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ri);const mn=(()=>typeof self>"u"?!1:"showOpenFilePicker"in self)(),zo=mn?Promise.resolve().then(function(){return Ko}):Promise.resolve().then(function(){return Jo});async function qo(...c){return(await zo).default(...c)}mn?Promise.resolve().then(function(){return Vo}):Promise.resolve().then(function(){return tc});const Uo=mn?Promise.resolve().then(function(){return Qo}):Promise.resolve().then(function(){return nc});async function Wo(...c){return(await Uo).default(...c)}const Go=async c=>{const e=await c.getFile();return e.handle=c,e};var Ho=async(c=[{}])=>{Array.isArray(c)||(c=[c]);const e=[];c.forEach((n,s)=>{e[s]={description:n.description||"Files",accept:{}},n.mimeTypes?n.mimeTypes.map(i=>{e[s].accept[i]=n.extensions||[]}):e[s].accept["*/*"]=n.extensions||[]});const t=await window.showOpenFilePicker({id:c[0].id,startIn:c[0].startIn,types:e,multiple:c[0].multiple||!1,excludeAcceptAllOption:c[0].excludeAcceptAllOption||!1}),r=await Promise.all(t.map(Go));return c[0].multiple?r:r[0]},Ko={__proto__:null,default:Ho};function tn(c){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(n){return{value:n,done:r}})}return tn=function(t){this.s=t,this.n=t.next},tn.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return r===void 0?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return r===void 0?Promise.reject(t):e(r.apply(this.s,arguments))}},new tn(c)}const ni=async(c,e,t=c.name,r)=>{const n=[],s=[];var i,o=!1,l=!1;try{for(var u,g=function(h){var v,p,_,b=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,_=Symbol.iterator);b--;){if(p&&(v=h[p])!=null)return v.call(h);if(_&&(v=h[_])!=null)return new tn(v.call(h));p="@@asyncIterator",_="@@iterator"}throw new TypeError("Object is not async iterable")}(c.values());o=!(u=await g.next()).done;o=!1){const h=u.value,v=`${t}/${h.name}`;h.kind==="file"?s.push(h.getFile().then(p=>(p.directoryHandle=c,p.handle=h,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):h.kind!=="directory"||!e||r&&r(h)||n.push(ni(h,e,v,r))}}catch(h){l=!0,i=h}finally{try{o&&g.return!=null&&await g.return()}finally{if(l)throw i}}return[...(await Promise.all(n)).flat(),...await Promise.all(s)]};var Yo=async(c={})=>{c.recursive=c.recursive||!1,c.mode=c.mode||"read";const e=await window.showDirectoryPicker({id:c.id,startIn:c.startIn,mode:c.mode});return(await(await e.values()).next()).done?[e]:ni(e,c.recursive,void 0,c.skipDirectory)},Vo={__proto__:null,default:Yo},Zo=async(c,e=[{}],t=null,r=!1,n=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let i=null;if(c instanceof Blob&&c.type?i=c.type:c.headers&&c.headers.get("content-type")&&(i=c.headers.get("content-type")),e.forEach((u,g)=>{s[g]={description:u.description||"Files",accept:{}},u.mimeTypes?(g===0&&i&&u.mimeTypes.push(i),u.mimeTypes.map(h=>{s[g].accept[h]=u.extensions||[]})):i?s[g].accept[i]=u.extensions||[]:s[g].accept["*/*"]=u.extensions||[]}),t)try{await t.getFile()}catch(u){if(t=null,r)throw u}const o=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&n&&n(o);const l=await o.createWritable();return"stream"in c?(await c.stream().pipeTo(l),o):"body"in c?(await c.body.pipeTo(l),o):(await l.write(await c),await l.close(),o)},Qo={__proto__:null,default:Zo},Xo=async(c=[{}])=>(Array.isArray(c)||(c=[c]),new Promise((e,t)=>{const r=document.createElement("input");r.type="file";const n=[...c.map(l=>l.mimeTypes||[]),...c.map(l=>l.extensions||[])].join();r.multiple=c[0].multiple||!1,r.accept=n||"",r.style.display="none",document.body.append(r);const s=l=>{typeof i=="function"&&i(),e(l)},i=c[0].legacySetup&&c[0].legacySetup(s,()=>i(t),r),o=()=>{window.removeEventListener("focus",o),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",o)}),r.addEventListener("change",()=>{window.removeEventListener("focus",o),r.remove(),s(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Jo={__proto__:null,default:Xo},ec=async(c=[{}])=>(Array.isArray(c)||(c=[c]),c[0].recursive=c[0].recursive||!1,new Promise((e,t)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const n=i=>{typeof s=="function"&&s(),e(i)},s=c[0].legacySetup&&c[0].legacySetup(n,()=>s(t),r);r.addEventListener("change",()=>{let i=Array.from(r.files);c[0].recursive?c[0].recursive&&c[0].skipDirectory&&(i=i.filter(o=>o.webkitRelativePath.split("/").every(l=>!c[0].skipDirectory({name:l,kind:"directory"})))):i=i.filter(o=>o.webkitRelativePath.split("/").length===2),n(i)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),tc={__proto__:null,default:ec},rc=async(c,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let r=c;"body"in c&&(r=await async function(i,o){const l=i.getReader(),u=new ReadableStream({start:v=>async function p(){return l.read().then(({done:_,value:b})=>{if(!_)return v.enqueue(b),p();v.close()})}()}),g=new Response(u),h=await g.blob();return l.releaseLock(),new Blob([h],{type:o})}(c.body,c.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await r);const n=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(n,()=>s(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),n()}),t.click(),null},nc={__proto__:null,default:rc};const sc=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",ic=sc,si=ha(class extends va{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=Ir(this,"jeepSqliteImportProgress",7),this.exportProgress=Ir(this,"jeepSqliteExportProgress",7),this.HTTPRequestEnded=Ir(this,"jeepSqliteHTTPRequestEnded",7),this.PickDatabaseEnded=Ir(this,"jeepSqlitePickDatabaseEnded",7),this.SaveDatabaseEnded=Ir(this,"jeepSqliteSaveDatabaseToDisk",7),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const r of t)switch(r){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[r]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[r]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[r]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[r]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[r]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[r]);break}}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return await this._createConnection(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1,s=await this._isConnection(r,n);return Promise.resolve(s)}async closeConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._closeConnection(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async open(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._open(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async close(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._close(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async getVersion(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getVersion(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async beginTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._beginTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async commitTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const s=await this._commitTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async rollbackTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._rollbackTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isTransactionActive(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const s=await this._isTransactionActive(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async execute(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");const r=e.database,n=e.statements;let s=!0;const i=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{const o=await this._execute(r,n,s,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async executeSet(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");const r=e.database,n=e.set;let s=!0;t.includes("transaction")&&(s=e.transaction);const i=e.readonly?e.readonly:!1,o=e.returnMode?e.returnMode:"no";try{const l=await this._executeSet(r,n,s,i,o);return Promise.resolve(l)}catch(l){return Promise.reject(l)}}async run(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");const r=e.database,n=e.statement;let s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let i=!0;t.includes("transaction")&&(i=e.transaction);const o=e.readonly?e.readonly:!1,l=e.returnMode?e.returnMode:"no";try{const u=await this._run(r,n,s,i,o,l);return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async query(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let r=[];t.includes("values")&&(r=e.values.length>0?e.values:[]);const n=e.database,s=e.statement,i=e.readonly?e.readonly:!1;try{const o=await this._query(n,s,r,i);return Promise.resolve(o)}catch(o){return Promise.reject(o)}}async getTableList(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getTableList(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBExists(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBOpen(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteDatabase(r,n)}catch(s){return Promise.reject(s)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return await this._copyFromAssets(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async isTableExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const n=e.table,s=e.readonly?e.readonly:!1;try{const i=await this._isTableExists(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._createSyncTable(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getSyncDate(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=e.database,n=e.syncdate,s=e.readonly?e.readonly:!1;try{return await this._setSyncDate(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async importFromJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async exportToJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=e.database,n=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{const i=await this._exportToJson(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteExportedRows(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=e.database,n=e.upgrade;for(const s of n){const i=Object.keys(s);if(!i.includes("toVersion")||!i.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[r])this._versionUpgrades[r][s.toVersion]=s;else{const o={};o[s.toVersion]=s,this._versionUpgrades[r]=o}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{const n=await this._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=e.openModes;try{const s=await this._checkConnectionsConsistency(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async saveToStore(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._saveToStore(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{return await this._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(e){const t=e.overwrite?e.overwrite:!0;console.log(mn?"Using the File System Access API.":"Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const r=e.url,n=e.overwrite?e.overwrite:!0;try{return await this._getFromHTTPRequest(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseTypeOrm(this.typeOrm!==void 0?this.typeOrm:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,r){let n={};const s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(n=this._versionUpgrades[e]);const i=Object.keys(this._dbDict);let o;try{i.length>0&&(i.includes("RW_"+e)||i.includes("RO_"+e))?o=i.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:o=new us(e+"SQLite.db",t,n,this.store,this.innerAutoSave,this.innerWasmPath);const l=r?"RO_"+e:"RW_"+e;return this._dbDict[l]=o,Promise.resolve()}catch(l){const u=l.message?l.message:l;return Promise.reject(u)}}async _isConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;return r.includes(n)?{result:!0}:{result:!1}}async _closeConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${e}`);const s=this._dbDict[n];try{return s.isDBOpen()&&await s.close(),delete this._dbDict[n],Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(`CloseConnection: ${o}`)}}async _open(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];try{return await s.open(),Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(`Open: ${o}`)}}async _close(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`Close: ${e} database not opened`);try{return await s.close(),Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(`Close: ${o}`)}}async _saveToStore(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`SaveToStore: ${e} database not opened`);try{return await s.saveToStore(),Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(`SaveToStore: ${o}`)}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`SaveToLocalDisk: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`SaveToLocalDisk: ${e} database not opened`);const s=await n.exportDB();this._blob=await this.uint2blob(s);const i=`${e}SQLite.db`;return this._opts={fileName:i,extensions:[".db"],startIn:"documents"},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${i}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){const r=t.message?t.message:t;return Promise.reject(`SaveToLocalDisk: ${r}`)}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await qo({extensions:[".db"]});let t=await this.blob2uint(e);const r=this.removePathSuffix(e.name),n=this.setPathSuffix(e.name);await Ce.isDBInStore(n,this.store)?this._overwrite?(await Ce.removeDBFromStore(n,this.store),await Ce.saveDBToStore(n,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):await Ce.saveDBToStore(n,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:r})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await Wo(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetVersion: ${e} database not opened`);try{const i=await s.getVersion(),o={};return o.version=i,Promise.resolve(o)}catch(i){const o=i.message?i.message:i;return Promise.reject(`Open: ${o}`)}}async _beginTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`BeginTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.beginTransaction()}},Promise.resolve(s)}async _commitTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`CommitTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.commitTransaction()}},Promise.resolve(s)}async _rollbackTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`RollbackTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.rollbackTransaction()}},Promise.resolve(s)}async _isTransactionActive(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`IsTransactionActive: ${e} database not opened`);let s={};return s={result:n.isTransActive()},Promise.resolve(s)}async _execute(e,t,r,n){const s=Object.keys(this._dbDict),i="RW_"+e;if(!s.includes(i))return Promise.reject(`Execute: No available connection for ${e}`);const o=this._dbDict[i];if(!o.isDBOpen())return Promise.reject(`Execute: ${e} database not opened`);if(n)return Promise.reject("Execute: not allowed in read-only mode");let l={};const u=t.substring(0,6);if(this.innerAutoSave&&u==="COMMIT"&&this.innerTypeOrm)return l={changes:{changes:0}},Promise.resolve(l);try{return l={changes:{changes:await o.executeSQL(t,r)}},Promise.resolve(l)}catch(g){const h=g.message?g.message:g;return Promise.reject(`Execute: ${h}`)}}async _executeSet(e,t,r,n,s){const i=Object.keys(this._dbDict),o="RW_"+e;if(!i.includes(o))return Promise.reject(`ExecuteSet: No available connection for ${e}`);const l=this._dbDict[o];if(!l.isDBOpen())return Promise.reject(`ExecuteSet: ${e} database not opened`);if(n)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const u of t)if(!("statement"in u)||!("values"in u))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const u=await l.execSet(t,r,s),g={changes:{changes:u.changes,lastId:u.lastId,values:u.values}};return Promise.resolve(g)}catch(u){const g=u.message?u.message:u;return Promise.reject(`ExecuteSet: ${g}`)}}async _run(e,t,r,n,s,i){const o=Object.keys(this._dbDict),l="RW_"+e;if(!o.includes(l))return Promise.reject(`Run: No available connection for ${e}`);const u=this._dbDict[l];if(!u.isDBOpen())return Promise.reject(`Run: ${e} database not opened`);if(s)return Promise.reject("Run: not allowed in read-only mode");let g={};const h=t.substring(0,6);if(this.innerAutoSave&&h==="COMMIT")return g={changes:{changes:0}},Promise.resolve(g);try{const v=await u.runSQL(t,r,n,i);return g={changes:{changes:v.changes,lastId:v.lastId,values:v.values}},Promise.resolve(g)}catch(v){const p=v.message?v.message:v;return Promise.reject(`Run: ${p}`)}}async _query(e,t,r,n){const s=Object.keys(this._dbDict),i=n?"RO_"+e:"RW_"+e;if(!s.includes(i))return Promise.reject(`Query: No available connection for ${e}`);const o=this._dbDict[i];if(!o.isDBOpen())return Promise.reject(`Query: ${e} database not opened`);let l=[];const u=t.substring(0,6);if(this.innerAutoSave&&u==="COMMIT")return Promise.resolve({values:l});try{return l=await o.selectSQL(t,r),Promise.resolve({values:l})}catch(g){const h=g.message?g.message:g;return Promise.reject(`Query failed: ${h}`)}}async _getTableList(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetTableList: ${e} database not opened`);let i=[];try{return i=await s.getTableNames(),Promise.resolve({values:i})}catch(o){const l=o.message?o.message:o;return Promise.reject(`GetTableList failed: ${l}`)}}async _isDBExists(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${e}`);const s=this._dbDict[n];try{const o={result:await s.isDBExists(e+"SQLite.db")};return Promise.resolve(o)}catch(i){const o=i.message?i.message:i;return Promise.reject(`IsDBExists: ${o}`)}}async _isDBOpen(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen()){const i={result:!1};return Promise.resolve(i)}try{const o={result:await s.isDBOpen(e+"SQLite.db")};return Promise.resolve(o)}catch(i){const o=i.message?i.message:i;return Promise.reject(`IsDBOpen: ${o}`)}}async _deleteDatabase(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);const s=this._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(i){const o=i.message?i.message:i;return Promise.reject(`DeleteDatabase: ${o}`)}}async _isTableExists(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`IsTableExists: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`IsTableExists: ${e} database not opened`);try{const l={result:await i.isTable(t)};return Promise.resolve(l)}catch(o){const l=o.message?o.message:o;return Promise.reject(`IsTableExists: ${l}`)}}async _createSyncTable(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`CreateSyncTable: ${e} database not opened`);if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const i=await s.createSyncTable();return Promise.resolve({changes:{changes:i}})}catch(i){const o=i.message?i.message:i;return Promise.reject(`CreateSyncTable: ${o}`)}}async _getSyncDate(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetSyncDate: ${e} database not opened`);try{const i=await s.getSyncDate();return Promise.resolve({syncDate:i})}catch(i){const o=i.message?i.message:i;return Promise.reject(`GetSyncDate: ${o}`)}}async _setSyncDate(e,t,r){const n=Object.keys(this._dbDict),s="RW_"+e;if(!n.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`SetSyncDate: ${e} database not opened`);if(r)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const o=await i.setSyncDate(t);return o.result?Promise.resolve():Promise.reject(`SetSyncDate: ${o.message}`)}catch(o){const l=o.message?o.message:o;return Promise.reject(`SetSyncDate: ${l}`)}}async _isJsonValid(e){const t=JSON.parse(e);return await He.isJsonSQLite(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,r;const n=JSON.parse(e);if(!await He.isJsonSQLite(n))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const i=n,o=`${i.database}SQLite.db`,l=(t=i.version)!==null&&t!==void 0?t:1,u=i.mode,g=(r=i.overwrite)!==null&&r!==void 0?r:!1,h=new us(o,l,{},this.store,this.innerAutoSave,this.innerWasmPath);try{g&&u==="full"&&Ce.isDBInStore(o,this.store)&&await Ce.removeDBFromStore(o,this.store),await h.open();const v=await h.getTableNames();if(u==="full"&&v.length>0){const _=await h.getVersion();if(l<_)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${_}`);if(_===l)return Promise.resolve({changes:{changes:0}})}const p=await h.importJson(i,this.importProgress);return await h.close(),Promise.resolve({changes:{changes:p}})}catch(v){const p=v.message?v.message:v;return Promise.reject(`ImportFromJson: ${p}`)}}async _exportToJson(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`ExportToJson: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`ExportToJson: ${e} database not opened`);try{const o=await i.exportJson(t,this.exportProgress);return Object.keys(o).includes("message")?Promise.reject(`ExportToJson: ${o.message}`):Promise.resolve({export:o})}catch(o){const l=o.message?o.message:o;return Promise.reject(`ExportToJson: ${l}`)}}async _deleteExportedRows(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteExportedRows: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`DeleteExportedRows: ${e} database not opened`);if(t)return Promise.reject("DeleteExportedRows: not allowed in read-only mode");try{await s.deleteExportedRows()}catch(i){const o=i.message?i.message:i;return Promise.reject(`DeleteExportedRows: ${o}`)}}async _copyFromAssets(e){const t=await this.loadJSON("/assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(const n of this.databaseList.databaseList)n.substring(n.length-3)===".db"&&await this.copyDatabase(`/assets/databases/${n}`,e),n.substring(n.length-4)===".zip"&&await this.unzipDatabase(`/assets/databases/${n}`,e);return Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(`CopyFromAssets: ${s}`)}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder")}async _getFromHTTPRequest(e,t){try{let r;return e.substring(e.length-3)===".db"&&(await this.copyDatabase(e,t),r="db"),e.substring(e.length-4)===".zip"&&(await this.unzipDatabase(e,t),r="zip"),this.HTTPRequestEnded.emit({message:r}),Promise.resolve()}catch(r){const n=r.message?r.message:r;return Promise.reject(`GetFromHTTPRequest: ${n}`)}}async _isDatabase(e){try{const r={result:await Ce.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(r)}catch(t){const r=t.message?t.message:t;return Promise.reject(`IsDatabase: ${r}`)}}async _getDatabaseList(){try{const t={values:await Ce.getDBListFromStore(this.store)};return Promise.resolve(t)}catch(e){const t=e.message?e.message:e;return Promise.reject(`GetDatabaseList: ${t}`)}}async _checkConnectionsConsistency(e,t){const r={};r.result=!1;const n=[];e.forEach((s,i)=>{n.push(`${t[i]}_${s}`)});try{let s=new Set(Object.keys(this._dbDict));const i=new Set(n);if(i.size===0)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size<i.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size>i.size){const o={};for(const l of s)if(!Array.from(i.keys()).includes(l)){let u=!1;l.substring(0,3)==="RO_"&&(u=!0),o.database=l.substring(3),o.readonly=u,await this._closeConnection(o.database,o.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===i.size?(await this.symmetricDifference(s,i)).size===0?(r.result=!0,Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r))}catch(s){const i=s.message?s.message:s;return Promise.reject(`CheckConnectionsConsistency: ${i}`)}}async _resetDbDict(e){try{for(const t of e){const r={};let n=!1;t.substring(0,3)==="RO_"&&(n=!0),r.database=t.substring(3),r.readonly=n,await this._closeConnection(r.database,r.readonly)}}catch(t){const r=t.message?t.message:t;return Promise.reject(`ResetDbDict: ${r}`)}}async symmetricDifference(e,t){let r=new Set;e.forEach(s=>{r.add(s.substring(3))});let n=new Set;t.forEach(s=>{n.add(s.substring(3))});for(const s of n)r.has(s)?r.delete(s):r.add(s);return r}async unzipDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("unzipDatabase: failed"))},s.onload=()=>{ri.exports.loadAsync(s.response).then(async i=>{const o=Object.keys(i.files);try{for(const l of o)await this.retrieveDBFromZip(i.files,l,t);r()}catch(l){const u=l.message?l.message:l;n(new Error(`unzipDatabase Error: ${u}`))}})},s.send()})}async retrieveDBFromZip(e,t,r){return new Promise((n,s)=>{e[t].async("nodebuffer").then(async i=>{try{const o=new Uint8Array(i),l=this.setPathSuffix(t);await Ce.isDBInStore(l,this.store)?r?(await Ce.removeDBFromStore(l,this.store),await Ce.saveDBToStore(l,o,this.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${l}`)):await Ce.saveDBToStore(l,o,this.store),n()}catch(o){const l=o.message?o.message:o;s(new Error(`retrieveDBFromZip:: ${l}`))}})})}async copyDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest,i;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("CopyDatabase: failed"))},s.onload=()=>{i=new Uint8Array(s.response)},s.onloadend=async()=>{const o=this.setPathSuffix(e);await Ce.isDBInStore(o,this.store)?t?(await Ce.removeDBFromStore(o,this.store),await Ce.saveDBToStore(o,i,this.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${o}`)):await Ce.saveDBToStore(o,i,this.store),r()},s.send()})}async loadJSON(e){return new Promise((t,r)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onerror=()=>{r(new Error("LoadJSON: failed"))},n.onreadystatechange=function(){n.status==404&&t(null),n.readyState==4&&n.status==200&&t(n.responseText)},n.send(null)})}async openStore(e,t){let r=!1;const n=this.setConfig(e,t);return this.store=fs.createInstance(n),this.store!=null&&(this.storeName=e,r=!0),r}setConfig(e,t){return{name:e,storeName:t,driver:[fs.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);const r=".db";return e.substring(e.length-3)===r&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return ic}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]},void 0,{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}]);function ac(){if(typeof customElements>"u")return;["jeep-sqlite"].forEach(e=>{switch(e){case"jeep-sqlite":customElements.get(e)||customElements.define(e,si);break}})}const cc=si,lc=ac;export{cc as JeepSqlite,lc as defineCustomElement};
