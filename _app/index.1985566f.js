import{_ as f}from"./nuxt-link.e91ca5b0.js";import{_ as v}from"./ProgressDialog.f155e206.js";import{i as _,A as l,s as w,L as b,l as y,j as L,C,t,f as N,m as o,p as a,u as e,w as T,r as m,v as u,x as c,J as k,o as V,N as S,I as A}from"./entry.a60befbd.js";import{_ as M}from"./logo.7227e017.js";const O={name:"LoginPage",data(){return{form:{email:"",password:""}}},mounted(){l().exists&&this.$router.replace("/app/")},methods:{async login(){const s=this.$refs.login;if(s.checkValidity()){w("progress-dialog");const{error:i,error_key:d}=await l().login({email:this.form.email,password:await b(this.form.password)});await y(.5),L("progress-dialog"),i?(await C.showToast(t(d),"long"),s.classList.remove("was-validated")):(s.classList.add("was-validated"),this.$router.replace("/app/"))}else s.classList.add("was-validated")},async guestLogin(){await l().guestLogin(),this.$router.replace("/app/")}}},$={class:"container-fluid text-center"},B={class:"my-5"},D=o("img",{class:"img-fluid shadow-sm my-3 p-2 rounded",width:"90",height:"90",src:M},null,-1),P={class:"mb-3 position-relative"},q=["placeholder"],I={class:"invalid-tooltip"},U={class:"mb-3 position-relative"},j=["placeholder"],E={class:"invalid-tooltip"},J={class:"d-grid gap-2 mt-5 mt-auto"},R=["value"],z=["value"],F={class:"mt-4 small"};function G(s,i,d,H,r,p){const g=f,h=v;return V(),N("section",null,[o("div",$,[o("div",B,[D,o("h1",null,[o("b",null,a(("t"in s?s.t:e(t))("app_name")),1)]),o("p",null,a(("t"in s?s.t:e(t))("enter_email_password")),1)]),o("form",{ref:"login",novalidate:"",onSubmit:i[3]||(i[3]=T(n=>p.login(),["prevent"]))},[o("div",P,[m(o("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>r.form.email=n),class:"form-control",type:"email",placeholder:("t"in s?s.t:e(t))("correo"),name:"email",autocomplete:"email",required:""},null,8,q),[[u,r.form.email]]),o("div",I,a(("t"in s?s.t:e(t))("correo_incorrecto")),1)]),o("div",U,[m(o("input",{"onUpdate:modelValue":i[1]||(i[1]=n=>r.form.password=n),class:"form-control",type:"password",placeholder:("t"in s?s.t:e(t))("password"),name:"password",autocomplete:"current-password",minlength:"3",required:""},null,8,j),[[u,r.form.password]]),o("div",E,a(("t"in s?s.t:e(t))("password_limit")),1)]),o("div",J,[o("input",{class:"btn btn-primary mb-4",type:"submit",role:"button",value:("t"in s?s.t:e(t))("login")},null,8,R),c(g,{class:"btn btn-success",role:"button",to:"/registro/"},{default:k(()=>[S(a(("t"in s?s.t:e(t))("registrate")),1)]),_:1}),o("input",{class:"btn btn-secondary",type:"button",role:"button",to:"/app/",value:("t"in s?s.t:e(t))("no_registro"),onClick:i[2]||(i[2]=n=>p.guestLogin())},null,8,z)])],544),o("div",F,[o("i",null,a(("t"in s?s.t:e(t))("version"))+": "+a(("CONST"in s?s.CONST:e(A)).version),1)])]),c(h,{message:("t"in s?s.t:e(t))("iniciando_sesion")},null,8,["message"])])}const Y=_(O,[["render",G]]);export{Y as default};
