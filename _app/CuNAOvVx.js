var gt={allRenderFn:!1,element:!0,event:!0,hasRenderFn:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!0,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},Ci="app",Ni=Object.defineProperty,Fi=(a,e)=>{for(var t in e)Ni(a,t,{get:e[t],enumerable:!0})},Bi="http://www.w3.org/2000/svg",Li="http://www.w3.org/1999/xhtml",zi=(a,e)=>{var t;const r=e.$cmpMeta$;Object.entries((t=r.$members$)!=null?t:{}).map(([s,[i]])=>{if(i&31||i&32){const c=a[s],u=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(a),s);Object.defineProperty(a,s,{get(){return u.get.call(this)},set(l){u.set.call(this,l)},configurable:!0,enumerable:!0}),a[s]=e.$instanceValues$.has(s)?e.$instanceValues$.get(s):c}})},ir=a=>{if(a.__stencil__getHostRef)return a.__stencil__getHostRef()},Mi=(a,e)=>{const t={$flags$:0,$hostElement$:a,$cmpMeta$:e,$instanceValues$:new Map};t.$onReadyPromise$=new Promise(n=>t.$onReadyResolve$=n),a["s-p"]=[],a["s-rc"]=[];const r=t;return a.__stencil__getHostRef=()=>r,gt.modernPropertyDecls&&gt.state&&zi(a,t),r},Zn=(a,e)=>e in a,Cr=(a,e)=>(0,console.error)(a,e),Xr=new Map,qi=[],Ui="sty-id",Wi="slot-fb{display:contents}slot-fb[hidden]{display:none}",Qn="http://www.w3.org/1999/xlink",nt=typeof window<"u"?window:{},Hi=nt.HTMLElement||class{},dt={$flags$:0,$resourcesUrl$:"",jmp:a=>a(),raf:a=>requestAnimationFrame(a),ael:(a,e,t,r)=>a.addEventListener(e,t,r),rel:(a,e,t,r)=>a.removeEventListener(e,t,r),ce:(a,e)=>new CustomEvent(a,e)},Gi=a=>Promise.resolve(a),ms=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),bn=!1,Jn=[],ps=[],Ki=(a,e)=>t=>{a.push(t),bn||(bn=!0,e&&dt.$flags$&4?$n(wn):dt.raf(wn))},Xn=a=>{for(let e=0;e<a.length;e++)try{a[e](performance.now())}catch(t){Cr(t)}a.length=0},wn=()=>{Xn(Jn),Xn(ps),(bn=Jn.length>0)&&dt.raf(wn)},$n=a=>Gi().then(a),Yi=Ki(ps,!0),Vi=a=>a!=null&&a!==void 0,Pn=a=>(a=typeof a,a==="object"||a==="function");function Zi(a){var e,t,r;return(r=(t=(e=a.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:t.getAttribute("content"))!=null?r:void 0}var Qi={};Fi(Qi,{err:()=>gs,map:()=>Ji,ok:()=>_n,unwrap:()=>Xi,unwrapErr:()=>ea});var _n=a=>({isOk:!0,isErr:!1,value:a}),gs=a=>({isOk:!1,isErr:!0,value:a});function Ji(a,e){if(a.isOk){const t=e(a.value);return t instanceof Promise?t.then(r=>_n(r)):_n(t)}if(a.isErr){const t=a.value;return gs(t)}throw"should never get here"}var Xi=a=>{if(a.isOk)return a.value;throw a.value},ea=a=>{if(a.isErr)return a.value;throw a.value},ys=a=>{const e=ts(a,"childNodes");a.tagName&&a.tagName.includes("-")&&a["s-cr"]&&a.tagName!=="SLOT-FB"&&vs(e,a.tagName).forEach(r=>{r.nodeType===1&&r.tagName==="SLOT-FB"&&(ra(r,Dn(r),!1).length?r.hidden=!0:r.hidden=!1)});let t=0;for(t=0;t<e.length;t++){const r=e[t];r.nodeType===1&&ts(r,"childNodes").length&&ys(r)}},ta=a=>{const e=[];for(let t=0;t<a.length;t++){const r=a[t]["s-nr"]||void 0;r&&r.isConnected&&e.push(r)}return e};function vs(a,e,t){let r=0,n=[],s;for(;r<a.length;r++)s=a[r],s["s-sr"]&&(!e||s["s-hn"]===e)&&t===void 0&&n.push(s),n=[...n,...vs(s.childNodes,e,t)];return n}var ra=(a,e,t=!0)=>{const r=[];(t&&a["s-sr"]||!a["s-sr"])&&r.push(a);let n=a;for(;n=n.nextSibling;)Dn(n)===e&&(t||!n["s-sr"])&&r.push(n);return r},es=(a,e)=>a.nodeType===1?a.getAttribute("slot")===null&&e===""||a.getAttribute("slot")===e:a["s-sn"]===e?!0:e==="",Dn=a=>typeof a["s-sn"]=="string"?a["s-sn"]:a.nodeType===1&&a.getAttribute("slot")||void 0;function na(a){if(a.assignedElements||a.assignedNodes||!a["s-sr"])return;const e=t=>(function(r){const n=[],s=this["s-sn"];r!=null&&r.flatten&&console.error(`
          Flattening is not supported for Stencil non-shadow slots. 
          You can use \`.childNodes\` to nested slot fallback content.
          If you have a particular use case, please open an issue on the Stencil repo.
        `);const i=this["s-cr"].parentElement;return(i.__childNodes?i.childNodes:ta(i.childNodes)).forEach(u=>{s===Dn(u)&&n.push(u)}),t?n.filter(u=>u.nodeType===1):n}).bind(a);a.assignedElements=e(!0),a.assignedNodes=e(!1)}function ts(a,e){if("__"+e in a){const t=a["__"+e];return typeof t!="function"?t:t.bind(a)}else return typeof a[e]!="function"?a[e]:a[e].bind(a)}var ar=(a,e="")=>()=>{},sa=(a,e,...t)=>{let r=null,n=null,s=null,i=!1,c=!1;const u=[],l=h=>{for(let y=0;y<h.length;y++)r=h[y],Array.isArray(r)?l(r):r!=null&&typeof r!="boolean"&&((i=!Pn(r))&&(r=String(r)),i&&c?u[u.length-1].$text$+=r:u.push(i?En(null,r):r),c=i)};l(t);const g=En(a,null);return g.$attrs$=e,u.length>0&&(g.$children$=u),g.$key$=n,g.$name$=s,g},En=(a,e)=>{const t={$flags$:0,$tag$:a,$text$:e,$elm$:null,$children$:null};return t.$attrs$=null,t.$key$=null,t.$name$=null,t},ia={},aa=a=>a&&a.$tag$===ia,oa=a=>qi.map(e=>e(a)).find(e=>!!e),bs=(a,e)=>a!=null&&!Pn(a)?e&4?a==="false"?!1:a===""||!!a:e&2?parseFloat(a):e&1?String(a):a:a,ca=a=>a,Ar=(a,e,t)=>{const r=ca(a);return{emit:n=>ws(r,e,{bubbles:!0,composed:!0,cancelable:!0,detail:n})}},ws=(a,e,t)=>{const r=dt.ce(e,t);return a.dispatchEvent(r),r},vr=new WeakMap,la=(a,e,t)=>{let r=Xr.get(a);ms&&t?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,Xr.set(a,r)},ua=(a,e,t)=>{var r;const n=_s(e,t),s=Xr.get(n);if(!nt.document)return n;if(a=a.nodeType===11?a:nt.document,s)if(typeof s=="string"){a=a.head||a;let i=vr.get(a),c;if(i||vr.set(a,i=new Set),!i.has(n)){{c=document.querySelector(`[${Ui}="${n}"]`)||nt.document.createElement("style"),c.innerHTML=s;const u=(r=dt.$nonce$)!=null?r:Zi(nt.document);if(u!=null&&c.setAttribute("nonce",u),!(e.$flags$&1))if(a.nodeName==="HEAD"){const l=a.querySelectorAll("link[rel=preconnect]"),g=l.length>0?l[l.length-1].nextSibling:a.querySelector("style");a.insertBefore(c,(g==null?void 0:g.parentNode)===a?g:null)}else if("host"in a)if(ms){const l=new CSSStyleSheet;l.replaceSync(s),a.adoptedStyleSheets=[l,...a.adoptedStyleSheets]}else{const l=a.querySelector("style");l?l.innerHTML=s+l.innerHTML:a.prepend(c)}else a.append(c);e.$flags$&1&&a.insertBefore(c,null)}e.$flags$&4&&(c.innerHTML+=Wi),i&&i.add(n)}}else a.adoptedStyleSheets.includes(s)||(a.adoptedStyleSheets=[...a.adoptedStyleSheets,s]);return n},fa=a=>{const e=a.$cmpMeta$,t=a.$hostElement$,r=e.$flags$,n=ar("attachStyles",e.$tagName$),s=ua(t.shadowRoot?t.shadowRoot:t.getRootNode(),e,a.$modeName$);(r&10&&r&2||r&128)&&(t["s-sc"]=s,t.classList.add(s+"-h")),n()},_s=(a,e)=>"sc-"+(e&&a.$flags$&32?a.$tagName$+"-"+e:a.$tagName$),rs=(a,e,t,r,n,s,i)=>{if(t===r)return;let c=Zn(a,e),u=e.toLowerCase();if(e==="class"){const l=a.classList,g=ns(t);let h=ns(r);l.remove(...g.filter(y=>y&&!h.includes(y))),l.add(...h.filter(y=>y&&!g.includes(y)))}else if(e==="style"){for(const l in t)(!r||r[l]==null)&&(l.includes("-")?a.style.removeProperty(l):a.style[l]="");for(const l in r)(!t||r[l]!==t[l])&&(l.includes("-")?a.style.setProperty(l,r[l]):a.style[l]=r[l])}else if(e!=="key")if(e==="ref")r&&r(a);else if(!a.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):Zn(nt,u)?e=u.slice(2):e=u[2]+e.slice(3),t||r){const l=e.endsWith(Es);e=e.replace(da,""),t&&dt.rel(a,e,t,l),r&&dt.ael(a,e,r,l)}}else{const l=Pn(r);if((c||l&&r!==null)&&!n)try{if(a.tagName.includes("-"))a[e]!==r&&(a[e]=r);else{const h=r??"";e==="list"?c=!1:(t==null||a[e]!=h)&&(typeof a.__lookupSetter__(e)=="function"?a[e]=h:a.setAttribute(e,h))}}catch{}let g=!1;u!==(u=u.replace(/^xlink\:?/,""))&&(e=u,g=!0),r==null||r===!1?(r!==!1||a.getAttribute(e)==="")&&(g?a.removeAttributeNS(Qn,e):a.removeAttribute(e)):(!c||s&4||n)&&!l&&a.nodeType===1&&(r=r===!0?"":r,g?a.setAttributeNS(Qn,e,r):a.setAttribute(e,r))}},ha=/\s/,ns=a=>(typeof a=="object"&&a&&"baseVal"in a&&(a=a.baseVal),!a||typeof a!="string"?[]:a.split(ha)),Es="Capture",da=new RegExp(Es+"$"),Sn=(a,e,t,r)=>{const n=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=a&&a.$attrs$||{},i=e.$attrs$||{};for(const c of ss(Object.keys(s)))c in i||rs(n,c,s[c],void 0,t,e.$flags$);for(const c of ss(Object.keys(i)))rs(n,c,s[c],i[c],t,e.$flags$)};function ss(a){return a.includes("ref")?[...a.filter(e=>e!=="ref"),"ref"]:a}var Zr,en,Rr,Tn=!1,tn=!1,An=!1,pt=!1,rn=(a,e,t)=>{var r;const n=e.$children$[t];let s=0,i,c,u;if(Tn||(An=!0,n.$tag$==="slot"&&(n.$flags$|=n.$children$?2:1)),n.$text$!==null)i=n.$elm$=nt.document.createTextNode(n.$text$);else if(n.$flags$&1)i=n.$elm$=nt.document.createTextNode(""),Sn(null,n,pt);else{if(pt||(pt=n.$tag$==="svg"),!nt.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(i=n.$elm$=nt.document.createElementNS(pt?Bi:Li,!Tn&&gt.slotRelocation&&n.$flags$&2?"slot-fb":n.$tag$),pt&&n.$tag$==="foreignObject"&&(pt=!1),Sn(null,n,pt),Vi(Zr)&&i["s-si"]!==Zr&&i.classList.add(i["s-si"]=Zr),n.$children$)for(s=0;s<n.$children$.length;++s)c=rn(a,n,s),c&&i.appendChild(c);n.$tag$==="svg"?pt=!1:i.tagName==="foreignObject"&&(pt=!0)}return i["s-hn"]=Rr,n.$flags$&3&&(i["s-sr"]=!0,i["s-cr"]=en,i["s-sn"]=n.$name$||"",i["s-rf"]=(r=n.$attrs$)==null?void 0:r.ref,na(i),u=a&&a.$children$&&a.$children$[t],u&&u.$tag$===n.$tag$&&a.$elm$&&jr(a.$elm$,!1),$s(en,i,e.$elm$,a==null?void 0:a.$elm$)),i},jr=(a,e)=>{dt.$flags$|=1;const t=Array.from(a.__childNodes||a.childNodes);a["s-sr"]&&gt.experimentalSlotFixes;for(let r=t.length-1;r>=0;r--){const n=t[r];n["s-hn"]!==Rr&&n["s-ol"]&&(Jt(Ir(n).parentNode,n,Ir(n)),n["s-ol"].remove(),n["s-ol"]=void 0,n["s-sh"]=void 0,An=!0),e&&jr(n,e)}dt.$flags$&=-2},Ss=(a,e,t,r,n,s)=>{let i=a["s-cr"]&&a["s-cr"].parentNode||a,c;for(i.shadowRoot&&i.tagName===Rr&&(i=i.shadowRoot);n<=s;++n)r[n]&&(c=rn(null,t,n),c&&(r[n].$elm$=c,Jt(i,c,Ir(e))))},Ts=(a,e,t)=>{for(let r=e;r<=t;++r){const n=a[r];if(n){const s=n.$elm$;xs(n),s&&(tn=!0,s["s-ol"]?s["s-ol"].remove():jr(s,!0),s.remove())}}},ma=(a,e,t,r,n=!1)=>{let s=0,i=0,c=0,u=0,l=e.length-1,g=e[0],h=e[l],y=r.length-1,p=r[0],_=r[y],b,T;for(;s<=l&&i<=y;)if(g==null)g=e[++s];else if(h==null)h=e[--l];else if(p==null)p=r[++i];else if(_==null)_=r[--y];else if(Vr(g,p,n))gr(g,p,n),g=e[++s],p=r[++i];else if(Vr(h,_,n))gr(h,_,n),h=e[--l],_=r[--y];else if(Vr(g,_,n))(g.$tag$==="slot"||_.$tag$==="slot")&&jr(g.$elm$.parentNode,!1),gr(g,_,n),Jt(a,g.$elm$,h.$elm$.nextSibling),g=e[++s],_=r[--y];else if(Vr(h,p,n))(g.$tag$==="slot"||_.$tag$==="slot")&&jr(h.$elm$.parentNode,!1),gr(h,p,n),Jt(a,h.$elm$,g.$elm$),h=e[--l],p=r[++i];else{for(c=-1,u=s;u<=l;++u)if(e[u]&&e[u].$key$!==null&&e[u].$key$===p.$key$){c=u;break}c>=0?(T=e[c],T.$tag$!==p.$tag$?b=rn(e&&e[i],t,c):(gr(T,p,n),e[c]=void 0,b=T.$elm$),p=r[++i]):(b=rn(e&&e[i],t,i),p=r[++i]),b&&Jt(Ir(g.$elm$).parentNode,b,Ir(g.$elm$))}s>l?Ss(a,r[y+1]==null?null:r[y+1].$elm$,t,r,i,y):i>y&&Ts(e,s,l)},Vr=(a,e,t=!1)=>a.$tag$===e.$tag$?a.$tag$==="slot"?a.$name$===e.$name$:t?(t&&!a.$key$&&e.$key$&&(a.$key$=e.$key$),!0):a.$key$===e.$key$:!1,Ir=a=>a&&a["s-ol"]||a,gr=(a,e,t=!1)=>{const r=e.$elm$=a.$elm$,n=a.$children$,s=e.$children$,i=e.$tag$,c=e.$text$;let u;c===null?(pt=i==="svg"?!0:i==="foreignObject"?!1:pt,Sn(a,e,pt),n!==null&&s!==null?ma(r,n,e,s,t):s!==null?(a.$text$!==null&&(r.textContent=""),Ss(r,null,e,s,0,s.length-1)):!t&&gt.updatable&&n!==null&&Ts(n,0,n.length-1),pt&&i==="svg"&&(pt=!1)):(u=r["s-cr"])?u.parentNode.textContent=c:a.$text$!==c&&(r.data=c)},Lt=[],ks=a=>{let e,t,r;const n=a.__childNodes||a.childNodes;for(const s of n){if(s["s-sr"]&&(e=s["s-cr"])&&e.parentNode){t=e.parentNode.__childNodes||e.parentNode.childNodes;const i=s["s-sn"];for(r=t.length-1;r>=0;r--)if(e=t[r],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==s["s-hn"])if(es(e,i)){let c=Lt.find(u=>u.$nodeToRelocate$===e);tn=!0,e["s-sn"]=e["s-sn"]||i,c?(c.$nodeToRelocate$["s-sh"]=s["s-hn"],c.$slotRefNode$=s):(e["s-sh"]=s["s-hn"],Lt.push({$slotRefNode$:s,$nodeToRelocate$:e})),e["s-sr"]&&Lt.map(u=>{es(u.$nodeToRelocate$,e["s-sn"])&&(c=Lt.find(l=>l.$nodeToRelocate$===e),c&&!u.$slotRefNode$&&(u.$slotRefNode$=c.$slotRefNode$))})}else Lt.some(c=>c.$nodeToRelocate$===e)||Lt.push({$nodeToRelocate$:e})}s.nodeType===1&&ks(s)}},xs=a=>{a.$attrs$&&a.$attrs$.ref&&a.$attrs$.ref(null),a.$children$&&a.$children$.map(xs)},Jt=(a,e,t)=>(typeof e["s-sn"]=="string"&&e["s-sr"]&&e["s-cr"]&&$s(e["s-cr"],e,a,e.parentElement),a==null?void 0:a.insertBefore(e,t));function $s(a,e,t,r){var n,s;let i;if(a&&typeof e["s-sn"]=="string"&&e["s-sr"]&&a.parentNode&&a.parentNode["s-sc"]&&(i=e["s-si"]||a.parentNode["s-sc"])){const c=e["s-sn"],u=e["s-hn"];if((n=t.classList)==null||n.add(i+"-s"),r&&((s=r.classList)!=null&&s.contains(i+"-s"))){let l=(r.__childNodes||r.childNodes)[0],g=!1;for(;l;){if(l["s-sn"]!==c&&l["s-hn"]===u&&l["s-sr"]){g=!0;break}l=l.nextSibling}g||r.classList.remove(i+"-s")}}}var pa=(a,e,t=!1)=>{var r,n,s,i,c;const u=a.$hostElement$,l=a.$cmpMeta$,g=a.$vnode$||En(null,null),h=aa(e)?e:sa(null,null,e);if(Rr=u.tagName,l.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},l.$attrsToReflect$.map(([y,p])=>h.$attrs$[p]=u[y])),t&&h.$attrs$)for(const y of Object.keys(h.$attrs$))u.hasAttribute(y)&&!["key","ref","style","class"].includes(y)&&(h.$attrs$[y]=u[y]);h.$tag$=null,h.$flags$|=4,a.$vnode$=h,h.$elm$=g.$elm$=u.shadowRoot||u,Zr=u["s-sc"],Tn=!!(l.$flags$&1)&&!(l.$flags$&128),en=u["s-cr"],tn=!1,gr(g,h,t);{if(dt.$flags$|=1,An){ks(h.$elm$);for(const y of Lt){const p=y.$nodeToRelocate$;if(!p["s-ol"]&&nt.document){const _=nt.document.createTextNode("");_["s-nr"]=p,Jt(p.parentNode,p["s-ol"]=_,p)}}for(const y of Lt){const p=y.$nodeToRelocate$,_=y.$slotRefNode$;if(_){const b=_.parentNode;let T=_.nextSibling;{let O=(r=p["s-ol"])==null?void 0:r.previousSibling;for(;O;){let F=(n=O["s-nr"])!=null?n:null;if(F&&F["s-sn"]===p["s-sn"]&&b===(F.__parentNode||F.parentNode)){for(F=F.nextSibling;F===p||F!=null&&F["s-sr"];)F=F==null?void 0:F.nextSibling;if(!F||!F["s-nr"]){T=F;break}}O=O.previousSibling}}const S=p.__parentNode||p.parentNode,P=p.__nextSibling||p.nextSibling;(!T&&b!==S||P!==T)&&p!==T&&(!p["s-hn"]&&p["s-ol"]&&(p["s-hn"]=p["s-ol"].parentNode.nodeName),Jt(b,p,T),p.nodeType===1&&p.tagName!=="SLOT-FB"&&(p.hidden=(s=p["s-ih"])!=null?s:!1)),p&&typeof _["s-rf"]=="function"&&_["s-rf"](_)}else p.nodeType===1&&(t&&(p["s-ih"]=(i=p.hidden)!=null?i:!1),p.hidden=!0)}}tn&&ys(h.$elm$),dt.$flags$&=-2,Lt.length=0}if(gt.experimentalScopedSlotChanges&&l.$flags$&2){const y=h.$elm$.__childNodes||h.$elm$.childNodes;for(const p of y)p["s-hn"]!==Rr&&!p["s-sh"]&&(t&&p["s-ih"]==null&&(p["s-ih"]=(c=p.hidden)!=null?c:!1),p.hidden=!0)}en=void 0},Ps=(a,e)=>{if(e&&!a.$onRenderResolve$&&e["s-p"]){const t=e["s-p"].push(new Promise(r=>a.$onRenderResolve$=()=>{e["s-p"].splice(t-1,1),r()}))}},Rn=(a,e)=>{if(a.$flags$|=16,a.$flags$&4){a.$flags$|=512;return}return Ps(a,a.$ancestorComponent$),Yi(()=>ga(a,e))},ga=(a,e)=>{const t=a.$hostElement$,r=ar("scheduleUpdate",a.$cmpMeta$.$tagName$),n=t;if(!n)throw new Error(`Can't render component <${t.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return e?s=br(n,"componentWillLoad",void 0,t):s=br(n,"componentWillUpdate",void 0,t),s=is(s,()=>br(n,"componentWillRender",void 0,t)),r(),is(s,()=>va(a,n,e))},is=(a,e)=>ya(a)?a.then(e).catch(t=>{console.error(t),e()}):e(),ya=a=>a instanceof Promise||a&&a.then&&typeof a.then=="function",va=async(a,e,t)=>{var r;const n=a.$hostElement$,s=ar("update",a.$cmpMeta$.$tagName$),i=n["s-rc"];t&&fa(a);const c=ar("render",a.$cmpMeta$.$tagName$);ba(a,e,n,t),i&&(i.map(u=>u()),n["s-rc"]=void 0),c(),s();{const u=(r=n["s-p"])!=null?r:[],l=()=>wa(a);u.length===0?l():(Promise.all(u).then(l),a.$flags$|=4,u.length=0)}},as=null,ba=(a,e,t,r)=>{try{as=e,e=e.render&&e.render(),a.$flags$&=-17,a.$flags$|=2,(gt.hasRenderFn||gt.reflect)&&(gt.vdomRender||gt.reflect)&&(gt.hydrateServerSide||pa(a,e,r))}catch(u){Cr(u,a.$hostElement$)}return as=null,null},wa=a=>{const e=a.$cmpMeta$.$tagName$,t=a.$hostElement$,r=ar("postUpdate",e),n=t,s=a.$ancestorComponent$;br(n,"componentDidRender",void 0,t),a.$flags$&64?(br(n,"componentDidUpdate",void 0,t),r()):(a.$flags$|=64,Ea(t),br(n,"componentDidLoad",void 0,t),r(),a.$onReadyResolve$(t),s||_a()),a.$onRenderResolve$&&(a.$onRenderResolve$(),a.$onRenderResolve$=void 0),a.$flags$&512&&$n(()=>Rn(a,!1)),a.$flags$&=-517},_a=a=>{$n(()=>ws(nt,"appload",{detail:{namespace:Ci}}))},br=(a,e,t,r)=>{if(a&&a[e])try{return a[e](t)}catch(n){Cr(n,r)}},Ea=a=>{var e;return a.classList.add((e=gt.hydratedSelectorName)!=null?e:"hydrated")},Sa=(a,e)=>ir(a).$instanceValues$.get(e),os=(a,e,t,r)=>{const n=ir(a),s=a,i=n.$instanceValues$.get(e),c=n.$flags$,u=s;t=bs(t,r.$members$[e][0]);const l=Number.isNaN(i)&&Number.isNaN(t);if(t!==i&&!l){n.$instanceValues$.set(e,t);{if(r.$watchers$&&c&128){const h=r.$watchers$[e];h&&h.map(y=>{try{u[y](t,i,e)}catch(p){Cr(p,s)}})}if((c&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(t,i,e)===!1)return;Rn(n,!1)}}}},Ta=(a,e,t)=>{var r,n;const s=a.prototype;if(e.$members$||e.$watchers$||a.watchers){a.watchers&&!e.$watchers$&&(e.$watchers$=a.watchers);const i=Object.entries((r=e.$members$)!=null?r:{});i.map(([c,[u]])=>{if(u&31||u&32){const{get:l,set:g}=Object.getOwnPropertyDescriptor(s,c)||{};l&&(e.$members$[c][0]|=2048),g&&(e.$members$[c][0]|=4096),Object.defineProperty(s,c,{get(){return l?l.apply(this):Sa(this,c)},configurable:!0,enumerable:!0}),Object.defineProperty(s,c,{set(h){const y=ir(this);if(g){const p=u&32?this[c]:y.$hostElement$[c];typeof p>"u"&&y.$instanceValues$.get(c)?h=y.$instanceValues$.get(c):!y.$instanceValues$.get(c)&&p&&y.$instanceValues$.set(c,p),g.apply(this,[bs(h,u)]),h=u&32?this[c]:y.$hostElement$[c],os(this,c,h,e);return}{os(this,c,h,e);return}}})}});{const c=new Map;s.attributeChangedCallback=function(u,l,g){dt.jmp(()=>{var h;const y=c.get(u);if(!(this.hasOwnProperty(y)&&gt.lazyLoad)){if(s.hasOwnProperty(y)&&typeof this[y]=="number"&&this[y]==g)return;if(y==null){const _=ir(this),b=_==null?void 0:_.$flags$;if(b&&!(b&8)&&b&128&&g!==l){const S=this,P=(h=e.$watchers$)==null?void 0:h[u];P==null||P.forEach(O=>{S[O]!=null&&S[O].call(S,g,l,u)})}return}}const p=Object.getOwnPropertyDescriptor(s,y);g=g===null&&typeof this[y]=="boolean"?!1:g,g!==this[y]&&(!p.get||p.set)&&(this[y]=g)})},a.observedAttributes=Array.from(new Set([...Object.keys((n=e.$watchers$)!=null?n:{}),...i.filter(([u,l])=>l[0]&15).map(([u,l])=>{var g;const h=l[1]||u;return c.set(h,u),l[0]&512&&((g=e.$attrsToReflect$)==null||g.push([u,h])),h})]))}}return a},ka=async(a,e,t,r)=>{let n;if((e.$flags$&32)===0){e.$flags$|=32,t.$lazyBundleId$;{n=a.constructor;const c=a.localName;customElements.whenDefined(c).then(()=>e.$flags$|=128)}if(n&&n.style){let c;typeof n.style=="string"?c=n.style:typeof n.style!="string"&&(e.$modeName$=oa(a),e.$modeName$&&(c=n.style[e.$modeName$]));const u=_s(t,e.$modeName$);if(!Xr.has(u)){const l=ar("registerStyles",t.$tagName$);la(u,c,!!(t.$flags$&1)),l()}}}const s=e.$ancestorComponent$,i=()=>Rn(e,!0);s&&s["s-rc"]?s["s-rc"].push(i):i()},cs=(a,e)=>{},xa=a=>{if((dt.$flags$&1)===0){const e=ir(a),t=e.$cmpMeta$,r=ar("connectedCallback",t.$tagName$);if(e.$flags$&1)Ds(a,e,t.$listeners$),e!=null&&e.$lazyInstance$?cs(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>cs(e.$lazyInstance$));else{e.$flags$|=1,t.$flags$&12&&$a(a);{let n=a;for(;n=n.parentNode||n.host;)if(n["s-p"]){Ps(e,e.$ancestorComponent$=n);break}}t.$members$&&Object.entries(t.$members$).map(([n,[s]])=>{if(s&31&&a.hasOwnProperty(n)){const i=a[n];delete a[n],a[n]=i}}),ka(a,e,t)}r()}},$a=a=>{if(!nt.document)return;const e=a["s-cr"]=nt.document.createComment("");e["s-cn"]=!0,Jt(a,e,a.firstChild)},Pa=async a=>{if((dt.$flags$&1)===0){const e=ir(a);e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0)}vr.has(a)&&vr.delete(a),a.shadowRoot&&vr.has(a.shadowRoot)&&vr.delete(a.shadowRoot)},Da=(a,e)=>{const t={$flags$:e[0],$tagName$:e[1]};t.$members$=e[2],t.$listeners$=e[3],t.$watchers$=a.$watchers$,t.$attrsToReflect$=[];const r=a.prototype.connectedCallback,n=a.prototype.disconnectedCallback;return Object.assign(a.prototype,{__hasHostListenerAttached:!1,__registerHost(){Mi(this,t)},connectedCallback(){if(!this.__hasHostListenerAttached){const s=ir(this);Ds(this,s,t.$listeners$),this.__hasHostListenerAttached=!0}xa(this),r&&r.call(this)},disconnectedCallback(){Pa(this),n&&n.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(t.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${t.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),a.is=t.$tagName$,Ta(a,t)},Ds=(a,e,t,r)=>{t&&nt.document&&t.map(([n,s,i])=>{const c=Ra(nt.document,a,n),u=Aa(e,i),l=ja(n);dt.ael(c,s,u,l),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>dt.rel(c,s,u,l))})},Aa=(a,e)=>t=>{var r;try{gt.lazyLoad||a.$hostElement$[e](t)}catch(n){Cr(n,a.$hostElement$)}},Ra=(a,e,t)=>t&4?a:t&8?nt:t&16?a.body:e,ja=a=>(a&2)!==0;const Or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function As(){throw new Error("setTimeout has not been defined")}function Rs(){throw new Error("clearTimeout has not been defined")}var Yt=As,Vt=Rs;typeof Or.setTimeout=="function"&&(Yt=setTimeout);typeof Or.clearTimeout=="function"&&(Vt=clearTimeout);function js(a){if(Yt===setTimeout)return setTimeout(a,0);if((Yt===As||!Yt)&&setTimeout)return Yt=setTimeout,setTimeout(a,0);try{return Yt(a,0)}catch{try{return Yt.call(null,a,0)}catch{return Yt.call(this,a,0)}}}function Ia(a){if(Vt===clearTimeout)return clearTimeout(a);if((Vt===Rs||!Vt)&&clearTimeout)return Vt=clearTimeout,clearTimeout(a);try{return Vt(a)}catch{try{return Vt.call(null,a)}catch{return Vt.call(this,a)}}}var zt=[],wr=!1,nr,Qr=-1;function Oa(){!wr||!nr||(wr=!1,nr.length?zt=nr.concat(zt):Qr=-1,zt.length&&Is())}function Is(){if(!wr){var a=js(Oa);wr=!0;for(var e=zt.length;e;){for(nr=zt,zt=[];++Qr<e;)nr&&nr[Qr].run();Qr=-1,e=zt.length}nr=null,wr=!1,Ia(a)}}function Ca(a){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];zt.push(new Os(a,e)),zt.length===1&&!wr&&js(Is)}function Os(a,e){this.fun=a,this.array=e}Os.prototype.run=function(){this.fun.apply(null,this.array)};var Na="browser",Fa="browser",Ba=!0,La={},za=[],Ma="",qa={},Ua={},Wa={};function or(){}var Ha=or,Ga=or,Ka=or,Ya=or,Va=or,Za=or,Qa=or;function Ja(a){throw new Error("process.binding is not supported")}function Xa(){return"/"}function eo(a){throw new Error("process.chdir is not supported")}function to(){return 0}var yr=Or.performance||{},ro=yr.now||yr.mozNow||yr.msNow||yr.oNow||yr.webkitNow||function(){return new Date().getTime()};function no(a){var e=ro.call(yr)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return a&&(t=t-a[0],r=r-a[1],r<0&&(t--,r+=1e9)),[t,r]}var so=new Date;function io(){var a=new Date,e=a-so;return e/1e3}var ao={nextTick:Ca,title:Na,browser:Ba,env:La,argv:za,version:Ma,versions:qa,on:Ha,addListener:Ga,once:Ka,off:Ya,removeListener:Va,removeAllListeners:Za,emit:Qa,binding:Ja,cwd:Xa,chdir:eo,umask:to,hrtime:no,platform:Fa,release:Ua,config:Wa,uptime:io};const rr=ao,oo="/Volumes/Development_Lacie/Development/latest/jeep-sqlite/node_modules/sql.js/dist";var Ot=[],Et=[],co=typeof Uint8Array<"u"?Uint8Array:Array,jn=!1;function Cs(){jn=!0;for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,t=a.length;e<t;++e)Ot[e]=a[e],Et[a.charCodeAt(e)]=e;Et[45]=62,Et[95]=63}function lo(a){jn||Cs();var e,t,r,n,s,i,c=a.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=a[c-2]==="="?2:a[c-1]==="="?1:0,i=new co(c*3/4-s),r=s>0?c-4:c;var u=0;for(e=0,t=0;e<r;e+=4,t+=3)n=Et[a.charCodeAt(e)]<<18|Et[a.charCodeAt(e+1)]<<12|Et[a.charCodeAt(e+2)]<<6|Et[a.charCodeAt(e+3)],i[u++]=n>>16&255,i[u++]=n>>8&255,i[u++]=n&255;return s===2?(n=Et[a.charCodeAt(e)]<<2|Et[a.charCodeAt(e+1)]>>4,i[u++]=n&255):s===1&&(n=Et[a.charCodeAt(e)]<<10|Et[a.charCodeAt(e+1)]<<4|Et[a.charCodeAt(e+2)]>>2,i[u++]=n>>8&255,i[u++]=n&255),i}function uo(a){return Ot[a>>18&63]+Ot[a>>12&63]+Ot[a>>6&63]+Ot[a&63]}function fo(a,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(a[s]<<16)+(a[s+1]<<8)+a[s+2],n.push(uo(r));return n.join("")}function ls(a){jn||Cs();for(var e,t=a.length,r=t%3,n="",s=[],i=16383,c=0,u=t-r;c<u;c+=i)s.push(fo(a,c,c+i>u?u:c+i));return r===1?(e=a[t-1],n+=Ot[e>>2],n+=Ot[e<<4&63],n+="=="):r===2&&(e=(a[t-2]<<8)+a[t-1],n+=Ot[e>>10],n+=Ot[e>>4&63],n+=Ot[e<<2&63],n+="="),s.push(n),s.join("")}function an(a,e,t,r,n){var s,i,c=n*8-r-1,u=(1<<c)-1,l=u>>1,g=-7,h=t?n-1:0,y=t?-1:1,p=a[e+h];for(h+=y,s=p&(1<<-g)-1,p>>=-g,g+=c;g>0;s=s*256+a[e+h],h+=y,g-=8);for(i=s&(1<<-g)-1,s>>=-g,g+=r;g>0;i=i*256+a[e+h],h+=y,g-=8);if(s===0)s=1-l;else{if(s===u)return i?NaN:(p?-1:1)*(1/0);i=i+Math.pow(2,r),s=s-l}return(p?-1:1)*i*Math.pow(2,s-r)}function Ns(a,e,t,r,n,s){var i,c,u,l=s*8-n-1,g=(1<<l)-1,h=g>>1,y=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:s-1,_=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,i=g):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),i+h>=1?e+=y/u:e+=y*Math.pow(2,1-h),e*u>=2&&(i++,u/=2),i+h>=g?(c=0,i=g):i+h>=1?(c=(e*u-1)*Math.pow(2,n),i=i+h):(c=e*Math.pow(2,h-1)*Math.pow(2,n),i=0));n>=8;a[t+p]=c&255,p+=_,c/=256,n-=8);for(i=i<<n|c,l+=n;l>0;a[t+p]=i&255,p+=_,i/=256,l-=8);a[t+p-_]|=b*128}var ho={}.toString,Fs=Array.isArray||function(a){return ho.call(a)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var mo=50;re.TYPED_ARRAY_SUPPORT=Or.TYPED_ARRAY_SUPPORT!==void 0?Or.TYPED_ARRAY_SUPPORT:!0;function kn(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Mt(a,e){if(kn()<e)throw new RangeError("Invalid typed array length");return re.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(e),a.__proto__=re.prototype):(a===null&&(a=new re(e)),a.length=e),a}function re(a,e,t){if(!re.TYPED_ARRAY_SUPPORT&&!(this instanceof re))return new re(a,e,t);if(typeof a=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return In(this,a)}return Bs(this,a,e,t)}re.poolSize=8192;re._augment=function(a){return a.__proto__=re.prototype,a};function Bs(a,e,t,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?yo(a,e,t,r):typeof e=="string"?go(a,e,t):vo(a,e)}re.from=function(a,e,t){return Bs(null,a,e,t)};re.TYPED_ARRAY_SUPPORT&&(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array);function Ls(a){if(typeof a!="number")throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function po(a,e,t,r){return Ls(e),e<=0?Mt(a,e):t!==void 0?typeof r=="string"?Mt(a,e).fill(t,r):Mt(a,e).fill(t):Mt(a,e)}re.alloc=function(a,e,t){return po(null,a,e,t)};function In(a,e){if(Ls(e),a=Mt(a,e<0?0:On(e)|0),!re.TYPED_ARRAY_SUPPORT)for(var t=0;t<e;++t)a[t]=0;return a}re.allocUnsafe=function(a){return In(null,a)};re.allocUnsafeSlow=function(a){return In(null,a)};function go(a,e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!re.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=zs(e,t)|0;a=Mt(a,r);var n=a.write(e,t);return n!==r&&(a=a.slice(0,n)),a}function xn(a,e){var t=e.length<0?0:On(e.length)|0;a=Mt(a,t);for(var r=0;r<t;r+=1)a[r]=e[r]&255;return a}function yo(a,e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");return t===void 0&&r===void 0?e=new Uint8Array(e):r===void 0?e=new Uint8Array(e,t):e=new Uint8Array(e,t,r),re.TYPED_ARRAY_SUPPORT?(a=e,a.__proto__=re.prototype):a=xn(a,e),a}function vo(a,e){if(Ct(e)){var t=On(e.length)|0;return a=Mt(a,t),a.length===0||e.copy(a,0,0,t),a}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||Fo(e.length)?Mt(a,0):xn(a,e);if(e.type==="Buffer"&&Fs(e.data))return xn(a,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function On(a){if(a>=kn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kn().toString(16)+" bytes");return a|0}re.isBuffer=Bo;function Ct(a){return!!(a!=null&&a._isBuffer)}re.compare=function(e,t){if(!Ct(e)||!Ct(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0};re.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};re.concat=function(e,t){if(!Fs(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return re.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=re.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(!Ct(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s),s+=i.length}return n};function zs(a,e){if(Ct(a))return a.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;typeof a!="string"&&(a=""+a);var t=a.length;if(t===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return nn(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ks(a).length;default:if(r)return nn(a).length;e=(""+e).toLowerCase(),r=!0}}re.byteLength=zs;function bo(a,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(a||(a="utf8");;)switch(a){case"hex":return Do(this,e,t);case"utf8":case"utf-8":return Us(this,e,t);case"ascii":return $o(this,e,t);case"latin1":case"binary":return Po(this,e,t);case"base64":return ko(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ao(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),r=!0}}re.prototype._isBuffer=!0;function sr(a,e,t){var r=a[e];a[e]=a[t],a[t]=r}re.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)sr(this,t,t+1);return this};re.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)sr(this,t,t+3),sr(this,t+1,t+2);return this};re.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)sr(this,t,t+7),sr(this,t+1,t+6),sr(this,t+2,t+5),sr(this,t+3,t+4);return this};re.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?Us(this,0,e):bo.apply(this,arguments)};re.prototype.equals=function(e){if(!Ct(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:re.compare(this,e)===0};re.prototype.inspect=function(){var e="",t=mo;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"};re.prototype.compare=function(e,t,r,n,s){if(!Ct(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,s>>>=0,this===e)return 0;for(var i=s-n,c=r-t,u=Math.min(i,c),l=this.slice(n,s),g=e.slice(t,r),h=0;h<u;++h)if(l[h]!==g[h]){i=l[h],c=g[h];break}return i<c?-1:c<i?1:0};function Ms(a,e,t,r,n){if(a.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=n?0:a.length-1),t<0&&(t=a.length+t),t>=a.length){if(n)return-1;t=a.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=re.from(e,r)),Ct(e))return e.length===0?-1:us(a,e,t,r,n);if(typeof e=="number")return e=e&255,re.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(a,e,t):Uint8Array.prototype.lastIndexOf.call(a,e,t):us(a,[e],t,r,n);throw new TypeError("val must be string, number or Buffer")}function us(a,e,t,r,n){var s=1,i=a.length,c=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(a.length<2||e.length<2)return-1;s=2,i/=2,c/=2,t/=2}function u(p,_){return s===1?p[_]:p.readUInt16BE(_*s)}var l;if(n){var g=-1;for(l=t;l<i;l++)if(u(a,l)===u(e,g===-1?0:l-g)){if(g===-1&&(g=l),l-g+1===c)return g*s}else g!==-1&&(l-=l-g),g=-1}else for(t+c>i&&(t=i-c),l=t;l>=0;l--){for(var h=!0,y=0;y<c;y++)if(u(a,l+y)!==u(e,y)){h=!1;break}if(h)return l}return-1}re.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1};re.prototype.indexOf=function(e,t,r){return Ms(this,e,t,r,!0)};re.prototype.lastIndexOf=function(e,t,r){return Ms(this,e,t,r,!1)};function wo(a,e,t,r){t=Number(t)||0;var n=a.length-t;r?(r=Number(r),r>n&&(r=n)):r=n;var s=e.length;if(s%2!==0)throw new TypeError("Invalid hex string");r>s/2&&(r=s/2);for(var i=0;i<r;++i){var c=parseInt(e.substr(i*2,2),16);if(isNaN(c))return i;a[t+i]=c}return i}function _o(a,e,t,r){return ln(nn(e,a.length-t),a,t,r)}function qs(a,e,t,r){return ln(Co(e),a,t,r)}function Eo(a,e,t,r){return qs(a,e,t,r)}function So(a,e,t,r){return ln(Ks(e),a,t,r)}function To(a,e,t,r){return ln(No(e,a.length-t),a,t,r)}re.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else if(isFinite(t))t=t|0,isFinite(r)?(r=r|0,n===void 0&&(n="utf8")):(n=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s=this.length-t;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return wo(this,e,t,r);case"utf8":case"utf-8":return _o(this,e,t,r);case"ascii":return qs(this,e,t,r);case"latin1":case"binary":return Eo(this,e,t,r);case"base64":return So(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return To(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}};re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ko(a,e,t){return e===0&&t===a.length?ls(a):ls(a.slice(e,t))}function Us(a,e,t){t=Math.min(a.length,t);for(var r=[],n=e;n<t;){var s=a[n],i=null,c=s>239?4:s>223?3:s>191?2:1;if(n+c<=t){var u,l,g,h;switch(c){case 1:s<128&&(i=s);break;case 2:u=a[n+1],(u&192)===128&&(h=(s&31)<<6|u&63,h>127&&(i=h));break;case 3:u=a[n+1],l=a[n+2],(u&192)===128&&(l&192)===128&&(h=(s&15)<<12|(u&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(i=h));break;case 4:u=a[n+1],l=a[n+2],g=a[n+3],(u&192)===128&&(l&192)===128&&(g&192)===128&&(h=(s&15)<<18|(u&63)<<12|(l&63)<<6|g&63,h>65535&&h<1114112&&(i=h))}}i===null?(i=65533,c=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),n+=c}return xo(r)}var fs=4096;function xo(a){var e=a.length;if(e<=fs)return String.fromCharCode.apply(String,a);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,a.slice(r,r+=fs));return t}function $o(a,e,t){var r="";t=Math.min(a.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(a[n]&127);return r}function Po(a,e,t){var r="";t=Math.min(a.length,t);for(var n=e;n<t;++n)r+=String.fromCharCode(a[n]);return r}function Do(a,e,t){var r=a.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var n="",s=e;s<t;++s)n+=Oo(a[s]);return n}function Ao(a,e,t){for(var r=a.slice(e,t),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+r[s+1]*256);return n}re.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(re.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=re.prototype;else{var s=t-e;n=new re(s,void 0);for(var i=0;i<s;++i)n[i]=this[i+e]}return n};function st(a,e,t){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+e>t)throw new RangeError("Trying to access beyond buffer length")}re.prototype.readUIntLE=function(e,t,r){e=e|0,t=t|0,r||st(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n};re.prototype.readUIntBE=function(e,t,r){e=e|0,t=t|0,r||st(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n};re.prototype.readUInt8=function(e,t){return t||st(e,1,this.length),this[e]};re.prototype.readUInt16LE=function(e,t){return t||st(e,2,this.length),this[e]|this[e+1]<<8};re.prototype.readUInt16BE=function(e,t){return t||st(e,2,this.length),this[e]<<8|this[e+1]};re.prototype.readUInt32LE=function(e,t){return t||st(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};re.prototype.readUInt32BE=function(e,t){return t||st(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};re.prototype.readIntLE=function(e,t,r){e=e|0,t=t|0,r||st(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n};re.prototype.readIntBE=function(e,t,r){e=e|0,t=t|0,r||st(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*t)),i};re.prototype.readInt8=function(e,t){return t||st(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};re.prototype.readInt16LE=function(e,t){t||st(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};re.prototype.readInt16BE=function(e,t){t||st(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};re.prototype.readInt32LE=function(e,t){return t||st(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};re.prototype.readInt32BE=function(e,t){return t||st(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};re.prototype.readFloatLE=function(e,t){return t||st(e,4,this.length),an(this,e,!0,23,4)};re.prototype.readFloatBE=function(e,t){return t||st(e,4,this.length),an(this,e,!1,23,4)};re.prototype.readDoubleLE=function(e,t){return t||st(e,8,this.length),an(this,e,!0,52,8)};re.prototype.readDoubleBE=function(e,t){return t||st(e,8,this.length),an(this,e,!1,52,8)};function yt(a,e,t,r,n,s){if(!Ct(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+r>a.length)throw new RangeError("Index out of range")}re.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;yt(this,e,t,r,s,0)}var i=1,c=0;for(this[t]=e&255;++c<r&&(i*=256);)this[t+c]=e/i&255;return t+r};re.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t=t|0,r=r|0,!n){var s=Math.pow(2,8*r)-1;yt(this,e,t,r,s,0)}var i=r-1,c=1;for(this[t+i]=e&255;--i>=0&&(c*=256);)this[t+i]=e/c&255;return t+r};re.prototype.writeUInt8=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,1,255,0),re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e&255,t+1};function on(a,e,t,r){e<0&&(e=65535+e+1);for(var n=0,s=Math.min(a.length-t,2);n<s;++n)a[t+n]=(e&255<<8*(r?n:1-n))>>>(r?n:1-n)*8}re.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):on(this,e,t,!0),t+2};re.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):on(this,e,t,!1),t+2};function cn(a,e,t,r){e<0&&(e=4294967295+e+1);for(var n=0,s=Math.min(a.length-t,4);n<s;++n)a[t+n]=e>>>(r?n:3-n)*8&255}re.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255):cn(this,e,t,!0),t+4};re.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):cn(this,e,t,!1),t+4};re.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);yt(this,e,t,r,s-1,-s)}var i=0,c=1,u=0;for(this[t]=e&255;++i<r&&(c*=256);)e<0&&u===0&&this[t+i-1]!==0&&(u=1),this[t+i]=(e/c>>0)-u&255;return t+r};re.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t=t|0,!n){var s=Math.pow(2,8*r-1);yt(this,e,t,r,s-1,-s)}var i=r-1,c=1,u=0;for(this[t+i]=e&255;--i>=0&&(c*=256);)e<0&&u===0&&this[t+i+1]!==0&&(u=1),this[t+i]=(e/c>>0)-u&255;return t+r};re.prototype.writeInt8=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,1,127,-128),re.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e&255,t+1};re.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8):on(this,e,t,!0),t+2};re.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e&255):on(this,e,t,!1),t+2};re.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):cn(this,e,t,!0),t+4};re.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t|0,r||yt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255):cn(this,e,t,!1),t+4};function Ws(a,e,t,r,n,s){if(t+r>a.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Hs(a,e,t,r,n){return n||Ws(a,e,t,4),Ns(a,e,t,r,23,4),t+4}re.prototype.writeFloatLE=function(e,t,r){return Hs(this,e,t,!0,r)};re.prototype.writeFloatBE=function(e,t,r){return Hs(this,e,t,!1,r)};function Gs(a,e,t,r,n){return n||Ws(a,e,t,8),Ns(a,e,t,r,52,8),t+8}re.prototype.writeDoubleLE=function(e,t,r){return Gs(this,e,t,!0,r)};re.prototype.writeDoubleBE=function(e,t,r){return Gs(this,e,t,!1,r)};re.prototype.copy=function(e,t,r,n){if(r||(r=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r,i;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!re.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s};re.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!re.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e=e&255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var i;if(typeof e=="number")for(i=t;i<r;++i)this[i]=e;else{var c=Ct(e)?e:nn(new re(e,n).toString()),u=c.length;for(i=0;i<r-t;++i)this[i+t]=c[i%u]}return this};var Ro=/[^+\/0-9A-Za-z-_]/g;function jo(a){if(a=Io(a).replace(Ro,""),a.length<2)return"";for(;a.length%4!==0;)a=a+"=";return a}function Io(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Oo(a){return a<16?"0"+a.toString(16):a.toString(16)}function nn(a,e){e=e||1/0;for(var t,r=a.length,n=null,s=[],i=0;i<r;++i){if(t=a.charCodeAt(i),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(i+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Co(a){for(var e=[],t=0;t<a.length;++t)e.push(a.charCodeAt(t)&255);return e}function No(a,e){for(var t,r,n,s=[],i=0;i<a.length&&!((e-=2)<0);++i)t=a.charCodeAt(i),r=t>>8,n=t%256,s.push(n),s.push(r);return s}function Ks(a){return lo(jo(a))}function ln(a,e,t,r){for(var n=0;n<r&&!(n+t>=e.length||n>=a.length);++n)e[n+t]=a[n];return n}function Fo(a){return a!==a}function Bo(a){return a!=null&&(!!a._isBuffer||Ys(a)||Lo(a))}function Ys(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function Lo(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&Ys(a.slice(0,0))}var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vs(a){if(a.__esModule)return a;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(t){var r=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return a[t]}})}),e}function Qt(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zs={exports:{}};const zo={},Mo=Object.freeze({__proto__:null,default:zo}),qo=Vs(Mo);function Qs(a,e){for(var t=0,r=a.length-1;r>=0;r--){var n=a[r];n==="."?a.splice(r,1):n===".."?(a.splice(r,1),t++):t&&(a.splice(r,1),t--)}if(e)for(;t--;t)a.unshift("..");return a}var Uo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Cn=function(a){return Uo.exec(a).slice(1)};function sn(){for(var a="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var r=t>=0?arguments[t]:"/";if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)continue;a=r+"/"+a,e=r.charAt(0)==="/"}return a=Qs(Bn(a.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+a||"."}function Nn(a){var e=Fn(a),t=Ho(a,-1)==="/";return a=Qs(Bn(a.split("/"),function(r){return!!r}),!e).join("/"),!a&&!e&&(a="."),a&&t&&(a+="/"),(e?"/":"")+a}function Fn(a){return a.charAt(0)==="/"}function Js(){var a=Array.prototype.slice.call(arguments,0);return Nn(Bn(a,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Xs(a,e){a=sn(a).substr(1),e=sn(e).substr(1);function t(l){for(var g=0;g<l.length&&l[g]==="";g++);for(var h=l.length-1;h>=0&&l[h]==="";h--);return g>h?[]:l.slice(g,h-g+1)}for(var r=t(a.split("/")),n=t(e.split("/")),s=Math.min(r.length,n.length),i=s,c=0;c<s;c++)if(r[c]!==n[c]){i=c;break}for(var u=[],c=i;c<r.length;c++)u.push("..");return u=u.concat(n.slice(i)),u.join("/")}var ei="/",ti=":";function ri(a){var e=Cn(a),t=e[0],r=e[1];return!t&&!r?".":(r&&(r=r.substr(0,r.length-1)),t+r)}function ni(a,e){var t=Cn(a)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function si(a){return Cn(a)[3]}const Wo={extname:si,basename:ni,dirname:ri,sep:ei,delimiter:ti,relative:Xs,join:Js,isAbsolute:Fn,normalize:Nn,resolve:sn};function Bn(a,e){if(a.filter)return a.filter(e);for(var t=[],r=0;r<a.length;r++)e(a[r],r,a)&&t.push(a[r]);return t}var Ho="ab".substr(-1)==="b"?function(a,e,t){return a.substr(e,t)}:function(a,e,t){return e<0&&(e=a.length+e),a.substr(e,t)};const Go=Object.freeze({__proto__:null,resolve:sn,normalize:Nn,isAbsolute:Fn,join:Js,relative:Xs,sep:ei,delimiter:ti,dirname:ri,basename:ni,extname:si,default:Wo}),Ko=Vs(Go);(function(a,e){var t=void 0,r=function(n){return t||(t=new Promise(function(s,i){var c=typeof n<"u"?n:{},u=c.onAbort;c.onAbort=function(o){i(new Error(o)),u&&u(o)},c.postRun=c.postRun||[],c.postRun.push(function(){s(c)}),a=void 0;var l;l||(l=typeof c<"u"?c:{});var g=typeof window=="object",h=typeof importScripts=="function",y=typeof rr=="object"&&typeof rr.versions=="object"&&typeof rr.versions.node=="string";l.onRuntimeInitialized=function(){function o(z,oe){switch(typeof oe){case"boolean":Ii(z,oe?1:0);break;case"number":Ai(z,oe);break;case"string":Ri(z,oe,-1,-1);break;case"object":if(oe===null)Kn(z);else if(oe.length!=null){var Se=jt(oe,ot);ji(z,Se,oe.length,-1),Gr(Se)}else Yr(z,"Wrong API use : tried to return a value of an unknown type ("+oe+").",-1);break;default:Kn(z)}}function f(z,oe){for(var Se=[],Ae=0;Ae<z;Ae+=1){var Ce=m(oe+4*Ae,"i32"),He=ki(Ce);if(He===1||He===2)Ce=Di(Ce);else if(He===3)Ce=$i(Ce);else if(He===4){He=Ce,Ce=xi(He),He=Pi(He);for(var kt=new Uint8Array(Ce),_t=0;_t<Ce;_t+=1)kt[_t]=M[He+_t];Ce=kt}else Ce=null;Se.push(Ce)}return Se}function d(z,oe){this.Ka=z,this.db=oe,this.Ia=1,this.eb=[]}function E(z,oe){if(this.db=oe,oe=Le(z)+1,this.Xa=yn(oe),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");Pe(z,Z,this.Xa,oe),this.cb=this.Xa,this.Ta=this.hb=null}function j(z){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),z!=null){var oe=this.filename,Se="/",Ae=oe;if(Se&&(Se=typeof Se=="string"?Se:ur(Se),Ae=oe?ee(Se+"/"+oe):Se),oe=Nt(!0,!0),Ae=fr(Ae,(oe!==void 0?oe:438)&4095|32768,0),z){if(typeof z=="string"){Se=Array(z.length);for(var Ce=0,He=z.length;Ce<He;++Ce)Se[Ce]=z.charCodeAt(Ce);z=Se}dr(Ae,oe|146),Se=Rt(Ae,577),Hr(Se,z,0,z.length,0),xr(Se),dr(Ae,oe)}}this.handleError(De(this.filename,Y)),this.db=m(Y,"i32"),Vn(this.db),this.Ya={},this.Ma={}}var Y=Kt(4),te=l.cwrap,De=te("sqlite3_open","number",["string","number"]),qe=te("sqlite3_close_v2","number",["number"]),Ie=te("sqlite3_exec","number",["number","string","number","number","number"]),Xe=te("sqlite3_changes","number",["number"]),rt=te("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qn=te("sqlite3_sql","string",["number"]),ci=te("sqlite3_normalized_sql","string",["number"]),Un=te("sqlite3_prepare_v2","number",["number","number","number","number","number"]),li=te("sqlite3_bind_text","number",["number","number","number","number","number"]),Wn=te("sqlite3_bind_blob","number",["number","number","number","number","number"]),ui=te("sqlite3_bind_double","number",["number","number","number"]),fi=te("sqlite3_bind_int","number",["number","number","number"]),hi=te("sqlite3_bind_parameter_index","number",["number","string"]),di=te("sqlite3_step","number",["number"]),mi=te("sqlite3_errmsg","string",["number"]),pi=te("sqlite3_column_count","number",["number"]),gi=te("sqlite3_data_count","number",["number"]),yi=te("sqlite3_column_double","number",["number","number"]),Hn=te("sqlite3_column_text","string",["number","number"]),vi=te("sqlite3_column_blob","number",["number","number"]),bi=te("sqlite3_column_bytes","number",["number","number"]),wi=te("sqlite3_column_type","number",["number","number"]),_i=te("sqlite3_column_name","string",["number","number"]),Ei=te("sqlite3_reset","number",["number"]),Si=te("sqlite3_clear_bindings","number",["number"]),Ti=te("sqlite3_finalize","number",["number"]),Gn=te("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),ki=te("sqlite3_value_type","number",["number"]),xi=te("sqlite3_value_bytes","number",["number"]),$i=te("sqlite3_value_text","string",["number"]),Pi=te("sqlite3_value_blob","number",["number"]),Di=te("sqlite3_value_double","number",["number"]),Ai=te("sqlite3_result_double","",["number","number"]),Kn=te("sqlite3_result_null","",["number"]),Ri=te("sqlite3_result_text","",["number","string","number","number"]),ji=te("sqlite3_result_blob","",["number","number","number","number"]),Ii=te("sqlite3_result_int","",["number","number"]),Yr=te("sqlite3_result_error","",["number","string","number"]),Yn=te("sqlite3_aggregate_context","number",["number","number"]),Vn=te("RegisterExtensionFunctions","number",["number"]);d.prototype.bind=function(z){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(z)?this.vb(z):z!=null&&typeof z=="object"?this.wb(z):!0},d.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var z=di(this.Ka);switch(z){case 100:return!0;case 101:return!1;default:throw this.db.handleError(z)}},d.prototype.qb=function(z){return z==null&&(z=this.Ia,this.Ia+=1),yi(this.Ka,z)},d.prototype.zb=function(z){if(z==null&&(z=this.Ia,this.Ia+=1),z=Hn(this.Ka,z),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(z)},d.prototype.Ab=function(z){return z==null&&(z=this.Ia,this.Ia+=1),Hn(this.Ka,z)},d.prototype.getBlob=function(z){z==null&&(z=this.Ia,this.Ia+=1);var oe=bi(this.Ka,z);z=vi(this.Ka,z);for(var Se=new Uint8Array(oe),Ae=0;Ae<oe;Ae+=1)Se[Ae]=M[z+Ae];return Se},d.prototype.get=function(z,oe){oe=oe||{},z!=null&&this.bind(z)&&this.step(),z=[];for(var Se=gi(this.Ka),Ae=0;Ae<Se;Ae+=1)switch(wi(this.Ka,Ae)){case 1:var Ce=oe.useBigInt?this.zb(Ae):this.qb(Ae);z.push(Ce);break;case 2:z.push(this.qb(Ae));break;case 3:z.push(this.Ab(Ae));break;case 4:z.push(this.getBlob(Ae));break;default:z.push(null)}return z},d.prototype.getColumnNames=function(){for(var z=[],oe=pi(this.Ka),Se=0;Se<oe;Se+=1)z.push(_i(this.Ka,Se));return z},d.prototype.getAsObject=function(z,oe){z=this.get(z,oe),oe=this.getColumnNames();for(var Se={},Ae=0;Ae<oe.length;Ae+=1)Se[oe[Ae]]=z[Ae];return Se},d.prototype.getSQL=function(){return qn(this.Ka)},d.prototype.getNormalizedSQL=function(){return ci(this.Ka)},d.prototype.run=function(z){return z!=null&&this.bind(z),this.step(),this.reset()},d.prototype.mb=function(z,oe){oe==null&&(oe=this.Ia,this.Ia+=1),z=tt(z);var Se=jt(z,ot);this.eb.push(Se),this.db.handleError(li(this.Ka,oe,Se,z.length-1,0))},d.prototype.ub=function(z,oe){oe==null&&(oe=this.Ia,this.Ia+=1);var Se=jt(z,ot);this.eb.push(Se),this.db.handleError(Wn(this.Ka,oe,Se,z.length,0))},d.prototype.lb=function(z,oe){oe==null&&(oe=this.Ia,this.Ia+=1),this.db.handleError((z===(z|0)?fi:ui)(this.Ka,oe,z))},d.prototype.xb=function(z){z==null&&(z=this.Ia,this.Ia+=1),Wn(this.Ka,z,0,0,0)},d.prototype.nb=function(z,oe){switch(oe==null&&(oe=this.Ia,this.Ia+=1),typeof z){case"string":this.mb(z,oe);return;case"number":this.lb(z,oe);return;case"bigint":this.mb(z.toString(),oe);return;case"boolean":this.lb(z+0,oe);return;case"object":if(z===null){this.xb(oe);return}if(z.length!=null){this.ub(z,oe);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+z+")."},d.prototype.wb=function(z){var oe=this;return Object.keys(z).forEach(function(Se){var Ae=hi(oe.Ka,Se);Ae!==0&&oe.nb(z[Se],Ae)}),!0},d.prototype.vb=function(z){for(var oe=0;oe<z.length;oe+=1)this.nb(z[oe],oe+1);return!0},d.prototype.reset=function(){return this.freemem(),Si(this.Ka)===0&&Ei(this.Ka)===0},d.prototype.freemem=function(){for(var z;(z=this.eb.pop())!==void 0;)Gr(z)},d.prototype.free=function(){this.freemem();var z=Ti(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,z},E.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var z=Dr(),oe=Kt(4);V(Y),V(oe);try{this.db.handleError(Un(this.db.db,this.cb,-1,Y,oe)),this.cb=m(oe,"i32");var Se=m(Y,"i32");return Se===0?(this.fb(),{done:!0}):(this.Ta=new d(Se,this.db),this.db.Ya[Se]=this.Ta,{value:this.Ta,done:!1})}catch(Ae){throw this.hb=x(this.cb),this.fb(),Ae}finally{Pr(z)}},E.prototype.fb=function(){Gr(this.Xa),this.Xa=null},E.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:x(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(E.prototype[Symbol.iterator]=function(){return this}),j.prototype.run=function(z,oe){if(!this.db)throw"Database closed";if(oe){z=this.prepare(z,oe);try{z.step()}finally{z.free()}}else this.handleError(Ie(this.db,z,0,0,Y));return this},j.prototype.exec=function(z,oe,Se){if(!this.db)throw"Database closed";var Ae=Dr(),Ce=null;try{var He=Ye(z),kt=Kt(4);for(z=[];m(He,"i8")!==0;){V(Y),V(kt),this.handleError(Un(this.db,He,-1,Y,kt));var _t=m(Y,"i32");if(He=m(kt,"i32"),_t!==0){var bt=null;for(Ce=new d(_t,this),oe!=null&&Ce.bind(oe);Ce.step();)bt===null&&(bt={columns:Ce.getColumnNames(),values:[]},z.push(bt)),bt.values.push(Ce.get(null,Se));Ce.free()}}return z}catch(xt){throw Ce&&Ce.free(),xt}finally{Pr(Ae)}},j.prototype.each=function(z,oe,Se,Ae,Ce){typeof oe=="function"&&(Ae=Se,Se=oe,oe=void 0),z=this.prepare(z,oe);try{for(;z.step();)Se(z.getAsObject(null,Ce))}finally{z.free()}if(typeof Ae=="function")return Ae()},j.prototype.prepare=function(z,oe){if(V(Y),this.handleError(rt(this.db,z,-1,Y,0)),z=m(Y,"i32"),z===0)throw"Nothing to prepare";var Se=new d(z,this);return oe!=null&&Se.bind(oe),this.Ya[z]=Se},j.prototype.iterateStatements=function(z){return new E(z,this)},j.prototype.export=function(){Object.values(this.Ya).forEach(function(oe){oe.free()}),Object.values(this.Ma).forEach(er),this.Ma={},this.handleError(qe(this.db));var z=pn(this.filename);return this.handleError(De(this.filename,Y)),this.db=m(Y,"i32"),Vn(this.db),z},j.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(z){z.free()}),Object.values(this.Ma).forEach(er),this.Ma={},this.handleError(qe(this.db)),kr("/"+this.filename),this.db=null)},j.prototype.handleError=function(z){if(z===0)return null;throw z=mi(this.db),Error(z)},j.prototype.getRowsModified=function(){return Xe(this.db)},j.prototype.create_function=function(z,oe){Object.prototype.hasOwnProperty.call(this.Ma,z)&&(er(this.Ma[z]),delete this.Ma[z]);var Se=pr(function(Ae,Ce,He){Ce=f(Ce,He);try{var kt=oe.apply(null,Ce)}catch(_t){Yr(Ae,_t,-1);return}o(Ae,kt)},"viii");return this.Ma[z]=Se,this.handleError(Gn(this.db,z,oe.length,1,0,Se,0,0,0)),this},j.prototype.create_aggregate=function(z,oe){var Se=oe.init||function(){return null},Ae=oe.finalize||function(bt){return bt},Ce=oe.step;if(!Ce)throw"An aggregate function must have a step function in "+z;var He={};Object.hasOwnProperty.call(this.Ma,z)&&(er(this.Ma[z]),delete this.Ma[z]),oe=z+"__finalize",Object.hasOwnProperty.call(this.Ma,oe)&&(er(this.Ma[oe]),delete this.Ma[oe]);var kt=pr(function(bt,xt,vn){var tr=Yn(bt,1);Object.hasOwnProperty.call(He,tr)||(He[tr]=Se()),xt=f(xt,vn),xt=[He[tr]].concat(xt);try{He[tr]=Ce.apply(null,xt)}catch(Oi){delete He[tr],Yr(bt,Oi,-1)}},"viii"),_t=pr(function(bt){var xt=Yn(bt,1);try{var vn=Ae(He[xt])}catch(tr){delete He[xt],Yr(bt,tr,-1);return}o(bt,vn),delete He[xt]},"vi");return this.Ma[z]=kt,this.Ma[oe]=_t,this.handleError(Gn(this.db,z,Ce.length-1,1,0,0,kt,_t,0)),this},l.Database=j};var p=Object.assign({},l),_="./this.program",b="",T,S;if(y){var P=qo,O=Ko;b=oo+"/",S=o=>(o=me(o)?new URL(o):O.normalize(o),P.readFileSync(o)),T=o=>(o=me(o)?new URL(o):O.normalize(o),new Promise((f,d)=>{P.readFile(o,void 0,(E,j)=>{E?d(E):f(j.buffer)})})),!l.thisProgram&&1<rr.argv.length&&(_=rr.argv[1].replace(/\\/g,"/")),a.exports=l}else(g||h)&&(h?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.startsWith("blob:")?"":b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1),h&&(S=o=>{var f=new XMLHttpRequest;return f.open("GET",o,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),T=o=>me(o)?new Promise((f,d)=>{var E=new XMLHttpRequest;E.open("GET",o,!0),E.responseType="arraybuffer",E.onload=()=>{(E.status==200||E.status==0&&E.response)&&d(E.response),f(E.status)},E.onerror=f,E.send(null)}):fetch(o,{credentials:"same-origin"}).then(f=>f.ok?f.arrayBuffer():Promise.reject(Error(f.status+" : "+f.url))));var F=l.print||console.log.bind(console),A=l.printErr||console.error.bind(console);Object.assign(l,p),p=null,l.thisProgram&&(_=l.thisProgram);var G;l.wasmBinary&&(G=l.wasmBinary);var L,Q=!1,M,Z,be,D,H,v,X;function ke(){var o=L.buffer;l.HEAP8=M=new Int8Array(o),l.HEAP16=be=new Int16Array(o),l.HEAPU8=Z=new Uint8Array(o),l.HEAPU16=new Uint16Array(o),l.HEAP32=D=new Int32Array(o),l.HEAPU32=H=new Uint32Array(o),l.HEAPF32=v=new Float32Array(o),l.HEAPF64=X=new Float64Array(o)}var ae=[],Re=[],ue=[];function xe(){var o=l.preRun.shift();ae.unshift(o)}var U=0,W=null;function _e(o){var f;throw(f=l.onAbort)==null||f.call(l,o),o="Aborted("+o+")",A(o),Q=!0,new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info.")}var ve=o=>o.startsWith("data:application/octet-stream;base64,"),me=o=>o.startsWith("file://"),Ue;function Je(o){if(o==Ue&&G)return new Uint8Array(G);if(S)return S(o);throw"both async and sync fetching of the wasm failed"}function Oe(o){return G?Promise.resolve().then(()=>Je(o)):T(o).then(f=>new Uint8Array(f),()=>Je(o))}function Be(o,f,d){return Oe(o).then(E=>WebAssembly.instantiate(E,f)).then(d,E=>{A(`failed to asynchronously prepare wasm: ${E}`),_e(E)})}function Ze(o,f){var d=Ue;G||typeof WebAssembly.instantiateStreaming!="function"||ve(d)||me(d)||y||typeof fetch!="function"?Be(d,o,f):fetch(d,{credentials:"same-origin"}).then(E=>WebAssembly.instantiateStreaming(E,o).then(f,function(j){return A(`wasm streaming compile failed: ${j}`),A("falling back to ArrayBuffer instantiation"),Be(d,o,f)}))}var ge,Ne,it=o=>{for(;0<o.length;)o.shift()(l)};function m(o,f="i8"){switch(f.endsWith("*")&&(f="*"),f){case"i1":return M[o];case"i8":return M[o];case"i16":return be[o>>1];case"i32":return D[o>>2];case"i64":_e("to do getValue(i64) use WASM_BIGINT");case"float":return v[o>>2];case"double":return X[o>>3];case"*":return H[o>>2];default:_e(`invalid type for getValue: ${f}`)}}function V(o){var f="i32";switch(f.endsWith("*")&&(f="*"),f){case"i1":M[o]=0;break;case"i8":M[o]=0;break;case"i16":be[o>>1]=0;break;case"i32":D[o>>2]=0;break;case"i64":_e("to do setValue(i64) use WASM_BIGINT");case"float":v[o>>2]=0;break;case"double":X[o>>3]=0;break;case"*":H[o>>2]=0;break;default:_e(`invalid type for setValue: ${f}`)}}var K=typeof TextDecoder<"u"?new TextDecoder:void 0,$=(o,f,d)=>{var E=f+d;for(d=f;o[d]&&!(d>=E);)++d;if(16<d-f&&o.buffer&&K)return K.decode(o.subarray(f,d));for(E="";f<d;){var j=o[f++];if(j&128){var Y=o[f++]&63;if((j&224)==192)E+=String.fromCharCode((j&31)<<6|Y);else{var te=o[f++]&63;j=(j&240)==224?(j&15)<<12|Y<<6|te:(j&7)<<18|Y<<12|te<<6|o[f++]&63,65536>j?E+=String.fromCharCode(j):(j-=65536,E+=String.fromCharCode(55296|j>>10,56320|j&1023))}}else E+=String.fromCharCode(j)}return E},x=(o,f)=>o?$(Z,o,f):"",N=(o,f)=>{for(var d=0,E=o.length-1;0<=E;E--){var j=o[E];j==="."?o.splice(E,1):j===".."?(o.splice(E,1),d++):d&&(o.splice(E,1),d--)}if(f)for(;d;d--)o.unshift("..");return o},ee=o=>{var f=o.charAt(0)==="/",d=o.substr(-1)==="/";return(o=N(o.split("/").filter(E=>!!E),!f).join("/"))||f||(o="."),o&&d&&(o+="/"),(f?"/":"")+o},se=o=>{var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(o).slice(1);return o=f[0],f=f[1],!o&&!f?".":(f&&(f=f.substr(0,f.length-1)),o+f)},q=o=>{if(o==="/")return"/";o=ee(o),o=o.replace(/\/$/,"");var f=o.lastIndexOf("/");return f===-1?o:o.substr(f+1)},fe=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return d=>crypto.getRandomValues(d);if(y)try{var o=require("crypto");if(o.randomFillSync)return d=>o.randomFillSync(d);var f=o.randomBytes;return d=>(d.set(f(d.byteLength)),d)}catch{}_e("initRandomDevice")},ye=o=>(ye=fe())(o),he=(...o)=>{for(var f="",d=!1,E=o.length-1;-1<=E&&!d;E--){if(d=0<=E?o[E]:"/",typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!d)return"";f=d+"/"+f,d=d.charAt(0)==="/"}return f=N(f.split("/").filter(j=>!!j),!d).join("/"),(d?"/":"")+f||"."},Ee=[],Le=o=>{for(var f=0,d=0;d<o.length;++d){var E=o.charCodeAt(d);127>=E?f++:2047>=E?f+=2:55296<=E&&57343>=E?(f+=4,++d):f+=3}return f},Pe=(o,f,d,E)=>{if(!(0<E))return 0;var j=d;E=d+E-1;for(var Y=0;Y<o.length;++Y){var te=o.charCodeAt(Y);if(55296<=te&&57343>=te){var De=o.charCodeAt(++Y);te=65536+((te&1023)<<10)|De&1023}if(127>=te){if(d>=E)break;f[d++]=te}else{if(2047>=te){if(d+1>=E)break;f[d++]=192|te>>6}else{if(65535>=te){if(d+2>=E)break;f[d++]=224|te>>12}else{if(d+3>=E)break;f[d++]=240|te>>18,f[d++]=128|te>>12&63}f[d++]=128|te>>6&63}f[d++]=128|te&63}}return f[d]=0,d-j};function tt(o,f){var d=Array(Le(o)+1);return o=Pe(o,d,0,d.length),f&&(d.length=o),d}var St=[];function ct(o,f){St[o]={input:[],output:[],Wa:f},Sr(o,Pt)}var Pt={open(o){var f=St[o.node.rdev];if(!f)throw new pe(43);o.tty=f,o.seekable=!1},close(o){o.tty.Wa.fsync(o.tty)},fsync(o){o.tty.Wa.fsync(o.tty)},read(o,f,d,E){if(!o.tty||!o.tty.Wa.rb)throw new pe(60);for(var j=0,Y=0;Y<E;Y++){try{var te=o.tty.Wa.rb(o.tty)}catch{throw new pe(29)}if(te===void 0&&j===0)throw new pe(6);if(te==null)break;j++,f[d+Y]=te}return j&&(o.node.timestamp=Date.now()),j},write(o,f,d,E){if(!o.tty||!o.tty.Wa.ib)throw new pe(60);try{for(var j=0;j<E;j++)o.tty.Wa.ib(o.tty,f[d+j])}catch{throw new pe(29)}return E&&(o.node.timestamp=Date.now()),j}},We={rb(){e:{if(!Ee.length){var o=null;if(y){var f=re.alloc(256),d=0,E=rr.stdin.fd;try{d=P.readSync(E,f,0,256)}catch(j){if(j.toString().includes("EOF"))d=0;else throw j}0<d&&(o=f.slice(0,d).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(o=window.prompt("Input: "),o!==null&&(o+=`
`));if(!o){o=null;break e}Ee=tt(o,!0)}o=Ee.shift()}return o},ib(o,f){f===null||f===10?(F($(o.output,0)),o.output=[]):f!=0&&o.output.push(f)},fsync(o){o.output&&0<o.output.length&&(F($(o.output,0)),o.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},Dt={ib(o,f){f===null||f===10?(A($(o.output,0)),o.output=[]):f!=0&&o.output.push(f)},fsync(o){o.output&&0<o.output.length&&(A($(o.output,0)),o.output=[])}};function qt(o,f){var d=o.Ha?o.Ha.length:0;d>=f||(f=Math.max(f,d*(1048576>d?2:1.125)>>>0),d!=0&&(f=Math.max(f,256)),d=o.Ha,o.Ha=new Uint8Array(f),0<o.La&&o.Ha.set(d.subarray(0,o.La),0))}var $e={Pa:null,Qa(){return $e.createNode(null,"/",16895,0)},createNode(o,f,d,E){if((d&61440)===24576||(d&61440)===4096)throw new pe(63);return $e.Pa||($e.Pa={dir:{node:{Oa:$e.Fa.Oa,Na:$e.Fa.Na,lookup:$e.Fa.lookup,$a:$e.Fa.$a,rename:$e.Fa.rename,unlink:$e.Fa.unlink,rmdir:$e.Fa.rmdir,readdir:$e.Fa.readdir,symlink:$e.Fa.symlink},stream:{Sa:$e.Ga.Sa}},file:{node:{Oa:$e.Fa.Oa,Na:$e.Fa.Na},stream:{Sa:$e.Ga.Sa,read:$e.Ga.read,write:$e.Ga.write,kb:$e.Ga.kb,ab:$e.Ga.ab,bb:$e.Ga.bb}},link:{node:{Oa:$e.Fa.Oa,Na:$e.Fa.Na,readlink:$e.Fa.readlink},stream:{}},ob:{node:{Oa:$e.Fa.Oa,Na:$e.Fa.Na},stream:mn}}),d=Fr(o,f,d,E),ht(d.mode)?(d.Fa=$e.Pa.dir.node,d.Ga=$e.Pa.dir.stream,d.Ha={}):(d.mode&61440)===32768?(d.Fa=$e.Pa.file.node,d.Ga=$e.Pa.file.stream,d.La=0,d.Ha=null):(d.mode&61440)===40960?(d.Fa=$e.Pa.link.node,d.Ga=$e.Pa.link.stream):(d.mode&61440)===8192&&(d.Fa=$e.Pa.ob.node,d.Ga=$e.Pa.ob.stream),d.timestamp=Date.now(),o&&(o.Ha[f]=d,o.timestamp=d.timestamp),d},Kb(o){return o.Ha?o.Ha.subarray?o.Ha.subarray(0,o.La):new Uint8Array(o.Ha):new Uint8Array(0)},Fa:{Oa(o){var f={};return f.dev=(o.mode&61440)===8192?o.id:1,f.ino=o.id,f.mode=o.mode,f.nlink=1,f.uid=0,f.gid=0,f.rdev=o.rdev,ht(o.mode)?f.size=4096:(o.mode&61440)===32768?f.size=o.La:(o.mode&61440)===40960?f.size=o.link.length:f.size=0,f.atime=new Date(o.timestamp),f.mtime=new Date(o.timestamp),f.ctime=new Date(o.timestamp),f.yb=4096,f.blocks=Math.ceil(f.size/f.yb),f},Na(o,f){if(f.mode!==void 0&&(o.mode=f.mode),f.timestamp!==void 0&&(o.timestamp=f.timestamp),f.size!==void 0&&(f=f.size,o.La!=f))if(f==0)o.Ha=null,o.La=0;else{var d=o.Ha;o.Ha=new Uint8Array(f),d&&o.Ha.set(d.subarray(0,Math.min(f,o.La))),o.La=f}},lookup(){throw _r[44]},$a(o,f,d,E){return $e.createNode(o,f,d,E)},rename(o,f,d){if(ht(o.mode)){try{var E=Ft(f,d)}catch{}if(E)for(var j in E.Ha)throw new pe(55)}delete o.parent.Ha[o.name],o.parent.timestamp=Date.now(),o.name=d,f.Ha[d]=o,f.timestamp=o.parent.timestamp},unlink(o,f){delete o.Ha[f],o.timestamp=Date.now()},rmdir(o,f){var d=Ft(o,f),E;for(E in d.Ha)throw new pe(55);delete o.Ha[f],o.timestamp=Date.now()},readdir(o){var f=[".",".."],d;for(d of Object.keys(o.Ha))f.push(d);return f},symlink(o,f,d){return o=$e.createNode(o,f,41471,0),o.link=d,o},readlink(o){if((o.mode&61440)!==40960)throw new pe(28);return o.link}},Ga:{read(o,f,d,E,j){var Y=o.node.Ha;if(j>=o.node.La)return 0;if(o=Math.min(o.node.La-j,E),8<o&&Y.subarray)f.set(Y.subarray(j,j+o),d);else for(E=0;E<o;E++)f[d+E]=Y[j+E];return o},write(o,f,d,E,j,Y){if(f.buffer===M.buffer&&(Y=!1),!E)return 0;if(o=o.node,o.timestamp=Date.now(),f.subarray&&(!o.Ha||o.Ha.subarray)){if(Y)return o.Ha=f.subarray(d,d+E),o.La=E;if(o.La===0&&j===0)return o.Ha=f.slice(d,d+E),o.La=E;if(j+E<=o.La)return o.Ha.set(f.subarray(d,d+E),j),E}if(qt(o,j+E),o.Ha.subarray&&f.subarray)o.Ha.set(f.subarray(d,d+E),j);else for(Y=0;Y<E;Y++)o.Ha[j+Y]=f[d+Y];return o.La=Math.max(o.La,j+E),E},Sa(o,f,d){if(d===1?f+=o.position:d===2&&(o.node.mode&61440)===32768&&(f+=o.node.La),0>f)throw new pe(28);return f},kb(o,f,d){qt(o.node,f+d),o.node.La=Math.max(o.node.La,f+d)},ab(o,f,d,E,j){if((o.node.mode&61440)!==32768)throw new pe(43);if(o=o.node.Ha,j&2||o.buffer!==M.buffer){if((0<d||d+f<o.length)&&(o.subarray?o=o.subarray(d,d+f):o=Array.prototype.slice.call(o,d,d+f)),d=!0,f=65536*Math.ceil(f/65536),(j=zn(65536,f))?(Z.fill(0,j,j+f),f=j):f=0,!f)throw new pe(48);M.set(o,f)}else d=!1,f=o.byteOffset;return{Cb:f,tb:d}},bb(o,f,d,E){return $e.Ga.write(o,f,0,E,d,!1),0}}},Nt=(o,f)=>{var d=0;return o&&(d|=365),f&&(d|=146),d},Ut=null,cr={},lt=[],lr=1,ut=null,At=!0,pe=class{constructor(o){this.name="ErrnoError",this.Ja=o}},_r={},fn=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(o){this.Za.flags=o}get position(){return this.Za.position}set position(o){this.Za.position=o}},hn=class{constructor(o,f,d,E){o||(o=this),this.parent=o,this.Qa=o.Qa,this.Ua=null,this.id=lr++,this.name=f,this.mode=d,this.Fa={},this.Ga={},this.rdev=E}get read(){return(this.mode&365)===365}set read(o){o?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(o){o?this.mode|=146:this.mode&=-147}};function ft(o,f={}){if(o=he(o),!o)return{path:"",node:null};if(f=Object.assign({pb:!0,jb:0},f),8<f.jb)throw new pe(32);o=o.split("/").filter(te=>!!te);for(var d=Ut,E="/",j=0;j<o.length;j++){var Y=j===o.length-1;if(Y&&f.parent)break;if(d=Ft(d,o[j]),E=ee(E+"/"+o[j]),d.Ua&&(!Y||Y&&f.pb)&&(d=d.Ua.root),!Y||f.Ra){for(Y=0;(d.mode&61440)===40960;)if(d=Ht(E),E=he(se(E),d),d=ft(E,{jb:f.jb+1}).node,40<Y++)throw new pe(32)}}return{path:E,node:d}}function ur(o){for(var f;;){if(o===o.parent)return o=o.Qa.sb,f?o[o.length-1]!=="/"?`${o}/${f}`:o+f:o;f=f?`${o.name}/${f}`:o.name,o=o.parent}}function Er(o,f){for(var d=0,E=0;E<f.length;E++)d=(d<<5)-d+f.charCodeAt(E)|0;return(o+d>>>0)%ut.length}function Nr(o){var f=Er(o.parent.id,o.name);if(ut[f]===o)ut[f]=o.Va;else for(f=ut[f];f;){if(f.Va===o){f.Va=o.Va;break}f=f.Va}}function Ft(o,f){var d=ht(o.mode)?(d=Wt(o,"x"))?d:o.Fa.lookup?0:2:54;if(d)throw new pe(d);for(d=ut[Er(o.id,f)];d;d=d.Va){var E=d.name;if(d.parent.id===o.id&&E===f)return d}return o.Fa.lookup(o,f)}function Fr(o,f,d,E){return o=new hn(o,f,d,E),f=Er(o.parent.id,o.name),o.Va=ut[f],ut[f]=o}function ht(o){return(o&61440)===16384}function Br(o){var f=["r","w","rw"][o&3];return o&512&&(f+="w"),f}function Wt(o,f){if(At)return 0;if(!f.includes("r")||o.mode&292){if(f.includes("w")&&!(o.mode&146)||f.includes("x")&&!(o.mode&73))return 2}else return 2;return 0}function Lr(o,f){try{return Ft(o,f),20}catch{}return Wt(o,"wx")}function zr(o,f,d){try{var E=Ft(o,f)}catch(j){return j.Ja}if(o=Wt(o,"wx"))return o;if(d){if(!ht(E.mode))return 54;if(E===E.parent||ur(E)==="/")return 10}else if(ht(E.mode))return 31;return 0}function at(o){if(o=lt[o],!o)throw new pe(8);return o}function Mr(o,f=-1){if(o=Object.assign(new fn,o),f==-1)e:{for(f=0;4096>=f;f++)if(!lt[f])break e;throw new pe(33)}return o.fd=f,lt[f]=o}function dn(o,f=-1){var d,E;return o=Mr(o,f),(E=(d=o.Ga)==null?void 0:d.Jb)==null||E.call(d,o),o}var mn={open(o){var f,d;o.Ga=cr[o.node.rdev].Ga,(d=(f=o.Ga).open)==null||d.call(f,o)},Sa(){throw new pe(70)}};function Sr(o,f){cr[o]={Ga:f}}function qr(o,f){var d=f==="/";if(d&&Ut)throw new pe(10);if(!d&&f){var E=ft(f,{pb:!1});if(f=E.path,E=E.node,E.Ua)throw new pe(10);if(!ht(E.mode))throw new pe(54)}f={type:o,Ob:{},sb:f,Bb:[]},o=o.Qa(f),o.Qa=f,f.root=o,d?Ut=o:E&&(E.Ua=f,E.Qa&&E.Qa.Bb.push(f))}function fr(o,f,d){var E=ft(o,{parent:!0}).node;if(o=q(o),!o||o==="."||o==="..")throw new pe(28);var j=Lr(E,o);if(j)throw new pe(j);if(!E.Fa.$a)throw new pe(63);return E.Fa.$a(E,o,f,d)}function wt(o,f){return fr(o,(f!==void 0?f:511)&1023|16384,0)}function hr(o,f,d){typeof d>"u"&&(d=f,f=438),fr(o,f|8192,d)}function Tr(o,f){if(!he(o))throw new pe(44);var d=ft(f,{parent:!0}).node;if(!d)throw new pe(44);f=q(f);var E=Lr(d,f);if(E)throw new pe(E);if(!d.Fa.symlink)throw new pe(63);d.Fa.symlink(d,f,o)}function Ur(o){var f=ft(o,{parent:!0}).node;o=q(o);var d=Ft(f,o),E=zr(f,o,!0);if(E)throw new pe(E);if(!f.Fa.rmdir)throw new pe(63);if(d.Ua)throw new pe(10);f.Fa.rmdir(f,o),Nr(d)}function kr(o){var f=ft(o,{parent:!0}).node;if(!f)throw new pe(44);o=q(o);var d=Ft(f,o),E=zr(f,o,!1);if(E)throw new pe(E);if(!f.Fa.unlink)throw new pe(63);if(d.Ua)throw new pe(10);f.Fa.unlink(f,o),Nr(d)}function Ht(o){if(o=ft(o).node,!o)throw new pe(44);if(!o.Fa.readlink)throw new pe(28);return he(ur(o.parent),o.Fa.readlink(o))}function Gt(o,f){if(o=ft(o,{Ra:!f}).node,!o)throw new pe(44);if(!o.Fa.Oa)throw new pe(63);return o.Fa.Oa(o)}function Bt(o){return Gt(o,!0)}function dr(o,f){if(o=typeof o=="string"?ft(o,{Ra:!0}).node:o,!o.Fa.Na)throw new pe(63);o.Fa.Na(o,{mode:f&4095|o.mode&-4096,timestamp:Date.now()})}function Xt(o,f){if(0>f)throw new pe(28);if(o=typeof o=="string"?ft(o,{Ra:!0}).node:o,!o.Fa.Na)throw new pe(63);if(ht(o.mode))throw new pe(31);if((o.mode&61440)!==32768)throw new pe(28);var d=Wt(o,"w");if(d)throw new pe(d);o.Fa.Na(o,{size:f,timestamp:Date.now()})}function Rt(o,f,d){if(o==="")throw new pe(44);if(typeof f=="string"){var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[f];if(typeof E>"u")throw Error(`Unknown file open mode: ${f}`);f=E}if(d=f&64?(typeof d>"u"?438:d)&4095|32768:0,typeof o=="object")var j=o;else{o=ee(o);try{j=ft(o,{Ra:!(f&131072)}).node}catch{}}if(E=!1,f&64)if(j){if(f&128)throw new pe(20)}else j=fr(o,d,0),E=!0;if(!j)throw new pe(44);if((j.mode&61440)===8192&&(f&=-513),f&65536&&!ht(j.mode))throw new pe(54);if(!E&&(d=j?(j.mode&61440)===40960?32:ht(j.mode)&&(Br(f)!=="r"||f&512)?31:Wt(j,Br(f)):44))throw new pe(d);return f&512&&!E&&Xt(j,0),f&=-131713,j=Mr({node:j,path:ur(j),flags:f,seekable:!0,position:0,Ga:j.Ga,Db:[],error:!1}),j.Ga.open&&j.Ga.open(j),!l.logReadFiles||f&1||(B||(B={}),o in B||(B[o]=1)),j}function xr(o){if(o.fd===null)throw new pe(8);o.gb&&(o.gb=null);try{o.Ga.close&&o.Ga.close(o)}catch(f){throw f}finally{lt[o.fd]=null}o.fd=null}function Wr(o,f,d){if(o.fd===null)throw new pe(8);if(!o.seekable||!o.Ga.Sa)throw new pe(70);if(d!=0&&d!=1&&d!=2)throw new pe(28);o.position=o.Ga.Sa(o,f,d),o.Db=[]}function mr(o,f,d,E,j){if(0>E||0>j)throw new pe(28);if(o.fd===null)throw new pe(8);if((o.flags&2097155)===1)throw new pe(8);if(ht(o.node.mode))throw new pe(31);if(!o.Ga.read)throw new pe(28);var Y=typeof j<"u";if(!Y)j=o.position;else if(!o.seekable)throw new pe(70);return f=o.Ga.read(o,f,d,E,j),Y||(o.position+=f),f}function Hr(o,f,d,E,j){if(0>E||0>j)throw new pe(28);if(o.fd===null)throw new pe(8);if((o.flags&2097155)===0)throw new pe(8);if(ht(o.node.mode))throw new pe(31);if(!o.Ga.write)throw new pe(28);o.seekable&&o.flags&1024&&Wr(o,0,2);var Y=typeof j<"u";if(!Y)j=o.position;else if(!o.seekable)throw new pe(70);return f=o.Ga.write(o,f,d,E,j,void 0),Y||(o.position+=f),f}function pn(o){var f,d=Rt(o,d||0);o=Gt(o).size;var E=new Uint8Array(o);return mr(d,E,0,o,0),f=E,xr(d),f}var w;function R(o,f,d){o=ee("/dev/"+o);var E=Nt(!!f,!!d);k||(k=64);var j=k++<<8|0;Sr(j,{open(Y){Y.seekable=!1},close(){var Y;(Y=d==null?void 0:d.buffer)!=null&&Y.length&&d(10)},read(Y,te,De,qe){for(var Ie=0,Xe=0;Xe<qe;Xe++){try{var rt=f()}catch{throw new pe(29)}if(rt===void 0&&Ie===0)throw new pe(6);if(rt==null)break;Ie++,te[De+Xe]=rt}return Ie&&(Y.node.timestamp=Date.now()),Ie},write(Y,te,De,qe){for(var Ie=0;Ie<qe;Ie++)try{d(te[De+Ie])}catch{throw new pe(29)}return qe&&(Y.node.timestamp=Date.now()),Ie}}),hr(o,E,j)}var k,I={},B;function C(o,f,d){if(f.charAt(0)==="/")return f;if(o=o===-100?"/":at(o).path,f.length==0){if(!d)throw new pe(44);return o}return ee(o+"/"+f)}function J(o,f,d){o=o(f),D[d>>2]=o.dev,D[d+4>>2]=o.mode,H[d+8>>2]=o.nlink,D[d+12>>2]=o.uid,D[d+16>>2]=o.gid,D[d+20>>2]=o.rdev,Ne=[o.size>>>0,(ge=o.size,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[d+24>>2]=Ne[0],D[d+28>>2]=Ne[1],D[d+32>>2]=4096,D[d+36>>2]=o.blocks,f=o.atime.getTime();var E=o.mtime.getTime(),j=o.ctime.getTime();return Ne=[Math.floor(f/1e3)>>>0,(ge=Math.floor(f/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[d+40>>2]=Ne[0],D[d+44>>2]=Ne[1],H[d+48>>2]=f%1e3*1e3,Ne=[Math.floor(E/1e3)>>>0,(ge=Math.floor(E/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[d+56>>2]=Ne[0],D[d+60>>2]=Ne[1],H[d+64>>2]=E%1e3*1e3,Ne=[Math.floor(j/1e3)>>>0,(ge=Math.floor(j/1e3),1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[d+72>>2]=Ne[0],D[d+76>>2]=Ne[1],H[d+80>>2]=j%1e3*1e3,Ne=[o.ino>>>0,(ge=o.ino,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[d+88>>2]=Ne[0],D[d+92>>2]=Ne[1],0}var ie=void 0;function ce(){var o=D[+ie>>2];return ie+=4,o}var le=(o,f)=>f+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*f:NaN,de=[0,31,60,91,121,152,182,213,244,274,305,335],we=[0,31,59,90,120,151,181,212,243,273,304,334],je={},ze=()=>{if(!Me){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:_||"./this.program"},f;for(f in je)je[f]===void 0?delete o[f]:o[f]=je[f];var d=[];for(f in o)d.push(`${f}=${o[f]}`);Me=d}return Me},Me,Ye=o=>{var f=Le(o)+1,d=Kt(f);return Pe(o,Z,d,f),d},Ve=(o,f,d,E)=>{var j={string:Ie=>{var Xe=0;return Ie!=null&&Ie!==0&&(Xe=Ye(Ie)),Xe},array:Ie=>{var Xe=Kt(Ie.length);return M.set(Ie,Xe),Xe}};o=l["_"+o];var Y=[],te=0;if(E)for(var De=0;De<E.length;De++){var qe=j[d[De]];qe?(te===0&&(te=Dr()),Y[De]=qe(E[De])):Y[De]=E[De]}return d=o(...Y),d=function(Ie){return te!==0&&Pr(te),f==="string"?Ie?$(Z,Ie):"":f==="boolean"?!!Ie:Ie}(d)},ot=0,jt=(o,f)=>(f=f==1?Kt(o.length):yn(o.length),o.subarray||o.slice||(o=new Uint8Array(o)),Z.set(o,f),f),Tt,$r=[],vt,er=o=>{Tt.delete(vt.get(o)),vt.set(o,null),$r.push(o)},pr=(o,f)=>{if(!Tt){Tt=new WeakMap;var d=vt.length;if(Tt)for(var E=0;E<0+d;E++){var j=vt.get(E);j&&Tt.set(j,E)}}if(d=Tt.get(o)||0)return d;if($r.length)d=$r.pop();else{try{vt.grow(1)}catch(De){throw De instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":De}d=vt.length-1}try{vt.set(d,o)}catch(De){if(!(De instanceof TypeError))throw De;if(typeof WebAssembly.Function=="function"){E=WebAssembly.Function,j={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var Y={parameters:[],results:f[0]=="v"?[]:[j[f[0]]]},te=1;te<f.length;++te)Y.parameters.push(j[f[te]]);f=new E(Y,o)}else{for(E=[1],j=f.slice(0,1),f=f.slice(1),Y={i:127,p:127,j:126,f:125,d:124,e:111},E.push(96),te=f.length,128>te?E.push(te):E.push(te%128|128,te>>7),te=0;te<f.length;++te)E.push(Y[f[te]]);j=="v"?E.push(0):E.push(1,Y[j]),f=[0,97,115,109,1,0,0,0,1],j=E.length,128>j?f.push(j):f.push(j%128|128,j>>7),f.push(...E),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),f=new WebAssembly.Module(new Uint8Array(f)),f=new WebAssembly.Instance(f,{e:{f:o}}).exports.f}vt.set(d,f)}return Tt.set(o,d),d};[44].forEach(o=>{_r[o]=new pe(o),_r[o].stack="<generic error, no stack>"}),ut=Array(4096),qr($e,"/"),wt("/tmp"),wt("/home"),wt("/home/web_user"),function(){wt("/dev"),Sr(259,{read:()=>0,write:(E,j,Y,te)=>te}),hr("/dev/null",259),ct(1280,We),ct(1536,Dt),hr("/dev/tty",1280),hr("/dev/tty1",1536);var o=new Uint8Array(1024),f=0,d=()=>(f===0&&(f=ye(o).byteLength),o[--f]);R("random",d),R("urandom",d),wt("/dev/shm"),wt("/dev/shm/tmp")}(),function(){wt("/proc");var o=wt("/proc/self");wt("/proc/self/fd"),qr({Qa(){var f=Fr(o,"fd",16895,73);return f.Fa={lookup(d,E){var j=at(+E);return d={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>j.path}},d.parent=d}},f}},"/proc/self/fd")}();var gn={a:(o,f,d,E)=>{_e(`Assertion failed: ${o?$(Z,o):""}, at: `+[f?f?$(Z,f):"":"unknown filename",d,E?E?$(Z,E):"":"unknown function"])},h:function(o,f){try{return o=o?$(Z,o):"",dr(o,f),0}catch(d){if(typeof I>"u"||d.name!=="ErrnoError")throw d;return-d.Ja}},H:function(o,f,d){try{if(f=f?$(Z,f):"",f=C(o,f),d&-8)return-28;var E=ft(f,{Ra:!0}).node;return E?(o="",d&4&&(o+="r"),d&2&&(o+="w"),d&1&&(o+="x"),o&&Wt(E,o)?-2:0):-44}catch(j){if(typeof I>"u"||j.name!=="ErrnoError")throw j;return-j.Ja}},i:function(o,f){try{var d=at(o);return dr(d.node,f),0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},g:function(o){try{var f=at(o).node,d=typeof f=="string"?ft(f,{Ra:!0}).node:f;if(!d.Fa.Na)throw new pe(63);return d.Fa.Na(d,{timestamp:Date.now()}),0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},b:function(o,f,d){ie=d;try{var E=at(o);switch(f){case 0:var j=ce();if(0>j)break;for(;lt[j];)j++;return dn(E,j).fd;case 1:case 2:return 0;case 3:return E.flags;case 4:return j=ce(),E.flags|=j,0;case 12:return j=ce(),be[j+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(Y){if(typeof I>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},f:function(o,f){try{var d=at(o);return J(Gt,d.path,f)}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},n:function(o,f,d){f=le(f,d);try{if(isNaN(f))return 61;var E=at(o);if((E.flags&2097155)===0)throw new pe(28);return Xt(E.node,f),0}catch(j){if(typeof I>"u"||j.name!=="ErrnoError")throw j;return-j.Ja}},C:function(o,f){try{if(f===0)return-28;var d=Le("/")+1;return f<d?-68:(Pe("/",Z,o,f),d)}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},F:function(o,f){try{return o=o?$(Z,o):"",J(Bt,o,f)}catch(d){if(typeof I>"u"||d.name!=="ErrnoError")throw d;return-d.Ja}},z:function(o,f,d){try{return f=f?$(Z,f):"",f=C(o,f),f=ee(f),f[f.length-1]==="/"&&(f=f.substr(0,f.length-1)),wt(f,d),0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},E:function(o,f,d,E){try{f=f?$(Z,f):"";var j=E&256;return f=C(o,f,E&4096),J(j?Bt:Gt,f,d)}catch(Y){if(typeof I>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},x:function(o,f,d,E){ie=E;try{f=f?$(Z,f):"",f=C(o,f);var j=E?ce():0;return Rt(f,d,j).fd}catch(Y){if(typeof I>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ja}},v:function(o,f,d,E){try{if(f=f?$(Z,f):"",f=C(o,f),0>=E)return-28;var j=Ht(f),Y=Math.min(E,Le(j)),te=M[d+Y];return Pe(j,Z,d,E+1),M[d+Y]=te,Y}catch(De){if(typeof I>"u"||De.name!=="ErrnoError")throw De;return-De.Ja}},u:function(o){try{return o=o?$(Z,o):"",Ur(o),0}catch(f){if(typeof I>"u"||f.name!=="ErrnoError")throw f;return-f.Ja}},G:function(o,f){try{return o=o?$(Z,o):"",J(Gt,o,f)}catch(d){if(typeof I>"u"||d.name!=="ErrnoError")throw d;return-d.Ja}},r:function(o,f,d){try{return f=f?$(Z,f):"",f=C(o,f),d===0?kr(f):d===512?Ur(f):_e("Invalid flags passed to unlinkat"),0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},q:function(o,f,d){try{if(f=f?$(Z,f):"",f=C(o,f,!0),d){var E=H[d>>2]+4294967296*D[d+4>>2],j=D[d+8>>2];Y=1e3*E+j/1e6,d+=16,E=H[d>>2]+4294967296*D[d+4>>2],j=D[d+8>>2],te=1e3*E+j/1e6}else var Y=Date.now(),te=Y;o=Y;var De=ft(f,{Ra:!0}).node;return De.Fa.Na(De,{timestamp:Math.max(o,te)}),0}catch(qe){if(typeof I>"u"||qe.name!=="ErrnoError")throw qe;return-qe.Ja}},l:function(o,f,d){o=new Date(1e3*le(o,f)),D[d>>2]=o.getSeconds(),D[d+4>>2]=o.getMinutes(),D[d+8>>2]=o.getHours(),D[d+12>>2]=o.getDate(),D[d+16>>2]=o.getMonth(),D[d+20>>2]=o.getFullYear()-1900,D[d+24>>2]=o.getDay(),f=o.getFullYear(),D[d+28>>2]=(f%4!==0||f%100===0&&f%400!==0?we:de)[o.getMonth()]+o.getDate()-1|0,D[d+36>>2]=-(60*o.getTimezoneOffset()),f=new Date(o.getFullYear(),6,1).getTimezoneOffset();var E=new Date(o.getFullYear(),0,1).getTimezoneOffset();D[d+32>>2]=(f!=E&&o.getTimezoneOffset()==Math.min(E,f))|0},j:function(o,f,d,E,j,Y,te,De){j=le(j,Y);try{if(isNaN(j))return 61;var qe=at(E);if((f&2)!==0&&(d&2)===0&&(qe.flags&2097155)!==2)throw new pe(2);if((qe.flags&2097155)===1)throw new pe(2);if(!qe.Ga.ab)throw new pe(43);var Ie=qe.Ga.ab(qe,o,j,f,d),Xe=Ie.Cb;return D[te>>2]=Ie.tb,H[De>>2]=Xe,0}catch(rt){if(typeof I>"u"||rt.name!=="ErrnoError")throw rt;return-rt.Ja}},k:function(o,f,d,E,j,Y,te){Y=le(Y,te);try{var De=at(j);if(d&2){if((De.node.mode&61440)!==32768)throw new pe(43);if(!(E&2)){var qe=Z.slice(o,o+f);De.Ga.bb&&De.Ga.bb(De,qe,Y,f,E)}}}catch(Ie){if(typeof I>"u"||Ie.name!=="ErrnoError")throw Ie;return-Ie.Ja}},y:(o,f,d,E)=>{var j=new Date().getFullYear(),Y=new Date(j,0,1).getTimezoneOffset();j=new Date(j,6,1).getTimezoneOffset(),H[o>>2]=60*Math.max(Y,j),D[f>>2]=+(Y!=j),f=te=>{var De=Math.abs(te);return`UTC${0<=te?"-":"+"}${String(Math.floor(De/60)).padStart(2,"0")}${String(De%60).padStart(2,"0")}`},o=f(Y),f=f(j),j<Y?(Pe(o,Z,d,17),Pe(f,Z,E,17)):(Pe(o,Z,E,17),Pe(f,Z,d,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:o=>{var f=Z.length;if(o>>>=0,2147483648<o)return!1;for(var d=1;4>=d;d*=2){var E=f*(1+.2/d);E=Math.min(E,o+100663296);var j=Math;E=Math.max(o,E);e:{j=(j.min.call(j,2147483648,E+(65536-E%65536)%65536)-L.buffer.byteLength+65535)/65536;try{L.grow(j),ke();var Y=1;break e}catch{}Y=void 0}if(Y)return!0}return!1},A:(o,f)=>{var d=0;return ze().forEach((E,j)=>{var Y=f+d;for(j=H[o+4*j>>2]=Y,Y=0;Y<E.length;++Y)M[j++]=E.charCodeAt(Y);M[j]=0,d+=E.length+1}),0},B:(o,f)=>{var d=ze();H[o>>2]=d.length;var E=0;return d.forEach(j=>E+=j.length+1),H[f>>2]=E,0},e:function(o){try{var f=at(o);return xr(f),0}catch(d){if(typeof I>"u"||d.name!=="ErrnoError")throw d;return d.Ja}},p:function(o,f){try{var d=at(o);return M[f]=d.tty?2:ht(d.mode)?3:(d.mode&61440)===40960?7:4,be[f+2>>1]=0,Ne=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[f+8>>2]=Ne[0],D[f+12>>2]=Ne[1],Ne=[0,(ge=0,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[f+16>>2]=Ne[0],D[f+20>>2]=Ne[1],0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return E.Ja}},w:function(o,f,d,E){try{e:{var j=at(o);o=f;for(var Y,te=f=0;te<d;te++){var De=H[o>>2],qe=H[o+4>>2];o+=8;var Ie=mr(j,M,De,qe,Y);if(0>Ie){var Xe=-1;break e}if(f+=Ie,Ie<qe)break;typeof Y<"u"&&(Y+=Ie)}Xe=f}return H[E>>2]=Xe,0}catch(rt){if(typeof I>"u"||rt.name!=="ErrnoError")throw rt;return rt.Ja}},m:function(o,f,d,E,j){f=le(f,d);try{if(isNaN(f))return 61;var Y=at(o);return Wr(Y,f,E),Ne=[Y.position>>>0,(ge=Y.position,1<=+Math.abs(ge)?0<ge?+Math.floor(ge/4294967296)>>>0:~~+Math.ceil((ge-+(~~ge>>>0))/4294967296)>>>0:0)],D[j>>2]=Ne[0],D[j+4>>2]=Ne[1],Y.gb&&f===0&&E===0&&(Y.gb=null),0}catch(te){if(typeof I>"u"||te.name!=="ErrnoError")throw te;return te.Ja}},D:function(o){var d;try{var f=at(o);return(d=f.Ga)!=null&&d.fsync?f.Ga.fsync(f):0}catch(E){if(typeof I>"u"||E.name!=="ErrnoError")throw E;return E.Ja}},t:function(o,f,d,E){try{e:{var j=at(o);o=f;for(var Y,te=f=0;te<d;te++){var De=H[o>>2],qe=H[o+4>>2];o+=8;var Ie=Hr(j,M,De,qe,Y);if(0>Ie){var Xe=-1;break e}f+=Ie,typeof Y<"u"&&(Y+=Ie)}Xe=f}return H[E>>2]=Xe,0}catch(rt){if(typeof I>"u"||rt.name!=="ErrnoError")throw rt;return rt.Ja}}},Te=function(){var d;function o(E){var j;return Te=E.exports,L=Te.I,ke(),vt=Te.K,Re.unshift(Te.J),U--,(j=l.monitorRunDependencies)==null||j.call(l,U),U==0&&W&&(E=W,W=null,E()),Te}var f={a:gn};if(U++,(d=l.monitorRunDependencies)==null||d.call(l,U),l.instantiateWasm)try{return l.instantiateWasm(f,o)}catch(E){return A(`Module.instantiateWasm callback failed with error: ${E}`),!1}return Ue||(Ue=ve("sql-wasm.wasm")?"sql-wasm.wasm":l.locateFile?l.locateFile("sql-wasm.wasm",b):b+"sql-wasm.wasm"),Ze(f,function(E){o(E.instance)}),{}}();l._sqlite3_free=o=>(l._sqlite3_free=Te.L)(o),l._sqlite3_value_text=o=>(l._sqlite3_value_text=Te.M)(o),l._sqlite3_prepare_v2=(o,f,d,E,j)=>(l._sqlite3_prepare_v2=Te.N)(o,f,d,E,j),l._sqlite3_step=o=>(l._sqlite3_step=Te.O)(o),l._sqlite3_reset=o=>(l._sqlite3_reset=Te.P)(o),l._sqlite3_exec=(o,f,d,E,j)=>(l._sqlite3_exec=Te.Q)(o,f,d,E,j),l._sqlite3_finalize=o=>(l._sqlite3_finalize=Te.R)(o),l._sqlite3_column_name=(o,f)=>(l._sqlite3_column_name=Te.S)(o,f),l._sqlite3_column_text=(o,f)=>(l._sqlite3_column_text=Te.T)(o,f),l._sqlite3_column_type=(o,f)=>(l._sqlite3_column_type=Te.U)(o,f),l._sqlite3_errmsg=o=>(l._sqlite3_errmsg=Te.V)(o),l._sqlite3_clear_bindings=o=>(l._sqlite3_clear_bindings=Te.W)(o),l._sqlite3_value_blob=o=>(l._sqlite3_value_blob=Te.X)(o),l._sqlite3_value_bytes=o=>(l._sqlite3_value_bytes=Te.Y)(o),l._sqlite3_value_double=o=>(l._sqlite3_value_double=Te.Z)(o),l._sqlite3_value_int=o=>(l._sqlite3_value_int=Te._)(o),l._sqlite3_value_type=o=>(l._sqlite3_value_type=Te.$)(o),l._sqlite3_result_blob=(o,f,d,E)=>(l._sqlite3_result_blob=Te.aa)(o,f,d,E),l._sqlite3_result_double=(o,f)=>(l._sqlite3_result_double=Te.ba)(o,f),l._sqlite3_result_error=(o,f,d)=>(l._sqlite3_result_error=Te.ca)(o,f,d),l._sqlite3_result_int=(o,f)=>(l._sqlite3_result_int=Te.da)(o,f),l._sqlite3_result_int64=(o,f,d)=>(l._sqlite3_result_int64=Te.ea)(o,f,d),l._sqlite3_result_null=o=>(l._sqlite3_result_null=Te.fa)(o),l._sqlite3_result_text=(o,f,d,E)=>(l._sqlite3_result_text=Te.ga)(o,f,d,E),l._sqlite3_aggregate_context=(o,f)=>(l._sqlite3_aggregate_context=Te.ha)(o,f),l._sqlite3_column_count=o=>(l._sqlite3_column_count=Te.ia)(o),l._sqlite3_data_count=o=>(l._sqlite3_data_count=Te.ja)(o),l._sqlite3_column_blob=(o,f)=>(l._sqlite3_column_blob=Te.ka)(o,f),l._sqlite3_column_bytes=(o,f)=>(l._sqlite3_column_bytes=Te.la)(o,f),l._sqlite3_column_double=(o,f)=>(l._sqlite3_column_double=Te.ma)(o,f),l._sqlite3_bind_blob=(o,f,d,E,j)=>(l._sqlite3_bind_blob=Te.na)(o,f,d,E,j),l._sqlite3_bind_double=(o,f,d)=>(l._sqlite3_bind_double=Te.oa)(o,f,d),l._sqlite3_bind_int=(o,f,d)=>(l._sqlite3_bind_int=Te.pa)(o,f,d),l._sqlite3_bind_text=(o,f,d,E,j)=>(l._sqlite3_bind_text=Te.qa)(o,f,d,E,j),l._sqlite3_bind_parameter_index=(o,f)=>(l._sqlite3_bind_parameter_index=Te.ra)(o,f),l._sqlite3_sql=o=>(l._sqlite3_sql=Te.sa)(o),l._sqlite3_normalized_sql=o=>(l._sqlite3_normalized_sql=Te.ta)(o),l._sqlite3_changes=o=>(l._sqlite3_changes=Te.ua)(o),l._sqlite3_close_v2=o=>(l._sqlite3_close_v2=Te.va)(o),l._sqlite3_create_function_v2=(o,f,d,E,j,Y,te,De,qe)=>(l._sqlite3_create_function_v2=Te.wa)(o,f,d,E,j,Y,te,De,qe),l._sqlite3_open=(o,f)=>(l._sqlite3_open=Te.xa)(o,f);var yn=l._malloc=o=>(yn=l._malloc=Te.ya)(o),Gr=l._free=o=>(Gr=l._free=Te.za)(o);l._RegisterExtensionFunctions=o=>(l._RegisterExtensionFunctions=Te.Aa)(o);var zn=(o,f)=>(zn=Te.Ba)(o,f),Pr=o=>(Pr=Te.Ca)(o),Kt=o=>(Kt=Te.Da)(o),Dr=()=>(Dr=Te.Ea)();l.stackSave=()=>Dr(),l.stackRestore=o=>Pr(o),l.stackAlloc=o=>Kt(o),l.cwrap=(o,f,d,E)=>{var j=!d||d.every(Y=>Y==="number"||Y==="boolean");return f!=="string"&&j&&!E?l["_"+o]:(...Y)=>Ve(o,f,d,Y)},l.addFunction=pr,l.removeFunction=er,l.UTF8ToString=x,l.ALLOC_NORMAL=ot,l.allocate=jt,l.allocateUTF8OnStack=Ye;var Kr;W=function o(){Kr||Mn(),Kr||(W=o)};function Mn(){function o(){var d;if(!Kr&&(Kr=!0,l.calledRun=!0,!Q)){if(l.noFSInit||w||(w=!0,l.stdin=l.stdin,l.stdout=l.stdout,l.stderr=l.stderr,l.stdin?R("stdin",l.stdin):Tr("/dev/tty","/dev/stdin"),l.stdout?R("stdout",null,l.stdout):Tr("/dev/tty","/dev/stdout"),l.stderr?R("stderr",null,l.stderr):Tr("/dev/tty1","/dev/stderr"),Rt("/dev/stdin",0),Rt("/dev/stdout",1),Rt("/dev/stderr",1)),At=!1,it(Re),(d=l.onRuntimeInitialized)==null||d.call(l),l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;){var f=l.postRun.shift();ue.unshift(f)}it(ue)}}if(!(0<U)){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)xe();it(ae),0<U||(l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),o()},1)):o())}}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);0<l.preInit.length;)l.preInit.pop()();return Mn(),c}),t)};a.exports=r,a.exports.default=r})(Zs);const Yo=Zs.exports;class Fe{static async getDBFromStore(e,t){try{const r=await t.getItem(e);return Promise.resolve(r)}catch(r){return Promise.reject(`GetDBFromStore: ${r.message}`)}}static async setInitialDBToStore(e,t){try{return await t.setItem(e,null),Promise.resolve()}catch(r){return Promise.reject(`SetInitialDBToStore: ${r.message}`)}}static async setDBToStore(e,t,r){try{const n=e.export();return await Fe.saveDBToStore(t,n,r),Promise.resolve()}catch(n){return Promise.reject(`SetDBToStore: ${n.message}`)}}static async saveDBToStore(e,t,r){try{return await r.removeItem(e),await r.setItem(e,t),Promise.resolve()}catch(n){return Promise.reject(`SaveDBToStore: ${n.message}`)}}static async removeDBFromStore(e,t){try{return await t.removeItem(e),Promise.resolve()}catch(r){return Promise.reject(`RemoveDBFromStore: ${r.message}`)}}static async isDBInStore(e,t){try{const r=await t.getItem(e);return r!=null&&r.length>0?Promise.resolve(!0):Promise.resolve(!1)}catch(r){return Promise.reject(`IsDBInStore: ${r}`)}}static async restoreDBFromStore(e,t,r){const n=`${t}-${e}`;try{if(await Fe.isDBInStore(n,r))if(await Fe.isDBInStore(e,r)){const c=await Fe.getDBFromStore(n,r);return await Fe.saveDBToStore(e,c,r),await Fe.removeDBFromStore(n,r),Promise.resolve()}else return Promise.reject(new Error(`RestoreDBFromStore: ${e} does not exist`));else return Promise.reject(new Error(`RestoreDBFromStore: ${n} does not exist`))}catch(s){return Promise.reject(`RestoreDBFromStore: ${s.message}`)}}static async copyDBToStore(e,t,r){try{if(await Fe.isDBInStore(e,r)){const s=await Fe.getDBFromStore(e,r);return await Fe.saveDBToStore(t,s,r),Promise.resolve()}else return Promise.reject(new Error(`CopyDBToStore: ${e} does not exist`))}catch(n){return Promise.reject(`CopyDBToStore: ${n.message}`)}}static async getDBListFromStore(e){try{const t=await e.keys();return Promise.resolve(t)}catch(t){return Promise.reject(`GetDBListFromStore: ${t.message}`)}}}class $t{static async getTablesNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await ne.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTablesNames: ${n.message}`))}}static async getViewsNames(e){let t="SELECT name FROM sqlite_master WHERE ";t+="type='view' AND name NOT LIKE 'sqlite_%' ",t+="ORDER BY rootpage DESC;";const r=[];try{const n=await ne.queryAll(e,t,[]);for(const s of n)r.push(s.name);return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`getViewsNames: ${n.message}`))}}static async dropElements(e,t){let r="",n="AND name NOT LIKE ('sqlite_%')";switch(t){case"index":r="DropIndexes";break;case"trigger":r="DropTriggers";break;case"table":r="DropTables",n+=" AND name NOT IN ('sync_table')";break;case"view":r="DropViews";break;default:return Promise.reject(new Error(`DropElements: ${t} not found`))}let s="SELECT name FROM sqlite_master WHERE ";s+=`type = '${t}' ${n};`;try{const i=await ne.queryAll(e,s,[]);if(i.length>0){const c=t.toUpperCase(),u=[];for(const l of i){let g=`DROP ${c} IF EXISTS `;g+=`${l.name};`,u.push(g)}for(const l of u)if(await ne.run(e,l,[],!1,"no")<0)return Promise.reject(new Error(`DropElements: ${r}: lastId < 0`))}return Promise.resolve()}catch(i){return Promise.reject(new Error(`DropElements: ${r}: ${i.message}`))}}static async dropAll(e){try{return await $t.dropElements(e,"table"),await $t.dropElements(e,"index"),await $t.dropElements(e,"trigger"),await $t.dropElements(e,"view"),await ne.run(e,"VACUUM;",[],!1,"no"),Promise.resolve()}catch(t){return Promise.reject(new Error(`DropAll: ${t.message}`))}}static async dropTempTables(e,t){const r=Object.keys(t),n=[];for(const s of r){let i="DROP TABLE IF EXISTS ";i+=`_temp_${s};`,n.push(i)}try{return await ne.execute(e,n.join(`
`),!1)<0?Promise.reject(new Error("DropTempTables: changes < 0")):Promise.resolve()}catch(s){return Promise.reject(new Error(`DropTempTables: ${s.message}`))}}}class Ge{static async isJsonSQLite(e){const t=["database","version","overwrite","encrypted","mode","tables","views"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e)){if(t.indexOf(r)===-1||r==="database"&&typeof e[r]!="string"||r==="version"&&typeof e[r]!="number"||r==="overwrite"&&typeof e[r]!="boolean"||r==="encrypted"&&typeof e[r]!="boolean"||r==="mode"&&typeof e[r]!="string"||r==="tables"&&typeof e[r]!="object")return!1;if(r==="tables"){for(const n of e[r])if(!await Ge.isTable(n))return!1}if(r==="views"&&typeof e[r]!="object")return!1;if(r==="views"){for(const n of e[r])if(!await Ge.isView(n))return!1}}return!0}static async isTable(e){const t=["name","schema","indexes","triggers","values"];let r=0;if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const n of Object.keys(e)){if(t.indexOf(n)===-1||n==="name"&&typeof e[n]!="string"||n==="schema"&&typeof e[n]!="object"||n==="indexes"&&typeof e[n]!="object"||n==="triggers"&&typeof e[n]!="object"||n==="values"&&typeof e[n]!="object")return!1;if(n==="schema"){e.schema.forEach(s=>{s.column&&r++});for(let s=0;s<r;s++)if(!await Ge.isSchema(e[n][s]))return!1}if(n==="indexes"){for(const s of e[n])if(!await Ge.isIndexes(s))return!1}if(n==="triggers"){for(const s of e[n])if(!await Ge.isTriggers(s))return!1}if(n==="values"&&r>0){for(const s of e[n])if(typeof s!="object"||s.length!=r)return!1}}return!0}static async isSchema(e){const t=["column","value","foreignkey","primarykey","constraint"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="column"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="foreignkey"&&typeof e[r]!="string"||r==="primarykey"&&typeof e[r]!="string"||r==="constraint"&&typeof e[r]!="string")return!1;return!0}static async isIndexes(e){const t=["name","value","mode"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string"||r==="mode"&&(typeof e[r]!="string"||e[r].toUpperCase()!="UNIQUE"))return!1;return!0}static async isTriggers(e){const t=["name","timeevent","condition","logic"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="timeevent"&&typeof e[r]!="string"||r==="condition"&&typeof e[r]!="string"||r==="logic"&&typeof e[r]!="string")return!1;return!0}static async isView(e){const t=["name","value"];if(e==null||Object.keys(e).length===0&&e.constructor===Object)return!1;for(const r of Object.keys(e))if(t.indexOf(r)===-1||r==="name"&&typeof e[r]!="string"||r==="value"&&typeof e[r]!="string")return!1;return!0}static async checkSchemaValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("column")&&(r.column=e[t].column),n.includes("value")&&(r.value=e[t].value),n.includes("foreignkey")&&(r.foreignkey=e[t].foreignkey),n.includes("constraint")&&(r.constraint=e[t].constraint),!await Ge.isSchema(r))return Promise.reject(new Error(`CheckSchemaValidity: schema[${t}] not valid`))}return Promise.resolve()}static async checkIndexesValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),n.includes("mode")&&(r.mode=e[t].mode),!await Ge.isIndexes(r))return Promise.reject(new Error(`CheckIndexesValidity: indexes[${t}] not valid`))}return Promise.resolve()}static async checkTriggersValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("logic")&&(r.logic=e[t].logic),n.includes("name")&&(r.name=e[t].name),n.includes("timeevent")&&(r.timeevent=e[t].timeevent),n.includes("condition")&&(r.condition=e[t].condition),!await Ge.isTriggers(r))return Promise.reject(new Error(`CheckTriggersValidity: triggers[${t}] not valid`))}return Promise.resolve()}static async checkViewsValidity(e){for(let t=0;t<e.length;t++){const r={},n=Object.keys(e[t]);if(n.includes("value")&&(r.value=e[t].value),n.includes("name")&&(r.name=e[t].name),!await Ge.isView(r))return Promise.reject(new Error(`CheckViewsValidity: views[${t}] not valid`))}return Promise.resolve()}static async getTableColumnNamesTypes(e,t){let r=[];const n=[],s=[],i=`PRAGMA table_info('${t}');`;try{if(r=await ne.queryAll(e,i,[]),r.length>0)for(const c of r)n.push(c.name),s.push(c.type);return Promise.resolve({names:n,types:s})}catch(c){return Promise.reject(new Error(`GetTableColumnNamesTypes: ${c.message}`))}}static async getValues(e,t,r){const n=[];try{const s=await Ge.getTableColumnNamesTypes(e,r);let i=[];if(Object.keys(s).includes("names"))i=s.names;else return Promise.reject(new Error(`GetValues: Table ${r} no names`));const c=await ne.queryAll(e,t,[]);for(const u of c){const l=[];for(const g of i)Object.keys(u).includes(g)?l.push(u[g]):l.push(null);n.push(l)}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`GetValues: ${s.message}`))}}}class et{static extractTableName(e){const t=/(?:INSERT\s+INTO|UPDATE|DELETE\s+FROM)\s+([^\s]+)/i,r=e.match(t);return r&&r[1]?r[1]:null}static extractWhereClause(e){const t=/WHERE(.+?)(?:ORDER\s+BY|LIMIT|$)/i,r=e.match(t);return r&&r[1]?r[1].trim():null}static addPrefixToWhereClause(e,t,r,n){let s;return e.includes("AND")?s=e.split("AND").map(u=>u.trim()):s=[e],s.map(c=>{const u=c.match(/(\w+)\s*(=|<|<=|<>|>|>=|IN|BETWEEN|LIKE)\s*(.+)/);if(!u)return c;const l=u[1].trim(),g=u[2].trim();let h=u[3].trim(),y=l;const p=et.findIndexOfStringInArray(l,r);return p!==-1&&(y=et.getStringAtIndex(t,p)),`${`${n}${y}`} ${g} ${h}`}).join(" AND ")}static findIndexOfStringInArray(e,t){return t.indexOf(e)}static getStringAtIndex(e,t){if(t>=0&&t<e.length)return e[t]}static extractForeignKeyInfo(e){const t=/\bFOREIGN\s+KEY\s*\(([^)]+)\)\s+REFERENCES\s+(\w+)\s*\(([^)]+)\)\s+(ON\s+DELETE\s+(RESTRICT|CASCADE|SET\s+NULL|SET\s+DEFAULT|NO\s+ACTION))?/,r=e.match(t);if(r)return{forKeys:r[1].split(",").map(s=>s.trim()),tableName:r[2],refKeys:r[3].split(",").map(s=>s.trim()),action:r[5]?r[5]:"NO ACTION"};throw new Error("extractForeignKeyInfo: No FOREIGN KEY found")}static extractColumnNames(e){const t=new Set(["AND","OR","IN","VALUES","LIKE","BETWEEN","NOT"]),r=/\b[a-zA-Z]\w*\b(?=\s*(?:<=?|>=?|<>?|=|AND|OR|BETWEEN|NOT|IN|LIKE))|\b[a-zA-Z]\w*\b\s+BETWEEN\s+'[^']+'\s+AND\s+'[^']+'|\(([^)]+)\)\s+IN\s+\(?\s*VALUES\s*\(/g;let n;const s=[];for(;(n=r.exec(e))!==null;){const i=n[1];if(i){const c=i.split(",");for(const u of c)s.push(u.trim())}else{const c=n[0];t.has(c.trim().toUpperCase())||s.push(c.trim())}}return s}static flattenMultilineString(e){return e.split(/\r?\n/).join(" ")}static getStmtAndRetColNames(e,t){const r="RETURNING",n={stmt:e,names:""},s=e.toUpperCase().indexOf(r);if(s!==-1){const i=e.substring(0,s);if(n.stmt=`${i};`,t.substring(0,2)==="wA"){const u=e.substring(s+r.length).trim();u.endsWith(";")?n.names=u.substring(0,u.length-1):n.names=u}}return n}static extractCombinedPrimaryKey(e){const t=/WHERE\s*\((.+?)\)\s*(?:=|IN)\s*\((.+?)\)/g,r=new RegExp(t),n=e.matchAll(r),s=[];for(const i of n){const u=i[1].trim().split(",").map(l=>l.trim());s.push(u)}return s.length===0?null:s}static getWhereStmtForCombinedPK(e,t,r,n){let s=e;for(const i of n){const c=i.join(",")===t.join(",")?r:t;for(const[u,l]of i.entries())s=et.replaceAllString(s,l,c[u])}return s}static replaceAllString(e,t,r){return e.split(t).join(r)}static indicesOf(e,t,r=0){const n=[];let s=e.indexOf(t,r);for(;s!==-1;)n.push(s),s=e.indexOf(t,s+1);return n}static getWhereStmtForNonCombinedPK(e,t,r){let n="",s=e.substring(6);for(let i=0;i<t.length;i++){let c="withRefsNames",u=et.indicesOf(s,t[i]);if(u.length===0&&(u=et.indicesOf(s,r[i]),c="colNames"),u.length>0){let l="";const g=et.indicesOf(s,"=",u[0]);if(g.length>0){const h=et.indicesOf(s,"AND",g[0]);h.length>0?(l=s.substring(g[0]+1,h[0]-1),s=s.substring(h[0]+3)):l=s.substring(g[0]+1),i>0&&(n+=" AND "),c==="withRefsNames"?n+=r[i]+" = "+l:n+=t[i]+" = "+l}}}return n="WHERE "+n,n}static updateWhere(e,t,r){let n="";if(e.length<=0||e.toUpperCase().substring(0,5)!=="WHERE")return n;if(t.length===r.length){const s=et.extractCombinedPrimaryKey(e);s?n=et.getWhereStmtForCombinedPK(e,t,r,s):n=et.getWhereStmtForNonCombinedPK(e,t,r)}return n}}et.replaceString=(a,e,t)=>{const r=a.indexOf(e);return r!==-1?a.substring(0,r)+t+a.substring(r+e.length):a};class Qe{static findReferencesAndUpdate(e){return new Qe(e)}static getRefs(e){return new Qe(e)}static getReferences(e){return new Qe(e)}static searchForRelatedItems(e){return new Qe(e)}static upDateWhereForDefault(e){return new Qe(e)}static upDateWhereForRestrict(e){return new Qe(e)}static upDateWhereForCascade(e){return new Qe(e)}static executeUpdateForDelete(e){return new Qe(e)}constructor(e){this.message=e}}class It{static async findReferencesAndUpdate(e,t,r,n,s){try{let i=!0;const c=await It.getReferences(e,t),u=c.retRefs,l=c.tableWithRefs;if(u.length<=0||t===l)return i;for(const g of u){const h=et.extractForeignKeyInfo(g),y=h.tableName;if(y===""||y!==t)continue;const p=h.forKeys,_=h.refKeys;if(_.length!==p.length)throw Qe.findReferencesAndUpdate("findReferencesAndUpdate: mismatch length");const b=h.action;if(b==="NO_ACTION")continue;let T=l,S=p,P={uWhereStmt:"",setStmt:""};if(It.checkValuesMatch(p,n))throw Qe.findReferencesAndUpdate("Not implemented. Please transfer your example to the maintener");{const O=await It.searchForRelatedItems(e,T,t,r,p,_,s);if(O.relatedItems.length===0&&O.key.length<=0)continue;if(T!==t)switch(b){case"RESTRICT":P=await It.upDateWhereForRestrict(O);break;case"CASCADE":P=await It.upDateWhereForCascade(O);break;default:P=await It.upDateWhereForDefault(p,O);break}}P.setStmt.length>0&&P.uWhereStmt.length>0&&It.executeUpdateForDelete(e,T,P.uWhereStmt,P.setStmt,S,s)}return i}catch(i){const c=i.message?i.message:i;throw i instanceof Qe?Qe.findReferencesAndUpdate(c):i}}static async getReferences(e,t){const r="SELECT sql FROM sqlite_master WHERE sql LIKE('%FOREIGN KEY%') AND sql LIKE('%REFERENCES%') AND sql LIKE('%"+t+"%') AND sql LIKE('%ON DELETE%');";try{const n=await ne.queryAll(e,r,[]);let s=[],i="";if(n.length>0){let c=It.getRefs(n[0].sql);s=c.foreignKeys,i=c.tableName}return Promise.resolve({tableWithRefs:i,retRefs:s})}catch(n){const i=`getReferences: ${n.message?n.message:n}`;throw Qe.getReferences(i)}}static getRefs(e){let t="";const r=[],n=et.flattenMultilineString(e);try{const s=/CREATE\s+TABLE\s+(\w+)\s+\(/,i=n.match(s);i&&(t=i[1]);const c=/FOREIGN\s+KEY\s+\([^)]+\)\s+REFERENCES\s+(\w+)\s*\([^)]+\)\s+ON\s+DELETE\s+(CASCADE|RESTRICT|SET\s+DEFAULT|SET\s+NULL|NO\s+ACTION)/g,u=n.matchAll(c);for(const l of u){const g=l[0];r.push(g)}}catch(s){const i=`getRefs: Error creating regular expression: ${s}`;throw Qe.getRefs(i)}return{tableName:t,foreignKeys:r}}static async getReferencedTableName(e){var t="";if(e.length>0){const r=e.split(new RegExp("REFERENCES","i"));if(r.length===2){const n=r[1].indexOf("(");t=r[1].substring(0,n).trim()}}return t}static async searchForRelatedItems(e,t,r,n,s,i,c){const u=[];let l="";const g=s.map(y=>`t1.${y}`),h=i.map(y=>`t2.${y}`);try{let y=et.addPrefixToWhereClause(n,i,s,"t2.");y.endsWith(";")&&(y=y.slice(0,-1));const p=g.map((T,S)=>`${T} = ${h[S]}`).join(" AND "),_=`SELECT t1.rowid FROM ${t} t1 JOIN ${r} t2 ON ${p} WHERE ${y} AND t1.sql_deleted = 0;`,b=await ne.queryAll(e,_,c);return b.length>0&&(l=Object.keys(b[0])[0],u.push(...b)),{key:l,relatedItems:u}}catch(y){const p=y.message?y.message:y;throw Qe.searchForRelatedItems(p)}}static async upDateWhereForDefault(e,t){let r="",n="";try{const s=t.key,i=[];for(const c of t.relatedItems){const u=c[s];u!==void 0&&i.push(u)}for(const c of e)r+=`${c} = NULL, `;r+="sql_deleted = 0",n=`WHERE ${s} IN (`;for(const c of i)n+=`${c},`;n.endsWith(",")&&(n=n.slice(0,-1)),n+=");"}catch(s){const i=s.message?s.message:s;throw Qe.upDateWhereForDefault(i)}return{setStmt:r,uWhereStmt:n}}static async upDateWhereForRestrict(e){try{const t="",r="";if(e.relatedItems.length>0)throw Qe.upDateWhereForRestrict("Restrict mode related items exist, please delete them first");return{setStmt:t,uWhereStmt:r}}catch(t){const r=t.message?t.message:t;throw Qe.upDateWhereForRestrict(r)}}static async upDateWhereForCascade(e){let t="",r="";try{const n=e.key,s=[];for(const i of e.relatedItems){const c=i[n];c!==void 0&&s.push(c)}t+="sql_deleted = 1",r=`WHERE ${n} IN (`;for(const i of s)r+=`${i},`;r.endsWith(",")&&(r=r.slice(0,-1)),r+=");"}catch(n){const s=n.message?n.message:n;throw Qe.upDateWhereForCascade(s)}return{setStmt:t,uWhereStmt:r}}static executeUpdateForDelete(e,t,r,n,s,i){try{let c=-1;const u=`UPDATE ${t} SET ${n} ${r}`,l=[];if(i.length>0){const h=r.split("?");h[h.length-1]===";"&&h.pop();for(let y=0;y<h.length;y++)for(const p of s)et.indicesOf(h[y],p).length>0&&l.push(i[y])}if(c=ne.run(e,u,l,!1,"no").lastId,c===-1){const h=`UPDATE sql_deleted failed for table: ${t}`;throw Qe.executeUpdateForDelete(h)}}catch(c){const u=c.message?c.message:c;throw Qe.executeUpdateForDelete(u)}}static getCurrentTimeAsInteger(){return Math.floor(Date.now()/1e3)}static checkValuesMatch(e,t){for(const r of e)if(!t.includes(r))return!1;return!0}}class ne{static async beginTransaction(e,t){const r="BeginTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("BEGIN TRANSACTION"),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}}static async rollbackTransaction(e,t){const r="RollbackTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));try{return e.exec("ROLLBACK TRANSACTION"),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`${r}${s}`))}}static commitTransaction(e,t){const r="CommitTransaction: ";if(!t)return Promise.reject(new Error(`${r}database not opened`));const n="COMMIT TRANSACTION";try{return e.exec(n),Promise.resolve()}catch(s){const i=s.message?s.message:s;return Promise.reject(new Error(`${r}${i}`))}}static async dbChanges(e){const t="SELECT total_changes()";let r=0;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`DbChanges failed: ${s}`))}}static async getLastId(e){const t="SELECT last_insert_rowid()";let r=-1;try{return r=e.exec(t)[0].values[0][0],Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`GetLastId failed: ${s}`))}}static async setForeignKeyConstraintsEnabled(e,t){let r="PRAGMA foreign_keys=OFF";t&&(r="PRAGMA foreign_keys=ON");try{return e.run(r),Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`SetForeignKey: ${s}`))}}static async getVersion(e){let t=0;try{const r=e.exec("PRAGMA user_version;");if(console.log(`#### getVersion new res: ${JSON.stringify(r)}`),r&&r.length>0&&r[0].values&&r[0].values.length>0&&r[0].values[0].length>0)t=r[0].values[0][0];else{const n="Cannot return the version from the database";return Promise.reject(new Error(`GetVersion: ${n}`))}return Promise.resolve(t)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`GetVersion: ${n}`))}}static async setVersion(e,t){try{return e.exec(`PRAGMA user_version = ${t}`),Promise.resolve()}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`SetVersion: ${n}`))}}static async execute(e,t,r){try{var n=t;if(!r&&t.toLowerCase().includes("DELETE FROM".toLowerCase())){n=t.replace(/\n/g,"");let c=n.split(";");var s=[];for(const u of c)if(u.trim().substring(0,11).toUpperCase()==="DELETE FROM"&&u.toLowerCase().includes("WHERE".toLowerCase())){const g=u.trim(),h=await ne.deleteSQL(e,g,[]);s.push(h)}else s.push(u);n=s.join(";")}e.exec(n);const i=await ne.dbChanges(e);return Promise.resolve(i)}catch(i){const c=i.message?i.message:i;return Promise.reject(new Error(`Execute: ${c}`))}}static async executeSet(e,t,r,n){const s=[];let i=-1,c={};for(let u=0;u<t.length;u++){const l="statement"in t[u]?t[u].statement:null,g="values"in t[u]&&t[u].values.length>0?t[u].values:[];if(l==null){let h="ExecuteSet: Error No statement";return h+=` for index ${u}`,Promise.reject(new Error(h))}try{if(Array.isArray(g[0]))for(const h of g){const y=await ne.replaceUndefinedByNull(h);c=await ne.run(e,l,y,r,n),i=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&s.push(c.values)}else{const h=await ne.replaceUndefinedByNull(g);c=await ne.run(e,l,h,r,n),i=c.lastId,Object.keys(c).includes("values")&&c.values.length>0&&s.push(c.values)}}catch(h){const y=h.message?h.message:h;return Promise.reject(new Error(`ExecuteSet: ${y}`))}}return c.lastId=i,c.values=n==="all"?s:n==="one"?s[0]:[],Promise.resolve(c)}static async queryAll(e,t,r){try{let n=[];if(r!=null&&r.length>0?n=e.exec(t,r):n=e.exec(t),n.length==0)return Promise.resolve([]);const s=n[0].values.map(i=>{const c={};return n[0].columns.forEach((u,l)=>{c[u]=i[l]}),c});return Promise.resolve(s)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`queryAll: ${s}`))}}static async run(e,t,r,n,s){let i=t.replace(/\n/g,"").trim().substring(0,6).toUpperCase(),c=t,u=[],l={};try{!n&&i==="DELETE"&&(c=await ne.deleteSQL(e,t,r));const g=r||[];let h;if(g.length>0){const p=await ne.replaceUndefinedByNull(g);h=e.exec(c,p)}else h=e.exec(c);(s==="all"||s==="one")&&h&&h.length>0&&(u=ne.getReturnedValues(h[0],s));let y=await ne.getLastId(e);return l.lastId=y,u!=null&&u.length>0&&(l.values=u),Promise.resolve(l)}catch(g){const h=g.message?g.message:g;return Promise.reject(new Error(`run: ${h}`))}}static getReturnedValues(e,t){const r=[];for(let n=0;n<e.values.length;n++){let s={};for(let i=0;i<e.columns.length;i++)s[e.columns[i]]=e.values[n][i];if(r.push(s),t==="one")break}return r}static async deleteSQL(e,t,r){let n=t;try{const s=await ne.isLastModified(e,!0),i=await ne.isSqlDeleted(e,!0);if(!s||!i)return n;const c=et.extractWhereClause(n);if(!c){const y="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${y}`))}const u=et.extractTableName(n);if(!u){const y="deleteSQL: cannot find a WHERE clause";return Promise.reject(new Error(`${y}`))}const l=et.extractColumnNames(c);if(l.length===0){const y="deleteSQL: Did not find column names in the WHERE Statement";return Promise.reject(new Error(`${y}`))}const g="sql_deleted = 1";if(await It.findReferencesAndUpdate(e,u,c,l,r)){const y=c.endsWith(";")?c.slice(0,-1):c;n=`UPDATE ${u} SET ${g} WHERE ${y} AND sql_deleted = 0;`}else n="";return Promise.resolve(n)}catch(s){let i=s.message?s.message:s;return Promise.reject(new Error(`deleteSQL: ${i}`))}}static async getTableList(e){try{const t=await $t.getTablesNames(e);return Promise.resolve(t)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`getTableList: ${r}`))}}static async isTableExists(e,t){try{let r="SELECT name FROM sqlite_master WHERE ";r+=`type='table' AND name='${t}';`;const s=(await ne.queryAll(e,r,[])).length>0;return Promise.resolve(s)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isTableExists: ${n}`))}}static async isLastModified(e,t){if(!t)return Promise.reject("isLastModified: database not opened");try{const r=await $t.getTablesNames(e);for(const n of r)if((await Ge.getTableColumnNamesTypes(e,n)).names.includes("last_modified"))return Promise.resolve(!0)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isLastModified: ${n}`))}}static async isSqlDeleted(e,t){if(!t)return Promise.reject("isSqlDeleted: database not opened");try{const r=await $t.getTablesNames(e);for(const n of r)if((await Ge.getTableColumnNamesTypes(e,n)).names.includes("sql_deleted"))return Promise.resolve(!0)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`isSqlDeleted: ${n}`))}}static async replaceUndefinedByNull(e){const t=[];for(const r of e){let n=r;typeof r>"u"&&(n=null),t.push(n)}return Promise.resolve(t)}static async backupTables(e){const t="BackupTables: ";let r={};try{const n=await $t.getTablesNames(e);for(const s of n)try{const i=await ne.backupTable(e,s);r[`${s}`]=i}catch(i){const c=i.message?i.message:i;return Promise.reject(new Error(`${t}table ${s}: ${c}`))}return Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`BackupTables: ${s}`))}}static async backupTable(e,t){try{await ne.beginTransaction(e,!0);const r=await ne.getTableColumnNames(e,t),n=`_temp_${t}`,s=`DROP TABLE IF EXISTS ${n};`;await ne.run(e,s,[],!1,"no");let i=`ALTER TABLE ${t} RENAME `;if(i+=`TO ${n};`,await ne.run(e,i,[],!1,"no")<0){let u="BackupTable: lastId < 0";try{await ne.rollbackTransaction(e,!0)}catch(l){u+=`: ${l.message?l.message:l}`}return Promise.reject(new Error(`${u}`))}else try{return await ne.commitTransaction(e,!0),Promise.resolve(r)}catch(u){const l=u.message?u.message:u;return Promise.reject(new Error(`BackupTable: ${l}`))}}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`BackupTable: ${n}`))}}static async getTableColumnNames(e,t){let r=[];const n=[],s=`PRAGMA table_info('${t}');`;try{if(r=await ne.queryAll(e,s,[]),r.length>0)for(const i of r)n.push(i.name);return Promise.resolve(n)}catch(i){const c=i.message?i.message:i;return Promise.reject(new Error(`GetTableColumnNames: ${c}`))}}static async findCommonColumns(e,t){let r={};try{const n=await $t.getTablesNames(e);if(n.length===0)return Promise.reject(new Error("FindCommonColumns: get table's names failed"));for(const s of n){const i=await ne.getTableColumnNames(e,s);Object.keys(t).includes(s)&&(r[s]=ne.arraysIntersection(t[s],i))}return Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`FindCommonColumns: ${s}`))}}static arraysIntersection(e,t){if(e!=null&&t!=null){const r=new Set(e),n=new Set(t);return[...r].filter(s=>n.has(s))}else return[]}static async updateNewTablesData(e,t){try{await ne.beginTransaction(e,!0);const r=[];if(Object.keys(t).forEach(i=>{const c=t[i].join(",");let u=`INSERT INTO ${i} `;u+=`(${c}) `,u+=`SELECT ${c} FROM _temp_${i};`,r.push(u)}),await ne.execute(e,r.join(`
`),!1)<0){let i="updateNewTablesData: changes < 0";try{await ne.rollbackTransaction(e,!0)}catch(c){i+=`: ${c.message?c.message:c}`}return Promise.reject(new Error(`${i}`))}else try{return await ne.commitTransaction(e,!0),Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(new Error(`updateNewTablesData: ${c}`))}}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`updateNewTablesData: ${n}`))}}}class mt{static async createDatabaseSchema(e,t){let r=-1;const n=t.version;try{return await ne.setVersion(e.mDb,n),t.mode==="full"&&await $t.dropAll(e.mDb),r=await mt.createSchema(e,t),Promise.resolve(r)}catch(s){return Promise.reject(new Error(`CreateDatabaseSchema: ${s.message}`))}}static async createSchema(e,t){let r=0;const n=e.mDb;try{await ne.beginTransaction(n,!0),e.setIsTransActive(!0)}catch(i){return Promise.reject(new Error(`CreateSchema: ${i.message}`))}const s=await mt.createSchemaStatement(t);if(s.length>0){const i=s.join(`
`);try{if(r=await ne.execute(n,i,!0),r<0)try{await ne.rollbackTransaction(n,!0),e.setIsTransActive(!1)}catch(c){return Promise.reject(new Error(`CreateSchema: changes < 0 ${c.message}`))}}catch(c){const u=c.message;try{return await ne.rollbackTransaction(n,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateSchema: ${u}`))}catch(l){return Promise.reject(new Error(`CreateSchema: changes < 0 ${l.message}: ${u}`))}}}try{return await ne.commitTransaction(n,!0),e.setIsTransActive(!1),Promise.resolve(r)}catch(i){return Promise.reject(new Error(`CreateSchema: commit ${i.message}`))}}static async createSchemaStatement(e){const t=[];let r=!1,n=!1;try{for(const s of e.tables){if(s.schema!=null&&s.schema.length>=1){t.push(`CREATE TABLE IF NOT EXISTS ${s.name} (`);for(let i=0;i<s.schema.length;i++)i===s.schema.length-1?s.schema[i].column?(t.push(`${s.schema[i].column} ${s.schema[i].value}`),s.schema[i].column==="last_modified"&&(r=!0),s.schema[i].column==="sql_deleted"&&(n=!0)):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value}`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value}`):s.schema[i].column?t.push(`${s.schema[i].column} ${s.schema[i].value},`):s.schema[i].foreignkey?t.push(`FOREIGN KEY (${s.schema[i].foreignkey}) ${s.schema[i].value},`):s.schema[i].primarykey?t.push(`FOREIGN KEY ${s.schema[i].value},`):s.schema[i].constraint&&t.push(`CONSTRAINT ${s.schema[i].constraint} ${s.schema[i].value},`);if(t.push(");"),r&&n){let i="CREATE TRIGGER IF NOT EXISTS ";i+=`${s.name}`,i+="_trigger_last_modified ",i+=`AFTER UPDATE ON ${s.name} `,i+="FOR EACH ROW WHEN NEW.last_modified < ",i+="OLD.last_modified BEGIN UPDATE ",i+=`${s.name} `,i+="SET last_modified = ",i+="(strftime('%s','now')) WHERE id=OLD.id; END;",t.push(i)}}if(s.indexes!=null&&s.indexes.length>=1)for(const i of s.indexes){const c=s.name;let u=`CREATE ${Object.keys(i).includes("mode")?i.mode+" ":""} INDEX IF NOT EXISTS `;u+=`${i.name} ON ${c} (${i.value});`,t.push(u)}if(s.triggers!=null&&s.triggers.length>=1)for(const i of s.triggers){const c=s.name;i.timeevent.toUpperCase().endsWith(" ON")&&(i.timeevent=i.timeevent.substring(0,i.timeevent.length-3));let u="CREATE TRIGGER IF NOT EXISTS ";u+=`${i.name} ${i.timeevent} ON ${c} `,i.condition&&(u+=`${i.condition} `),u+=`${i.logic};`,t.push(u)}}return Promise.resolve(t)}catch(s){return Promise.reject(s)}}static async createTablesData(e,t,r){let n=0,s=!1,i=-1,c="",u=-1;const l=e.mDb;try{u=await ne.dbChanges(l),await ne.beginTransaction(l,!0),e.setIsTransActive(!0)}catch(g){return Promise.reject(new Error(`createTablesData: ${g.message}`))}for(const g of t.tables)if(g.values!=null&&g.values.length>=1)try{i=await mt.createTableData(l,g,t.mode);const h=`create table data ${g.name}`;if(r.emit({progress:h}),i<0)break;s=!0}catch(h){c=h.message,s=!1;break}if(s)try{return await ne.commitTransaction(l,!0),e.setIsTransActive(!1),n=await ne.dbChanges(l)-u,Promise.resolve(n)}catch(g){return Promise.reject(new Error(`CreateTablesData: ${g.message}`))}else if(c.length>0)try{return await ne.rollbackTransaction(l,!0),e.setIsTransActive(!1),Promise.reject(new Error(`CreateTablesData: ${c}`))}catch(g){return Promise.reject(new Error(`CreateTablesData: ${g.message}: ${c}`))}else return Promise.resolve(0)}static async createTableData(e,t,r){let n=-1;try{if(!await ne.isTableExists(e,t.name))return Promise.reject(new Error(`CreateTableData: Table ${t.name} does not exist`));const i=await Ge.getTableColumnNamesTypes(e,t.name),c=i.types,u=i.names;if(c.length===0)return Promise.reject(new Error(`CreateTableData: Table ${t.name} info does not exist`));for(let l=0;l<t.values.length;l++){let g=t.values[l],h=!0;const y=await mt.createRowStatement(e,u,g,l,t.name,r);if(h=await mt.checkUpdate(e,y,g,t.name,u),h){if(y.substring(0,6).toUpperCase()==="DELETE"&&(g=[]),n=await ne.run(e,y,g,!0,"no"),n<0)return Promise.reject(new Error("CreateTableData: lastId < 0"))}else n=0}return Promise.resolve(n)}catch(s){return Promise.reject(new Error(`CreateTableData: ${s.message}`))}}static async createRowStatement(e,t,r,n,s,i){if(r.length!=t.length||r.length===0||t.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not correct length`));try{const c=await mt.isIdExists(e,s,t[0],r[0]);let u;if(i==="full"||i==="partial"&&!c){const l=t.join(),g=await mt.createQuestionMarkString(t.length);u=`INSERT INTO ${s} (${l}) VALUES (`,u+=`${g});`}else{let l=!0;const g=y=>y==="sql_deleted",h=t.findIndex(g);if(h>=0&&r[h]===1&&(l=!1,u=`DELETE FROM ${s} WHERE `,typeof r[0]=="string"?u+=`${t[0]} = '${r[0]}';`:u+=`${t[0]} = ${r[0]};`),l){const y=await mt.setNameForUpdate(t);if(y.length===0)return Promise.reject(new Error(`CreateRowStatement: Table ${s} values row ${n} not set to String`));u=`UPDATE ${s} SET ${y} WHERE `,typeof r[0]=="string"?u+=`${t[0]} = '${r[0]}';`:u+=`${t[0]} = ${r[0]};`}}return Promise.resolve(u)}catch(c){return Promise.reject(new Error(`CreateRowStatement: ${c.message}`))}}static async checkUpdate(e,t,r,n,s){let i=!0;if(t.substring(0,6)==="UPDATE")try{let c=`SELECT * FROM ${n} WHERE `;typeof r[0]=="string"?c+=`${s[0]} = '${r[0]}';`:c+=`${s[0]} = ${r[0]};`;const u=await Ge.getValues(e,c,n);let l=[];if(u.length>0&&(l=u[0]),r.length>0&&l.length>0&&r.length===l.length){for(let g=0;g<r.length;g++)if(r[g]!==l[g])return Promise.resolve(!0);return Promise.resolve(!1)}else{const g="Both arrays not the same length";return Promise.reject(new Error(`CheckUpdate: ${g}`))}}catch(c){return Promise.reject(new Error(`CheckUpdate: ${c.message}`))}else return Promise.resolve(i)}static async isIdExists(e,t,r,n){let s=!1,i=`SELECT ${r} FROM ${t} WHERE ${r} = `;typeof n=="number"&&(i+=`${n};`),typeof n=="string"&&(i+=`'${n}';`);try{return(await ne.queryAll(e,i,[])).length===1&&(s=!0),Promise.resolve(s)}catch(c){return Promise.reject(new Error(`IsIdExists: ${c.message}`))}}static async isType(e,t){let r=!1;return e==="NULL"&&typeof t=="object"&&(r=!0),e==="TEXT"&&typeof t=="string"&&(r=!0),e==="INTEGER"&&typeof t=="number"&&(r=!0),e==="REAL"&&typeof t=="number"&&(r=!0),e==="BLOB"&&typeof t=="string"&&(r=!0),r?Promise.resolve():Promise.reject(new Error("IsType: not a SQL Type"))}static async checkColumnTypes(e,t){for(let r=0;r<t.length;r++)if(t[r]!=null)try{await mt.isType(e[r],t[r])}catch{return Promise.reject(new Error("CheckColumnTypes: Type not found"))}return Promise.resolve()}static async createQuestionMarkString(e){let t="";for(let r=0;r<e;r++)t+="?,";return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("CreateQuestionMarkString: length = 0"))}static async setNameForUpdate(e){let t="";for(const r of e)t+=`${r} = ? ,`;return t.length>1?(t=t.slice(0,-1),Promise.resolve(t)):Promise.reject(new Error("SetNameForUpdate: length = 0"))}static async createView(e,t){const r=`CREATE VIEW IF NOT EXISTS ${t.name} AS ${t.value};`;try{return await ne.execute(e,r,!0)<0?Promise.reject(new Error(`CreateView: ${t.name} failed`)):Promise.resolve()}catch(n){return Promise.reject(new Error(`CreateView: ${n.message}`))}}static async createViews(e,t){const r=e.mDb;let n=!1,s="",i=-1,c=-1;try{i=await ne.dbChanges(r),await ne.beginTransaction(r,!0),e.setIsTransActive(!0)}catch(u){return Promise.reject(new Error(`createViews: ${u.message}`))}for(const u of t.views)if(u.value!=null)try{await mt.createView(r,u),n=!0}catch(l){s=l.message,n=!1;break}if(n)try{return await ne.commitTransaction(r,!0),e.setIsTransActive(!1),c=await ne.dbChanges(r)-i,Promise.resolve(c)}catch(u){return Promise.reject(new Error(`createViews: ${u.message}`))}else if(s.length>0)try{return await ne.rollbackTransaction(r,!0),e.setIsTransActive(!1),Promise.reject(new Error(`createViews: ${s}`))}catch(u){return Promise.reject(new Error(`createViews: ${u.message}: ${s}`))}else return Promise.resolve(0)}}class Ke{static async createExportObject(e,t,r){const n={};let s=[],i=[],c="";try{i=await Ke.getViewsName(e);const u=await Ke.getTablesNameSQL(e);if(u.length===0)return Promise.reject(new Error("createExportObject: table's names failed"));if(!await ne.isTableExists(e,"sync_table")&&t.mode==="partial")return Promise.reject(new Error("No sync_table available"));switch(t.mode){case"partial":{s=await Ke.getTablesPartial(e,u,r);break}case"full":{s=await Ke.getTablesFull(e,u,r);break}default:{c="createExportObject: expMode "+t.mode+" not defined";break}}return c.length>0?Promise.reject(new Error(c)):(s.length>0&&(n.database=t.database,n.version=t.version,n.encrypted=t.encrypted,n.mode=t.mode,n.tables=s,i.length>0&&(n.views=i)),Promise.resolve(n))}catch(u){return Promise.reject(new Error("createExportObject: "+u.message))}}static async getViewsName(e){const t=[];let r="SELECT name,sql FROM sqlite_master WHERE ";r+="type='view' AND name NOT LIKE 'sqlite_%';";let n=[];try{n=await ne.queryAll(e,r,[]);for(const s of n){const i={};i.name=s.name,i.value=s.sql.substring(s.sql.indexOf("AS ")+3),t.push(i)}return Promise.resolve(t)}catch(s){return Promise.reject(new Error(`getViewsName: ${s.message}`))}}static async getTablesFull(e,t,r){const n=[];let s="";try{for(const i of t){let c,u;if(i.name)c=i.name;else{s="GetTablesFull: no name";break}if(i.sql)u=i.sql;else{s="GetTablesFull: no sql";break}const l={},g=await Ke.getSchema(u);if(g.length===0){s="GetTablesFull: no Schema returned";break}await Ge.checkSchemaValidity(g);const h=await Ke.getIndexes(e,c);h.length>0&&await Ge.checkIndexesValidity(h);const y=await Ke.getTriggers(e,c);y.length>0&&await Ge.checkTriggersValidity(y);let p=`Full: Table ${c} schema export completed ...`;r.emit({progress:p});const _=`SELECT * FROM ${c};`,b=await Ge.getValues(e,_,c);if(l.name=c,g.length>0)l.schema=g;else{s="GetTablesFull: must contain schema";break}if(h.length>0&&(l.indexes=h),y.length>0&&(l.triggers=y),b.length>0&&(l.values=b),Object.keys(l).length<=1){s=`GetTablesFull: table ${c} is not a jsonTable`;break}p=`Full: Table ${c} table data export completed ...`,r.emit({progress:p}),n.push(l)}return s.length>0?Promise.reject(new Error(s)):Promise.resolve(n)}catch(i){return Promise.reject(new Error(`GetTablesFull: ${i.message}`))}}static async getSchema(e){const t=[],r=e.indexOf("("),n=e.lastIndexOf(")");let s=e.substring(r+1,n);try{s=await Ke.modEmbeddedParentheses(s);const i=s.split(",");for(let c=0;c<i.length;c++){let u=[];const l=i[c].replace(/\n/g,"").trim();u[0]=l.substring(0,l.indexOf(" ")),u[1]=l.substring(l.indexOf(" ")+1);const g={};if(u[0].toUpperCase()==="FOREIGN"){const h=l.indexOf("("),y=l.indexOf(")"),_=l.substring(h+1,y).split("§");u[0]=_.join(","),u[0]=u[0].replace(/, /g,","),u[1]=l.substring(y+2),g.foreignkey=u[0]}else if(u[0].toUpperCase()==="PRIMARY")u=Ke.getRow(l,"CPK"),g.constraint=u[0];else if(u[0].toUpperCase()==="UNIQUE")u=Ke.getRow(l,"CUN"),g.constraint=u[0];else if(u[0].toUpperCase()==="CONSTRAINT"){let h=[];const y=u[1].trim();h[0]=y.substring(0,y.indexOf(" ")),h[1]=y.substring(y.indexOf(" ")+1),u[0]=h[0],g.constraint=u[0],u[1]=h[1]}else g.column=u[0];g.value=u[1].replace(/§/g,","),t.push(g)}return Promise.resolve(t)}catch(i){return Promise.reject(new Error(i.message))}}static getRow(e,t){let r=[];const n=e.indexOf("("),s=e.indexOf(")"),c=e.substring(n+1,s).split("§");return r[0]=`${t}_`+c.join("_"),r[0]=r[0].replace(/_ /g,"_"),r[1]=e,r}static async getIndexes(e,t){const r=[];let n="";try{let s="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";s+=`type = 'index' AND tbl_name = '${t}' `,s+="AND sql NOTNULL;";const i=await ne.queryAll(e,s,[]);if(i.length>0){for(const c of i)if(Object.keys(c).length===3)if(c.tbl_name===t){const l=c.sql,g=l.includes("UNIQUE")?"UNIQUE":"",h=l.lastIndexOf("("),y=l.lastIndexOf(")"),p={};p.name=c.name,p.value=l.slice(h+1,y),g.length>0&&(p.mode=g),r.push(p)}else{n=`GetIndexes: Table ${t} doesn't match`;break}else{n=`GetIndexes: Table ${t} creating indexes`;break}if(n.length>0)return Promise.reject(new Error(n))}return Promise.resolve(r)}catch(s){return Promise.reject(new Error(`GetIndexes: ${s.message}`))}}static async getTriggers(e,t){const r=[];try{let n="SELECT name,tbl_name,sql FROM sqlite_master WHERE ";n+=`type = 'trigger' AND tbl_name = '${t}' `,n+="AND sql NOT NULL;";const s=await ne.queryAll(e,n,[]);if(s.length>0)for(const i of s)if(Object.keys(i).length===3)if(i.tbl_name===t){const u=i.sql,l=i.name;let g=u.split(l);if(g.length!=2)return Promise.reject(new Error("GetTriggers: sql split name does not return 2 values"));if(!g[1].includes(t))return Promise.reject(new Error(`GetTriggers: sql split does not contains ${t}`));const h=g[1].split(t,1)[0].trim();if(g=g[1].split(h+" "+t),g.length!=2)return Promise.reject(new Error("GetTriggers: sql split tableName does not return 2 values"));let y="",p="";if(g[1].trim().substring(0,5).toUpperCase()!=="BEGIN"){if(g=g[1].trim().split("BEGIN"),g.length!=2)return Promise.reject(new Error("GetTriggers: sql split BEGIN does not return 2 values"));y=g[0].trim(),p="BEGIN"+g[1]}else p=g[1].trim();const _={};_.name=l,_.logic=p,y.length>0&&(_.condition=y),_.timeevent=h,r.push(_)}else return Promise.reject(new Error(`GetTriggers: Table ${t} doesn't match`));else return Promise.reject(new Error(`GetTriggers: Table ${t} creating indexes`));return Promise.resolve(r)}catch(n){return Promise.reject(new Error(`GetTriggers: ${n.message}`))}}static async getTablesPartial(e,t,r){const n=[];let s={},i=0,c=[],u="";try{const l=await Ke.getPartialModeData(e,t);Object.keys(l).includes("syncDate")&&(i=l.syncDate),Object.keys(l).includes("modTables")&&(s=l.modTables,c=Object.keys(s));for(const g of t){let h="",y="";if(g.name)h=g.name;else{u="GetTablesFull: no name";break}if(g.sql)y=g.sql;else{u="GetTablesFull: no sql";break}if(c.length==0||c.indexOf(h)===-1||s[h]=="No")continue;const p={};let _=[],b=[],T=[];p.name=g,s[p.name]==="Create"&&(_=await Ke.getSchema(y),_.length>0&&await Ge.checkSchemaValidity(_),b=await Ke.getIndexes(e,h),b.length>0&&await Ge.checkIndexesValidity(b),T=await Ke.getTriggers(e,h),T.length>0&&await Ge.checkTriggersValidity(T));let S=`Partial: Table ${h} schema export completed ...`;r.emit({progress:S});let P="";s[h]==="Create"?P=`SELECT * FROM ${h};`:P=`SELECT * FROM ${h} WHERE last_modified > ${i};`;const O=await Ge.getValues(e,P,h);if(p.name=h,_.length>0&&(p.schema=_),b.length>0&&(p.indexes=b),T.length>0&&(p.triggers=T),O.length>0&&(p.values=O),Object.keys(p).length<=1){u=`GetTablesPartial: table ${h} is not a jsonTable`;break}S=`Partial: Table ${h} table data export completed ...`,r.emit({progress:S}),n.push(p)}return u.length>0?Promise.reject(new Error(u)):Promise.resolve(n)}catch(l){return Promise.reject(new Error(`GetTablesPartial: ${l.message}`))}}static async getPartialModeData(e,t){const r={};try{const n=await Ke.getSynchroDate(e);if(n<=0)return Promise.reject(new Error("GetPartialModeData: no syncDate"));const s=await Ke.getTablesModified(e,t,n);return s.length<=0?Promise.reject(new Error("GetPartialModeData: no modTables")):(r.syncDate=n,r.modTables=s,Promise.resolve(r))}catch(n){return Promise.reject(new Error(`GetPartialModeData: ${n.message}`))}}static async getTablesNameSQL(e){let t="SELECT name,sql FROM sqlite_master WHERE ";t+="type='table' AND name NOT LIKE 'sync_table' ",t+="AND name NOT LIKE '_temp_%' ",t+="AND name NOT LIKE 'sqlite_%';";try{const r=await ne.queryAll(e,t,[]);return Promise.resolve(r)}catch(r){return Promise.reject(new Error(`getTablesNamesSQL: ${r.message}`))}}static async getTablesModified(e,t,r){let n="";try{const s={};for(const i of t){let c,u="SELECT count(*) AS tcount  ";u+=`FROM ${i.name};`;let l=await ne.queryAll(e,u,[]);if(l.length!=1){n="GetTableModified: total count not returned";break}const g=l[0].tcount;if(u="SELECT count(*) AS mcount FROM ",u+=`${i.name} WHERE last_modified > `,u+=`${r};`,l=await ne.queryAll(e,u,[]),l.length!=1)break;const h=l[0].mcount;h===0?c="No":g===h?c="Create":c="Modified";const y=i.name;s[y]=c}return n.length>0?Promise.reject(new Error(n)):Promise.resolve(s)}catch(s){return Promise.reject(new Error(`GetTableModified: ${s.message}`))}}static async getSynchroDate(e){try{const r=await ne.queryAll(e,"SELECT sync_date FROM sync_table WHERE id = 1;",[]);return Promise.resolve(r[0].sync_date)}catch(t){const r=`GetSynchroDate: ${t.message}`;return Promise.reject(new Error(r))}}static async getLastExportDate(e){try{const r=await ne.queryAll(e,"SELECT sync_date FROM sync_table WHERE id = 2;",[]);return r.length===0?Promise.resolve(-1):Promise.resolve(r[0].sync_date)}catch(t){const r=`getLastExport: ${t.message}`;return Promise.reject(new Error(r))}}static async setLastExportDate(e,t){try{if(!await ne.isTableExists(e,"sync_table"))return Promise.reject(new Error("setLastExportDate: No sync_table available"));const n=Math.round(new Date(t).getTime()/1e3);let s="";return await Ke.getLastExportDate(e)>0?s=`UPDATE sync_table SET sync_date = ${n} WHERE id = 2;`:s=`INSERT INTO sync_table (sync_date) VALUES (${n});`,await ne.execute(e,s,!1)<0?{result:!1,message:"setLastExportDate failed"}:{result:!0}}catch(r){return{result:!1,message:`setLastExportDate failed: ${r.message}`}}}static async delExportedRows(e){let t;try{if(!await ne.isTableExists(e,"sync_table"))return Promise.reject(new Error("DelExportedRows: No sync_table available"));if(t=await Ke.getLastExportDate(e),t<0)return Promise.reject(new Error("DelExportedRows: no last exported date available"));const n=await ne.getTableList(e);if(n.length===0)return Promise.reject(new Error("DelExportedRows: No table's names returned"));for(const s of n){let i=-1;const c=`DELETE FROM ${s}
              WHERE sql_deleted = 1 AND last_modified < ${t};`;if(i=await ne.run(e,c,[],!0,"no"),i<0)return Promise.reject(new Error("DelExportedRows: lastId < 0"))}}catch(r){return Promise.reject(new Error(`DelExportedRows failed: ${r.message}`))}}static async modEmbeddedParentheses(e){const t=Ke.indexOfChar(e,"("),r=Ke.indexOfChar(e,")");if(t.length!=r.length)return Promise.reject("ModEmbeddedParentheses: Not same number of '(' & ')'");if(t.length===0)return Promise.resolve(e);let n=e.substring(0,t[0]-1);for(let s=0;s<t.length;s++){let i;s<t.length-1&&t[s+1]<r[s]?(i=e.substring(t[s]-1,r[s+1]),s++):i=e.substring(t[s]-1,r[s]);const c=i.replace(/,/g,"§");n+=c,s<t.length-1&&(n+=e.substring(r[s],t[s+1]-1))}return n+=e.substring(r[r.length-1],e.length),Promise.resolve(n)}static indexOfChar(e,t){let r=[...e];return t=t.toLowerCase(),r.reduce((n,s,i)=>s.toLowerCase()===t?[...n,i]:n,[])}}class Ln{static async onUpgrade(e,t,r,n){let s=-1;const i=new Int32Array(Object.keys(t).map(c=>parseInt(c))).sort();for(const c of i)if(c>r&&c<=n){const u=t[c].statements;if(u.length===0)return Promise.reject("onUpgrade: statements not given");try{await ne.setForeignKeyConstraintsEnabled(e.mDb,!1);const l=await ne.dbChanges(e.mDb);await Ln.executeStatementsProcess(e,u),await ne.setVersion(e.mDb,c),await ne.setForeignKeyConstraintsEnabled(e.mDb,!0),s=await ne.dbChanges(e.mDb)-l}catch(l){return Promise.reject(new Error(`onUpgrade: ${l.message}`))}}return Promise.resolve(s)}static async executeStatementsProcess(e,t){try{await ne.beginTransaction(e.mDb,!0),e.setIsTransActive(!0);for(const r of t)await ne.execute(e.mDb,r,!1);return await ne.commitTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.resolve()}catch(r){return await ne.rollbackTransaction(e.mDb,!0),e.setIsTransActive(!1),Promise.reject(`ExecuteStatementProcess: ${r}`)}}}class hs{constructor(e,t,r,n,s,i){this.vUpgDict={},this.autoSave=!1,this.wasmPath="/assets",this.isBackup=!1,this.isTransactionActive=!1,this.dbName=e,this.store=n,this.version=t,this.mDb=null,this.vUpgDict=r,this._isDBOpen=!1,this.autoSave=s,this.wasmPath=i}async open(){const e={locateFile:t=>`${this.wasmPath}/${t}`};return new Promise((t,r)=>{try{Yo(e).then(async n=>{const s=await Fe.getDBFromStore(this.dbName,this.store);s!=null?this.mDb=new n.Database(s):(this.mDb=new n.Database,await Fe.setInitialDBToStore(this.dbName,this.store)),this._isDBOpen=!0;let i=await ne.getVersion(this.mDb);if(this.version>i&&Object.keys(this.vUpgDict).length>0)try{if(await Fe.isDBInStore(this.dbName,this.store)&&(await Fe.copyDBToStore(this.dbName,`backup-${this.dbName}`,this.store),this.isBackup=!0),await Ln.onUpgrade(this,this.vUpgDict,i,this.version)===-1)try{this.isBackup&&await Fe.restoreDBFromStore(this.dbName,"backup",this.store)}catch(l){const g=l.message?l.message:l;return r(new Error(`Open: ${g}`))}this.isBackup&&await Fe.removeDBFromStore(`backup-${this.dbName}`,this.store)}catch{try{this.isBackup&&await Fe.restoreDBFromStore(this.dbName,"backup",this.store)}catch(u){const l=u.message?u.message:u;return r(new Error(`Open: ${l}`))}}if(this.autoSave)try{await this.saveToStore()}catch(c){this._isDBOpen=!1;const u=c.message?c.message:c;return r(new Error(`Open: ${u}`))}return await ne.setForeignKeyConstraintsEnabled(this.mDb,!0),t()})}catch(n){this._isDBOpen=!1;const s=n.message?n.message:n;return r(new Error(`Open: ${s}`))}})}isDBOpen(){return this._isDBOpen}async close(){if(this.mDb!=null&&this._isDBOpen)try{await this.saveToStore(!1),this.mDb.close(),this._isDBOpen=!1}catch(e){this._isDBOpen=!1;const t=e.message?e.message:e;return Promise.reject(new Error(`in close ${t}`))}return Promise.resolve()}async saveToStore(e=!0){if(this.mDb!=null&&this._isDBOpen)try{await Fe.setDBToStore(this.mDb,this.dbName,this.store),e&&await ne.setForeignKeyConstraintsEnabled(this.mDb,!0)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`in saveToStore ${r}`))}return Promise.resolve()}async exportDB(){try{return this.mDb.export()}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`exportDB: ${t}`))}}async getVersion(){if(this.mDb!=null&&this._isDBOpen)try{const e=await ne.getVersion(this.mDb);return Promise.resolve(e)}catch(e){this._isDBOpen=!1;const t=e.message?e.message:e;return Promise.reject(new Error(`in getVersion ${t}`))}}async isDBExists(e){try{const t=await Fe.isDBInStore(e,this.store);return Promise.resolve(t)}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`in isDBExists ${r}`))}}async deleteDB(e){try{const t=await this.isDBExists(e);return t&&!this._isDBOpen&&await this.open(),await this.close(),t&&await Fe.removeDBFromStore(e,this.store),Promise.resolve()}catch(t){const r=t.message?t.message:t;return Promise.reject(new Error(`DeleteDB: ${r}`))}}async beginTransaction(){if(!this._isDBOpen){let e=`BeginTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.beginTransaction(this.mDb,!0),this.setIsTransActive(!0),0}catch(e){let t=`BeginTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}async commitTransaction(){if(!this._isDBOpen){let e=`CommitTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.commitTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`CommitTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}async rollbackTransaction(){if(!this._isDBOpen){let e=`RollbackTransaction: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{return await ne.rollbackTransaction(this.mDb,!0),this.setIsTransActive(!1),0}catch(e){let t=`RollbackTransaction: ${e.message?e.message:e}`;return Promise.reject(new Error(`${t}`))}}isTransActive(){return this.isTransactionActive}setIsTransActive(e){this.isTransactionActive=e}async executeSQL(e,t=!0){if(!this._isDBOpen){let n=`ExecuteSQL: Database ${this.dbName} `;return n+="not opened",Promise.reject(new Error(n))}let r=-1;try{r=await ne.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(n){let s=`executeSQL: ${n.message?n.message:n}`;return Promise.reject(new Error(`${s}`))}try{if(await ne.execute(this.mDb,e,!1)<0)return Promise.reject(new Error("ExecuteSQL: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const s=await ne.dbChanges(this.mDb)-r;return Promise.resolve(s)}catch(n){let s=`ExecuteSQL: ${n.message?n.message:n}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(i){s+=` : ${i.message?i.message:i}`}return Promise.reject(new Error(`ExecuteSQL: ${s}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave&&!this.isTransactionActive)try{await this.saveToStore()}catch(n){this._isDBOpen=!1;const s=n.message?n.message:n;return Promise.reject(`ExecuteSQL: ${s}`)}}}async execSet(e,t=!0,r="no"){if(!this._isDBOpen){let i=`ExecSet: Database ${this.dbName} `;return i+="not opened",Promise.reject(new Error(i))}const n={changes:-1,lastId:-1};let s=-1;try{s=await ne.dbChanges(this.mDb),t&&!this.isTransactionActive&&await this.beginTransaction()}catch(i){let u=`ExecSet: ${i.message?i.message:i}`;return Promise.reject(new Error(`${u}`))}try{const i=await ne.executeSet(this.mDb,e,!1,r);let c=i.lastId;if(c<0)return Promise.reject(new Error("ExecSet: changes < 0"));t&&this.isTransactionActive&&await this.commitTransaction();const u=await ne.dbChanges(this.mDb)-s;return n.changes=u,n.lastId=c,n.values=i.values?i.values:[],Promise.resolve(n)}catch(i){let u=`ExecSet: ${i.message?i.message:i}`;try{t&&this.isTransactionActive&&await this.rollbackTransaction()}catch(l){u+=` : ${l.message?l.message:l}`}return Promise.reject(new Error(`ExecSet: ${u}`))}finally{if(t&&(this.isTransactionActive=!1),this.autoSave&&!this.isTransactionActive)try{await this.saveToStore()}catch(i){const c=i.message?i.message:i;return this._isDBOpen=!1,Promise.reject(`ExecSet: ${c}`)}}}async selectSQL(e,t){if(!this._isDBOpen){let r=`SelectSQL: Database ${this.dbName} `;return r+="not opened",Promise.reject(new Error(r))}try{let r=await ne.queryAll(this.mDb,e,t);return Promise.resolve(r)}catch(r){const n=r.message?r.message:r;return Promise.reject(new Error(`SelectSQL: ${n}`))}}async runSQL(e,t,r=!0,n){let s=-1;if(!this._isDBOpen){let u=`RunSQL: Database ${this.dbName} `;return u+="not opened",Promise.reject(new Error(u))}const i={changes:-1,lastId:-1};let c=-1;try{c=await ne.dbChanges(this.mDb),r&&!this.isTransactionActive&&await this.beginTransaction()}catch(u){let g=`RunSQL: ${u.message?u.message:u}`;return Promise.reject(new Error(`${g}`))}try{const u=await ne.run(this.mDb,e,t,!1,n);if(s=u.lastId,s<0)return Promise.reject(new Error("RunSQL: lastId < 0"));r&&this.isTransactionActive&&await this.commitTransaction();const l=await ne.dbChanges(this.mDb)-c;return i.changes=l,i.lastId=s,i.values=u.values?u.values:[],Promise.resolve(i)}catch(u){let g=`RunSQL: ${u.message?u.message:u}`;try{r&&this.isTransactionActive&&await this.rollbackTransaction()}catch(h){g+=` : ${h.message?h.message:h}`}return Promise.reject(new Error(`${g}`))}finally{if(r&&this.setIsTransActive(!1),this.autoSave&&!this.isTransactionActive)try{await this.saveToStore()}catch(u){this._isDBOpen=!1;const l=u.message?u.message:u;return Promise.reject(`ExecSet: ${l}`)}}}async getTableNames(){if(!this._isDBOpen){let e=`GetTableNames: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{let e=await ne.getTableList(this.mDb);return Promise.resolve(e)}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`GetTableNames: ${t}`))}}async isTable(e){if(!this._isDBOpen){let t=`isTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}try{const t=await ne.isTableExists(this.mDb,e);return Promise.resolve(t)}catch(t){const r=`IsTable: ${t.message?t.message:t}`;return Promise.reject(new Error(r))}}async createSyncTable(){if(!this._isDBOpen){let t=`createSyncTable: Database ${this.dbName} `;return t+="not opened",Promise.reject(new Error(t))}let e=-1;try{if(await ne.isTableExists(this.mDb,"sync_table"))return Promise.resolve(0);{const r=await ne.isLastModified(this.mDb,this._isDBOpen),n=await ne.isSqlDeleted(this.mDb,this._isDBOpen);if(r&&n){const s=Math.round(new Date().getTime()/1e3);let i=`
                          CREATE TABLE IF NOT EXISTS sync_table (
                              id INTEGER PRIMARY KEY NOT NULL,
                              sync_date INTEGER
                              );`;return i+=`INSERT INTO sync_table (sync_date) VALUES (
                              "${s}");`,e=await ne.execute(this.mDb,i,!1),Promise.resolve(e)}else return Promise.reject(new Error("No last_modified/sql_deleted columns in tables"))}}catch(t){const n=`CreateSyncTable: ${t.message?t.message:t}`;return Promise.reject(new Error(n))}}async getSyncDate(){if(!this._isDBOpen){let e=`getSyncDate: Database ${this.dbName} `;return e+="not opened",Promise.reject(new Error(e))}try{if(!await ne.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const t=await Ke.getSynchroDate(this.mDb);return Promise.resolve(t)}catch(e){const r=`getSyncDate: ${e.message?e.message:e}`;return Promise.reject(new Error(r))}}async setSyncDate(e){if(!this._isDBOpen){let t=`SetSyncDate: Database ${this.dbName} `;return t+="not opened",{result:!1,message:t}}try{if(!await ne.isTableExists(this.mDb,"sync_table"))return Promise.reject(new Error("No sync_table available"));const r=Math.round(new Date(e).getTime()/1e3);let n="UPDATE sync_table SET sync_date = ";return n+=`${r} WHERE id = 1;`,await ne.execute(this.mDb,n,!1)<0?{result:!1,message:"setSyncDate failed"}:{result:!0}}catch(t){return{result:!1,message:`setSyncDate failed: ${t.message?t.message:t}`}}}async importJson(e,t){let r=0;if(this._isDBOpen)try{if(await ne.setForeignKeyConstraintsEnabled(this.mDb,!1),e.tables&&e.tables.length>0){r=await mt.createDatabaseSchema(this,e);let n=`Schema creation completed changes: ${r}`;if(t.emit({progress:n}),r!=-1){r+=await mt.createTablesData(this,e,t);let s=`Tables data creation completed changes: ${r}`;t.emit({progress:s})}}return e.views&&e.views.length>0&&(r+=await mt.createViews(this,e)),await ne.setForeignKeyConstraintsEnabled(this.mDb,!0),await this.saveToStore(),Promise.resolve(r)}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`ImportJson: ${s}`))}else return Promise.reject(new Error("ImportJson: database is closed"))}async exportJson(e,t){const r={};if(r.database=this.dbName.slice(0,-9),r.version=this.version,r.encrypted=!1,r.mode=e,this._isDBOpen)try{if(await ne.isTableExists(this.mDb,"sync_table"))await Ke.setLastExportDate(this.mDb,new Date().toISOString());else if(r.mode!=="full"){const u="No sync_table available for partial mode";return Promise.reject(new Error(u))}const s=await Ke.createExportObject(this.mDb,r,t);if(Object.keys(s).length===0){const u="ExportJson: return Object is empty No data to synchronize";return Promise.reject(new Error(u))}return Ge.isJsonSQLite(s)?Promise.resolve(s):Promise.reject(new Error("ExportJson: retJson not valid"))}catch(n){const s=n.message?n.message:n;return Promise.reject(new Error(`ExportJson: ${s}`))}else return Promise.reject(new Error("ExportJson: database is closed"))}async deleteExportedRows(){if(this._isDBOpen)try{return await Ke.delExportedRows(this.mDb),Promise.resolve()}catch(e){const t=e.message?e.message:e;return Promise.reject(new Error(`deleteExportedRows: ${t}`))}else return Promise.reject(new Error("deleteExportedRows: database is closed"))}}var ii={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(a,e){(function(t){a.exports=t()})(function(){return function t(r,n,s){function i(l,g){if(!n[l]){if(!r[l]){var h=typeof Qt=="function"&&Qt;if(!g&&h)return h(l,!0);if(c)return c(l,!0);var y=new Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y}var p=n[l]={exports:{}};r[l][0].call(p.exports,function(_){var b=r[l][1][_];return i(b||_)},p,p.exports,t,r,n,s)}return n[l].exports}for(var c=typeof Qt=="function"&&Qt,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,r,n){(function(s){var i=s.MutationObserver||s.WebKitMutationObserver,c;if(i){var u=0,l=new i(_),g=s.document.createTextNode("");l.observe(g,{characterData:!0}),c=function(){g.data=u=++u%2}}else if(!s.setImmediate&&typeof globalThis.MessageChannel<"u"){var h=new globalThis.MessageChannel;h.port1.onmessage=_,c=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in globalThis.document.createElement("script")?c=function(){var T=s.document.createElement("script");T.onreadystatechange=function(){_(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},s.document.documentElement.appendChild(T)}:c=function(){setTimeout(_,0)};var y,p=[];function _(){y=!0;for(var T,S,P=p.length;P;){for(S=p,p=[],T=-1;++T<P;)S[T]();P=p.length}y=!1}r.exports=b;function b(T){p.push(T)===1&&!y&&c()}}).call(this,typeof Zt<"u"?Zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,n){var s=t(1);function i(){}var c={},u=["REJECTED"],l=["FULFILLED"],g=["PENDING"];r.exports=h;function h(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,A!==i&&b(this,A)}h.prototype.catch=function(A){return this.then(null,A)},h.prototype.then=function(A,G){if(typeof A!="function"&&this.state===l||typeof G!="function"&&this.state===u)return this;var L=new this.constructor(i);if(this.state!==g){var Q=this.state===l?A:G;p(L,Q,this.outcome)}else this.queue.push(new y(L,A,G));return L};function y(A,G,L){this.promise=A,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(A){c.resolve(this.promise,A)},y.prototype.otherCallFulfilled=function(A){p(this.promise,this.onFulfilled,A)},y.prototype.callRejected=function(A){c.reject(this.promise,A)},y.prototype.otherCallRejected=function(A){p(this.promise,this.onRejected,A)};function p(A,G,L){s(function(){var Q;try{Q=G(L)}catch(M){return c.reject(A,M)}Q===A?c.reject(A,new TypeError("Cannot resolve promise with itself")):c.resolve(A,Q)})}c.resolve=function(A,G){var L=T(_,G);if(L.status==="error")return c.reject(A,L.value);var Q=L.value;if(Q)b(A,Q);else{A.state=l,A.outcome=G;for(var M=-1,Z=A.queue.length;++M<Z;)A.queue[M].callFulfilled(G)}return A},c.reject=function(A,G){A.state=u,A.outcome=G;for(var L=-1,Q=A.queue.length;++L<Q;)A.queue[L].callRejected(G);return A};function _(A){var G=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof G=="function")return function(){G.apply(A,arguments)}}function b(A,G){var L=!1;function Q(D){L||(L=!0,c.reject(A,D))}function M(D){L||(L=!0,c.resolve(A,D))}function Z(){G(M,Q)}var be=T(Z);be.status==="error"&&Q(be.value)}function T(A,G){var L={};try{L.value=A(G),L.status="success"}catch(Q){L.status="error",L.value=Q}return L}h.resolve=S;function S(A){return A instanceof this?A:c.resolve(new this(i),A)}h.reject=P;function P(A){var G=new this(i);return c.reject(G,A)}h.all=O;function O(A){var G=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=A.length,Q=!1;if(!L)return this.resolve([]);for(var M=new Array(L),Z=0,be=-1,D=new this(i);++be<L;)H(A[be],be);return D;function H(v,X){G.resolve(v).then(ke,function(ae){Q||(Q=!0,c.reject(D,ae))});function ke(ae){M[X]=ae,++Z===L&&!Q&&(Q=!0,c.resolve(D,M))}}}h.race=F;function F(A){var G=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=A.length,Q=!1;if(!L)return this.resolve([]);for(var M=-1,Z=new this(i);++M<L;)be(A[M]);return Z;function be(D){G.resolve(D).then(function(H){Q||(Q=!0,c.resolve(Z,H))},function(H){Q||(Q=!0,c.reject(Z,H))})}}},{1:1}],3:[function(t,r,n){(function(s){typeof globalThis.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof Zt<"u"?Zt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,n){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w};function i(w,R){if(!(w instanceof R))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=c();function l(){try{if(!u||!u.open)return!1;var w=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),R=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!w||R)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(w,R){w=w||[],R=R||{};try{return new Blob(w,R)}catch(C){if(C.name!=="TypeError")throw C;for(var k=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,I=new k,B=0;B<w.length;B+=1)I.append(w[B]);return I.getBlob(R.type)}}typeof Promise>"u"&&t(3);var h=Promise;function y(w,R){R&&w.then(function(k){R(null,k)},function(k){R(k)})}function p(w,R,k){typeof R=="function"&&w.then(R),typeof k=="function"&&w.catch(k)}function _(w){return typeof w!="string"&&(console.warn(w+" used as a key, but it is not a string."),w=String(w)),w}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",S=void 0,P={},O=Object.prototype.toString,F="readonly",A="readwrite";function G(w){for(var R=w.length,k=new ArrayBuffer(R),I=new Uint8Array(k),B=0;B<R;B++)I[B]=w.charCodeAt(B);return k}function L(w){return new h(function(R){var k=w.transaction(T,A),I=g([""]);k.objectStore(T).put(I,"key"),k.onabort=function(B){B.preventDefault(),B.stopPropagation(),R(!1)},k.oncomplete=function(){var B=navigator.userAgent.match(/Chrome\/(\d+)/),C=navigator.userAgent.match(/Edge\//);R(C||!B||parseInt(B[1],10)>=43)}}).catch(function(){return!1})}function Q(w){return typeof S=="boolean"?h.resolve(S):L(w).then(function(R){return S=R,S})}function M(w){var R=P[w.name],k={};k.promise=new h(function(I,B){k.resolve=I,k.reject=B}),R.deferredOperations.push(k),R.dbReady?R.dbReady=R.dbReady.then(function(){return k.promise}):R.dbReady=k.promise}function Z(w){var R=P[w.name],k=R.deferredOperations.pop();if(k)return k.resolve(),k.promise}function be(w,R){var k=P[w.name],I=k.deferredOperations.pop();if(I)return I.reject(R),I.promise}function D(w,R){return new h(function(k,I){if(P[w.name]=P[w.name]||W(),w.db)if(R)M(w),w.db.close();else return k(w.db);var B=[w.name];R&&B.push(w.version);var C=u.open.apply(u,B);R&&(C.onupgradeneeded=function(J){var ie=C.result;try{ie.createObjectStore(w.storeName),J.oldVersion<=1&&ie.createObjectStore(T)}catch(ce){if(ce.name==="ConstraintError")console.warn('The database "'+w.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+w.storeName+'" already exists.');else throw ce}}),C.onerror=function(J){J.preventDefault(),I(C.error)},C.onsuccess=function(){var J=C.result;J.onversionchange=function(ie){ie.target.close()},k(J),Z(w)}})}function H(w){return D(w,!1)}function v(w){return D(w,!0)}function X(w,R){if(!w.db)return!0;var k=!w.db.objectStoreNames.contains(w.storeName),I=w.version<w.db.version,B=w.version>w.db.version;if(I&&(w.version!==R&&console.warn('The database "'+w.name+`" can't be downgraded from version `+w.db.version+" to version "+w.version+"."),w.version=w.db.version),B||k){if(k){var C=w.db.version+1;C>w.version&&(w.version=C)}return!0}return!1}function ke(w){return new h(function(R,k){var I=new FileReader;I.onerror=k,I.onloadend=function(B){var C=btoa(B.target.result||"");R({__local_forage_encoded_blob:!0,data:C,type:w.type})},I.readAsBinaryString(w)})}function ae(w){var R=G(atob(w.data));return g([R],{type:w.type})}function Re(w){return w&&w.__local_forage_encoded_blob}function ue(w){var R=this,k=R._initReady().then(function(){var I=P[R._dbInfo.name];if(I&&I.dbReady)return I.dbReady});return p(k,w,w),k}function xe(w){M(w);for(var R=P[w.name],k=R.forages,I=0;I<k.length;I++){var B=k[I];B._dbInfo.db&&(B._dbInfo.db.close(),B._dbInfo.db=null)}return w.db=null,H(w).then(function(C){return w.db=C,X(w)?v(w):C}).then(function(C){w.db=R.db=C;for(var J=0;J<k.length;J++)k[J]._dbInfo.db=C}).catch(function(C){throw be(w,C),C})}function U(w,R,k,I){I===void 0&&(I=1);try{var B=w.db.transaction(w.storeName,R);k(null,B)}catch(C){if(I>0&&(!w.db||C.name==="InvalidStateError"||C.name==="NotFoundError"))return h.resolve().then(function(){if(!w.db||C.name==="NotFoundError"&&!w.db.objectStoreNames.contains(w.storeName)&&w.version<=w.db.version)return w.db&&(w.version=w.db.version+1),v(w)}).then(function(){return xe(w).then(function(){U(w,R,k,I-1)})}).catch(k);k(C)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _e(w){var R=this,k={db:null};if(w)for(var I in w)k[I]=w[I];var B=P[k.name];B||(B=W(),P[k.name]=B),B.forages.push(R),R._initReady||(R._initReady=R.ready,R.ready=ue);var C=[];function J(){return h.resolve()}for(var ie=0;ie<B.forages.length;ie++){var ce=B.forages[ie];ce!==R&&C.push(ce._initReady().catch(J))}var le=B.forages.slice(0);return h.all(C).then(function(){return k.db=B.db,H(k)}).then(function(de){return k.db=de,X(k,R._defaultConfig.version)?v(k):de}).then(function(de){k.db=B.db=de,R._dbInfo=k;for(var we=0;we<le.length;we++){var je=le[we];je!==R&&(je._dbInfo.db=k.db,je._dbInfo.version=k.version)}})}function ve(w,R){var k=this;w=_(w);var I=new h(function(B,C){k.ready().then(function(){U(k._dbInfo,F,function(J,ie){if(J)return C(J);try{var ce=ie.objectStore(k._dbInfo.storeName),le=ce.get(w);le.onsuccess=function(){var de=le.result;de===void 0&&(de=null),Re(de)&&(de=ae(de)),B(de)},le.onerror=function(){C(le.error)}}catch(de){C(de)}})}).catch(C)});return y(I,R),I}function me(w,R){var k=this,I=new h(function(B,C){k.ready().then(function(){U(k._dbInfo,F,function(J,ie){if(J)return C(J);try{var ce=ie.objectStore(k._dbInfo.storeName),le=ce.openCursor(),de=1;le.onsuccess=function(){var we=le.result;if(we){var je=we.value;Re(je)&&(je=ae(je));var ze=w(je,we.key,de++);ze!==void 0?B(ze):we.continue()}else B()},le.onerror=function(){C(le.error)}}catch(we){C(we)}})}).catch(C)});return y(I,R),I}function Ue(w,R,k){var I=this;w=_(w);var B=new h(function(C,J){var ie;I.ready().then(function(){return ie=I._dbInfo,O.call(R)==="[object Blob]"?Q(ie.db).then(function(ce){return ce?R:ke(R)}):R}).then(function(ce){U(I._dbInfo,A,function(le,de){if(le)return J(le);try{var we=de.objectStore(I._dbInfo.storeName);ce===null&&(ce=void 0);var je=we.put(ce,w);de.oncomplete=function(){ce===void 0&&(ce=null),C(ce)},de.onabort=de.onerror=function(){var ze=je.error?je.error:je.transaction.error;J(ze)}}catch(ze){J(ze)}})}).catch(J)});return y(B,k),B}function Je(w,R){var k=this;w=_(w);var I=new h(function(B,C){k.ready().then(function(){U(k._dbInfo,A,function(J,ie){if(J)return C(J);try{var ce=ie.objectStore(k._dbInfo.storeName),le=ce.delete(w);ie.oncomplete=function(){B()},ie.onerror=function(){C(le.error)},ie.onabort=function(){var de=le.error?le.error:le.transaction.error;C(de)}}catch(de){C(de)}})}).catch(C)});return y(I,R),I}function Oe(w){var R=this,k=new h(function(I,B){R.ready().then(function(){U(R._dbInfo,A,function(C,J){if(C)return B(C);try{var ie=J.objectStore(R._dbInfo.storeName),ce=ie.clear();J.oncomplete=function(){I()},J.onabort=J.onerror=function(){var le=ce.error?ce.error:ce.transaction.error;B(le)}}catch(le){B(le)}})}).catch(B)});return y(k,w),k}function Be(w){var R=this,k=new h(function(I,B){R.ready().then(function(){U(R._dbInfo,F,function(C,J){if(C)return B(C);try{var ie=J.objectStore(R._dbInfo.storeName),ce=ie.count();ce.onsuccess=function(){I(ce.result)},ce.onerror=function(){B(ce.error)}}catch(le){B(le)}})}).catch(B)});return y(k,w),k}function Ze(w,R){var k=this,I=new h(function(B,C){if(w<0){B(null);return}k.ready().then(function(){U(k._dbInfo,F,function(J,ie){if(J)return C(J);try{var ce=ie.objectStore(k._dbInfo.storeName),le=!1,de=ce.openKeyCursor();de.onsuccess=function(){var we=de.result;if(!we){B(null);return}w===0||le?B(we.key):(le=!0,we.advance(w))},de.onerror=function(){C(de.error)}}catch(we){C(we)}})}).catch(C)});return y(I,R),I}function ge(w){var R=this,k=new h(function(I,B){R.ready().then(function(){U(R._dbInfo,F,function(C,J){if(C)return B(C);try{var ie=J.objectStore(R._dbInfo.storeName),ce=ie.openKeyCursor(),le=[];ce.onsuccess=function(){var de=ce.result;if(!de){I(le);return}le.push(de.key),de.continue()},ce.onerror=function(){B(ce.error)}}catch(de){B(de)}})}).catch(B)});return y(k,w),k}function Ne(w,R){R=b.apply(this,arguments);var k=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||k.name,w.storeName=w.storeName||k.storeName);var I=this,B;if(!w.name)B=h.reject("Invalid arguments");else{var C=w.name===k.name&&I._dbInfo.db,J=C?h.resolve(I._dbInfo.db):H(w).then(function(ie){var ce=P[w.name],le=ce.forages;ce.db=ie;for(var de=0;de<le.length;de++)le[de]._dbInfo.db=ie;return ie});w.storeName?B=J.then(function(ie){if(ie.objectStoreNames.contains(w.storeName)){var ce=ie.version+1;M(w);var le=P[w.name],de=le.forages;ie.close();for(var we=0;we<de.length;we++){var je=de[we];je._dbInfo.db=null,je._dbInfo.version=ce}var ze=new h(function(Me,Ye){var Ve=u.open(w.name,ce);Ve.onerror=function(ot){var jt=Ve.result;jt.close(),Ye(ot)},Ve.onupgradeneeded=function(){var ot=Ve.result;ot.deleteObjectStore(w.storeName)},Ve.onsuccess=function(){var ot=Ve.result;ot.close(),Me(ot)}});return ze.then(function(Me){le.db=Me;for(var Ye=0;Ye<de.length;Ye++){var Ve=de[Ye];Ve._dbInfo.db=Me,Z(Ve._dbInfo)}}).catch(function(Me){throw(be(w,Me)||h.resolve()).catch(function(){}),Me})}}):B=J.then(function(ie){M(w);var ce=P[w.name],le=ce.forages;ie.close();for(var de=0;de<le.length;de++){var we=le[de];we._dbInfo.db=null}var je=new h(function(ze,Me){var Ye=u.deleteDatabase(w.name);Ye.onerror=function(){var Ve=Ye.result;Ve&&Ve.close(),Me(Ye.error)},Ye.onblocked=function(){console.warn('dropInstance blocked for database "'+w.name+'" until all open connections are closed')},Ye.onsuccess=function(){var Ve=Ye.result;Ve&&Ve.close(),ze(Ve)}});return je.then(function(ze){ce.db=ze;for(var Me=0;Me<le.length;Me++){var Ye=le[Me];Z(Ye._dbInfo)}}).catch(function(ze){throw(be(w,ze)||h.resolve()).catch(function(){}),ze})})}return y(B,R),B}var it={_driver:"asyncStorage",_initStorage:_e,_support:l(),iterate:me,getItem:ve,setItem:Ue,removeItem:Je,clear:Oe,length:Be,key:Ze,keys:ge,dropInstance:Ne};function m(){return typeof openDatabase=="function"}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K="~~local_forage_type~",$=/^~~local_forage_type~([^~]+)~/,x="__lfsc__:",N=x.length,ee="arbf",se="blob",q="si08",fe="ui08",ye="uic8",he="si16",Ee="si32",Le="ur16",Pe="ui32",tt="fl32",St="fl64",ct=N+ee.length,Pt=Object.prototype.toString;function We(w){var R=w.length*.75,k=w.length,I,B=0,C,J,ie,ce;w[w.length-1]==="="&&(R--,w[w.length-2]==="="&&R--);var le=new ArrayBuffer(R),de=new Uint8Array(le);for(I=0;I<k;I+=4)C=V.indexOf(w[I]),J=V.indexOf(w[I+1]),ie=V.indexOf(w[I+2]),ce=V.indexOf(w[I+3]),de[B++]=C<<2|J>>4,de[B++]=(J&15)<<4|ie>>2,de[B++]=(ie&3)<<6|ce&63;return le}function Dt(w){var R=new Uint8Array(w),k="",I;for(I=0;I<R.length;I+=3)k+=V[R[I]>>2],k+=V[(R[I]&3)<<4|R[I+1]>>4],k+=V[(R[I+1]&15)<<2|R[I+2]>>6],k+=V[R[I+2]&63];return R.length%3===2?k=k.substring(0,k.length-1)+"=":R.length%3===1&&(k=k.substring(0,k.length-2)+"=="),k}function qt(w,R){var k="";if(w&&(k=Pt.call(w)),w&&(k==="[object ArrayBuffer]"||w.buffer&&Pt.call(w.buffer)==="[object ArrayBuffer]")){var I,B=x;w instanceof ArrayBuffer?(I=w,B+=ee):(I=w.buffer,k==="[object Int8Array]"?B+=q:k==="[object Uint8Array]"?B+=fe:k==="[object Uint8ClampedArray]"?B+=ye:k==="[object Int16Array]"?B+=he:k==="[object Uint16Array]"?B+=Le:k==="[object Int32Array]"?B+=Ee:k==="[object Uint32Array]"?B+=Pe:k==="[object Float32Array]"?B+=tt:k==="[object Float64Array]"?B+=St:R(new Error("Failed to get type for BinaryArray"))),R(B+Dt(I))}else if(k==="[object Blob]"){var C=new FileReader;C.onload=function(){var J=K+w.type+"~"+Dt(this.result);R(x+se+J)},C.readAsArrayBuffer(w)}else try{R(JSON.stringify(w))}catch(J){console.error("Couldn't convert value into a JSON string: ",w),R(null,J)}}function $e(w){if(w.substring(0,N)!==x)return JSON.parse(w);var R=w.substring(ct),k=w.substring(N,ct),I;if(k===se&&$.test(R)){var B=R.match($);I=B[1],R=R.substring(B[0].length)}var C=We(R);switch(k){case ee:return C;case se:return g([C],{type:I});case q:return new Int8Array(C);case fe:return new Uint8Array(C);case ye:return new Uint8ClampedArray(C);case he:return new Int16Array(C);case Le:return new Uint16Array(C);case Ee:return new Int32Array(C);case Pe:return new Uint32Array(C);case tt:return new Float32Array(C);case St:return new Float64Array(C);default:throw new Error("Unkown type: "+k)}}var Nt={serialize:qt,deserialize:$e,stringToBuffer:We,bufferToString:Dt};function Ut(w,R,k,I){w.executeSql("CREATE TABLE IF NOT EXISTS "+R.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],k,I)}function cr(w){var R=this,k={db:null};if(w)for(var I in w)k[I]=typeof w[I]!="string"?w[I].toString():w[I];var B=new h(function(C,J){try{k.db=openDatabase(k.name,String(k.version),k.description,k.size)}catch(ie){return J(ie)}k.db.transaction(function(ie){Ut(ie,k,function(){R._dbInfo=k,C()},function(ce,le){J(le)})},J)});return k.serializer=Nt,B}function lt(w,R,k,I,B,C){w.executeSql(k,I,B,function(J,ie){ie.code===ie.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[R.storeName],function(ce,le){le.rows.length?C(ce,ie):Ut(ce,R,function(){ce.executeSql(k,I,B,C)},C)},C):C(J,ie)},C)}function lr(w,R){var k=this;w=_(w);var I=new h(function(B,C){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(ie){lt(ie,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[w],function(ce,le){var de=le.rows.length?le.rows.item(0).value:null;de&&(de=J.serializer.deserialize(de)),B(de)},function(ce,le){C(le)})})}).catch(C)});return y(I,R),I}function ut(w,R){var k=this,I=new h(function(B,C){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(ie){lt(ie,J,"SELECT * FROM "+J.storeName,[],function(ce,le){for(var de=le.rows,we=de.length,je=0;je<we;je++){var ze=de.item(je),Me=ze.value;if(Me&&(Me=J.serializer.deserialize(Me)),Me=w(Me,ze.key,je+1),Me!==void 0){B(Me);return}}B()},function(ce,le){C(le)})})}).catch(C)});return y(I,R),I}function At(w,R,k,I){var B=this;w=_(w);var C=new h(function(J,ie){B.ready().then(function(){R===void 0&&(R=null);var ce=R,le=B._dbInfo;le.serializer.serialize(R,function(de,we){we?ie(we):le.db.transaction(function(je){lt(je,le,"INSERT OR REPLACE INTO "+le.storeName+" (key, value) VALUES (?, ?)",[w,de],function(){J(ce)},function(ze,Me){ie(Me)})},function(je){if(je.code===je.QUOTA_ERR){if(I>0){J(At.apply(B,[w,ce,k,I-1]));return}ie(je)}})})}).catch(ie)});return y(C,k),C}function pe(w,R,k){return At.apply(this,[w,R,k,1])}function _r(w,R){var k=this;w=_(w);var I=new h(function(B,C){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(ie){lt(ie,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[w],function(){B()},function(ce,le){C(le)})})}).catch(C)});return y(I,R),I}function fn(w){var R=this,k=new h(function(I,B){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(J){lt(J,C,"DELETE FROM "+C.storeName,[],function(){I()},function(ie,ce){B(ce)})})}).catch(B)});return y(k,w),k}function hn(w){var R=this,k=new h(function(I,B){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(J){lt(J,C,"SELECT COUNT(key) as c FROM "+C.storeName,[],function(ie,ce){var le=ce.rows.item(0).c;I(le)},function(ie,ce){B(ce)})})}).catch(B)});return y(k,w),k}function ft(w,R){var k=this,I=new h(function(B,C){k.ready().then(function(){var J=k._dbInfo;J.db.transaction(function(ie){lt(ie,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[w+1],function(ce,le){var de=le.rows.length?le.rows.item(0).key:null;B(de)},function(ce,le){C(le)})})}).catch(C)});return y(I,R),I}function ur(w){var R=this,k=new h(function(I,B){R.ready().then(function(){var C=R._dbInfo;C.db.transaction(function(J){lt(J,C,"SELECT key FROM "+C.storeName,[],function(ie,ce){for(var le=[],de=0;de<ce.rows.length;de++)le.push(ce.rows.item(de).key);I(le)},function(ie,ce){B(ce)})})}).catch(B)});return y(k,w),k}function Er(w){return new h(function(R,k){w.transaction(function(I){I.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(B,C){for(var J=[],ie=0;ie<C.rows.length;ie++)J.push(C.rows.item(ie).name);R({db:w,storeNames:J})},function(B,C){k(C)})},function(I){k(I)})})}function Nr(w,R){R=b.apply(this,arguments);var k=this.config();w=typeof w!="function"&&w||{},w.name||(w.name=w.name||k.name,w.storeName=w.storeName||k.storeName);var I=this,B;return w.name?B=new h(function(C){var J;w.name===k.name?J=I._dbInfo.db:J=openDatabase(w.name,"","",0),w.storeName?C({db:J,storeNames:[w.storeName]}):C(Er(J))}).then(function(C){return new h(function(J,ie){C.db.transaction(function(ce){function le(ze){return new h(function(Me,Ye){ce.executeSql("DROP TABLE IF EXISTS "+ze,[],function(){Me()},function(Ve,ot){Ye(ot)})})}for(var de=[],we=0,je=C.storeNames.length;we<je;we++)de.push(le(C.storeNames[we]));h.all(de).then(function(){J()}).catch(function(ze){ie(ze)})},function(ce){ie(ce)})})}):B=h.reject("Invalid arguments"),y(B,R),B}var Ft={_driver:"webSQLStorage",_initStorage:cr,_support:m(),iterate:ut,getItem:lr,setItem:pe,removeItem:_r,clear:fn,length:hn,key:ft,keys:ur,dropInstance:Nr};function Fr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ht(w,R){var k=w.name+"/";return w.storeName!==R.storeName&&(k+=w.storeName+"/"),k}function Br(){var w="_localforage_support_test";try{return localStorage.setItem(w,!0),localStorage.removeItem(w),!1}catch{return!0}}function Wt(){return!Br()||localStorage.length>0}function Lr(w){var R=this,k={};if(w)for(var I in w)k[I]=w[I];return k.keyPrefix=ht(w,R._defaultConfig),Wt()?(R._dbInfo=k,k.serializer=Nt,h.resolve()):h.reject()}function zr(w){var R=this,k=R.ready().then(function(){for(var I=R._dbInfo.keyPrefix,B=localStorage.length-1;B>=0;B--){var C=localStorage.key(B);C.indexOf(I)===0&&localStorage.removeItem(C)}});return y(k,w),k}function at(w,R){var k=this;w=_(w);var I=k.ready().then(function(){var B=k._dbInfo,C=localStorage.getItem(B.keyPrefix+w);return C&&(C=B.serializer.deserialize(C)),C});return y(I,R),I}function Mr(w,R){var k=this,I=k.ready().then(function(){for(var B=k._dbInfo,C=B.keyPrefix,J=C.length,ie=localStorage.length,ce=1,le=0;le<ie;le++){var de=localStorage.key(le);if(de.indexOf(C)===0){var we=localStorage.getItem(de);if(we&&(we=B.serializer.deserialize(we)),we=w(we,de.substring(J),ce++),we!==void 0)return we}}});return y(I,R),I}function dn(w,R){var k=this,I=k.ready().then(function(){var B=k._dbInfo,C;try{C=localStorage.key(w)}catch{C=null}return C&&(C=C.substring(B.keyPrefix.length)),C});return y(I,R),I}function mn(w){var R=this,k=R.ready().then(function(){for(var I=R._dbInfo,B=localStorage.length,C=[],J=0;J<B;J++){var ie=localStorage.key(J);ie.indexOf(I.keyPrefix)===0&&C.push(ie.substring(I.keyPrefix.length))}return C});return y(k,w),k}function Sr(w){var R=this,k=R.keys().then(function(I){return I.length});return y(k,w),k}function qr(w,R){var k=this;w=_(w);var I=k.ready().then(function(){var B=k._dbInfo;localStorage.removeItem(B.keyPrefix+w)});return y(I,R),I}function fr(w,R,k){var I=this;w=_(w);var B=I.ready().then(function(){R===void 0&&(R=null);var C=R;return new h(function(J,ie){var ce=I._dbInfo;ce.serializer.serialize(R,function(le,de){if(de)ie(de);else try{localStorage.setItem(ce.keyPrefix+w,le),J(C)}catch(we){(we.name==="QuotaExceededError"||we.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(we),ie(we)}})})});return y(B,k),B}function wt(w,R){if(R=b.apply(this,arguments),w=typeof w!="function"&&w||{},!w.name){var k=this.config();w.name=w.name||k.name,w.storeName=w.storeName||k.storeName}var I=this,B;return w.name?B=new h(function(C){w.storeName?C(ht(w,I._defaultConfig)):C(w.name+"/")}).then(function(C){for(var J=localStorage.length-1;J>=0;J--){var ie=localStorage.key(J);ie.indexOf(C)===0&&localStorage.removeItem(ie)}}):B=h.reject("Invalid arguments"),y(B,R),B}var hr={_driver:"localStorageWrapper",_initStorage:Lr,_support:Fr(),iterate:Mr,getItem:at,setItem:fr,removeItem:qr,clear:zr,length:Sr,key:dn,keys:mn,dropInstance:wt},Tr=function(R,k){return R===k||typeof R=="number"&&typeof k=="number"&&isNaN(R)&&isNaN(k)},Ur=function(R,k){for(var I=R.length,B=0;B<I;){if(Tr(R[B],k))return!0;B++}return!1},kr=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},Ht={},Gt={},Bt={INDEXEDDB:it,WEBSQL:Ft,LOCALSTORAGE:hr},dr=[Bt.INDEXEDDB._driver,Bt.WEBSQL._driver,Bt.LOCALSTORAGE._driver],Xt=["dropInstance"],Rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Xt),xr={description:"",driver:dr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wr(w,R){w[R]=function(){var k=arguments;return w.ready().then(function(){return w[R].apply(w,k)})}}function mr(){for(var w=1;w<arguments.length;w++){var R=arguments[w];if(R)for(var k in R)R.hasOwnProperty(k)&&(kr(R[k])?arguments[0][k]=R[k].slice():arguments[0][k]=R[k])}return arguments[0]}var Hr=function(){function w(R){i(this,w);for(var k in Bt)if(Bt.hasOwnProperty(k)){var I=Bt[k],B=I._driver;this[k]=B,Ht[B]||this.defineDriver(I)}this._defaultConfig=mr({},xr),this._config=mr({},this._defaultConfig,R),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return w.prototype.config=function(k){if((typeof k>"u"?"undefined":s(k))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var I in k){if(I==="storeName"&&(k[I]=k[I].replace(/\W/g,"_")),I==="version"&&typeof k[I]!="number")return new Error("Database version must be a number.");this._config[I]=k[I]}return"driver"in k&&k.driver?this.setDriver(this._config.driver):!0}else return typeof k=="string"?this._config[k]:this._config},w.prototype.defineDriver=function(k,I,B){var C=new h(function(J,ie){try{var ce=k._driver,le=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!k._driver){ie(le);return}for(var de=Rt.concat("_initStorage"),we=0,je=de.length;we<je;we++){var ze=de[we],Me=!Ur(Xt,ze);if((Me||k[ze])&&typeof k[ze]!="function"){ie(le);return}}var Ye=function(){for(var jt=function(pr){return function(){var gn=new Error("Method "+pr+" is not implemented by the current driver"),Te=h.reject(gn);return y(Te,arguments[arguments.length-1]),Te}},Tt=0,$r=Xt.length;Tt<$r;Tt++){var vt=Xt[Tt];k[vt]||(k[vt]=jt(vt))}};Ye();var Ve=function(jt){Ht[ce]&&console.info("Redefining LocalForage driver: "+ce),Ht[ce]=k,Gt[ce]=jt,J()};"_support"in k?k._support&&typeof k._support=="function"?k._support().then(Ve,ie):Ve(!!k._support):Ve(!0)}catch(ot){ie(ot)}});return p(C,I,B),C},w.prototype.driver=function(){return this._driver||null},w.prototype.getDriver=function(k,I,B){var C=Ht[k]?h.resolve(Ht[k]):h.reject(new Error("Driver not found."));return p(C,I,B),C},w.prototype.getSerializer=function(k){var I=h.resolve(Nt);return p(I,k),I},w.prototype.ready=function(k){var I=this,B=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return p(B,k,k),B},w.prototype.setDriver=function(k,I,B){var C=this;kr(k)||(k=[k]);var J=this._getSupportedDrivers(k);function ie(){C._config.driver=C.driver()}function ce(we){return C._extend(we),ie(),C._ready=C._initStorage(C._config),C._ready}function le(we){return function(){var je=0;function ze(){for(;je<we.length;){var Me=we[je];return je++,C._dbInfo=null,C._ready=null,C.getDriver(Me).then(ce).catch(ze)}ie();var Ye=new Error("No available storage method found.");return C._driverSet=h.reject(Ye),C._driverSet}return ze()}}var de=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=de.then(function(){var we=J[0];return C._dbInfo=null,C._ready=null,C.getDriver(we).then(function(je){C._driver=je._driver,ie(),C._wrapLibraryMethodsWithReady(),C._initDriver=le(J)})}).catch(function(){ie();var we=new Error("No available storage method found.");return C._driverSet=h.reject(we),C._driverSet}),p(this._driverSet,I,B),this._driverSet},w.prototype.supports=function(k){return!!Gt[k]},w.prototype._extend=function(k){mr(this,k)},w.prototype._getSupportedDrivers=function(k){for(var I=[],B=0,C=k.length;B<C;B++){var J=k[B];this.supports(J)&&I.push(J)}return I},w.prototype._wrapLibraryMethodsWithReady=function(){for(var k=0,I=Rt.length;k<I;k++)Wr(this,Rt[k])},w.prototype.createInstance=function(k){return new w(k)},w}(),pn=new Hr;r.exports=pn},{3:3}]},{},[4])(4)})})(ii);const ds=ii.exports;var ai={exports:{}};(function(a,e){(function(t){a.exports=t()})(function(){return function t(r,n,s){function i(l,g){if(!n[l]){if(!r[l]){var h=typeof Qt=="function"&&Qt;if(!g&&h)return h(l,!0);if(c)return c(l,!0);var y=new Error("Cannot find module '"+l+"'");throw y.code="MODULE_NOT_FOUND",y}var p=n[l]={exports:{}};r[l][0].call(p.exports,function(_){var b=r[l][1][_];return i(b||_)},p,p.exports,t,r,n,s)}return n[l].exports}for(var c=typeof Qt=="function"&&Qt,u=0;u<s.length;u++)i(s[u]);return i}({1:[function(t,r,n){var s=t("./utils"),i=t("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var l,g,h,y,p,_,b,T=[],S=0,P=u.length,O=P,F=s.getTypeOf(u)!=="string";S<u.length;)O=P-S,h=F?(l=u[S++],g=S<P?u[S++]:0,S<P?u[S++]:0):(l=u.charCodeAt(S++),g=S<P?u.charCodeAt(S++):0,S<P?u.charCodeAt(S++):0),y=l>>2,p=(3&l)<<4|g>>4,_=1<O?(15&g)<<2|h>>6:64,b=2<O?63&h:64,T.push(c.charAt(y)+c.charAt(p)+c.charAt(_)+c.charAt(b));return T.join("")},n.decode=function(u){var l,g,h,y,p,_,b=0,T=0,S="data:";if(u.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var P,O=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===c.charAt(64)&&O--,u.charAt(u.length-2)===c.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=i.uint8array?new Uint8Array(0|O):new Array(0|O);b<u.length;)l=c.indexOf(u.charAt(b++))<<2|(y=c.indexOf(u.charAt(b++)))>>4,g=(15&y)<<4|(p=c.indexOf(u.charAt(b++)))>>2,h=(3&p)<<6|(_=c.indexOf(u.charAt(b++))),P[T++]=l,p!==64&&(P[T++]=g),_!==64&&(P[T++]=h);return P}},{"./support":30,"./utils":32}],2:[function(t,r,n){var s=t("./external"),i=t("./stream/DataWorker"),c=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(g,h,y,p,_){this.compressedSize=g,this.uncompressedSize=h,this.crc32=y,this.compression=p,this.compressedContent=_}l.prototype={getContentWorker:function(){var g=new i(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return g.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new i(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(g,h,y){return g.pipe(new c).pipe(new u("uncompressedSize")).pipe(h.compressWorker(y)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,n){var s=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,n){var s=t("./utils"),i=function(){for(var c,u=[],l=0;l<256;l++){c=l;for(var g=0;g<8;g++)c=1&c?3988292384^c>>>1:c>>>1;u[l]=c}return u}();r.exports=function(c,u){return c!==void 0&&c.length?s.getTypeOf(c)!=="string"?function(l,g,h,y){var p=i,_=y+h;l^=-1;for(var b=y;b<_;b++)l=l>>>8^p[255&(l^g[b])];return-1^l}(0|u,c,c.length,0):function(l,g,h,y){var p=i,_=y+h;l^=-1;for(var b=y;b<_;b++)l=l>>>8^p[255&(l^g.charCodeAt(b))];return-1^l}(0|u,c,c.length,0):0}},{"./utils":32}],5:[function(t,r,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,r,n){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),c=t("./utils"),u=t("./stream/GenericWorker"),l=s?"uint8array":"array";function g(h,y){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=y,this.meta={}}n.magic="\b\0",c.inherits(g,u),g.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(l,h.data),!1)},g.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(y){h.push({data:y,meta:h.meta})}},n.compressWorker=function(h){return new g("Deflate",h)},n.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,n){function s(p,_){var b,T="";for(b=0;b<_;b++)T+=String.fromCharCode(255&p),p>>>=8;return T}function i(p,_,b,T,S,P){var O,F,A=p.file,G=p.compression,L=P!==l.utf8encode,Q=c.transformTo("string",P(A.name)),M=c.transformTo("string",l.utf8encode(A.name)),Z=A.comment,be=c.transformTo("string",P(Z)),D=c.transformTo("string",l.utf8encode(Z)),H=M.length!==A.name.length,v=D.length!==Z.length,X="",ke="",ae="",Re=A.dir,ue=A.date,xe={crc32:0,compressedSize:0,uncompressedSize:0};_&&!b||(xe.crc32=p.crc32,xe.compressedSize=p.compressedSize,xe.uncompressedSize=p.uncompressedSize);var U=0;_&&(U|=8),L||!H&&!v||(U|=2048);var W=0,_e=0;Re&&(W|=16),S==="UNIX"?(_e=798,W|=function(me,Ue){var Je=me;return me||(Je=Ue?16893:33204),(65535&Je)<<16}(A.unixPermissions,Re)):(_e=20,W|=function(me){return 63&(me||0)}(A.dosPermissions)),O=ue.getUTCHours(),O<<=6,O|=ue.getUTCMinutes(),O<<=5,O|=ue.getUTCSeconds()/2,F=ue.getUTCFullYear()-1980,F<<=4,F|=ue.getUTCMonth()+1,F<<=5,F|=ue.getUTCDate(),H&&(ke=s(1,1)+s(g(Q),4)+M,X+="up"+s(ke.length,2)+ke),v&&(ae=s(1,1)+s(g(be),4)+D,X+="uc"+s(ae.length,2)+ae);var ve="";return ve+=`
\0`,ve+=s(U,2),ve+=G.magic,ve+=s(O,2),ve+=s(F,2),ve+=s(xe.crc32,4),ve+=s(xe.compressedSize,4),ve+=s(xe.uncompressedSize,4),ve+=s(Q.length,2),ve+=s(X.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ve+Q+X,dirRecord:h.CENTRAL_FILE_HEADER+s(_e,2)+ve+s(be.length,2)+"\0\0\0\0"+s(W,4)+s(T,4)+Q+X+be}}var c=t("../utils"),u=t("../stream/GenericWorker"),l=t("../utf8"),g=t("../crc32"),h=t("../signature");function y(p,_,b,T){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=b,this.encodeFileName=T,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(y,u),y.prototype.push=function(p){var _=p.meta.percent||0,b=this.entriesCount,T=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,u.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:b?(_+100*(b-T-1))/b:100}}))},y.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var _=this.streamFiles&&!p.file.dir;if(_){var b=i(p,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(p){this.accumulate=!1;var _=this.streamFiles&&!p.file.dir,b=i(p,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),_)this.push({data:function(T){return h.DATA_DESCRIPTOR+s(T.crc32,4)+s(T.compressedSize,4)+s(T.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var p=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var b=this.bytesWritten-p,T=function(S,P,O,F,A){var G=c.transformTo("string",A(F));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(S,2)+s(S,2)+s(P,4)+s(O,4)+s(G.length,2)+G}(this.dirRecords.length,b,p,this.zipComment,this.encodeFileName);this.push({data:T,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(p){this._sources.push(p);var _=this;return p.on("data",function(b){_.processChunk(b)}),p.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),p.on("error",function(b){_.error(b)}),this},y.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(p){var _=this._sources;if(!u.prototype.error.call(this,p))return!1;for(var b=0;b<_.length;b++)try{_[b].error(p)}catch{}return!0},y.prototype.lock=function(){u.prototype.lock.call(this);for(var p=this._sources,_=0;_<p.length;_++)p[_].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,n){var s=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(c,u,l){var g=new i(u.streamFiles,l,u.platform,u.encodeFileName),h=0;try{c.forEach(function(y,p){h++;var _=function(P,O){var F=P||O,A=s[F];if(!A)throw new Error(F+" is not a valid compression method !");return A}(p.options.compression,u.compression),b=p.options.compressionOptions||u.compressionOptions||{},T=p.dir,S=p.date;p._compressWorker(_,b).withStreamInfo("file",{name:y,dir:T,date:S,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(g)}),g.entriesCount=h}catch(y){g.error(y)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new s;for(var c in this)typeof this[c]!="function"&&(i[c]=this[c]);return i}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(i,c){return new s().loadAsync(i,c)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,n){var s=t("./utils"),i=t("./external"),c=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),g=t("./nodejsUtils");function h(y){return new i.Promise(function(p,_){var b=y.decompressed.getContentWorker().pipe(new l);b.on("error",function(T){_(T)}).on("end",function(){b.streamInfo.crc32!==y.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(y,p){var _=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),g.isNode&&g.isStream(y)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",y,!0,p.optimizedBinaryString,p.base64).then(function(b){var T=new u(p);return T.load(b),T}).then(function(b){var T=[i.Promise.resolve(b)],S=b.files;if(p.checkCRC32)for(var P=0;P<S.length;P++)T.push(h(S[P]));return i.Promise.all(T)}).then(function(b){for(var T=b.shift(),S=T.files,P=0;P<S.length;P++){var O=S[P],F=O.fileNameStr,A=s.resolve(O.fileNameStr);_.file(A,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:p.createFolders}),O.dir||(_.file(A).unsafeOriginalName=F)}return T.zipComment.length&&(_.comment=T.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,n){var s=t("../utils"),i=t("../stream/GenericWorker");function c(u,l){i.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(c,i),c.prototype._bindStream=function(u){var l=this;(this._stream=u).pause(),u.on("data",function(g){l.push({data:g,meta:{percent:0}})}).on("error",function(g){l.isPaused?this.generatedError=g:l.error(g)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},c.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,n){var s=t("readable-stream").Readable;function i(c,u,l){s.call(this,u),this._helper=c;var g=this;c.on("data",function(h,y){g.push(h)||g._helper.pause(),l&&l(y)}).on("error",function(h){g.emit("error",h)}).on("end",function(){g.push(null)})}t("../utils").inherits(i,s),i.prototype._read=function(){this._helper.resume()},r.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,r,n){r.exports={isNode:typeof re<"u",newBufferFrom:function(s,i){if(re.from&&re.from!==Uint8Array.from)return re.from(s,i);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new re(s,i)},allocBuffer:function(s){if(re.alloc)return re.alloc(s);var i=new re(s);return i.fill(0),i},isBuffer:function(s){return re.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,n){function s(A,G,L){var Q,M=c.getTypeOf(G),Z=c.extend(L||{},g);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(A=S(A)),Z.createFolders&&(Q=T(A))&&P.call(this,Q,!0);var be=M==="string"&&Z.binary===!1&&Z.base64===!1;L&&L.binary!==void 0||(Z.binary=!be),(G instanceof h&&G.uncompressedSize===0||Z.dir||!G||G.length===0)&&(Z.base64=!1,Z.binary=!0,G="",Z.compression="STORE",M="string");var D=null;D=G instanceof h||G instanceof u?G:_.isNode&&_.isStream(G)?new b(A,G):c.prepareContent(A,G,Z.binary,Z.optimizedBinaryString,Z.base64);var H=new y(A,D,Z);this.files[A]=H}var i=t("./utf8"),c=t("./utils"),u=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),g=t("./defaults"),h=t("./compressedObject"),y=t("./zipObject"),p=t("./generate"),_=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),T=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var G=A.lastIndexOf("/");return 0<G?A.substring(0,G):""},S=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},P=function(A,G){return G=G!==void 0?G:g.createFolders,A=S(A),this.files[A]||s.call(this,A,null,{dir:!0,createFolders:G}),this.files[A]};function O(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var G,L,Q;for(G in this.files)Q=this.files[G],(L=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&A(L,Q)},filter:function(A){var G=[];return this.forEach(function(L,Q){A(L,Q)&&G.push(Q)}),G},file:function(A,G,L){if(arguments.length!==1)return A=this.root+A,s.call(this,A,G,L),this;if(O(A)){var Q=A;return this.filter(function(Z,be){return!be.dir&&Q.test(Z)})}var M=this.files[this.root+A];return M&&!M.dir?M:null},folder:function(A){if(!A)return this;if(O(A))return this.filter(function(M,Z){return Z.dir&&A.test(M)});var G=this.root+A,L=P.call(this,G),Q=this.clone();return Q.root=L.name,Q},remove:function(A){A=this.root+A;var G=this.files[A];if(G||(A.slice(-1)!=="/"&&(A+="/"),G=this.files[A]),G&&!G.dir)delete this.files[A];else for(var L=this.filter(function(M,Z){return Z.name.slice(0,A.length)===A}),Q=0;Q<L.length;Q++)delete this.files[L[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var G,L={};try{if((L=c.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");c.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var Q=L.comment||this.comment||"";G=p.generateWorker(this,L,Q)}catch(M){(G=new u("error")).error(M)}return new l(G,L.type||"string",L.mimeType)},generateAsync:function(A,G){return this.generateInternalStream(A).accumulate(G)},generateNodeStream:function(A,G){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(G)}};r.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,n){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,n){var s=t("./DataReader");function i(c){s.call(this,c);for(var u=0;u<this.data.length;u++)c[u]=255&c[u]}t("../utils").inherits(i,s),i.prototype.byteAt=function(c){return this.data[this.zero+c]},i.prototype.lastIndexOfSignature=function(c){for(var u=c.charCodeAt(0),l=c.charCodeAt(1),g=c.charCodeAt(2),h=c.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===u&&this.data[y+1]===l&&this.data[y+2]===g&&this.data[y+3]===h)return y-this.zero;return-1},i.prototype.readAndCheckSignature=function(c){var u=c.charCodeAt(0),l=c.charCodeAt(1),g=c.charCodeAt(2),h=c.charCodeAt(3),y=this.readData(4);return u===y[0]&&l===y[1]&&g===y[2]&&h===y[3]},i.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},r.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,r,n){var s=t("../utils");function i(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var u,l=0;for(this.checkOffset(c),u=this.index+c-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=c,l},readString:function(c){return s.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=i},{"../utils":32}],19:[function(t,r,n){var s=t("./Uint8ArrayReader");function i(c){s.call(this,c)}t("../utils").inherits(i,s),i.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},r.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,n){var s=t("./DataReader");function i(c){s.call(this,c)}t("../utils").inherits(i,s),i.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},i.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},i.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},i.prototype.readData=function(c){this.checkOffset(c);var u=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},r.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,r,n){var s=t("./ArrayReader");function i(c){s.call(this,c)}t("../utils").inherits(i,s),i.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,u},r.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,n){var s=t("../utils"),i=t("../support"),c=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),g=t("./Uint8ArrayReader");r.exports=function(h){var y=s.getTypeOf(h);return s.checkSupport(y),y!=="string"||i.uint8array?y==="nodebuffer"?new l(h):i.uint8array?new g(s.transformTo("uint8array",h)):new c(s.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,n){var s=t("./GenericWorker"),i=t("../utils");function c(u){s.call(this,"ConvertWorker to "+u),this.destType=u}i.inherits(c,s),c.prototype.processChunk=function(u){this.push({data:i.transformTo(this.destType,u.data),meta:u.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,n){var s=t("./GenericWorker"),i=t("../crc32");function c(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(c,s),c.prototype.processChunk=function(u){this.streamInfo.crc32=i(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function c(u){i.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(c,i),c.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}i.prototype.processChunk.call(this,u)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,n){var s=t("../utils"),i=t("./GenericWorker");function c(u){i.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(g){l.dataIsReady=!0,l.data=g,l.max=g&&g.length||0,l.type=s.getTypeOf(g),l.isPaused||l._tickAndRepeat()},function(g){l.error(g)})}s.inherits(c,i),c.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,l);break;case"uint8array":u=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":u=this.data.slice(this.index,l)}return this.index=l,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,n){function s(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,c){return this._listeners[i].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,c){if(this._listeners[i])for(var u=0;u<this._listeners[i].length;u++)this._listeners[i][u].call(this,c)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var c=this;return i.on("data",function(u){c.processChunk(u)}),i.on("end",function(){c.end()}),i.on("error",function(u){c.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,c){return this.extraStreamInfo[i]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},r.exports=s},{}],29:[function(t,r,n){var s=t("../utils"),i=t("./ConvertWorker"),c=t("./GenericWorker"),u=t("../base64"),l=t("../support"),g=t("../external"),h=null;if(l.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(_,b){return new g.Promise(function(T,S){var P=[],O=_._internalType,F=_._outputType,A=_._mimeType;_.on("data",function(G,L){P.push(G),b&&b(L)}).on("error",function(G){P=[],S(G)}).on("end",function(){try{var G=function(L,Q,M){switch(L){case"blob":return s.newBlob(s.transformTo("arraybuffer",Q),M);case"base64":return u.encode(Q);default:return s.transformTo(L,Q)}}(F,function(L,Q){var M,Z=0,be=null,D=0;for(M=0;M<Q.length;M++)D+=Q[M].length;switch(L){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(be=new Uint8Array(D),M=0;M<Q.length;M++)be.set(Q[M],Z),Z+=Q[M].length;return be;case"nodebuffer":return re.concat(Q);default:throw new Error("concat : unsupported type '"+L+"'")}}(O,P),A);T(G)}catch(L){S(L)}P=[]}).resume()})}function p(_,b,T){var S=b;switch(b){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=b,this._mimeType=T,s.checkSupport(S),this._worker=_.pipe(new i(S)),_.lock()}catch(P){this._worker=new c("error"),this._worker.error(P)}}p.prototype={accumulate:function(_){return y(this,_)},on:function(_,b){var T=this;return _==="data"?this._worker.on(_,function(S){b.call(T,S.data,S.meta)}):this._worker.on(_,function(){s.delay(b,arguments,T)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},_)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof re<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(s),n.blob=i.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,n){for(var s=t("./utils"),i=t("./support"),c=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),g=0;g<256;g++)l[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;l[254]=l[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function y(){u.call(this,"utf-8 encode")}n.utf8encode=function(p){return i.nodebuffer?c.newBufferFrom(p,"utf-8"):function(_){var b,T,S,P,O,F=_.length,A=0;for(P=0;P<F;P++)(64512&(T=_.charCodeAt(P)))==55296&&P+1<F&&(64512&(S=_.charCodeAt(P+1)))==56320&&(T=65536+(T-55296<<10)+(S-56320),P++),A+=T<128?1:T<2048?2:T<65536?3:4;for(b=i.uint8array?new Uint8Array(A):new Array(A),P=O=0;O<A;P++)(64512&(T=_.charCodeAt(P)))==55296&&P+1<F&&(64512&(S=_.charCodeAt(P+1)))==56320&&(T=65536+(T-55296<<10)+(S-56320),P++),T<128?b[O++]=T:(T<2048?b[O++]=192|T>>>6:(T<65536?b[O++]=224|T>>>12:(b[O++]=240|T>>>18,b[O++]=128|T>>>12&63),b[O++]=128|T>>>6&63),b[O++]=128|63&T);return b}(p)},n.utf8decode=function(p){return i.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(_){var b,T,S,P,O=_.length,F=new Array(2*O);for(b=T=0;b<O;)if((S=_[b++])<128)F[T++]=S;else if(4<(P=l[S]))F[T++]=65533,b+=P-1;else{for(S&=P===2?31:P===3?15:7;1<P&&b<O;)S=S<<6|63&_[b++],P--;1<P?F[T++]=65533:S<65536?F[T++]=S:(S-=65536,F[T++]=55296|S>>10&1023,F[T++]=56320|1023&S)}return F.length!==T&&(F.subarray?F=F.subarray(0,T):F.length=T),s.applyFromCharCode(F)}(p=s.transformTo(i.uint8array?"uint8array":"array",p))},s.inherits(h,u),h.prototype.processChunk=function(p){var _=s.transformTo(i.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var b=_;(_=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),_.set(b,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var T=function(P,O){var F;for((O=O||P.length)>P.length&&(O=P.length),F=O-1;0<=F&&(192&P[F])==128;)F--;return F<0||F===0?O:F+l[P[F]]>O?F:O}(_),S=_;T!==_.length&&(i.uint8array?(S=_.subarray(0,T),this.leftOver=_.subarray(T,_.length)):(S=_.slice(0,T),this.leftOver=_.slice(T,_.length))),this.push({data:n.utf8decode(S),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,s.inherits(y,u),y.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,n){var s=t("./support"),i=t("./base64"),c=t("./nodejsUtils"),u=t("./external");function l(b){return b}function g(b,T){for(var S=0;S<b.length;++S)T[S]=255&b.charCodeAt(S);return T}t("setimmediate"),n.newBlob=function(b,T){n.checkSupport("blob");try{return new Blob([b],{type:T})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(b),S.getBlob(T)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,T,S){var P=[],O=0,F=b.length;if(F<=S)return String.fromCharCode.apply(null,b);for(;O<F;)T==="array"||T==="nodebuffer"?P.push(String.fromCharCode.apply(null,b.slice(O,Math.min(O+S,F)))):P.push(String.fromCharCode.apply(null,b.subarray(O,Math.min(O+S,F)))),O+=S;return P.join("")},stringifyByChar:function(b){for(var T="",S=0;S<b.length;S++)T+=String.fromCharCode(b[S]);return T},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}}()}};function y(b){var T=65536,S=n.getTypeOf(b),P=!0;if(S==="uint8array"?P=h.applyCanBeUsed.uint8array:S==="nodebuffer"&&(P=h.applyCanBeUsed.nodebuffer),P)for(;1<T;)try{return h.stringifyByChunk(b,S,T)}catch{T=Math.floor(T/2)}return h.stringifyByChar(b)}function p(b,T){for(var S=0;S<b.length;S++)T[S]=b[S];return T}n.applyFromCharCode=y;var _={};_.string={string:l,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return _.string.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:function(b){return g(b,c.allocBuffer(b.length))}},_.array={string:y,array:l,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},_.arraybuffer={string:function(b){return y(new Uint8Array(b))},array:function(b){return p(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:l,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},_.uint8array={string:y,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:l,nodebuffer:function(b){return c.newBufferFrom(b)}},_.nodebuffer={string:y,array:function(b){return p(b,new Array(b.length))},arraybuffer:function(b){return _.nodebuffer.uint8array(b).buffer},uint8array:function(b){return p(b,new Uint8Array(b.length))},nodebuffer:l},n.transformTo=function(b,T){if(T=T||"",!b)return T;n.checkSupport(b);var S=n.getTypeOf(T);return _[S][b](T)},n.resolve=function(b){for(var T=b.split("/"),S=[],P=0;P<T.length;P++){var O=T[P];O==="."||O===""&&P!==0&&P!==T.length-1||(O===".."?S.pop():S.push(O))}return S.join("/")},n.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":s.nodebuffer&&c.isBuffer(b)?"nodebuffer":s.uint8array&&b instanceof Uint8Array?"uint8array":s.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(b){if(!s[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(b){var T,S,P="";for(S=0;S<(b||"").length;S++)P+="\\x"+((T=b.charCodeAt(S))<16?"0":"")+T.toString(16).toUpperCase();return P},n.delay=function(b,T,S){setImmediate(function(){b.apply(S||null,T||[])})},n.inherits=function(b,T){function S(){}S.prototype=T.prototype,b.prototype=new S},n.extend=function(){var b,T,S={};for(b=0;b<arguments.length;b++)for(T in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],T)&&S[T]===void 0&&(S[T]=arguments[b][T]);return S},n.prepareContent=function(b,T,S,P,O){return u.Promise.resolve(T).then(function(F){return s.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,G){var L=new FileReader;L.onload=function(Q){A(Q.target.result)},L.onerror=function(Q){G(Q.target.error)},L.readAsArrayBuffer(F)}):F}).then(function(F){var A=n.getTypeOf(F);return A?(A==="arraybuffer"?F=n.transformTo("uint8array",F):A==="string"&&(O?F=i.decode(F):S&&P!==!0&&(F=function(G){return g(G,s.uint8array?new Uint8Array(G.length):new Array(G.length))}(F))),F):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),c=t("./signature"),u=t("./zipEntry"),l=t("./support");function g(h){this.files=[],this.loadOptions=h}g.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(y)+", expected "+i.pretty(h)+")")}},isSignature:function(h,y){var p=this.reader.index;this.reader.setIndex(h);var _=this.reader.readString(4)===y;return this.reader.setIndex(p),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),y=l.uint8array?"uint8array":"array",p=i.transformTo(y,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,y,p,_=this.zip64EndOfCentralSize-44;0<_;)h=this.reader.readInt(2),y=this.reader.readInt(4),p=this.reader.readData(y),this.zip64ExtensibleData[h]={id:h,length:y,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,y;for(h=0;h<this.files.length;h++)y=this.files[h],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var y=h;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var _=y-p;if(0<_)this.isSignature(y,c.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,n){var s=t("./reader/readerFor"),i=t("./utils"),c=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),g=t("./compressions"),h=t("./support");function y(p,_){this.options=p,this.loadOptions=_}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var _,b;if(p.skip(22),this.fileNameLength=p.readInt(2),b=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(T){for(var S in g)if(Object.prototype.hasOwnProperty.call(g,S)&&g[S].magic===T)return g[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,_,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var _=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(_),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var _,b,T,S=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<S;)_=p.readInt(2),b=p.readInt(2),T=p.readData(b),this.extraFields[_]={id:_,length:b,value:T};p.setIndex(S)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var b=i.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var T=this.findExtraFieldUnicodeComment();if(T!==null)this.fileCommentStr=T;else{var S=i.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var _=s(p.value);return _.readInt(1)!==1||u(this.fileName)!==_.readInt(4)?null:l.utf8decode(_.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var _=s(p.value);return _.readInt(1)!==1||u(this.fileComment)!==_.readInt(4)?null:l.utf8decode(_.readData(p.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,n){function s(_,b,T){this.name=_,this.dir=T.dir,this.date=T.date,this.comment=T.comment,this.unixPermissions=T.unixPermissions,this.dosPermissions=T.dosPermissions,this._data=b,this._dataBinary=T.binary,this.options={compression:T.compression,compressionOptions:T.compressionOptions}}var i=t("./stream/StreamHelper"),c=t("./stream/DataWorker"),u=t("./utf8"),l=t("./compressedObject"),g=t("./stream/GenericWorker");s.prototype={internalStream:function(_){var b=null,T="string";try{if(!_)throw new Error("No output type specified.");var S=(T=_.toLowerCase())==="string"||T==="text";T!=="binarystring"&&T!=="text"||(T="string"),b=this._decompressWorker();var P=!this._dataBinary;P&&!S&&(b=b.pipe(new u.Utf8EncodeWorker)),!P&&S&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(O){(b=new g("error")).error(O)}return new i(b,T,"")},async:function(_,b){return this.internalStream(_).accumulate(b)},nodeStream:function(_,b){return this.internalStream(_||"nodebuffer").toNodejsStream(b)},_compressWorker:function(_,b){if(this._data instanceof l&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var T=this._decompressWorker();return this._dataBinary||(T=T.pipe(new u.Utf8EncodeWorker)),l.createWorkerFrom(T,_,b)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof g?this._data:new c(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)s.prototype[h[p]]=y;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(s){var i,c,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var l=0,g=new u(_),h=s.document.createTextNode("");g.observe(h,{characterData:!0}),i=function(){h.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)i="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var b=s.document.createElement("script");b.onreadystatechange=function(){_(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},s.document.documentElement.appendChild(b)}:function(){setTimeout(_,0)};else{var y=new s.MessageChannel;y.port1.onmessage=_,i=function(){y.port2.postMessage(0)}}var p=[];function _(){var b,T;c=!0;for(var S=p.length;S;){for(T=p,p=[],b=-1;++b<S;)T[b]();S=p.length}c=!1}r.exports=function(b){p.push(b)!==1||c||i()}}).call(this,typeof Zt<"u"?Zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,n){var s=t("immediate");function i(){}var c={},u=["REJECTED"],l=["FULFILLED"],g=["PENDING"];function h(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,S!==i&&b(this,S)}function y(S,P,O){this.promise=S,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function p(S,P,O){s(function(){var F;try{F=P(O)}catch(A){return c.reject(S,A)}F===S?c.reject(S,new TypeError("Cannot resolve promise with itself")):c.resolve(S,F)})}function _(S){var P=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof P=="function")return function(){P.apply(S,arguments)}}function b(S,P){var O=!1;function F(L){O||(O=!0,c.reject(S,L))}function A(L){O||(O=!0,c.resolve(S,L))}var G=T(function(){P(A,F)});G.status==="error"&&F(G.value)}function T(S,P){var O={};try{O.value=S(P),O.status="success"}catch(F){O.status="error",O.value=F}return O}(r.exports=h).prototype.finally=function(S){if(typeof S!="function")return this;var P=this.constructor;return this.then(function(O){return P.resolve(S()).then(function(){return O})},function(O){return P.resolve(S()).then(function(){throw O})})},h.prototype.catch=function(S){return this.then(null,S)},h.prototype.then=function(S,P){if(typeof S!="function"&&this.state===l||typeof P!="function"&&this.state===u)return this;var O=new this.constructor(i);return this.state!==g?p(O,this.state===l?S:P,this.outcome):this.queue.push(new y(O,S,P)),O},y.prototype.callFulfilled=function(S){c.resolve(this.promise,S)},y.prototype.otherCallFulfilled=function(S){p(this.promise,this.onFulfilled,S)},y.prototype.callRejected=function(S){c.reject(this.promise,S)},y.prototype.otherCallRejected=function(S){p(this.promise,this.onRejected,S)},c.resolve=function(S,P){var O=T(_,P);if(O.status==="error")return c.reject(S,O.value);var F=O.value;if(F)b(S,F);else{S.state=l,S.outcome=P;for(var A=-1,G=S.queue.length;++A<G;)S.queue[A].callFulfilled(P)}return S},c.reject=function(S,P){S.state=u,S.outcome=P;for(var O=-1,F=S.queue.length;++O<F;)S.queue[O].callRejected(P);return S},h.resolve=function(S){return S instanceof this?S:c.resolve(new this(i),S)},h.reject=function(S){var P=new this(i);return c.reject(P,S)},h.all=function(S){var P=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=S.length,F=!1;if(!O)return this.resolve([]);for(var A=new Array(O),G=0,L=-1,Q=new this(i);++L<O;)M(S[L],L);return Q;function M(Z,be){P.resolve(Z).then(function(D){A[be]=D,++G!==O||F||(F=!0,c.resolve(Q,A))},function(D){F||(F=!0,c.reject(Q,D))})}},h.race=function(S){var P=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=S.length,F=!1;if(!O)return this.resolve([]);for(var A=-1,G=new this(i);++A<O;)L=S[A],P.resolve(L).then(function(Q){F||(F=!0,c.resolve(G,Q))},function(Q){F||(F=!0,c.reject(G,Q))});var L;return G}},{immediate:36}],38:[function(t,r,n){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,n){var s=t("./zlib/deflate"),i=t("./utils/common"),c=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),g=Object.prototype.toString,h=0,y=-1,p=0,_=8;function b(S){if(!(this instanceof b))return new b(S);this.options=i.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(O!==h)throw new Error(u[O]);if(P.header&&s.deflateSetHeader(this.strm,P.header),P.dictionary){var F;if(F=typeof P.dictionary=="string"?c.string2buf(P.dictionary):g.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(O=s.deflateSetDictionary(this.strm,F))!==h)throw new Error(u[O]);this._dict_set=!0}}function T(S,P){var O=new b(P);if(O.push(S,!0),O.err)throw O.msg||u[O.err];return O.result}b.prototype.push=function(S,P){var O,F,A=this.strm,G=this.options.chunkSize;if(this.ended)return!1;F=P===~~P?P:P===!0?4:0,typeof S=="string"?A.input=c.string2buf(S):g.call(S)==="[object ArrayBuffer]"?A.input=new Uint8Array(S):A.input=S,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(G),A.next_out=0,A.avail_out=G),(O=s.deflate(A,F))!==1&&O!==h)return this.onEnd(O),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(i.shrinkBuf(A.output,A.next_out))):this.onData(i.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&O!==1);return F===4?(O=s.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===h):F!==2||(this.onEnd(h),!(A.avail_out=0))},b.prototype.onData=function(S){this.chunks.push(S)},b.prototype.onEnd=function(S){S===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},n.Deflate=b,n.deflate=T,n.deflateRaw=function(S,P){return(P=P||{}).raw=!0,T(S,P)},n.gzip=function(S,P){return(P=P||{}).gzip=!0,T(S,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,n){var s=t("./zlib/inflate"),i=t("./utils/common"),c=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),g=t("./zlib/zstream"),h=t("./zlib/gzheader"),y=Object.prototype.toString;function p(b){if(!(this instanceof p))return new p(b);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},b||{});var T=this.options;T.raw&&0<=T.windowBits&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),!(0<=T.windowBits&&T.windowBits<16)||b&&b.windowBits||(T.windowBits+=32),15<T.windowBits&&T.windowBits<48&&(15&T.windowBits)==0&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var S=s.inflateInit2(this.strm,T.windowBits);if(S!==u.Z_OK)throw new Error(l[S]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function _(b,T){var S=new p(T);if(S.push(b,!0),S.err)throw S.msg||l[S.err];return S.result}p.prototype.push=function(b,T){var S,P,O,F,A,G,L=this.strm,Q=this.options.chunkSize,M=this.options.dictionary,Z=!1;if(this.ended)return!1;P=T===~~T?T:T===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?L.input=c.binstring2buf(b):y.call(b)==="[object ArrayBuffer]"?L.input=new Uint8Array(b):L.input=b,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new i.Buf8(Q),L.next_out=0,L.avail_out=Q),(S=s.inflate(L,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&M&&(G=typeof M=="string"?c.string2buf(M):y.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,S=s.inflateSetDictionary(this.strm,G)),S===u.Z_BUF_ERROR&&Z===!0&&(S=u.Z_OK,Z=!1),S!==u.Z_STREAM_END&&S!==u.Z_OK)return this.onEnd(S),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&S!==u.Z_STREAM_END&&(L.avail_in!==0||P!==u.Z_FINISH&&P!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=c.utf8border(L.output,L.next_out),F=L.next_out-O,A=c.buf2string(L.output,O),L.next_out=F,L.avail_out=Q-F,F&&i.arraySet(L.output,L.output,O,F,0),this.onData(A)):this.onData(i.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(Z=!0)}while((0<L.avail_in||L.avail_out===0)&&S!==u.Z_STREAM_END);return S===u.Z_STREAM_END&&(P=u.Z_FINISH),P===u.Z_FINISH?(S=s.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u.Z_OK):P!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(L.avail_out=0))},p.prototype.onData=function(b){this.chunks.push(b)},p.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Inflate=p,n.inflate=_,n.inflateRaw=function(b,T){return(T=T||{}).raw=!0,_(b,T)},n.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var g=l.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var h in g)g.hasOwnProperty(h)&&(u[h]=g[h])}}return u},n.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var i={arraySet:function(u,l,g,h,y){if(l.subarray&&u.subarray)u.set(l.subarray(g,g+h),y);else for(var p=0;p<h;p++)u[y+p]=l[g+p]},flattenChunks:function(u){var l,g,h,y,p,_;for(l=h=0,g=u.length;l<g;l++)h+=u[l].length;for(_=new Uint8Array(h),l=y=0,g=u.length;l<g;l++)p=u[l],_.set(p,y),y+=p.length;return _}},c={arraySet:function(u,l,g,h,y){for(var p=0;p<h;p++)u[y+p]=l[g+p]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,c))},n.setTyped(s)},{}],42:[function(t,r,n){var s=t("./common"),i=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var u=new s.Buf8(256),l=0;l<256;l++)u[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function g(h,y){if(y<65537&&(h.subarray&&c||!h.subarray&&i))return String.fromCharCode.apply(null,s.shrinkBuf(h,y));for(var p="",_=0;_<y;_++)p+=String.fromCharCode(h[_]);return p}u[254]=u[254]=1,n.string2buf=function(h){var y,p,_,b,T,S=h.length,P=0;for(b=0;b<S;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<S&&(64512&(_=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(_-56320),b++),P+=p<128?1:p<2048?2:p<65536?3:4;for(y=new s.Buf8(P),b=T=0;T<P;b++)(64512&(p=h.charCodeAt(b)))==55296&&b+1<S&&(64512&(_=h.charCodeAt(b+1)))==56320&&(p=65536+(p-55296<<10)+(_-56320),b++),p<128?y[T++]=p:(p<2048?y[T++]=192|p>>>6:(p<65536?y[T++]=224|p>>>12:(y[T++]=240|p>>>18,y[T++]=128|p>>>12&63),y[T++]=128|p>>>6&63),y[T++]=128|63&p);return y},n.buf2binstring=function(h){return g(h,h.length)},n.binstring2buf=function(h){for(var y=new s.Buf8(h.length),p=0,_=y.length;p<_;p++)y[p]=h.charCodeAt(p);return y},n.buf2string=function(h,y){var p,_,b,T,S=y||h.length,P=new Array(2*S);for(p=_=0;p<S;)if((b=h[p++])<128)P[_++]=b;else if(4<(T=u[b]))P[_++]=65533,p+=T-1;else{for(b&=T===2?31:T===3?15:7;1<T&&p<S;)b=b<<6|63&h[p++],T--;1<T?P[_++]=65533:b<65536?P[_++]=b:(b-=65536,P[_++]=55296|b>>10&1023,P[_++]=56320|1023&b)}return g(P,_)},n.utf8border=function(h,y){var p;for((y=y||h.length)>h.length&&(y=h.length),p=y-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?y:p+u[h[p]]>y?p:y}},{"./common":41}],43:[function(t,r,n){r.exports=function(s,i,c,u){for(var l=65535&s|0,g=s>>>16&65535|0,h=0;c!==0;){for(c-=h=2e3<c?2e3:c;g=g+(l=l+i[u++]|0)|0,--h;);l%=65521,g%=65521}return l|g<<16|0}},{}],44:[function(t,r,n){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,n){var s=function(){for(var i,c=[],u=0;u<256;u++){i=u;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;c[u]=i}return c}();r.exports=function(i,c,u,l){var g=s,h=l+u;i^=-1;for(var y=l;y<h;y++)i=i>>>8^g[255&(i^c[y])];return-1^i}},{}],46:[function(t,r,n){var s,i=t("../utils/common"),c=t("./trees"),u=t("./adler32"),l=t("./crc32"),g=t("./messages"),h=0,y=4,p=0,_=-2,b=-1,T=4,S=2,P=8,O=9,F=286,A=30,G=19,L=2*F+1,Q=15,M=3,Z=258,be=Z+M+1,D=42,H=113,v=1,X=2,ke=3,ae=4;function Re(m,V){return m.msg=g[V],V}function ue(m){return(m<<1)-(4<m?9:0)}function xe(m){for(var V=m.length;0<=--V;)m[V]=0}function U(m){var V=m.state,K=V.pending;K>m.avail_out&&(K=m.avail_out),K!==0&&(i.arraySet(m.output,V.pending_buf,V.pending_out,K,m.next_out),m.next_out+=K,V.pending_out+=K,m.total_out+=K,m.avail_out-=K,V.pending-=K,V.pending===0&&(V.pending_out=0))}function W(m,V){c._tr_flush_block(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,V),m.block_start=m.strstart,U(m.strm)}function _e(m,V){m.pending_buf[m.pending++]=V}function ve(m,V){m.pending_buf[m.pending++]=V>>>8&255,m.pending_buf[m.pending++]=255&V}function me(m,V){var K,$,x=m.max_chain_length,N=m.strstart,ee=m.prev_length,se=m.nice_match,q=m.strstart>m.w_size-be?m.strstart-(m.w_size-be):0,fe=m.window,ye=m.w_mask,he=m.prev,Ee=m.strstart+Z,Le=fe[N+ee-1],Pe=fe[N+ee];m.prev_length>=m.good_match&&(x>>=2),se>m.lookahead&&(se=m.lookahead);do if(fe[(K=V)+ee]===Pe&&fe[K+ee-1]===Le&&fe[K]===fe[N]&&fe[++K]===fe[N+1]){N+=2,K++;do;while(fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&fe[++N]===fe[++K]&&N<Ee);if($=Z-(Ee-N),N=Ee-Z,ee<$){if(m.match_start=V,se<=(ee=$))break;Le=fe[N+ee-1],Pe=fe[N+ee]}}while((V=he[V&ye])>q&&--x!=0);return ee<=m.lookahead?ee:m.lookahead}function Ue(m){var V,K,$,x,N,ee,se,q,fe,ye,he=m.w_size;do{if(x=m.window_size-m.lookahead-m.strstart,m.strstart>=he+(he-be)){for(i.arraySet(m.window,m.window,he,he,0),m.match_start-=he,m.strstart-=he,m.block_start-=he,V=K=m.hash_size;$=m.head[--V],m.head[V]=he<=$?$-he:0,--K;);for(V=K=he;$=m.prev[--V],m.prev[V]=he<=$?$-he:0,--K;);x+=he}if(m.strm.avail_in===0)break;if(ee=m.strm,se=m.window,q=m.strstart+m.lookahead,fe=x,ye=void 0,ye=ee.avail_in,fe<ye&&(ye=fe),K=ye===0?0:(ee.avail_in-=ye,i.arraySet(se,ee.input,ee.next_in,ye,q),ee.state.wrap===1?ee.adler=u(ee.adler,se,ye,q):ee.state.wrap===2&&(ee.adler=l(ee.adler,se,ye,q)),ee.next_in+=ye,ee.total_in+=ye,ye),m.lookahead+=K,m.lookahead+m.insert>=M)for(N=m.strstart-m.insert,m.ins_h=m.window[N],m.ins_h=(m.ins_h<<m.hash_shift^m.window[N+1])&m.hash_mask;m.insert&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[N+M-1])&m.hash_mask,m.prev[N&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=N,N++,m.insert--,!(m.lookahead+m.insert<M)););}while(m.lookahead<be&&m.strm.avail_in!==0)}function Je(m,V){for(var K,$;;){if(m.lookahead<be){if(Ue(m),m.lookahead<be&&V===h)return v;if(m.lookahead===0)break}if(K=0,m.lookahead>=M&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,K=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),K!==0&&m.strstart-K<=m.w_size-be&&(m.match_length=me(m,K)),m.match_length>=M)if($=c._tr_tally(m,m.strstart-m.match_start,m.match_length-M),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=M){for(m.match_length--;m.strstart++,m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,K=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,--m.match_length!=0;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+1])&m.hash_mask;else $=c._tr_tally(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if($&&(W(m,!1),m.strm.avail_out===0))return v}return m.insert=m.strstart<M-1?m.strstart:M-1,V===y?(W(m,!0),m.strm.avail_out===0?ke:ae):m.last_lit&&(W(m,!1),m.strm.avail_out===0)?v:X}function Oe(m,V){for(var K,$,x;;){if(m.lookahead<be){if(Ue(m),m.lookahead<be&&V===h)return v;if(m.lookahead===0)break}if(K=0,m.lookahead>=M&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,K=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=M-1,K!==0&&m.prev_length<m.max_lazy_match&&m.strstart-K<=m.w_size-be&&(m.match_length=me(m,K),m.match_length<=5&&(m.strategy===1||m.match_length===M&&4096<m.strstart-m.match_start)&&(m.match_length=M-1)),m.prev_length>=M&&m.match_length<=m.prev_length){for(x=m.strstart+m.lookahead-M,$=c._tr_tally(m,m.strstart-1-m.prev_match,m.prev_length-M),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=x&&(m.ins_h=(m.ins_h<<m.hash_shift^m.window[m.strstart+M-1])&m.hash_mask,K=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),--m.prev_length!=0;);if(m.match_available=0,m.match_length=M-1,m.strstart++,$&&(W(m,!1),m.strm.avail_out===0))return v}else if(m.match_available){if(($=c._tr_tally(m,0,m.window[m.strstart-1]))&&W(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return v}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&($=c._tr_tally(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<M-1?m.strstart:M-1,V===y?(W(m,!0),m.strm.avail_out===0?ke:ae):m.last_lit&&(W(m,!1),m.strm.avail_out===0)?v:X}function Be(m,V,K,$,x){this.good_length=m,this.max_lazy=V,this.nice_length=K,this.max_chain=$,this.func=x}function Ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*L),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*G+1)),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(Q+1),this.heap=new i.Buf16(2*F+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*F+1),xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(m){var V;return m&&m.state?(m.total_in=m.total_out=0,m.data_type=S,(V=m.state).pending=0,V.pending_out=0,V.wrap<0&&(V.wrap=-V.wrap),V.status=V.wrap?D:H,m.adler=V.wrap===2?0:1,V.last_flush=h,c._tr_init(V),p):Re(m,_)}function Ne(m){var V=ge(m);return V===p&&function(K){K.window_size=2*K.w_size,xe(K.head),K.max_lazy_match=s[K.level].max_lazy,K.good_match=s[K.level].good_length,K.nice_match=s[K.level].nice_length,K.max_chain_length=s[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=M-1,K.match_available=0,K.ins_h=0}(m.state),V}function it(m,V,K,$,x,N){if(!m)return _;var ee=1;if(V===b&&(V=6),$<0?(ee=0,$=-$):15<$&&(ee=2,$-=16),x<1||O<x||K!==P||$<8||15<$||V<0||9<V||N<0||T<N)return Re(m,_);$===8&&($=9);var se=new Ze;return(m.state=se).strm=m,se.wrap=ee,se.gzhead=null,se.w_bits=$,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=x+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+M-1)/M),se.window=new i.Buf8(2*se.w_size),se.head=new i.Buf16(se.hash_size),se.prev=new i.Buf16(se.w_size),se.lit_bufsize=1<<x+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new i.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=V,se.strategy=N,se.method=K,Ne(m)}s=[new Be(0,0,0,0,function(m,V){var K=65535;for(K>m.pending_buf_size-5&&(K=m.pending_buf_size-5);;){if(m.lookahead<=1){if(Ue(m),m.lookahead===0&&V===h)return v;if(m.lookahead===0)break}m.strstart+=m.lookahead,m.lookahead=0;var $=m.block_start+K;if((m.strstart===0||m.strstart>=$)&&(m.lookahead=m.strstart-$,m.strstart=$,W(m,!1),m.strm.avail_out===0)||m.strstart-m.block_start>=m.w_size-be&&(W(m,!1),m.strm.avail_out===0))return v}return m.insert=0,V===y?(W(m,!0),m.strm.avail_out===0?ke:ae):(m.strstart>m.block_start&&(W(m,!1),m.strm.avail_out),v)}),new Be(4,4,8,4,Je),new Be(4,5,16,8,Je),new Be(4,6,32,32,Je),new Be(4,4,16,16,Oe),new Be(8,16,32,32,Oe),new Be(8,16,128,128,Oe),new Be(8,32,128,256,Oe),new Be(32,128,258,1024,Oe),new Be(32,258,258,4096,Oe)],n.deflateInit=function(m,V){return it(m,V,P,15,8,0)},n.deflateInit2=it,n.deflateReset=Ne,n.deflateResetKeep=ge,n.deflateSetHeader=function(m,V){return m&&m.state?m.state.wrap!==2?_:(m.state.gzhead=V,p):_},n.deflate=function(m,V){var K,$,x,N;if(!m||!m.state||5<V||V<0)return m?Re(m,_):_;if($=m.state,!m.output||!m.input&&m.avail_in!==0||$.status===666&&V!==y)return Re(m,m.avail_out===0?-5:_);if($.strm=m,K=$.last_flush,$.last_flush=V,$.status===D)if($.wrap===2)m.adler=0,_e($,31),_e($,139),_e($,8),$.gzhead?(_e($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),_e($,255&$.gzhead.time),_e($,$.gzhead.time>>8&255),_e($,$.gzhead.time>>16&255),_e($,$.gzhead.time>>24&255),_e($,$.level===9?2:2<=$.strategy||$.level<2?4:0),_e($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(_e($,255&$.gzhead.extra.length),_e($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(m.adler=l(m.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(_e($,0),_e($,0),_e($,0),_e($,0),_e($,0),_e($,$.level===9?2:2<=$.strategy||$.level<2?4:0),_e($,3),$.status=H);else{var ee=P+($.w_bits-8<<4)<<8;ee|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(ee|=32),ee+=31-ee%31,$.status=H,ve($,ee),$.strstart!==0&&(ve($,m.adler>>>16),ve($,65535&m.adler)),m.adler=1}if($.status===69)if($.gzhead.extra){for(x=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),U(m),x=$.pending,$.pending!==$.pending_buf_size));)_e($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){x=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),U(m),x=$.pending,$.pending===$.pending_buf_size)){N=1;break}N=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,_e($,N)}while(N!==0);$.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),N===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){x=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),U(m),x=$.pending,$.pending===$.pending_buf_size)){N=1;break}N=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,_e($,N)}while(N!==0);$.gzhead.hcrc&&$.pending>x&&(m.adler=l(m.adler,$.pending_buf,$.pending-x,x)),N===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&U(m),$.pending+2<=$.pending_buf_size&&(_e($,255&m.adler),_e($,m.adler>>8&255),m.adler=0,$.status=H)):$.status=H),$.pending!==0){if(U(m),m.avail_out===0)return $.last_flush=-1,p}else if(m.avail_in===0&&ue(V)<=ue(K)&&V!==y)return Re(m,-5);if($.status===666&&m.avail_in!==0)return Re(m,-5);if(m.avail_in!==0||$.lookahead!==0||V!==h&&$.status!==666){var se=$.strategy===2?function(q,fe){for(var ye;;){if(q.lookahead===0&&(Ue(q),q.lookahead===0)){if(fe===h)return v;break}if(q.match_length=0,ye=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,ye&&(W(q,!1),q.strm.avail_out===0))return v}return q.insert=0,fe===y?(W(q,!0),q.strm.avail_out===0?ke:ae):q.last_lit&&(W(q,!1),q.strm.avail_out===0)?v:X}($,V):$.strategy===3?function(q,fe){for(var ye,he,Ee,Le,Pe=q.window;;){if(q.lookahead<=Z){if(Ue(q),q.lookahead<=Z&&fe===h)return v;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=M&&0<q.strstart&&(he=Pe[Ee=q.strstart-1])===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]){Le=q.strstart+Z;do;while(he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&he===Pe[++Ee]&&Ee<Le);q.match_length=Z-(Le-Ee),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=M?(ye=c._tr_tally(q,1,q.match_length-M),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(ye=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),ye&&(W(q,!1),q.strm.avail_out===0))return v}return q.insert=0,fe===y?(W(q,!0),q.strm.avail_out===0?ke:ae):q.last_lit&&(W(q,!1),q.strm.avail_out===0)?v:X}($,V):s[$.level].func($,V);if(se!==ke&&se!==ae||($.status=666),se===v||se===ke)return m.avail_out===0&&($.last_flush=-1),p;if(se===X&&(V===1?c._tr_align($):V!==5&&(c._tr_stored_block($,0,0,!1),V===3&&(xe($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),U(m),m.avail_out===0))return $.last_flush=-1,p}return V!==y?p:$.wrap<=0?1:($.wrap===2?(_e($,255&m.adler),_e($,m.adler>>8&255),_e($,m.adler>>16&255),_e($,m.adler>>24&255),_e($,255&m.total_in),_e($,m.total_in>>8&255),_e($,m.total_in>>16&255),_e($,m.total_in>>24&255)):(ve($,m.adler>>>16),ve($,65535&m.adler)),U(m),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?p:1)},n.deflateEnd=function(m){var V;return m&&m.state?(V=m.state.status)!==D&&V!==69&&V!==73&&V!==91&&V!==103&&V!==H&&V!==666?Re(m,_):(m.state=null,V===H?Re(m,-3):p):_},n.deflateSetDictionary=function(m,V){var K,$,x,N,ee,se,q,fe,ye=V.length;if(!m||!m.state||(N=(K=m.state).wrap)===2||N===1&&K.status!==D||K.lookahead)return _;for(N===1&&(m.adler=u(m.adler,V,ye,0)),K.wrap=0,ye>=K.w_size&&(N===0&&(xe(K.head),K.strstart=0,K.block_start=0,K.insert=0),fe=new i.Buf8(K.w_size),i.arraySet(fe,V,ye-K.w_size,K.w_size,0),V=fe,ye=K.w_size),ee=m.avail_in,se=m.next_in,q=m.input,m.avail_in=ye,m.next_in=0,m.input=V,Ue(K);K.lookahead>=M;){for($=K.strstart,x=K.lookahead-(M-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[$+M-1])&K.hash_mask,K.prev[$&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=$,$++,--x;);K.strstart=$,K.lookahead=M-1,Ue(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=M-1,K.match_available=0,m.next_in=se,m.input=q,m.avail_in=ee,K.wrap=N,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,n){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,n){r.exports=function(s,i){var c,u,l,g,h,y,p,_,b,T,S,P,O,F,A,G,L,Q,M,Z,be,D,H,v,X;c=s.state,u=s.next_in,v=s.input,l=u+(s.avail_in-5),g=s.next_out,X=s.output,h=g-(i-s.avail_out),y=g+(s.avail_out-257),p=c.dmax,_=c.wsize,b=c.whave,T=c.wnext,S=c.window,P=c.hold,O=c.bits,F=c.lencode,A=c.distcode,G=(1<<c.lenbits)-1,L=(1<<c.distbits)-1;e:do{O<15&&(P+=v[u++]<<O,O+=8,P+=v[u++]<<O,O+=8),Q=F[P&G];t:for(;;){if(P>>>=M=Q>>>24,O-=M,(M=Q>>>16&255)===0)X[g++]=65535&Q;else{if(!(16&M)){if((64&M)==0){Q=F[(65535&Q)+(P&(1<<M)-1)];continue t}if(32&M){c.mode=12;break e}s.msg="invalid literal/length code",c.mode=30;break e}Z=65535&Q,(M&=15)&&(O<M&&(P+=v[u++]<<O,O+=8),Z+=P&(1<<M)-1,P>>>=M,O-=M),O<15&&(P+=v[u++]<<O,O+=8,P+=v[u++]<<O,O+=8),Q=A[P&L];r:for(;;){if(P>>>=M=Q>>>24,O-=M,!(16&(M=Q>>>16&255))){if((64&M)==0){Q=A[(65535&Q)+(P&(1<<M)-1)];continue r}s.msg="invalid distance code",c.mode=30;break e}if(be=65535&Q,O<(M&=15)&&(P+=v[u++]<<O,(O+=8)<M&&(P+=v[u++]<<O,O+=8)),p<(be+=P&(1<<M)-1)){s.msg="invalid distance too far back",c.mode=30;break e}if(P>>>=M,O-=M,(M=g-h)<be){if(b<(M=be-M)&&c.sane){s.msg="invalid distance too far back",c.mode=30;break e}if(H=S,(D=0)===T){if(D+=_-M,M<Z){for(Z-=M;X[g++]=S[D++],--M;);D=g-be,H=X}}else if(T<M){if(D+=_+T-M,(M-=T)<Z){for(Z-=M;X[g++]=S[D++],--M;);if(D=0,T<Z){for(Z-=M=T;X[g++]=S[D++],--M;);D=g-be,H=X}}}else if(D+=T-M,M<Z){for(Z-=M;X[g++]=S[D++],--M;);D=g-be,H=X}for(;2<Z;)X[g++]=H[D++],X[g++]=H[D++],X[g++]=H[D++],Z-=3;Z&&(X[g++]=H[D++],1<Z&&(X[g++]=H[D++]))}else{for(D=g-be;X[g++]=X[D++],X[g++]=X[D++],X[g++]=X[D++],2<(Z-=3););Z&&(X[g++]=X[D++],1<Z&&(X[g++]=X[D++]))}break}}break}}while(u<l&&g<y);u-=Z=O>>3,P&=(1<<(O-=Z<<3))-1,s.next_in=u,s.next_out=g,s.avail_in=u<l?l-u+5:5-(u-l),s.avail_out=g<y?y-g+257:257-(g-y),c.hold=P,c.bits=O}},{}],49:[function(t,r,n){var s=t("../utils/common"),i=t("./adler32"),c=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),g=1,h=2,y=0,p=-2,_=1,b=852,T=592;function S(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(D){var H;return D&&D.state?(H=D.state,D.total_in=D.total_out=H.total=0,D.msg="",H.wrap&&(D.adler=1&H.wrap),H.mode=_,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new s.Buf32(b),H.distcode=H.distdyn=new s.Buf32(T),H.sane=1,H.back=-1,y):p}function F(D){var H;return D&&D.state?((H=D.state).wsize=0,H.whave=0,H.wnext=0,O(D)):p}function A(D,H){var v,X;return D&&D.state?(X=D.state,H<0?(v=0,H=-H):(v=1+(H>>4),H<48&&(H&=15)),H&&(H<8||15<H)?p:(X.window!==null&&X.wbits!==H&&(X.window=null),X.wrap=v,X.wbits=H,F(D))):p}function G(D,H){var v,X;return D?(X=new P,(D.state=X).window=null,(v=A(D,H))!==y&&(D.state=null),v):p}var L,Q,M=!0;function Z(D){if(M){var H;for(L=new s.Buf32(512),Q=new s.Buf32(32),H=0;H<144;)D.lens[H++]=8;for(;H<256;)D.lens[H++]=9;for(;H<280;)D.lens[H++]=7;for(;H<288;)D.lens[H++]=8;for(l(g,D.lens,0,288,L,0,D.work,{bits:9}),H=0;H<32;)D.lens[H++]=5;l(h,D.lens,0,32,Q,0,D.work,{bits:5}),M=!1}D.lencode=L,D.lenbits=9,D.distcode=Q,D.distbits=5}function be(D,H,v,X){var ke,ae=D.state;return ae.window===null&&(ae.wsize=1<<ae.wbits,ae.wnext=0,ae.whave=0,ae.window=new s.Buf8(ae.wsize)),X>=ae.wsize?(s.arraySet(ae.window,H,v-ae.wsize,ae.wsize,0),ae.wnext=0,ae.whave=ae.wsize):(X<(ke=ae.wsize-ae.wnext)&&(ke=X),s.arraySet(ae.window,H,v-X,ke,ae.wnext),(X-=ke)?(s.arraySet(ae.window,H,v-X,X,0),ae.wnext=X,ae.whave=ae.wsize):(ae.wnext+=ke,ae.wnext===ae.wsize&&(ae.wnext=0),ae.whave<ae.wsize&&(ae.whave+=ke))),0}n.inflateReset=F,n.inflateReset2=A,n.inflateResetKeep=O,n.inflateInit=function(D){return G(D,15)},n.inflateInit2=G,n.inflate=function(D,H){var v,X,ke,ae,Re,ue,xe,U,W,_e,ve,me,Ue,Je,Oe,Be,Ze,ge,Ne,it,m,V,K,$,x=0,N=new s.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return p;(v=D.state).mode===12&&(v.mode=13),Re=D.next_out,ke=D.output,xe=D.avail_out,ae=D.next_in,X=D.input,ue=D.avail_in,U=v.hold,W=v.bits,_e=ue,ve=xe,V=y;e:for(;;)switch(v.mode){case _:if(v.wrap===0){v.mode=13;break}for(;W<16;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(2&v.wrap&&U===35615){N[v.check=0]=255&U,N[1]=U>>>8&255,v.check=c(v.check,N,2,0),W=U=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&U)<<8)+(U>>8))%31){D.msg="incorrect header check",v.mode=30;break}if((15&U)!=8){D.msg="unknown compression method",v.mode=30;break}if(W-=4,m=8+(15&(U>>>=4)),v.wbits===0)v.wbits=m;else if(m>v.wbits){D.msg="invalid window size",v.mode=30;break}v.dmax=1<<m,D.adler=v.check=1,v.mode=512&U?10:12,W=U=0;break;case 2:for(;W<16;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(v.flags=U,(255&v.flags)!=8){D.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){D.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=U>>8&1),512&v.flags&&(N[0]=255&U,N[1]=U>>>8&255,v.check=c(v.check,N,2,0)),W=U=0,v.mode=3;case 3:for(;W<32;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.head&&(v.head.time=U),512&v.flags&&(N[0]=255&U,N[1]=U>>>8&255,N[2]=U>>>16&255,N[3]=U>>>24&255,v.check=c(v.check,N,4,0)),W=U=0,v.mode=4;case 4:for(;W<16;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.head&&(v.head.xflags=255&U,v.head.os=U>>8),512&v.flags&&(N[0]=255&U,N[1]=U>>>8&255,v.check=c(v.check,N,2,0)),W=U=0,v.mode=5;case 5:if(1024&v.flags){for(;W<16;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.length=U,v.head&&(v.head.extra_len=U),512&v.flags&&(N[0]=255&U,N[1]=U>>>8&255,v.check=c(v.check,N,2,0)),W=U=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(ue<(me=v.length)&&(me=ue),me&&(v.head&&(m=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),s.arraySet(v.head.extra,X,ae,me,m)),512&v.flags&&(v.check=c(v.check,X,me,ae)),ue-=me,ae+=me,v.length-=me),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(ue===0)break e;for(me=0;m=X[ae+me++],v.head&&m&&v.length<65536&&(v.head.name+=String.fromCharCode(m)),m&&me<ue;);if(512&v.flags&&(v.check=c(v.check,X,me,ae)),ue-=me,ae+=me,m)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(ue===0)break e;for(me=0;m=X[ae+me++],v.head&&m&&v.length<65536&&(v.head.comment+=String.fromCharCode(m)),m&&me<ue;);if(512&v.flags&&(v.check=c(v.check,X,me,ae)),ue-=me,ae+=me,m)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;W<16;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(U!==(65535&v.check)){D.msg="header crc mismatch",v.mode=30;break}W=U=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),D.adler=v.check=0,v.mode=12;break;case 10:for(;W<32;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}D.adler=v.check=S(U),W=U=0,v.mode=11;case 11:if(v.havedict===0)return D.next_out=Re,D.avail_out=xe,D.next_in=ae,D.avail_in=ue,v.hold=U,v.bits=W,2;D.adler=v.check=1,v.mode=12;case 12:if(H===5||H===6)break e;case 13:if(v.last){U>>>=7&W,W-=7&W,v.mode=27;break}for(;W<3;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}switch(v.last=1&U,W-=1,3&(U>>>=1)){case 0:v.mode=14;break;case 1:if(Z(v),v.mode=20,H!==6)break;U>>>=2,W-=2;break e;case 2:v.mode=17;break;case 3:D.msg="invalid block type",v.mode=30}U>>>=2,W-=2;break;case 14:for(U>>>=7&W,W-=7&W;W<32;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if((65535&U)!=(U>>>16^65535)){D.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&U,W=U=0,v.mode=15,H===6)break e;case 15:v.mode=16;case 16:if(me=v.length){if(ue<me&&(me=ue),xe<me&&(me=xe),me===0)break e;s.arraySet(ke,X,ae,me,Re),ue-=me,ae+=me,xe-=me,Re+=me,v.length-=me;break}v.mode=12;break;case 17:for(;W<14;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(v.nlen=257+(31&U),U>>>=5,W-=5,v.ndist=1+(31&U),U>>>=5,W-=5,v.ncode=4+(15&U),U>>>=4,W-=4,286<v.nlen||30<v.ndist){D.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;W<3;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.lens[ee[v.have++]]=7&U,U>>>=3,W-=3}for(;v.have<19;)v.lens[ee[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,K={bits:v.lenbits},V=l(0,v.lens,0,19,v.lencode,0,v.work,K),v.lenbits=K.bits,V){D.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;Be=(x=v.lencode[U&(1<<v.lenbits)-1])>>>16&255,Ze=65535&x,!((Oe=x>>>24)<=W);){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(Ze<16)U>>>=Oe,W-=Oe,v.lens[v.have++]=Ze;else{if(Ze===16){for($=Oe+2;W<$;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(U>>>=Oe,W-=Oe,v.have===0){D.msg="invalid bit length repeat",v.mode=30;break}m=v.lens[v.have-1],me=3+(3&U),U>>>=2,W-=2}else if(Ze===17){for($=Oe+3;W<$;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}W-=Oe,m=0,me=3+(7&(U>>>=Oe)),U>>>=3,W-=3}else{for($=Oe+7;W<$;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}W-=Oe,m=0,me=11+(127&(U>>>=Oe)),U>>>=7,W-=7}if(v.have+me>v.nlen+v.ndist){D.msg="invalid bit length repeat",v.mode=30;break}for(;me--;)v.lens[v.have++]=m}}if(v.mode===30)break;if(v.lens[256]===0){D.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,K={bits:v.lenbits},V=l(g,v.lens,0,v.nlen,v.lencode,0,v.work,K),v.lenbits=K.bits,V){D.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,K={bits:v.distbits},V=l(h,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,K),v.distbits=K.bits,V){D.msg="invalid distances set",v.mode=30;break}if(v.mode=20,H===6)break e;case 20:v.mode=21;case 21:if(6<=ue&&258<=xe){D.next_out=Re,D.avail_out=xe,D.next_in=ae,D.avail_in=ue,v.hold=U,v.bits=W,u(D,ve),Re=D.next_out,ke=D.output,xe=D.avail_out,ae=D.next_in,X=D.input,ue=D.avail_in,U=v.hold,W=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;Be=(x=v.lencode[U&(1<<v.lenbits)-1])>>>16&255,Ze=65535&x,!((Oe=x>>>24)<=W);){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(Be&&(240&Be)==0){for(ge=Oe,Ne=Be,it=Ze;Be=(x=v.lencode[it+((U&(1<<ge+Ne)-1)>>ge)])>>>16&255,Ze=65535&x,!(ge+(Oe=x>>>24)<=W);){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}U>>>=ge,W-=ge,v.back+=ge}if(U>>>=Oe,W-=Oe,v.back+=Oe,v.length=Ze,Be===0){v.mode=26;break}if(32&Be){v.back=-1,v.mode=12;break}if(64&Be){D.msg="invalid literal/length code",v.mode=30;break}v.extra=15&Be,v.mode=22;case 22:if(v.extra){for($=v.extra;W<$;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.length+=U&(1<<v.extra)-1,U>>>=v.extra,W-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;Be=(x=v.distcode[U&(1<<v.distbits)-1])>>>16&255,Ze=65535&x,!((Oe=x>>>24)<=W);){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if((240&Be)==0){for(ge=Oe,Ne=Be,it=Ze;Be=(x=v.distcode[it+((U&(1<<ge+Ne)-1)>>ge)])>>>16&255,Ze=65535&x,!(ge+(Oe=x>>>24)<=W);){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}U>>>=ge,W-=ge,v.back+=ge}if(U>>>=Oe,W-=Oe,v.back+=Oe,64&Be){D.msg="invalid distance code",v.mode=30;break}v.offset=Ze,v.extra=15&Be,v.mode=24;case 24:if(v.extra){for($=v.extra;W<$;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}v.offset+=U&(1<<v.extra)-1,U>>>=v.extra,W-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){D.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(xe===0)break e;if(me=ve-xe,v.offset>me){if((me=v.offset-me)>v.whave&&v.sane){D.msg="invalid distance too far back",v.mode=30;break}Ue=me>v.wnext?(me-=v.wnext,v.wsize-me):v.wnext-me,me>v.length&&(me=v.length),Je=v.window}else Je=ke,Ue=Re-v.offset,me=v.length;for(xe<me&&(me=xe),xe-=me,v.length-=me;ke[Re++]=Je[Ue++],--me;);v.length===0&&(v.mode=21);break;case 26:if(xe===0)break e;ke[Re++]=v.length,xe--,v.mode=21;break;case 27:if(v.wrap){for(;W<32;){if(ue===0)break e;ue--,U|=X[ae++]<<W,W+=8}if(ve-=xe,D.total_out+=ve,v.total+=ve,ve&&(D.adler=v.check=v.flags?c(v.check,ke,ve,Re-ve):i(v.check,ke,ve,Re-ve)),ve=xe,(v.flags?U:S(U))!==v.check){D.msg="incorrect data check",v.mode=30;break}W=U=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;W<32;){if(ue===0)break e;ue--,U+=X[ae++]<<W,W+=8}if(U!==(4294967295&v.total)){D.msg="incorrect length check",v.mode=30;break}W=U=0}v.mode=29;case 29:V=1;break e;case 30:V=-3;break e;case 31:return-4;case 32:default:return p}return D.next_out=Re,D.avail_out=xe,D.next_in=ae,D.avail_in=ue,v.hold=U,v.bits=W,(v.wsize||ve!==D.avail_out&&v.mode<30&&(v.mode<27||H!==4))&&be(D,D.output,D.next_out,ve-D.avail_out)?(v.mode=31,-4):(_e-=D.avail_in,ve-=D.avail_out,D.total_in+=_e,D.total_out+=ve,v.total+=ve,v.wrap&&ve&&(D.adler=v.check=v.flags?c(v.check,ke,ve,D.next_out-ve):i(v.check,ke,ve,D.next_out-ve)),D.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(_e==0&&ve===0||H===4)&&V===y&&(V=-5),V)},n.inflateEnd=function(D){if(!D||!D.state)return p;var H=D.state;return H.window&&(H.window=null),D.state=null,y},n.inflateGetHeader=function(D,H){var v;return D&&D.state?(2&(v=D.state).wrap)==0?p:((v.head=H).done=!1,y):p},n.inflateSetDictionary=function(D,H){var v,X=H.length;return D&&D.state?(v=D.state).wrap!==0&&v.mode!==11?p:v.mode===11&&i(1,H,X,0)!==v.check?-3:be(D,H,X,X)?(v.mode=31,-4):(v.havedict=1,y):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,n){var s=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(g,h,y,p,_,b,T,S){var P,O,F,A,G,L,Q,M,Z,be=S.bits,D=0,H=0,v=0,X=0,ke=0,ae=0,Re=0,ue=0,xe=0,U=0,W=null,_e=0,ve=new s.Buf16(16),me=new s.Buf16(16),Ue=null,Je=0;for(D=0;D<=15;D++)ve[D]=0;for(H=0;H<p;H++)ve[h[y+H]]++;for(ke=be,X=15;1<=X&&ve[X]===0;X--);if(X<ke&&(ke=X),X===0)return _[b++]=20971520,_[b++]=20971520,S.bits=1,0;for(v=1;v<X&&ve[v]===0;v++);for(ke<v&&(ke=v),D=ue=1;D<=15;D++)if(ue<<=1,(ue-=ve[D])<0)return-1;if(0<ue&&(g===0||X!==1))return-1;for(me[1]=0,D=1;D<15;D++)me[D+1]=me[D]+ve[D];for(H=0;H<p;H++)h[y+H]!==0&&(T[me[h[y+H]]++]=H);if(L=g===0?(W=Ue=T,19):g===1?(W=i,_e-=257,Ue=c,Je-=257,256):(W=u,Ue=l,-1),D=v,G=b,Re=H=U=0,F=-1,A=(xe=1<<(ae=ke))-1,g===1&&852<xe||g===2&&592<xe)return 1;for(;;){for(Q=D-Re,Z=T[H]<L?(M=0,T[H]):T[H]>L?(M=Ue[Je+T[H]],W[_e+T[H]]):(M=96,0),P=1<<D-Re,v=O=1<<ae;_[G+(U>>Re)+(O-=P)]=Q<<24|M<<16|Z|0,O!==0;);for(P=1<<D-1;U&P;)P>>=1;if(P!==0?(U&=P-1,U+=P):U=0,H++,--ve[D]==0){if(D===X)break;D=h[y+T[H]]}if(ke<D&&(U&A)!==F){for(Re===0&&(Re=ke),G+=v,ue=1<<(ae=D-Re);ae+Re<X&&!((ue-=ve[ae+Re])<=0);)ae++,ue<<=1;if(xe+=1<<ae,g===1&&852<xe||g===2&&592<xe)return 1;_[F=U&A]=ke<<24|ae<<16|G-b|0}}return U!==0&&(_[G+U]=D-Re<<24|64<<16|0),S.bits=ke,0}},{"../utils/common":41}],51:[function(t,r,n){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,n){var s=t("../utils/common"),i=0,c=1;function u(x){for(var N=x.length;0<=--N;)x[N]=0}var l=0,g=29,h=256,y=h+1+g,p=30,_=19,b=2*y+1,T=15,S=16,P=7,O=256,F=16,A=17,G=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],be=new Array(2*(y+2));u(be);var D=new Array(2*p);u(D);var H=new Array(512);u(H);var v=new Array(256);u(v);var X=new Array(g);u(X);var ke,ae,Re,ue=new Array(p);function xe(x,N,ee,se,q){this.static_tree=x,this.extra_bits=N,this.extra_base=ee,this.elems=se,this.max_length=q,this.has_stree=x&&x.length}function U(x,N){this.dyn_tree=x,this.max_code=0,this.stat_desc=N}function W(x){return x<256?H[x]:H[256+(x>>>7)]}function _e(x,N){x.pending_buf[x.pending++]=255&N,x.pending_buf[x.pending++]=N>>>8&255}function ve(x,N,ee){x.bi_valid>S-ee?(x.bi_buf|=N<<x.bi_valid&65535,_e(x,x.bi_buf),x.bi_buf=N>>S-x.bi_valid,x.bi_valid+=ee-S):(x.bi_buf|=N<<x.bi_valid&65535,x.bi_valid+=ee)}function me(x,N,ee){ve(x,ee[2*N],ee[2*N+1])}function Ue(x,N){for(var ee=0;ee|=1&x,x>>>=1,ee<<=1,0<--N;);return ee>>>1}function Je(x,N,ee){var se,q,fe=new Array(T+1),ye=0;for(se=1;se<=T;se++)fe[se]=ye=ye+ee[se-1]<<1;for(q=0;q<=N;q++){var he=x[2*q+1];he!==0&&(x[2*q]=Ue(fe[he]++,he))}}function Oe(x){var N;for(N=0;N<y;N++)x.dyn_ltree[2*N]=0;for(N=0;N<p;N++)x.dyn_dtree[2*N]=0;for(N=0;N<_;N++)x.bl_tree[2*N]=0;x.dyn_ltree[2*O]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Be(x){8<x.bi_valid?_e(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Ze(x,N,ee,se){var q=2*N,fe=2*ee;return x[q]<x[fe]||x[q]===x[fe]&&se[N]<=se[ee]}function ge(x,N,ee){for(var se=x.heap[ee],q=ee<<1;q<=x.heap_len&&(q<x.heap_len&&Ze(N,x.heap[q+1],x.heap[q],x.depth)&&q++,!Ze(N,se,x.heap[q],x.depth));)x.heap[ee]=x.heap[q],ee=q,q<<=1;x.heap[ee]=se}function Ne(x,N,ee){var se,q,fe,ye,he=0;if(x.last_lit!==0)for(;se=x.pending_buf[x.d_buf+2*he]<<8|x.pending_buf[x.d_buf+2*he+1],q=x.pending_buf[x.l_buf+he],he++,se===0?me(x,q,N):(me(x,(fe=v[q])+h+1,N),(ye=L[fe])!==0&&ve(x,q-=X[fe],ye),me(x,fe=W(--se),ee),(ye=Q[fe])!==0&&ve(x,se-=ue[fe],ye)),he<x.last_lit;);me(x,O,N)}function it(x,N){var ee,se,q,fe=N.dyn_tree,ye=N.stat_desc.static_tree,he=N.stat_desc.has_stree,Ee=N.stat_desc.elems,Le=-1;for(x.heap_len=0,x.heap_max=b,ee=0;ee<Ee;ee++)fe[2*ee]!==0?(x.heap[++x.heap_len]=Le=ee,x.depth[ee]=0):fe[2*ee+1]=0;for(;x.heap_len<2;)fe[2*(q=x.heap[++x.heap_len]=Le<2?++Le:0)]=1,x.depth[q]=0,x.opt_len--,he&&(x.static_len-=ye[2*q+1]);for(N.max_code=Le,ee=x.heap_len>>1;1<=ee;ee--)ge(x,fe,ee);for(q=Ee;ee=x.heap[1],x.heap[1]=x.heap[x.heap_len--],ge(x,fe,1),se=x.heap[1],x.heap[--x.heap_max]=ee,x.heap[--x.heap_max]=se,fe[2*q]=fe[2*ee]+fe[2*se],x.depth[q]=(x.depth[ee]>=x.depth[se]?x.depth[ee]:x.depth[se])+1,fe[2*ee+1]=fe[2*se+1]=q,x.heap[1]=q++,ge(x,fe,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function(Pe,tt){var St,ct,Pt,We,Dt,qt,$e=tt.dyn_tree,Nt=tt.max_code,Ut=tt.stat_desc.static_tree,cr=tt.stat_desc.has_stree,lt=tt.stat_desc.extra_bits,lr=tt.stat_desc.extra_base,ut=tt.stat_desc.max_length,At=0;for(We=0;We<=T;We++)Pe.bl_count[We]=0;for($e[2*Pe.heap[Pe.heap_max]+1]=0,St=Pe.heap_max+1;St<b;St++)ut<(We=$e[2*$e[2*(ct=Pe.heap[St])+1]+1]+1)&&(We=ut,At++),$e[2*ct+1]=We,Nt<ct||(Pe.bl_count[We]++,Dt=0,lr<=ct&&(Dt=lt[ct-lr]),qt=$e[2*ct],Pe.opt_len+=qt*(We+Dt),cr&&(Pe.static_len+=qt*(Ut[2*ct+1]+Dt)));if(At!==0){do{for(We=ut-1;Pe.bl_count[We]===0;)We--;Pe.bl_count[We]--,Pe.bl_count[We+1]+=2,Pe.bl_count[ut]--,At-=2}while(0<At);for(We=ut;We!==0;We--)for(ct=Pe.bl_count[We];ct!==0;)Nt<(Pt=Pe.heap[--St])||($e[2*Pt+1]!==We&&(Pe.opt_len+=(We-$e[2*Pt+1])*$e[2*Pt],$e[2*Pt+1]=We),ct--)}}(x,N),Je(fe,Le,x.bl_count)}function m(x,N,ee){var se,q,fe=-1,ye=N[1],he=0,Ee=7,Le=4;for(ye===0&&(Ee=138,Le=3),N[2*(ee+1)+1]=65535,se=0;se<=ee;se++)q=ye,ye=N[2*(se+1)+1],++he<Ee&&q===ye||(he<Le?x.bl_tree[2*q]+=he:q!==0?(q!==fe&&x.bl_tree[2*q]++,x.bl_tree[2*F]++):he<=10?x.bl_tree[2*A]++:x.bl_tree[2*G]++,fe=q,Le=(he=0)===ye?(Ee=138,3):q===ye?(Ee=6,3):(Ee=7,4))}function V(x,N,ee){var se,q,fe=-1,ye=N[1],he=0,Ee=7,Le=4;for(ye===0&&(Ee=138,Le=3),se=0;se<=ee;se++)if(q=ye,ye=N[2*(se+1)+1],!(++he<Ee&&q===ye)){if(he<Le)for(;me(x,q,x.bl_tree),--he!=0;);else q!==0?(q!==fe&&(me(x,q,x.bl_tree),he--),me(x,F,x.bl_tree),ve(x,he-3,2)):he<=10?(me(x,A,x.bl_tree),ve(x,he-3,3)):(me(x,G,x.bl_tree),ve(x,he-11,7));fe=q,Le=(he=0)===ye?(Ee=138,3):q===ye?(Ee=6,3):(Ee=7,4)}}u(ue);var K=!1;function $(x,N,ee,se){ve(x,(l<<1)+(se?1:0),3),function(q,fe,ye,he){Be(q),_e(q,ye),_e(q,~ye),s.arraySet(q.pending_buf,q.window,fe,ye,q.pending),q.pending+=ye}(x,N,ee)}n._tr_init=function(x){K||(function(){var N,ee,se,q,fe,ye=new Array(T+1);for(q=se=0;q<g-1;q++)for(X[q]=se,N=0;N<1<<L[q];N++)v[se++]=q;for(v[se-1]=q,q=fe=0;q<16;q++)for(ue[q]=fe,N=0;N<1<<Q[q];N++)H[fe++]=q;for(fe>>=7;q<p;q++)for(ue[q]=fe<<7,N=0;N<1<<Q[q]-7;N++)H[256+fe++]=q;for(ee=0;ee<=T;ee++)ye[ee]=0;for(N=0;N<=143;)be[2*N+1]=8,N++,ye[8]++;for(;N<=255;)be[2*N+1]=9,N++,ye[9]++;for(;N<=279;)be[2*N+1]=7,N++,ye[7]++;for(;N<=287;)be[2*N+1]=8,N++,ye[8]++;for(Je(be,y+1,ye),N=0;N<p;N++)D[2*N+1]=5,D[2*N]=Ue(N,5);ke=new xe(be,L,h+1,y,T),ae=new xe(D,Q,0,p,T),Re=new xe(new Array(0),M,0,_,P)}(),K=!0),x.l_desc=new U(x.dyn_ltree,ke),x.d_desc=new U(x.dyn_dtree,ae),x.bl_desc=new U(x.bl_tree,Re),x.bi_buf=0,x.bi_valid=0,Oe(x)},n._tr_stored_block=$,n._tr_flush_block=function(x,N,ee,se){var q,fe,ye=0;0<x.level?(x.strm.data_type===2&&(x.strm.data_type=function(he){var Ee,Le=4093624447;for(Ee=0;Ee<=31;Ee++,Le>>>=1)if(1&Le&&he.dyn_ltree[2*Ee]!==0)return i;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return c;for(Ee=32;Ee<h;Ee++)if(he.dyn_ltree[2*Ee]!==0)return c;return i}(x)),it(x,x.l_desc),it(x,x.d_desc),ye=function(he){var Ee;for(m(he,he.dyn_ltree,he.l_desc.max_code),m(he,he.dyn_dtree,he.d_desc.max_code),it(he,he.bl_desc),Ee=_-1;3<=Ee&&he.bl_tree[2*Z[Ee]+1]===0;Ee--);return he.opt_len+=3*(Ee+1)+5+5+4,Ee}(x),q=x.opt_len+3+7>>>3,(fe=x.static_len+3+7>>>3)<=q&&(q=fe)):q=fe=ee+5,ee+4<=q&&N!==-1?$(x,N,ee,se):x.strategy===4||fe===q?(ve(x,2+(se?1:0),3),Ne(x,be,D)):(ve(x,4+(se?1:0),3),function(he,Ee,Le,Pe){var tt;for(ve(he,Ee-257,5),ve(he,Le-1,5),ve(he,Pe-4,4),tt=0;tt<Pe;tt++)ve(he,he.bl_tree[2*Z[tt]+1],3);V(he,he.dyn_ltree,Ee-1),V(he,he.dyn_dtree,Le-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,ye+1),Ne(x,x.dyn_ltree,x.dyn_dtree)),Oe(x),se&&Be(x)},n._tr_tally=function(x,N,ee){return x.pending_buf[x.d_buf+2*x.last_lit]=N>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&N,x.pending_buf[x.l_buf+x.last_lit]=255&ee,x.last_lit++,N===0?x.dyn_ltree[2*ee]++:(x.matches++,N--,x.dyn_ltree[2*(v[ee]+h+1)]++,x.dyn_dtree[2*W(N)]++),x.last_lit===x.lit_bufsize-1},n._tr_align=function(x){ve(x,2,3),me(x,O,be),function(N){N.bi_valid===16?(_e(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):8<=N.bi_valid&&(N.pending_buf[N.pending++]=255&N.bi_buf,N.bi_buf>>=8,N.bi_valid-=8)}(x)}},{"../utils/common":41}],53:[function(t,r,n){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,n){(function(s){(function(i,c){if(!i.setImmediate){var u,l,g,h,y=1,p={},_=!1,b=i.document,T=Object.getPrototypeOf&&Object.getPrototypeOf(i);T=T&&T.setTimeout?T:i,u={}.toString.call(i.process)==="[object process]"?function(F){rr.nextTick(function(){P(F)})}:function(){if(i.postMessage&&!i.importScripts){var F=!0,A=i.onmessage;return i.onmessage=function(){F=!1},i.postMessage("","*"),i.onmessage=A,F}}()?(h="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",O,!1):i.attachEvent("onmessage",O),function(F){i.postMessage(h+F,"*")}):i.MessageChannel?((g=new MessageChannel).port1.onmessage=function(F){P(F.data)},function(F){g.port2.postMessage(F)}):b&&"onreadystatechange"in b.createElement("script")?(l=b.documentElement,function(F){var A=b.createElement("script");A.onreadystatechange=function(){P(F),A.onreadystatechange=null,l.removeChild(A),A=null},l.appendChild(A)}):function(F){setTimeout(P,0,F)},T.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var A=new Array(arguments.length-1),G=0;G<A.length;G++)A[G]=arguments[G+1];var L={callback:F,args:A};return p[y]=L,u(y),y++},T.clearImmediate=S}function S(F){delete p[F]}function P(F){if(_)setTimeout(P,0,F);else{var A=p[F];if(A){_=!0;try{(function(G){var L=G.callback,Q=G.args;switch(Q.length){case 0:L();break;case 1:L(Q[0]);break;case 2:L(Q[0],Q[1]);break;case 3:L(Q[0],Q[1],Q[2]);break;default:L.apply(c,Q)}})(A)}finally{S(F),_=!1}}}}function O(F){F.source===i&&typeof F.data=="string"&&F.data.indexOf(h)===0&&P(+F.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Zt<"u"?Zt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ai);const un=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),Vo=un?Promise.resolve().then(function(){return tc}):Promise.resolve().then(function(){return oc});async function Zo(...a){return(await Vo).default(...a)}un?Promise.resolve().then(function(){return nc}):Promise.resolve().then(function(){return lc});const Qo=un?Promise.resolve().then(function(){return ic}):Promise.resolve().then(function(){return fc});async function Jo(...a){return(await Qo).default(...a)}const Xo=async a=>{const e=await a.getFile();return e.handle=a,e};var ec=async(a=[{}])=>{Array.isArray(a)||(a=[a]);const e=[];a.forEach((n,s)=>{e[s]={description:n.description||"Files",accept:{}},n.mimeTypes?n.mimeTypes.map(i=>{e[s].accept[i]=n.extensions||[]}):e[s].accept["*/*"]=n.extensions||[]});const t=await window.showOpenFilePicker({id:a[0].id,startIn:a[0].startIn,types:e,multiple:a[0].multiple||!1,excludeAcceptAllOption:a[0].excludeAcceptAllOption||!1}),r=await Promise.all(t.map(Xo));return a[0].multiple?r:r[0]},tc={__proto__:null,default:ec};function Jr(a){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var r=t.done;return Promise.resolve(t.value).then(function(n){return{value:n,done:r}})}return Jr=function(t){this.s=t,this.n=t.next},Jr.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return r===void 0?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return r===void 0?Promise.reject(t):e(r.apply(this.s,arguments))}},new Jr(a)}const oi=async(a,e,t=a.name,r)=>{const n=[],s=[];var i,c=!1,u=!1;try{for(var l,g=function(h){var y,p,_,b=2;for(typeof Symbol<"u"&&(p=Symbol.asyncIterator,_=Symbol.iterator);b--;){if(p&&(y=h[p])!=null)return y.call(h);if(_&&(y=h[_])!=null)return new Jr(y.call(h));p="@@asyncIterator",_="@@iterator"}throw new TypeError("Object is not async iterable")}(a.values());c=!(l=await g.next()).done;c=!1){const h=l.value,y=`${t}/${h.name}`;h.kind==="file"?s.push(h.getFile().then(p=>(p.directoryHandle=a,p.handle=h,Object.defineProperty(p,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>y})))):h.kind!=="directory"||!e||r&&r(h)||n.push(oi(h,e,y,r))}}catch(h){u=!0,i=h}finally{try{c&&g.return!=null&&await g.return()}finally{if(u)throw i}}return[...(await Promise.all(n)).flat(),...await Promise.all(s)]};var rc=async(a={})=>{a.recursive=a.recursive||!1,a.mode=a.mode||"read";const e=await window.showDirectoryPicker({id:a.id,startIn:a.startIn,mode:a.mode});return(await(await e.values()).next()).done?[e]:oi(e,a.recursive,void 0,a.skipDirectory)},nc={__proto__:null,default:rc},sc=async(a,e=[{}],t=null,r=!1,n=null)=>{Array.isArray(e)||(e=[e]),e[0].fileName=e[0].fileName||"Untitled";const s=[];let i=null;if(a instanceof Blob&&a.type?i=a.type:a.headers&&a.headers.get("content-type")&&(i=a.headers.get("content-type")),e.forEach((l,g)=>{s[g]={description:l.description||"Files",accept:{}},l.mimeTypes?(g===0&&i&&l.mimeTypes.push(i),l.mimeTypes.map(h=>{s[g].accept[h]=l.extensions||[]})):i?s[g].accept[i]=l.extensions||[]:s[g].accept["*/*"]=l.extensions||[]}),t)try{await t.getFile()}catch(l){if(t=null,r)throw l}const c=t||await window.showSaveFilePicker({suggestedName:e[0].fileName,id:e[0].id,startIn:e[0].startIn,types:s,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1});!t&&n&&n(c);const u=await c.createWritable();return"stream"in a?(await a.stream().pipeTo(u),c):"body"in a?(await a.body.pipeTo(u),c):(await u.write(await a),await u.close(),c)},ic={__proto__:null,default:sc},ac=async(a=[{}])=>(Array.isArray(a)||(a=[a]),new Promise((e,t)=>{const r=document.createElement("input");r.type="file";const n=[...a.map(u=>u.mimeTypes||[]),...a.map(u=>u.extensions||[])].join();r.multiple=a[0].multiple||!1,r.accept=n||"",r.style.display="none",document.body.append(r);const s=u=>{typeof i=="function"&&i(),e(u)},i=a[0].legacySetup&&a[0].legacySetup(s,()=>i(t),r),c=()=>{window.removeEventListener("focus",c),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",c)}),r.addEventListener("change",()=>{window.removeEventListener("focus",c),r.remove(),s(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),oc={__proto__:null,default:ac},cc=async(a=[{}])=>(Array.isArray(a)||(a=[a]),a[0].recursive=a[0].recursive||!1,new Promise((e,t)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const n=i=>{typeof s=="function"&&s(),e(i)},s=a[0].legacySetup&&a[0].legacySetup(n,()=>s(t),r);r.addEventListener("change",()=>{let i=Array.from(r.files);a[0].recursive?a[0].recursive&&a[0].skipDirectory&&(i=i.filter(c=>c.webkitRelativePath.split("/").every(u=>!a[0].skipDirectory({name:u,kind:"directory"})))):i=i.filter(c=>c.webkitRelativePath.split("/").length===2),n(i)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),lc={__proto__:null,default:cc},uc=async(a,e={})=>{Array.isArray(e)&&(e=e[0]);const t=document.createElement("a");let r=a;"body"in a&&(r=await async function(i,c){const u=i.getReader(),l=new ReadableStream({start:y=>async function p(){return u.read().then(({done:_,value:b})=>{if(!_)return y.enqueue(b),p();y.close()})}()}),g=new Response(l),h=await g.blob();return u.releaseLock(),new Blob([h],{type:c})}(a.body,a.headers.get("content-type"))),t.download=e.fileName||"Untitled",t.href=URL.createObjectURL(await r);const n=()=>{typeof s=="function"&&s()},s=e.legacySetup&&e.legacySetup(n,()=>s(),t);return t.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(t.href),3e4),n()}),t.click(),null},fc={__proto__:null,default:uc};const hc=":host{display:block;--jeep-sqlite-top:10%;--jeep-sqlite-right:1%;--jeep-sqlite-font-size:2em;--jeep-sqlite-padding:2%;--jeep-sqlite-background-color:#a9a9a9;--jeep-sqlite-color:#ffffff}#fileElem{display:none}#pickButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}#saveButton{position:absolute;top:var(--jeep-sqlite-top);right:var(--jeep-sqlite-right);font-size:var(--jeep-sqlite-font-size);padding:var(--jeep-sqlite-padding);background-color:var(--jeep-sqlite-background-color);color:var(--jeep-sqlite-color)}",dc=hc,mc=Da(class extends Hi{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.importProgress=Ar(this,"jeepSqliteImportProgress"),this.exportProgress=Ar(this,"jeepSqliteExportProgress"),this.HTTPRequestEnded=Ar(this,"jeepSqliteHTTPRequestEnded"),this.PickDatabaseEnded=Ar(this,"jeepSqlitePickDatabaseEnded"),this.SaveDatabaseEnded=Ar(this,"jeepSqliteSaveDatabaseToDisk"),this.isStore=!1,this._dbDict={},this.databaseList={},this._versionUpgrades={},this._overwrite=!0,this.autoSave=!1,this.typeOrm=!1,this.wasmPath=void 0,this.pickText=void 0,this.saveText=void 0,this.buttonOptions=void 0,this.innerAutoSave=void 0,this.innerTypeOrm=void 0,this.innerWasmPath=void 0,this.innerPickText=void 0,this.innerSaveText=void 0,this.innerButtonOptions=void 0}parseAutoSave(e){this.innerAutoSave=e}parseTypeOrm(e){this.innerTypeOrm=e}parseWasmPath(e){this.innerWasmPath=e}parsePickText(e){this.innerPickText=e}parseSaveText(e){this.innerSaveText=e}parseButtonOptions(e){this.innerButtonOptions=JSON.parse(e);const t=Object.keys(this.innerButtonOptions);for(const r of t)switch(r){case"top":{this.el.style.setProperty("--jeep-sqlite-top",this.innerButtonOptions[r]);break}case"right":{this.el.style.setProperty("--jeep-sqlite-right",this.innerButtonOptions[r]);break}case"fontSize":{this.el.style.setProperty("--jeep-sqlite-font-size",this.innerButtonOptions[r]);break}case"padding":{this.el.style.setProperty("--jeep-sqlite-padding",this.innerButtonOptions[r]);break}case"backgroundColor":{this.el.style.setProperty("--jeep-sqlite-background-color",this.innerButtonOptions[r]);break}case"color":{this.el.style.setProperty("--jeep-sqlite-color",this.innerButtonOptions[r]);break}}}async echo(e){return e}async createConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.version?e.version:1,s=e.readonly?e.readonly:!1;try{return await this._createConnection(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1,s=await this._isConnection(r,n);return Promise.resolve(s)}async closeConnection(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._closeConnection(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async open(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._open(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async close(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._close(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async getVersion(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getVersion(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async beginTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._beginTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async commitTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("CommitTransaction: not allowed in read-only mode");try{const s=await this._commitTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async rollbackTransaction(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("BeginTransaction: not allowed in read-only mode");try{const s=await this._rollbackTransaction(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isTransactionActive(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(e.readonly?e.readonly:!1)return Promise.reject("isTransactionActive: not allowed in read-only mode");try{const s=await this._isTransactionActive(r);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async execute(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statements")||e.statements.length===0)return Promise.reject("Must provide raw SQL statements");const r=e.database,n=e.statements;let s=!0;const i=e.readonly?e.readonly:!1;t.includes("transaction")&&(s=e.transaction);try{const c=await this._execute(r,n,s,i);return Promise.resolve(c)}catch(c){return Promise.reject(c)}}async executeSet(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("set")||e.set.length===0)return Promise.reject("Must provide a non-empty set of SQL statements");const r=e.database,n=e.set;let s=!0;t.includes("transaction")&&(s=e.transaction);const i=e.readonly?e.readonly:!1,c=e.returnMode?e.returnMode:"no";try{const u=await this._executeSet(r,n,s,i,c);return Promise.resolve(u)}catch(u){return Promise.reject(u)}}async run(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a run statement");const r=e.database,n=e.statement;let s=[];t.includes("values")&&(s=e.values.length>0?e.values:[]);let i=!0;t.includes("transaction")&&(i=e.transaction);const c=e.readonly?e.readonly:!1,u=e.returnMode?e.returnMode:"no";try{const l=await this._run(r,n,s,i,c,u);return Promise.resolve(l)}catch(l){return Promise.reject(l)}}async query(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("statement")||e.statement.length===0)return Promise.reject("Must provide a query statement");let r=[];t.includes("values")&&(r=e.values.length>0?e.values:[]);const n=e.database,s=e.statement,i=e.readonly?e.readonly:!1;try{const c=await this._query(n,s,r,i);return Promise.resolve(c)}catch(c){return Promise.reject(c)}}async getTableList(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getTableList(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBExists(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async isDBOpen(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._isDBOpen(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async deleteDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteDatabase(r,n)}catch(s){return Promise.reject(s)}}async isStoreOpen(){return Promise.resolve(this.isStore)}async copyFromAssets(e){let t;if(e!=null?t=Object.keys(e).includes("overwrite")?e.overwrite:!0:t=!0,!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{return await this._copyFromAssets(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async isTableExists(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");const r=e.database;if(!t.includes("table"))return Promise.reject("Must provide a table name");const n=e.table,s=e.readonly?e.readonly:!1;try{const i=await this._isTableExists(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async createSyncTable(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._createSyncTable(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async getSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{const s=await this._getSyncDate(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async setSyncDate(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("syncdate"))return Promise.reject("Must provide a synchronization date");const r=e.database,n=e.syncdate,s=e.readonly?e.readonly:!1;try{return await this._setSyncDate(r,n,s),Promise.resolve()}catch(i){return Promise.reject(i)}}async isJsonValid(e){if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._isJsonValid(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async importFromJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("jsonstring"))return Promise.reject("Must provide a json object");const r=e.jsonstring;try{const n=await this._importFromJson(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async exportToJson(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("jsonexportmode"))return Promise.reject("Must provide a json export mode");const r=e.database,n=e.jsonexportmode,s=e.readonly?e.readonly:!1;try{const i=await this._exportToJson(r,n,s);return Promise.resolve(i)}catch(i){return Promise.reject(i)}}async deleteExportedRows(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._deleteExportedRows(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async addUpgradeStatement(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);let t=Object.keys(e);if(!t.includes("database"))return Promise.reject("Must provide a database name");if(!t.includes("upgrade"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");const r=e.database,n=e.upgrade;for(const s of n){const i=Object.keys(s);if(!i.includes("toVersion")||!i.includes("statements"))return Promise.reject("Must provide an upgrade capSQLiteVersionUpgrade Object");if(typeof s.toVersion!="number")return Promise.reject("upgrade.toVersion must be a number");if(this._versionUpgrades[r])this._versionUpgrades[r][s.toVersion]=s;else{const c={};c[s.toVersion]=s,this._versionUpgrades[r]=c}}return Promise.resolve()}async isDatabase(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{const n=await this._isDatabase(r);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}async getDatabaseList(){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);try{const e=await this._getDatabaseList();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async checkConnectionsConsistency(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);const t=Object.keys(e);if(!t.includes("dbNames"))return Promise.reject("Must provide a list of connection's name");const r=e.dbNames;if(!t.includes("openModes"))return Promise.reject("Must provide a list of connection's open mode");const n=e.openModes;try{const s=await this._checkConnectionsConsistency(r,n);return Promise.resolve(s)}catch(s){return Promise.reject(s)}}async saveToStore(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database,n=e.readonly?e.readonly:!1;try{return await this._saveToStore(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}async saveToLocalDisk(e){if(!Object.keys(e).includes("database"))return Promise.reject("Must provide a database name");const r=e.database;try{return await this._saveToLocalDisk(r),Promise.resolve()}catch(n){return Promise.reject(n)}}async getFromLocalDiskToStore(e){const t=e.overwrite?e.overwrite:!0;console.log(un?"Using the File System Access API.":"Using the fallback implementation.");try{return await this._getFromLocalDiskToStore(t),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(e){if(!this.isStore)return Promise.reject(`>>> jeep-sqlite StoreName: ${this.storeName} is not opened`);if(!Object.keys(e).includes("url"))return Promise.reject("Must provide an url");const r=e.url,n=e.overwrite?e.overwrite:!0;try{return await this._getFromHTTPRequest(r,n),Promise.resolve()}catch(s){return Promise.reject(s)}}connectedCallback(){this.parseAutoSave(this.autoSave!==void 0?this.autoSave:!1),this.parseTypeOrm(this.typeOrm!==void 0?this.typeOrm:!1),this.parseWasmPath(this.wasmPath!==void 0?this.wasmPath:"/assets"),this.parseSaveText(this.saveText!==void 0?this.saveText:"Save"),this.parsePickText(this.pickText!==void 0?this.pickText:"Pick a database"),this.buttonOptions!==void 0&&this.parseButtonOptions(this.buttonOptions),this.openStore("jeepSqliteStore","databases").then(e=>{this.isStore=e})}componentWillLoad(){}async componentDidLoad(){this._element=this.el.shadowRoot,this.isStore||console.log("jeep-sqlite isStore = false")}async _createConnection(e,t,r){let n={};const s=Object.keys(this._versionUpgrades);s.length!==0&&s.includes(e)&&(n=this._versionUpgrades[e]);const i=Object.keys(this._dbDict);let c;try{i.length>0&&(i.includes("RW_"+e)||i.includes("RO_"+e))?c=i.includes("RW_"+e)?this._dbDict["RW_"+e]:this._dbDict["RO_"+e]:c=new hs(e+"SQLite.db",t,n,this.store,this.innerAutoSave,this.innerWasmPath);const u=r?"RO_"+e:"RW_"+e;return this._dbDict[u]=c,Promise.resolve()}catch(u){const l=u.message?u.message:u;return Promise.reject(l)}}async _isConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;return r.includes(n)?{result:!0}:{result:!1}}async _closeConnection(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`CloseConnection: No available connection for ${e}`);const s=this._dbDict[n];try{return s.isDBOpen()&&await s.close(),delete this._dbDict[n],Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(`CloseConnection: ${c}`)}}async _open(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];try{return await s.open(),Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(`Open: ${c}`)}}async _close(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Close: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`Close: ${e} database not opened`);try{return await s.close(),Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(`Close: ${c}`)}}async _saveToStore(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`SaveToStore: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`SaveToStore: ${e} database not opened`);try{return await s.saveToStore(),Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(`SaveToStore: ${c}`)}}async _saveToLocalDisk(e){try{const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`SaveToLocalDisk: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`SaveToLocalDisk: ${e} database not opened`);const s=await n.exportDB();this._blob=await this.uint2blob(s);const i=`${e}SQLite.db`;return this._opts={fileName:i,extensions:[".db"],startIn:"documents"},this._buttonSaveEl=document.createElement("button"),this._buttonSaveEl.setAttribute("id","saveButton"),this._buttonSaveEl.innerHTML=`${this.innerSaveText} ${i}`,this._element.appendChild(this._buttonSaveEl),this._buttonSaveEl.addEventListener("click",this.saveFile.bind(this)),Promise.resolve()}catch(t){const r=t.message?t.message:t;return Promise.reject(`SaveToLocalDisk: ${r}`)}}async _getFromLocalDiskToStore(e){return this._buttonPickEl=document.createElement("button"),this._buttonPickEl.setAttribute("id","pickButton"),this._buttonPickEl.innerHTML=`${this.innerPickText}`,this._element.appendChild(this._buttonPickEl),this._buttonPickEl.addEventListener("click",this.pickDatabase.bind(this)),this._overwrite=e,Promise.resolve()}async pickDatabase(){try{const e=await Zo({extensions:[".db"]});let t=await this.blob2uint(e);const r=this.removePathSuffix(e.name),n=this.setPathSuffix(e.name);await Fe.isDBInStore(n,this.store)?this._overwrite?(await Fe.removeDBFromStore(n,this.store),await Fe.saveDBToStore(n,t,this.store)):this.PickDatabaseEnded.emit({message:`Error: cannot overwrite ${n}`}):await Fe.saveDBToStore(n,t,this.store),this._element.removeChild(this._buttonPickEl),this.PickDatabaseEnded.emit({db_name:r})}catch(e){const t=e.message?e.message:e;this.PickDatabaseEnded.emit({message:t})}}async saveFile(){try{await Jo(this._blob,[this._opts]);const e=this._opts.fileName;this._element.removeChild(this._buttonSaveEl),this.SaveDatabaseEnded.emit({db_name:e})}catch(e){const t=e.message?e.message:e;this.SaveDatabaseEnded.emit({message:t})}}async _getVersion(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`Open: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetVersion: ${e} database not opened`);try{const i=await s.getVersion(),c={};return c.version=i,Promise.resolve(c)}catch(i){const c=i.message?i.message:i;return Promise.reject(`Open: ${c}`)}}async _beginTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`BeginTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`BeginTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.beginTransaction()}},Promise.resolve(s)}async _commitTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`CommitTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`CommitTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.commitTransaction()}},Promise.resolve(s)}async _rollbackTransaction(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`RollbackTransaction: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`RollbackTransaction: ${e} database not opened`);let s={};return s={changes:{changes:await n.rollbackTransaction()}},Promise.resolve(s)}async _isTransactionActive(e){const t=Object.keys(this._dbDict),r="RW_"+e;if(!t.includes(r))return Promise.reject(`IsTransactionActive: No available connection for ${e}`);const n=this._dbDict[r];if(!n.isDBOpen())return Promise.reject(`IsTransactionActive: ${e} database not opened`);let s={};return s={result:n.isTransActive()},Promise.resolve(s)}async _execute(e,t,r,n){const s=Object.keys(this._dbDict),i="RW_"+e;if(!s.includes(i))return Promise.reject(`Execute: No available connection for ${e}`);const c=this._dbDict[i];if(!c.isDBOpen())return Promise.reject(`Execute: ${e} database not opened`);if(n)return Promise.reject("Execute: not allowed in read-only mode");let u={};const l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT"&&this.innerTypeOrm)return u={changes:{changes:0}},Promise.resolve(u);try{return u={changes:{changes:await c.executeSQL(t,r)}},Promise.resolve(u)}catch(g){const h=g.message?g.message:g;return Promise.reject(`Execute: ${h}`)}}async _executeSet(e,t,r,n,s){const i=Object.keys(this._dbDict),c="RW_"+e;if(!i.includes(c))return Promise.reject(`ExecuteSet: No available connection for ${e}`);const u=this._dbDict[c];if(!u.isDBOpen())return Promise.reject(`ExecuteSet: ${e} database not opened`);if(n)return Promise.reject("ExecuteSet: not allowed in read-only mode");for(const l of t)if(!("statement"in l)||!("values"in l))return Promise.reject("ExecuteSet: Must provide a set as Array of {statement,values}");try{const l=await u.execSet(t,r,s),g={changes:{changes:l.changes,lastId:l.lastId,values:l.values}};return Promise.resolve(g)}catch(l){const g=l.message?l.message:l;return Promise.reject(`ExecuteSet: ${g}`)}}async _run(e,t,r,n,s,i){const c=Object.keys(this._dbDict),u="RW_"+e;if(!c.includes(u))return Promise.reject(`Run: No available connection for ${e}`);const l=this._dbDict[u];if(!l.isDBOpen())return Promise.reject(`Run: ${e} database not opened`);if(s)return Promise.reject("Run: not allowed in read-only mode");let g={};const h=t.substring(0,6);if(this.innerAutoSave&&h==="COMMIT")return g={changes:{changes:0}},Promise.resolve(g);try{const y=await l.runSQL(t,r,n,i);return g={changes:{changes:y.changes,lastId:y.lastId,values:y.values}},Promise.resolve(g)}catch(y){const p=y.message?y.message:y;return Promise.reject(`Run: ${p}`)}}async _query(e,t,r,n){const s=Object.keys(this._dbDict),i=n?"RO_"+e:"RW_"+e;if(!s.includes(i))return Promise.reject(`Query: No available connection for ${e}`);const c=this._dbDict[i];if(!c.isDBOpen())return Promise.reject(`Query: ${e} database not opened`);let u=[];const l=t.substring(0,6);if(this.innerAutoSave&&l==="COMMIT")return Promise.resolve({values:u});try{return u=await c.selectSQL(t,r),Promise.resolve({values:u})}catch(g){const h=g.message?g.message:g;return Promise.reject(`Query failed: ${h}`)}}async _getTableList(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetTableList: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetTableList: ${e} database not opened`);let i=[];try{return i=await s.getTableNames(),Promise.resolve({values:i})}catch(c){const u=c.message?c.message:c;return Promise.reject(`GetTableList failed: ${u}`)}}async _isDBExists(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBExists: No available connection for ${e}`);const s=this._dbDict[n];try{const c={result:await s.isDBExists(e+"SQLite.db")};return Promise.resolve(c)}catch(i){const c=i.message?i.message:i;return Promise.reject(`IsDBExists: ${c}`)}}async _isDBOpen(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`IsDBOpen: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen()){const i={result:!1};return Promise.resolve(i)}try{const c={result:await s.isDBOpen(e+"SQLite.db")};return Promise.resolve(c)}catch(i){const c=i.message?i.message:i;return Promise.reject(`IsDBOpen: ${c}`)}}async _deleteDatabase(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteDatabase: No available connection for ${e}`);const s=this._dbDict[n];if(t)return Promise.reject("DeleteDatabase: not allowed in read-only mode");try{return await s.deleteDB(e+"SQLite.db"),Promise.resolve()}catch(i){const c=i.message?i.message:i;return Promise.reject(`DeleteDatabase: ${c}`)}}async _isTableExists(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`IsTableExists: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`IsTableExists: ${e} database not opened`);try{const u={result:await i.isTable(t)};return Promise.resolve(u)}catch(c){const u=c.message?c.message:c;return Promise.reject(`IsTableExists: ${u}`)}}async _createSyncTable(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`CreateSyncTable: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`CreateSyncTable: ${e} database not opened`);if(t)return Promise.reject("CreateSyncTable: not allowed in read-only mode");try{const i=await s.createSyncTable();return Promise.resolve({changes:{changes:i}})}catch(i){const c=i.message?i.message:i;return Promise.reject(`CreateSyncTable: ${c}`)}}async _getSyncDate(e,t){const r=Object.keys(this._dbDict),n=t?"RO_"+e:"RW_"+e;if(!r.includes(n))return Promise.reject(`GetSyncDate: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`GetSyncDate: ${e} database not opened`);try{const i=await s.getSyncDate();return Promise.resolve({syncDate:i})}catch(i){const c=i.message?i.message:i;return Promise.reject(`GetSyncDate: ${c}`)}}async _setSyncDate(e,t,r){const n=Object.keys(this._dbDict),s="RW_"+e;if(!n.includes(s))return Promise.reject(`SetSyncDate: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`SetSyncDate: ${e} database not opened`);if(r)return Promise.reject("SetSyncDate: not allowed in read-only mode");try{const c=await i.setSyncDate(t);return c.result?Promise.resolve():Promise.reject(`SetSyncDate: ${c.message}`)}catch(c){const u=c.message?c.message:c;return Promise.reject(`SetSyncDate: ${u}`)}}async _isJsonValid(e){const t=JSON.parse(e);return await Ge.isJsonSQLite(t)?Promise.resolve({result:!0}):Promise.reject("IsJsonValid: Stringify Json Object not Valid")}async _importFromJson(e){var t,r;const n=JSON.parse(e);if(!await Ge.isJsonSQLite(n))return Promise.reject("ImportFromJson: Stringify Json Object not Valid");const i=n,c=`${i.database}SQLite.db`,u=(t=i.version)!==null&&t!==void 0?t:1,l=i.mode,g=(r=i.overwrite)!==null&&r!==void 0?r:!1,h=new hs(c,u,{},this.store,this.innerAutoSave,this.innerWasmPath);try{g&&l==="full"&&Fe.isDBInStore(c,this.store)&&await Fe.removeDBFromStore(c,this.store),await h.open();const y=await h.getTableNames();if(l==="full"&&y.length>0){const _=await h.getVersion();if(u<_)return Promise.reject(`ImportFromJson: Cannot import a version lower than ${_}`);if(_===u)return Promise.resolve({changes:{changes:0}})}const p=await h.importJson(i,this.importProgress);return await h.close(),Promise.resolve({changes:{changes:p}})}catch(y){const p=y.message?y.message:y;return Promise.reject(`ImportFromJson: ${p}`)}}async _exportToJson(e,t,r){const n=Object.keys(this._dbDict),s=r?"RO_"+e:"RW_"+e;if(!n.includes(s))return Promise.reject(`ExportToJson: No available connection for ${e}`);const i=this._dbDict[s];if(!i.isDBOpen())return Promise.reject(`ExportToJson: ${e} database not opened`);try{const c=await i.exportJson(t,this.exportProgress);return Object.keys(c).includes("message")?Promise.reject(`ExportToJson: ${c.message}`):Promise.resolve({export:c})}catch(c){const u=c.message?c.message:c;return Promise.reject(`ExportToJson: ${u}`)}}async _deleteExportedRows(e,t){const r=Object.keys(this._dbDict),n="RW_"+e;if(!r.includes(n))return Promise.reject(`DeleteExportedRows: No available connection for ${e}`);const s=this._dbDict[n];if(!s.isDBOpen())return Promise.reject(`DeleteExportedRows: ${e} database not opened`);if(t)return Promise.reject("DeleteExportedRows: not allowed in read-only mode");try{await s.deleteExportedRows()}catch(i){const c=i.message?i.message:i;return Promise.reject(`DeleteExportedRows: ${c}`)}}async _copyFromAssets(e){const t=await this.loadJSON("/assets/databases/databases.json");if(t!=null)if(this.databaseList=JSON.parse(t),Object.keys(this.databaseList).includes("databaseList"))try{for(const n of this.databaseList.databaseList)n.substring(n.length-3)===".db"&&await this.copyDatabase(`/assets/databases/${n}`,e),n.substring(n.length-4)===".zip"&&await this.unzipDatabase(`/assets/databases/${n}`,e);return Promise.resolve()}catch(n){const s=n.message?n.message:n;return Promise.reject(`CopyFromAssets: ${s}`)}else return Promise.reject("CopyFromAssets: no key databaseList in databases.json");else return Promise.reject("CopyFromAssets: no databases.json file in /assets/databases folder")}async _getFromHTTPRequest(e,t){try{const r=this.getFileExtensionInUrl(e);let n;switch(r){case"db":await this.copyDatabase(e,t),n="db";break;case"zip":await this.unzipDatabase(e,t),n="zip";break;default:n="Unknown file type in url."}return this.HTTPRequestEnded.emit({message:n}),Promise.resolve()}catch(r){const n=r.message?r.message:r;return Promise.reject(`GetFromHTTPRequest: ${n}`)}}async _isDatabase(e){try{const r={result:await Fe.isDBInStore(e+"SQLite.db",this.store)};return Promise.resolve(r)}catch(t){const r=t.message?t.message:t;return Promise.reject(`IsDatabase: ${r}`)}}async _getDatabaseList(){try{const t={values:await Fe.getDBListFromStore(this.store)};return Promise.resolve(t)}catch(e){const t=e.message?e.message:e;return Promise.reject(`GetDatabaseList: ${t}`)}}async _checkConnectionsConsistency(e,t){const r={};r.result=!1;const n=[];e.forEach((s,i)=>{n.push(`${t[i]}_${s}`)});try{let s=new Set(Object.keys(this._dbDict));const i=new Set(n);if(i.size===0)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size<i.size)return await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r);if(s.size>i.size){const c={};for(const u of s)if(!Array.from(i.keys()).includes(u)){let l=!1;u.substring(0,3)==="RO_"&&(l=!0),c.database=u.substring(3),c.readonly=l,await this._closeConnection(c.database,c.readonly)}}return s=new Set(Object.keys(this._dbDict)),s.size===i.size?(await this.symmetricDifference(s,i)).size===0?(r.result=!0,Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r)):(await this._resetDbDict(Object.keys(this._dbDict)),Promise.resolve(r))}catch(s){const i=s.message?s.message:s;return Promise.reject(`CheckConnectionsConsistency: ${i}`)}}async _resetDbDict(e){try{for(const t of e){const r={};let n=!1;t.substring(0,3)==="RO_"&&(n=!0),r.database=t.substring(3),r.readonly=n,await this._closeConnection(r.database,r.readonly)}}catch(t){const r=t.message?t.message:t;return Promise.reject(`ResetDbDict: ${r}`)}}async symmetricDifference(e,t){let r=new Set;e.forEach(s=>{r.add(s.substring(3))});let n=new Set;t.forEach(s=>{n.add(s.substring(3))});for(const s of n)r.has(s)?r.delete(s):r.add(s);return r}async unzipDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("unzipDatabase: failed"))},s.onload=()=>{ai.exports.loadAsync(s.response).then(async i=>{const c=Object.keys(i.files);try{for(const u of c)await this.retrieveDBFromZip(i.files,u,t);r()}catch(u){const l=u.message?u.message:u;n(new Error(`unzipDatabase Error: ${l}`))}})},s.send()})}async retrieveDBFromZip(e,t,r){return new Promise((n,s)=>{e[t].async("nodebuffer").then(async i=>{try{const c=new Uint8Array(i),u=this.setPathSuffix(t);await Fe.isDBInStore(u,this.store)?r?(await Fe.removeDBFromStore(u,this.store),await Fe.saveDBToStore(u,c,this.store)):s(new Error(`retrieveDBFromZip: cannot overwrite ${u}`)):await Fe.saveDBToStore(u,c,this.store),n()}catch(c){const u=c.message?c.message:c;s(new Error(`retrieveDBFromZip:: ${u}`))}})})}async copyDatabase(e,t){return new Promise((r,n)=>{var s=new XMLHttpRequest,i;s.open("GET",e,!0),s.responseType="arraybuffer",s.onerror=()=>{n(new Error("CopyDatabase: failed"))},s.onload=()=>{i=new Uint8Array(s.response)},s.onloadend=async()=>{const c=this.setPathSuffix(e);await Fe.isDBInStore(c,this.store)?t?(await Fe.removeDBFromStore(c,this.store),await Fe.saveDBToStore(c,i,this.store)):n(new Error(`CopyDatabase Error: cannot overwrite ${c}`)):await Fe.saveDBToStore(c,i,this.store),r()},s.send()})}async loadJSON(e){return new Promise((t,r)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onerror=()=>{r(new Error("LoadJSON: failed"))},n.onreadystatechange=function(){n.status==404&&t(null),n.readyState==4&&n.status==200&&t(n.responseText)},n.send(null)})}async openStore(e,t){let r=!1;const n=this.setConfig(e,t);return this.store=ds.createInstance(n),this.store!=null&&(this.storeName=e,r=!0),r}setConfig(e,t){return{name:e,storeName:t,driver:[ds.INDEXEDDB],version:1}}removePathSuffix(e){return e.includes("SQLite.db")?e.split("SQLite.db")[0]:e.substring(e.length-3)===".db"?e.slice(0,e.lastIndexOf(".")):e}setPathSuffix(e){let t=e.slice(e.lastIndexOf("/")+1);return e.substring(e.length-3)===".db"&&(e.includes("SQLite.db")||(t=e.slice(e.lastIndexOf("/")+1,-3)+"SQLite.db")),t}async blob2uint(e){return new Response(e).arrayBuffer().then(t=>new Uint8Array(t))}async uint2blob(e){const t=new Blob([e.buffer]);return Promise.resolve(t)}getFileExtensionInUrl(e){const t=e.match(/\.([a-zA-Z0-9]+)(?:[\?#]|$)/);return t?t[1].toLowerCase():null}render(){}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}}static get style(){return dc}},[1,"jeep-sqlite",{autoSave:[516,"autosave"],typeOrm:[516,"typeorm"],wasmPath:[513,"wasmpath"],pickText:[513,"picktext"],saveText:[513,"savetext"],buttonOptions:[513,"buttonoptions"],innerAutoSave:[32],innerTypeOrm:[32],innerWasmPath:[32],innerPickText:[32],innerSaveText:[32],innerButtonOptions:[32],echo:[64],createConnection:[64],isConnection:[64],closeConnection:[64],open:[64],close:[64],getVersion:[64],beginTransaction:[64],commitTransaction:[64],rollbackTransaction:[64],isTransactionActive:[64],execute:[64],executeSet:[64],run:[64],query:[64],getTableList:[64],isDBExists:[64],isDBOpen:[64],deleteDatabase:[64],isStoreOpen:[64],copyFromAssets:[64],isTableExists:[64],createSyncTable:[64],getSyncDate:[64],setSyncDate:[64],isJsonValid:[64],importFromJson:[64],exportToJson:[64],deleteExportedRows:[64],addUpgradeStatement:[64],isDatabase:[64],getDatabaseList:[64],checkConnectionsConsistency:[64],saveToStore:[64],saveToLocalDisk:[64],getFromLocalDiskToStore:[64],getFromHTTPRequest:[64]},void 0,{autoSave:["parseAutoSave"],typeOrm:["parseTypeOrm"],wasmPath:["parseWasmPath"],pickText:["parsePickText"],saveText:["parseSaveText"],buttonOptions:["parseButtonOptions"]}]);function pc(){if(typeof customElements>"u")return;["jeep-sqlite"].forEach(e=>{switch(e){case"jeep-sqlite":customElements.get(e)||customElements.define(e,mc);break}})}const yc=pc;export{yc as defineCustomElement};
